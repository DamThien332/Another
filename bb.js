(()=>{var R5=Object.defineProperty,M5=Object.defineProperties,C5=Object.getOwnPropertyDescriptors,Gl=Object.getOwnPropertySymbols,O5=Object.prototype.hasOwnProperty,I5=Object.prototype.propertyIsEnumerable,Bl=(a,e,t)=>e in a?R5(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Fl=(a,e)=>{for(var t in e||(e={}))O5.call(e,t)&&Bl(a,t,e[t]);if(Gl)for(var t of Gl(e))I5.call(e,t)&&Bl(a,t,e[t]);return a},G5=(a,e)=>M5(a,C5(e)),B=(a=>(a.Application="application",a.WebGLPipes="webgl-pipes",a.WebGLPipesAdaptor="webgl-pipes-adaptor",a.WebGLSystem="webgl-system",a.WebGPUPipes="webgpu-pipes",a.WebGPUPipesAdaptor="webgpu-pipes-adaptor",a.WebGPUSystem="webgpu-system",a.CanvasSystem="canvas-system",a.CanvasPipesAdaptor="canvas-pipes-adaptor",a.CanvasPipes="canvas-pipes",a.Asset="asset",a.LoadParser="load-parser",a.ResolveParser="resolve-parser",a.CacheParser="cache-parser",a.DetectionParser="detection-parser",a.MaskEffect="mask-effect",a.BlendMode="blend-mode",a.TextureSource="texture-source",a.Environment="environment",a.ShapeBuilder="shape-builder",a.Batcher="batcher",a))(B||{}),wd=a=>{if(typeof a=="function"||typeof a=="object"&&a.extension){let e=typeof a.extension!="object"?{type:a.extension}:a.extension;a=G5(Fl({},e),{ref:a})}if(typeof a=="object")a=Fl({},a);else throw new Error("Invalid extension type");return typeof a.type=="string"&&(a.type=[a.type]),a},ls=(a,e)=>{var t;return(t=wd(a).priority)!=null?t:e},pe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...a){return a.map(wd).forEach(e=>{e.type.forEach(t=>{var i,r;return(r=(i=this._removeHandlers)[t])==null?void 0:r.call(i,e)})}),this},add(...a){return a.map(wd).forEach(e=>{e.type.forEach(t=>{var i,r;let s=this._addHandlers,o=this._queue;s[t]?(r=s[t])==null||r.call(s,e):(o[t]=o[t]||[],(i=o[t])==null||i.push(e))})}),this},handle(a,e,t){var i;let r=this._addHandlers,s=this._removeHandlers;r[a]=e,s[a]=t;let o=this._queue;return o[a]&&((i=o[a])==null||i.forEach(d=>e(d)),delete o[a]),this},handleByMap(a,e){return this.handle(a,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(a,e,t=-1){return this.handle(a,i=>{e.findIndex(r=>r.name===i.name)>=0||(e.push({name:i.name,value:i.ref}),e.sort((r,s)=>ls(s.value,t)-ls(r.value,t)))},i=>{let r=e.findIndex(s=>s.name===i.name);r!==-1&&e.splice(r,1)})},handleByList(a,e,t=-1){return this.handle(a,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((r,s)=>ls(s,t)-ls(r,t)))},i=>{let r=e.indexOf(i.ref);r!==-1&&e.splice(r,1)})}};function bf(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var pf={exports:{}},iS=pf.exports;(function(a){"use strict";var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(h,f,u){this.fn=h,this.context=f,this.once=u||!1}function s(h,f,u,p,y){if(typeof u!="function")throw new TypeError("The listener must be a function");var _=new r(u,p||h,y),v=t?t+f:f;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],_]:h._events[v].push(_):(h._events[v]=_,h._eventsCount++),h}function o(h,f){--h._eventsCount===0?h._events=new i:delete h._events[f]}function d(){this._events=new i,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],f,u;if(this._eventsCount===0)return h;for(u in f=this._events)e.call(f,u)&&h.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},d.prototype.listeners=function(h){var f=t?t+h:h,u=this._events[f];if(!u)return[];if(u.fn)return[u.fn];for(var p=0,y=u.length,_=new Array(y);p<y;p++)_[p]=u[p].fn;return _},d.prototype.listenerCount=function(h){var f=t?t+h:h,u=this._events[f];return u?u.fn?1:u.length:0},d.prototype.emit=function(h,f,u,p,y,_){var v=t?t+h:h;if(!this._events[v])return!1;var T=this._events[v],A=arguments.length,P,I;if(T.fn){switch(T.once&&this.removeListener(h,T.fn,void 0,!0),A){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,f),!0;case 3:return T.fn.call(T.context,f,u),!0;case 4:return T.fn.call(T.context,f,u,p),!0;case 5:return T.fn.call(T.context,f,u,p,y),!0;case 6:return T.fn.call(T.context,f,u,p,y,_),!0}for(I=1,P=new Array(A-1);I<A;I++)P[I-1]=arguments[I];T.fn.apply(T.context,P)}else{var F=T.length,D;for(I=0;I<F;I++)switch(T[I].once&&this.removeListener(h,T[I].fn,void 0,!0),A){case 1:T[I].fn.call(T[I].context);break;case 2:T[I].fn.call(T[I].context,f);break;case 3:T[I].fn.call(T[I].context,f,u);break;case 4:T[I].fn.call(T[I].context,f,u,p);break;default:if(!P)for(D=1,P=new Array(A-1);D<A;D++)P[D-1]=arguments[D];T[I].fn.apply(T[I].context,P)}}return!0},d.prototype.on=function(h,f,u){return s(this,h,f,u,!1)},d.prototype.once=function(h,f,u){return s(this,h,f,u,!0)},d.prototype.removeListener=function(h,f,u,p){var y=t?t+h:h;if(!this._events[y])return this;if(!f)return o(this,y),this;var _=this._events[y];if(_.fn)_.fn===f&&(!p||_.once)&&(!u||_.context===u)&&o(this,y);else{for(var v=0,T=[],A=_.length;v<A;v++)(_[v].fn!==f||p&&!_[v].once||u&&_[v].context!==u)&&T.push(_[v]);T.length?this._events[y]=T.length===1?T[0]:T:o(this,y)}return this},d.prototype.removeAllListeners=function(h){var f;return h?(f=t?t+h:h,this._events[f]&&o(this,f)):(this._events=new i,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,a.exports=d})(pf);var B5=pf.exports,xt=bf(B5),F5={grad:.9,turn:360,rad:360/(2*Math.PI)},sa=function(a){return typeof a=="string"?a.length>0:typeof a=="number"},Ke=function(a,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*a)/t+0},At=function(a,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),a>t?t:a>e?a:e},n2=function(a){return(a=isFinite(a)?a%360:0)>0?a:a+360},Dl=function(a){return{r:At(a.r,0,255),g:At(a.g,0,255),b:At(a.b,0,255),a:At(a.a)}},wc=function(a){return{r:Ke(a.r),g:Ke(a.g),b:Ke(a.b),a:Ke(a.a,3)}},D5=/^#([0-9a-f]{3,8})$/i,us=function(a){var e=a.toString(16);return e.length<2?"0"+e:e},o2=function(a){var e=a.r,t=a.g,i=a.b,r=a.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),d=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(d<0?d+6:d),s:s?o/s*100:0,v:s/255*100,a:r}},c2=function(a){var e=a.h,t=a.s,i=a.v,r=a.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),d=i*(1-(e-s)*t),h=i*(1-(1-e+s)*t),f=s%6;return{r:255*[i,d,o,o,h,i][f],g:255*[h,i,i,d,o,o][f],b:255*[o,o,h,i,i,d][f],a:r}},kl=function(a){return{h:n2(a.h),s:At(a.s,0,100),l:At(a.l,0,100),a:At(a.a)}},Ul=function(a){return{h:Ke(a.h),s:Ke(a.s),l:Ke(a.l),a:Ke(a.a,3)}},Ll=function(a){return c2((t=(e=a).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},yr=function(a){return{h:(e=o2(a)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},k5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,U5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,L5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,N5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ad={string:[[function(a){var e=D5.exec(a);return e?(a=e[1]).length<=4?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16),a:a.length===4?Ke(parseInt(a[3]+a[3],16)/255,2):1}:a.length===6||a.length===8?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16),a:a.length===8?Ke(parseInt(a.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(a){var e=L5.exec(a)||N5.exec(a);return e?e[2]!==e[4]||e[4]!==e[6]?null:Dl({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(a){var e=k5.exec(a)||U5.exec(a);if(!e)return null;var t,i,r=kl({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(F5[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Ll(r)},"hsl"]],object:[[function(a){var e=a.r,t=a.g,i=a.b,r=a.a,s=r===void 0?1:r;return sa(e)&&sa(t)&&sa(i)?Dl({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(a){var e=a.h,t=a.s,i=a.l,r=a.a,s=r===void 0?1:r;if(!sa(e)||!sa(t)||!sa(i))return null;var o=kl({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return Ll(o)},"hsl"],[function(a){var e=a.h,t=a.s,i=a.v,r=a.a,s=r===void 0?1:r;if(!sa(e)||!sa(t)||!sa(i))return null;var o=function(d){return{h:n2(d.h),s:At(d.s,0,100),v:At(d.v,0,100),a:At(d.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return c2(o)},"hsv"]]},Nl=function(a,e){for(var t=0;t<e.length;t++){var i=e[t][0](a);if(i)return[i,e[t][1]]}return[null,void 0]},j5=function(a){return typeof a=="string"?Nl(a.trim(),Ad.string):typeof a=="object"&&a!==null?Nl(a,Ad.object):[null,void 0]};var Ac=function(a,e){var t=yr(a);return{h:t.h,s:At(t.s+100*e,0,100),l:t.l,a:t.a}},Ec=function(a){return(299*a.r+587*a.g+114*a.b)/1e3/255},jl=function(a,e){var t=yr(a);return{h:t.h,s:t.s,l:At(t.l+100*e,0,100),a:t.a}},Ed=function(){function a(e){this.parsed=j5(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return a.prototype.isValid=function(){return this.parsed!==null},a.prototype.brightness=function(){return Ke(Ec(this.rgba),2)},a.prototype.isDark=function(){return Ec(this.rgba)<.5},a.prototype.isLight=function(){return Ec(this.rgba)>=.5},a.prototype.toHex=function(){return e=wc(this.rgba),t=e.r,i=e.g,r=e.b,o=(s=e.a)<1?us(Ke(255*s)):"","#"+us(t)+us(i)+us(r)+o;var e,t,i,r,s,o},a.prototype.toRgb=function(){return wc(this.rgba)},a.prototype.toRgbString=function(){return e=wc(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},a.prototype.toHsl=function(){return Ul(yr(this.rgba))},a.prototype.toHslString=function(){return e=Ul(yr(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},a.prototype.toHsv=function(){return e=o2(this.rgba),{h:Ke(e.h),s:Ke(e.s),v:Ke(e.v),a:Ke(e.a,3)};var e},a.prototype.invert=function(){return $t({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},a.prototype.saturate=function(e){return e===void 0&&(e=.1),$t(Ac(this.rgba,e))},a.prototype.desaturate=function(e){return e===void 0&&(e=.1),$t(Ac(this.rgba,-e))},a.prototype.grayscale=function(){return $t(Ac(this.rgba,-1))},a.prototype.lighten=function(e){return e===void 0&&(e=.1),$t(jl(this.rgba,e))},a.prototype.darken=function(e){return e===void 0&&(e=.1),$t(jl(this.rgba,-e))},a.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},a.prototype.alpha=function(e){return typeof e=="number"?$t({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ke(this.rgba.a,3);var t},a.prototype.hue=function(e){var t=yr(this.rgba);return typeof e=="number"?$t({h:e,s:t.s,l:t.l,a:t.a}):Ke(t.h)},a.prototype.isEqual=function(e){return this.toHex()===$t(e).toHex()},a}(),$t=function(a){return a instanceof Ed?a:new Ed(a)},Xl=[],X5=function(a){a.forEach(function(e){Xl.indexOf(e)<0&&(e(Ed,Ad),Xl.push(e))})};function H5(a,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var s={};a.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var d,h,f=i[this.toHex()];if(f)return f;if(o!=null&&o.closest){var u=this.toRgb(),p=1/0,y="black";if(!s.length)for(var _ in t)s[_]=new a(t[_]).toRgb();for(var v in t){var T=(d=u,h=s[v],Math.pow(d.r-h.r,2)+Math.pow(d.g-h.g,2)+Math.pow(d.b-h.b,2));T<p&&(p=T,y=v)}return y}},e.string.push([function(o){var d=o.toLowerCase(),h=d==="transparent"?"#0000":t[d];return h?new a(h).toRgb():null},"name"])}var z5=Object.defineProperty,Hl=Object.getOwnPropertySymbols,V5=Object.prototype.hasOwnProperty,W5=Object.prototype.propertyIsEnumerable,zl=(a,e,t)=>e in a?z5(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Y5=(a,e)=>{for(var t in e||(e={}))V5.call(e,t)&&zl(a,t,e[t]);if(Hl)for(var t of Hl(e))W5.call(e,t)&&zl(a,t,e[t]);return a};X5([H5]);var _i=class gr{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof gr)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?Y5({},e):e}_isSourceEqual(e,t){let i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((r,s)=>r===t[s]);if(e!==null&&t!==null){let r=Object.keys(e),s=Object.keys(t);return r.length!==s.length?!1:r.every(o=>e[o]===t[o])}return e===t}toRgba(){let[e,t,i,r]=this._components;return{r:e,g:t,b:i,a:r}}toRgb(){let[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){let[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){let[t,i,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);let[t,i,r,s]=this._components;return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);let[t,i,r]=this._components;return e[0]=t,e[1]=i,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){let[e,t,i]=this.toUint8RgbArray();return(i<<16)+(t<<8)+e}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[t,i,r,s]=gr._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=r,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return t&&(i=i*e+.5|0,r=r*e+.5|0,s=s*e+.5|0),(e*255<<24)+(i<<16)+(r<<8)+s}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,i,r,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let o=e;t=(o>>16&255)/255,i=(o>>8&255)/255,r=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,r,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,r,s=255]=e,t/=255,i/=255,r/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let d=gr.HEX_PATTERN.exec(e);d&&(e=`#${d[2]}`)}let o=$t(e);o.isValid()&&({r:t,g:i,b:r,a:s}=o.rgba,t/=255,i/=255,r/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=r,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);let[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((r,s)=>{e[s]=Math.min(Math.max(r,t),i)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof gr||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};_i.shared=new _i,_i._temp=new _i,_i.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var Ee=_i,$5={cullArea:null,cullable:!1,cullableChildren:!0},K5=Math.PI*2,q5=180/Math.PI,Z5=Math.PI/180,Ce=class a{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new a(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}static get shared(){return Pc.x=0,Pc.y=0,Pc}},Pc=new Ce,ie=class a{constructor(e=1,t=0,i=0,r=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,r,s,o){return this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));let i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new Ce;let i=e.x,r=e.y;return t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.ty,t}applyInverse(e,t){t=t||new Ce;let i=this.a,r=this.b,s=this.c,o=this.d,d=this.tx,h=this.ty,f=1/(i*o+s*-r),u=e.x,p=e.y;return t.x=o*f*u+-s*f*p+(h*s-d*o)*f,t.y=i*f*p+-r*f*u+(-h*i+d*r)*f,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){let t=Math.cos(e),i=Math.sin(e),r=this.a,s=this.c,o=this.tx;return this.a=r*t-this.b*i,this.b=r*i+this.b*t,this.c=s*t-this.d*i,this.d=s*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this}append(e){let t=this.a,i=this.b,r=this.c,s=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*i+e.b*s,this.c=e.c*t+e.d*r,this.d=e.c*i+e.d*s,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}appendFrom(e,t){let i=e.a,r=e.b,s=e.c,o=e.d,d=e.tx,h=e.ty,f=t.a,u=t.b,p=t.c,y=t.d;return this.a=i*f+r*p,this.b=i*u+r*y,this.c=s*f+o*p,this.d=s*u+o*y,this.tx=d*f+h*p+t.tx,this.ty=d*u+h*y+t.ty,this}setTransform(e,t,i,r,s,o,d,h,f){return this.a=Math.cos(d+f)*s,this.b=Math.sin(d+f)*s,this.c=-Math.sin(d-h)*o,this.d=Math.cos(d-h)*o,this.tx=e-(i*this.a+r*this.c),this.ty=t-(i*this.b+r*this.d),this}prepend(e){let t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){let i=this.a,r=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){let t=this.a,i=this.b,r=this.c,s=this.d,o=e.pivot,d=-Math.atan2(-r,s),h=Math.atan2(i,t),f=Math.abs(d+h);return f<1e-5||Math.abs(K5-f)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=d,e.skew.y=h),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){let e=this.a,t=this.b,i=this.c,r=this.d,s=this.tx,o=e*r-t*i;return this.a=r/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-r*s)/o,this.ty=-(e*this.ty-t*s)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new a;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}static get IDENTITY(){return J5.identity()}static get shared(){return Q5.identity()}},Q5=new ie,J5=new ie,Ve=class a{constructor(e,t,i){this._x=t||0,this._y=i||0,this._observer=e}clone(e){return new a(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}},Rc={default:-1};function Be(a="default"){return Rc[a]===void 0&&(Rc[a]=-1),++Rc[a]}var Rr=class{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var t;let i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,(t=i.init)==null||t.call(i,e),i}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}},Pd=class{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Rr(e)),this._poolsByClass.get(e)}stats(){let e={};return this._poolsByClass.forEach(t=>{let i=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[i]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}},ye=new Pd,e4={get isCachedAsTexture(){var a;return!!((a=this.renderGroup)!=null&&a.isCachedAsTexture)},cacheAsTexture(a){typeof a=="boolean"&&a===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(a===!0?{}:a))},updateCacheTexture(){var a;(a=this.renderGroup)==null||a.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(a){this.cacheAsTexture(a)}};function d2(a,e,t){let i=a.length,r;if(e>=i||t===0)return;t=e+t>i?i-e:t;let s=i-t;for(r=e;r<s;++r)a[r]=a[r+t];a.length=s}var t4={allowChildren:!0,removeChildren(a=0,e){let t=e??this.children.length,i=t-a,r=[];if(i>0&&i<=t){for(let o=t-1;o>=a;o--){let d=this.children[o];d&&(r.push(d),d.parent=null)}d2(this.children,a,t);let s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(r);for(let o=0;o<r.length;++o)this.emit("childRemoved",r[o],this,o),r[o].emit("removed",this);return r}else if(i===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(a){let e=this.getChildAt(a);return this.removeChild(e)},getChildAt(a){if(a<0||a>=this.children.length)throw new Error(`getChildAt: Index (${a}) does not exist.`);return this.children[a]},setChildIndex(a,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(a),this.addChildAt(a,e)},getChildIndex(a){let e=this.children.indexOf(a);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(a,e){let{children:t}=this;if(e<0||e>t.length)throw new Error(`${a}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(a.parent){let r=a.parent.children.indexOf(a);if(a.parent===this&&r===e)return a;r!==-1&&a.parent.children.splice(r,1)}e===t.length?t.push(a):t.splice(e,0,a),a.parent=this,a.didChange=!0,a._updateFlags=15;let i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(a),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",a,this,e),a.emit("added",this),a},swapChildren(a,e){if(a===e)return;let t=this.getChildIndex(a),i=this.getChildIndex(e);this.children[t]=e,this.children[i]=a;let r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var a;(a=this.parent)==null||a.removeChild(this)},reparentChild(...a){return a.length===1?this.reparentChildAt(a[0],this.children.length):(a.forEach(e=>this.reparentChildAt(e,this.children.length)),a[0])},reparentChildAt(a,e){if(a.parent===this)return this.setChildIndex(a,e),a;let t=a.worldTransform.clone();a.removeFromParent(),this.addChildAt(a,e);let i=this.worldTransform.clone();return i.invert(),t.prepend(i),a.setFromMatrix(t),a}},a4={collectRenderables(a,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(a,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,a):this.collectRenderablesWithEffects(a,e,t))},collectRenderablesSimple(a,e,t){let i=this.children,r=i.length;for(let s=0;s<r;s++)i[s].collectRenderables(a,e,t)},collectRenderablesWithEffects(a,e,t){let{renderPipes:i}=e;for(let r=0;r<this.effects.length;r++){let s=this.effects[r];i[s.pipe].push(s,this,a)}this.collectRenderablesSimple(a,e,t);for(let r=this.effects.length-1;r>=0;r--){let s=this.effects[r];i[s.pipe].pop(s,this,a)}}},Ai=class{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}},Rd=class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){let i=this._tests[t];if(i.test(e))return ye.get(i.maskClass,e)}return e}returnMaskEffect(e){ye.return(e)}},Md=new Rd;pe.handleByList(B.MaskEffect,Md._effectClasses);var i4=Object.defineProperty,Vl=Object.getOwnPropertySymbols,r4=Object.prototype.hasOwnProperty,s4=Object.prototype.propertyIsEnumerable,Wl=(a,e,t)=>e in a?i4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Yl=(a,e)=>{for(var t in e||(e={}))r4.call(e,t)&&Wl(a,t,e[t]);if(Vl)for(var t of Vl(e))s4.call(e,t)&&Wl(a,t,e[t]);return a},n4={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)},addEffect(a){this.effects.indexOf(a)===-1&&(this.effects.push(a),this.effects.sort((e,t)=>e.priority-t.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(a){let e=this.effects.indexOf(a);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(a){let e=this._maskEffect;e?.mask!==a&&(e&&(this.removeEffect(e),Md.returnMaskEffect(e),this._maskEffect=null),a!=null&&(this._maskEffect=Md.getMaskEffect(a),this.addEffect(this._maskEffect)))},setMask(a){this._maskOptions=Yl(Yl({},this._maskOptions),a),a.mask&&(this.mask=a.mask),this._markStructureAsChanged()},get mask(){var a;return(a=this._maskEffect)==null?void 0:a.mask},set filters(a){var e;!Array.isArray(a)&&a&&(a=[a]);let t=this._filterEffect||(this._filterEffect=new Ai);a=a;let i=a?.length>0,r=((e=t.filters)==null?void 0:e.length)>0,s=i!==r;a=Array.isArray(a)?a.slice(0):a,t.filters=Object.freeze(a),s&&(i?this.addEffect(t):(this.removeEffect(t),t.filters=a??null))},get filters(){var a;return(a=this._filterEffect)==null?void 0:a.filters},set filterArea(a){this._filterEffect||(this._filterEffect=new Ai),this._filterEffect.filterArea=a},get filterArea(){var a;return(a=this._filterEffect)==null?void 0:a.filterArea}},o4={label:null,get name(){return this.label},set name(a){this.label=a},getChildByName(a,e=!1){return this.getChildByLabel(a,e)},getChildByLabel(a,e=!1){let t=this.children;for(let i=0;i<t.length;i++){let r=t[i];if(r.label===a||a instanceof RegExp&&a.test(r.label))return r}if(e)for(let i=0;i<t.length;i++){let r=t[i].getChildByLabel(a,!0);if(r)return r}return null},getChildrenByLabel(a,e=!1,t=[]){let i=this.children;for(let r=0;r<i.length;r++){let s=i[r];(s.label===a||a instanceof RegExp&&a.test(s.label))&&t.push(s)}if(e)for(let r=0;r<i.length;r++)i[r].getChildrenByLabel(a,!0,t);return t}},bs=[new Ce,new Ce,new Ce,new Ce],Pe=class a{constructor(e=0,t=0,i=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new a(0,0,0,0)}clone(){return new a(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,i,r=.5){let{width:s,height:o}=this;if(s<=0||o<=0)return!1;let d=this.x,h=this.y,f=i*(1-r),u=i-f,p=d-f,y=d+s+f,_=h-f,v=h+o+f,T=d+u,A=d+s-u,P=h+u,I=h+o-u;return e>=p&&e<=y&&t>=_&&t<=v&&!(e>T&&e<A&&t>P&&t<I)}intersects(e,t){if(!t){let re=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=re)return!1;let ce=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>ce}let i=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=i||o<=s)return!1;let d=bs[0].set(e.left,e.top),h=bs[1].set(e.left,e.bottom),f=bs[2].set(e.right,e.top),u=bs[3].set(e.right,e.bottom);if(f.x<=d.x||h.y<=d.y)return!1;let p=Math.sign(t.a*t.d-t.b*t.c);if(p===0||(t.apply(d,d),t.apply(h,h),t.apply(f,f),t.apply(u,u),Math.max(d.x,h.x,f.x,u.x)<=i||Math.min(d.x,h.x,f.x,u.x)>=r||Math.max(d.y,h.y,f.y,u.y)<=s||Math.min(d.y,h.y,f.y,u.y)>=o))return!1;let y=p*(h.y-d.y),_=p*(d.x-h.x),v=y*i+_*s,T=y*r+_*s,A=y*i+_*o,P=y*r+_*o;if(Math.max(v,T,A,P)<=y*d.x+_*d.y||Math.min(v,T,A,P)>=y*u.x+_*u.y)return!1;let I=p*(d.y-f.y),F=p*(f.x-d.x),D=I*i+F*s,H=I*r+F*s,N=I*i+F*o,j=I*r+F*o;return!(Math.max(D,H,N,j)<=I*d.x+F*d.y||Math.min(D,H,N,j)>=I*u.x+F*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){let t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,t=.001){let i=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=r-this.y,this}enlarge(e){let t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=r,this.height=s-r,this}getBounds(e){return e||(e=new a),e.copyFrom(this),e}},$l=new ie,qe=class a{constructor(e=1/0,t=1/0,i=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=$l,this.minX=e,this.minY=t,this.maxX=i,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Pe);let e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=$l,this}set(e,t,i,r){this.minX=e,this.minY=t,this.maxX=i,this.maxY=r}addFrame(e,t,i,r,s){s||(s=this.matrix);let o=s.a,d=s.b,h=s.c,f=s.d,u=s.tx,p=s.ty,y=this.minX,_=this.minY,v=this.maxX,T=this.maxY,A=o*e+h*t+u,P=d*e+f*t+p;A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),A=o*i+h*t+u,P=d*i+f*t+p,A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),A=o*e+h*r+u,P=d*e+f*r+p,A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),A=o*i+h*r+u,P=d*i+f*r+p,A<y&&(y=A),P<_&&(_=P),A>v&&(v=A),P>T&&(T=P),this.minX=y,this.minY=_,this.maxX=v,this.maxY=T}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){let t=this.minX,i=this.minY,r=this.maxX,s=this.maxY,{a:o,b:d,c:h,d:f,tx:u,ty:p}=e,y=o*t+h*i+u,_=d*t+f*i+p;this.minX=y,this.minY=_,this.maxX=y,this.maxY=_,y=o*r+h*i+u,_=d*r+f*i+p,this.minX=y<this.minX?y:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=_>this.maxY?_:this.maxY,y=o*t+h*s+u,_=d*t+f*s+p,this.minX=y<this.minX?y:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=_>this.maxY?_:this.maxY,y=o*r+h*s+u,_=d*r+f*s+p,this.minX=y<this.minX?y:this.minX,this.minY=_<this.minY?_:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=_>this.maxY?_:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,i,r){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<i&&(this.minY=i),this.maxY>r&&(this.maxY=r),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new a(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){let t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){let t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,i,r){let s=this.minX,o=this.minY,d=this.maxX,h=this.maxY;r||(r=this.matrix);let f=r.a,u=r.b,p=r.c,y=r.d,_=r.tx,v=r.ty;for(let T=t;T<i;T+=2){let A=e[T],P=e[T+1],I=f*A+p*P+_,F=u*A+y*P+v;s=I<s?I:s,o=F<o?F:o,d=I>d?I:d,h=F>h?F:h}this.minX=s,this.minY=o,this.maxX=d,this.maxY=h}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}},it=new Rr(ie),ca=new Rr(qe),c4=new ie,d4={getFastGlobalBounds(a,e){e||(e=new qe),e.clear(),this._getGlobalBoundsRecursive(!!a,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);let t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(a,e,t){let i=e;if(a&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;let r=!!this.effects.length;if((this.renderGroup||r)&&(i=ca.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){let o=this.bounds;i.addFrame(o.minX,o.minY,o.maxX,o.maxY,this.groupTransform)}let s=this.children;for(let o=0;o<s.length;o++)s[o]._getGlobalBoundsRecursive(a,i,t)}if(r){let s=!1,o=this.renderGroup||this.parentRenderGroup;for(let d=0;d<this.effects.length;d++)this.effects[d].addBounds&&(s||(s=!0,i.applyMatrix(o.worldTransform)),this.effects[d].addBounds(i,!0));s&&(i.applyMatrix(o.worldTransform.copyTo(c4).invert()),e.addBounds(i,this.relativeGroupTransform)),e.addBounds(i),ca.return(i)}else this.renderGroup&&(e.addBounds(i,this.relativeGroupTransform),ca.return(i))}};function Bo(a,e,t){t.clear();let i,r;return a.parent?e?i=a.parent.worldTransform:(r=it.get().identity(),i=gf(a,r)):i=ie.IDENTITY,h2(a,t,i,e),r&&it.return(r),t.isValid||t.set(0,0,0,0),t}function h2(a,e,t,i){var r,s;if(!a.visible||!a.measurable)return;let o;i?o=a.worldTransform:(a.updateLocalTransform(),o=it.get(),o.appendFrom(a.localTransform,t));let d=e,h=!!a.effects.length;if(h&&(e=ca.get().clear()),a.boundsArea)e.addRect(a.boundsArea,o);else{a.bounds&&(e.matrix=o,e.addBounds(a.bounds));for(let f=0;f<a.children.length;f++)h2(a.children[f],e,o,i)}if(h){for(let f=0;f<a.effects.length;f++)(s=(r=a.effects[f]).addBounds)==null||s.call(r,e);d.addBounds(e,ie.IDENTITY),ca.return(e)}i||it.return(o)}function gf(a,e){let t=a.parent;return t&&(gf(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function f2(a,e){if(a===16777215||!e)return e;if(e===16777215||!a)return a;let t=a>>16&255,i=a>>8&255,r=a&255,s=e>>16&255,o=e>>8&255,d=e&255,h=t*s/255|0,f=i*o/255|0,u=r*d/255|0;return(h<<16)+(f<<8)+u}var Kl=16777215;function Hs(a,e){return a===Kl?e:e===Kl?a:f2(a,e)}function xr(a){return((a&255)<<16)+(a&65280)+(a>>16&255)}var h4={getGlobalAlpha(a){if(a)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(a,e){if(e)return a.copyFrom(this.worldTransform);this.updateLocalTransform();let t=gf(this,it.get().identity());return a.appendFrom(this.localTransform,t),it.return(t),a},getGlobalTint(a){if(a)return this.renderGroup?xr(this.renderGroup.worldColor):this.parentRenderGroup?xr(Hs(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Hs(e,t.localColor),t=t.parent;return xr(e)}};function mf(a,e,t){return e.clear(),t||(t=ie.IDENTITY),l2(a,e,t,a,!0),e.isValid||e.set(0,0,0,0),e}function l2(a,e,t,i,r){var s,o;let d;if(r)d=it.get(),d=t.copyTo(d);else{if(!a.visible||!a.measurable)return;a.updateLocalTransform();let u=a.localTransform;d=it.get(),d.appendFrom(u,t)}let h=e,f=!!a.effects.length;if(f&&(e=ca.get().clear()),a.boundsArea)e.addRect(a.boundsArea,d);else{a.renderPipeId&&(e.matrix=d,e.addBounds(a.bounds));let u=a.children;for(let p=0;p<u.length;p++)l2(u[p],e,d,i,!1)}if(f){for(let u=0;u<a.effects.length;u++)(o=(s=a.effects[u]).addLocalBounds)==null||o.call(s,e,i);h.addBounds(e,ie.IDENTITY),ca.return(e)}it.return(d)}function u2(a,e){let t=a.children;for(let i=0;i<t.length;i++){let r=t[i],s=r.uid,o=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,d=e.index;(e.data[d]!==s||e.data[d+1]!==o)&&(e.data[e.index]=s,e.data[e.index+1]=o,e.didChange=!0),e.index=d+2,r.children.length&&u2(r,e)}return e.didChange}var f4=new ie,l4={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(a,e){let t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=a/e*t:this.scale.x=t},_setHeight(a,e){let t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=a/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new qe});let a=this._localBoundsCacheData;return a.index=1,a.didChange=!1,a.data[0]!==this._didViewChangeTick&&(a.didChange=!0,a.data[0]=this._didViewChangeTick),u2(this,a),a.didChange&&mf(this,a.localBounds,f4),a.localBounds},getBounds(a,e){return Bo(this,a,e||new qe)}},u4={_onRender:null,set onRender(a){let e=this.renderGroup||this.parentRenderGroup;if(!a){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=a},get onRender(){return this._onRender}},b4={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(a){this._zIndex!==a&&(this._zIndex=a,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(p4))}};function p4(a,e){return a._zIndex-e._zIndex}var g4={getGlobalPosition(a=new Ce,e=!1){return this.parent?this.parent.toGlobal(this._position,a,e):(a.x=this._position.x,a.y=this._position.y),a},toGlobal(a,e,t=!1){let i=this.getGlobalTransform(it.get(),t);return e=i.apply(a,e),it.return(i),e},toLocal(a,e,t,i){e&&(a=e.toGlobal(a,t,i));let r=this.getGlobalTransform(it.get(),i);return t=r.applyInverse(a,t),it.return(r),t}},zs=class{constructor(){this.uid=Be("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize}};function Ei(a){return a+=a===0?1:0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1}function ql(a){return!(a&a-1)&&!!a}function Mr(a){let e={};for(let t in a)a[t]!==void 0&&(e[t]=a[t]);return e}var m4=Object.defineProperty,Zl=Object.getOwnPropertySymbols,_4=Object.prototype.hasOwnProperty,y4=Object.prototype.propertyIsEnumerable,Ql=(a,e,t)=>e in a?m4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Jl=(a,e)=>{for(var t in e||(e={}))_4.call(e,t)&&Ql(a,t,e[t]);if(Zl)for(var t of Zl(e))y4.call(e,t)&&Ql(a,t,e[t]);return a},eu=Object.create(null);function x4(a){let e=eu[a];return e===void 0&&(eu[a]=Be("resource")),e}var b2=class p2 extends xt{constructor(e={}){var t,i,r,s,o,d,h;super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e=Jl(Jl({},p2.defaultOptions),e),this.addressMode=e.addressMode,this.addressModeU=(t=e.addressModeU)!=null?t:this.addressModeU,this.addressModeV=(i=e.addressModeV)!=null?i:this.addressModeV,this.addressModeW=(r=e.addressModeW)!=null?r:this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=(s=e.magFilter)!=null?s:this.magFilter,this.minFilter=(o=e.minFilter)!=null?o:this.minFilter,this.mipmapFilter=(d=e.mipmapFilter)!=null?d:this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=(h=e.maxAnisotropy)!=null?h:1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){let e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=x4(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};b2.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};var g2=b2,v4=Object.defineProperty,tu=Object.getOwnPropertySymbols,T4=Object.prototype.hasOwnProperty,S4=Object.prototype.propertyIsEnumerable,au=(a,e,t)=>e in a?v4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,iu=(a,e)=>{for(var t in e||(e={}))T4.call(e,t)&&au(a,t,e[t]);if(tu)for(var t of tu(e))S4.call(e,t)&&au(a,t,e[t]);return a},m2=class _2 extends xt{constructor(e={}){var t,i,r;super(),this.options=e,this.uid=Be("textureSource"),this._resourceType="textureSource",this._resourceId=Be("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e=iu(iu({},_2.defaultOptions),e),this.label=(t=e.label)!=null?t:"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource&&(i=this.resourceWidth)!=null?i:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource&&(r=this.resourceHeight)!=null?r:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new g2(Mr(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,i;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Be("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){let{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,i){i||(i=this._resolution),e||(e=this.width),t||(t=this.height);let r=Math.round(e*i),s=Math.round(t*i);return this.width=r/i,this.height=s/i,this._resolution=i,this.pixelWidth===r&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=s,this.emit("resize",this),this._resourceId=Be("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=ql(this.pixelWidth)&&ql(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};m2.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};var Fe=m2,Xa=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ha=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],za=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Va=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Cd=[],y2=[],ps=Math.sign;function w4(){for(let a=0;a<16;a++){let e=[];Cd.push(e);for(let t=0;t<16;t++){let i=ps(Xa[a]*Xa[t]+za[a]*Ha[t]),r=ps(Ha[a]*Xa[t]+Va[a]*Ha[t]),s=ps(Xa[a]*za[t]+za[a]*Va[t]),o=ps(Ha[a]*za[t]+Va[a]*Va[t]);for(let d=0;d<16;d++)if(Xa[d]===i&&Ha[d]===r&&za[d]===s&&Va[d]===o){e.push(d);break}}}for(let a=0;a<16;a++){let e=new ie;e.set(Xa[a],Ha[a],za[a],Va[a],0,0),y2.push(e)}}w4();var ke={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:a=>Xa[a],uY:a=>Ha[a],vX:a=>za[a],vY:a=>Va[a],inv:a=>a&8?a&15:-a&7,add:(a,e)=>Cd[a][e],sub:(a,e)=>Cd[a][ke.inv(e)],rotate180:a=>a^4,isVertical:a=>(a&3)===2,byDirection:(a,e)=>Math.abs(a)*2<=Math.abs(e)?e>=0?ke.S:ke.N:Math.abs(e)*2<=Math.abs(a)?a>0?ke.E:ke.W:e>0?a>0?ke.SE:ke.SW:a>0?ke.NE:ke.NW,matrixAppendRotationInv:(a,e,t=0,i=0)=>{let r=y2[ke.inv(e)];r.tx=t,r.ty=i,a.append(r)}},ru=()=>{},A4=Object.defineProperty,E4=Object.defineProperties,P4=Object.getOwnPropertyDescriptors,su=Object.getOwnPropertySymbols,R4=Object.prototype.hasOwnProperty,M4=Object.prototype.propertyIsEnumerable,nu=(a,e,t)=>e in a?A4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,C4=(a,e)=>{for(var t in e||(e={}))R4.call(e,t)&&nu(a,t,e[t]);if(su)for(var t of su(e))M4.call(e,t)&&nu(a,t,e[t]);return a},O4=(a,e)=>E4(a,P4(e)),Cr=class extends Fe{constructor(e){let t=e.resource||new Float32Array(e.width*e.height*4),i=e.format;i||(t instanceof Float32Array?i="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?i="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?i="rgba16uint":(t instanceof Int8Array,i="bgra8unorm")),super(O4(C4({},e),{resource:t,format:i})),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}};Cr.extension=B.TextureSource;var ou=new ie,Vs=class{constructor(e,t){this.mapCoord=new ie,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);let i=this.mapCoord;for(let r=0;r<e.length;r+=2){let s=e[r],o=e[r+1];t[r]=s*i.a+o*i.c+i.tx,t[r+1]=s*i.b+o*i.d+i.ty}return t}update(){let e=this._texture;this._updateID++;let t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);let i=e.orig,r=e.trim;r&&(ou.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(ou));let s=e.source,o=this.uClampFrame,d=this.clampMargin/s._resolution,h=this.clampOffset/s._resolution;return o[0]=(e.frame.x+d+h)/s.width,o[1]=(e.frame.y+d+h)/s.height,o[2]=(e.frame.x+e.frame.width-d+h)/s.width,o[3]=(e.frame.y+e.frame.height-d+h)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}},K=class extends xt{constructor({source:e,label:t,frame:i,orig:r,trim:s,defaultAnchor:o,defaultBorders:d,rotate:h,dynamic:f}={}){var u;if(super(),this.uid=Be("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Pe,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(u=e?.source)!=null?u:new Fe,this.noFrame=!i,i)this.frame.copyFrom(i);else{let{width:p,height:y}=this._source;this.frame.width=p,this.frame.height=y}this.orig=r||this.frame,this.trim=s,this.rotate=h??0,this.defaultAnchor=o,this.defaultBorders=d,this.destroyed=!1,this.dynamic=f||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Vs(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:e,frame:t}=this,{width:i,height:r}=this._source,s=t.x/i,o=t.y/r,d=t.width/i,h=t.height/r,f=this.rotate;if(f){let u=d/2,p=h/2,y=s+u,_=o+p;f=ke.add(f,ke.NW),e.x0=y+u*ke.uX(f),e.y0=_+p*ke.uY(f),f=ke.add(f,2),e.x1=y+u*ke.uX(f),e.y1=_+p*ke.uY(f),f=ke.add(f,2),e.x2=y+u*ke.uX(f),e.y2=_+p*ke.uY(f),f=ke.add(f,2),e.x3=y+u*ke.uX(f),e.y3=_+p*ke.uY(f)}else e.x0=s,e.y0=o,e.x1=s+d,e.y1=o,e.x2=s+d,e.y2=o+h,e.x3=s,e.y3=o+h}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return this._source}};K.EMPTY=new K({label:"EMPTY",source:new Fe({label:"EMPTY"})}),K.EMPTY.destroy=ru,K.WHITE=new K({source:new Cr({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),K.WHITE.destroy=ru;var I4=Object.defineProperty,G4=Object.defineProperties,B4=Object.getOwnPropertyDescriptors,cu=Object.getOwnPropertySymbols,F4=Object.prototype.hasOwnProperty,D4=Object.prototype.propertyIsEnumerable,du=(a,e,t)=>e in a?I4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,k4=(a,e)=>{for(var t in e||(e={}))F4.call(e,t)&&du(a,t,e[t]);if(cu)for(var t of cu(e))D4.call(e,t)&&du(a,t,e[t]);return a},U4=(a,e)=>G4(a,B4(e)),L4=0,Od=class{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,t,i){let r=new Fe(U4(k4({},this.textureOptions),{width:e,height:t,resolution:1,antialias:i,autoGarbageCollect:!1}));return new K({source:r,label:`texturePool_${L4++}`})}getOptimalTexture(e,t,i=1,r){let s=Math.ceil(e*i-1e-6),o=Math.ceil(t*i-1e-6);s=Ei(s),o=Ei(o);let d=(s<<17)+(o<<1)+(r?1:0);this._texturePool[d]||(this._texturePool[d]=[]);let h=this._texturePool[d].pop();return h||(h=this.createTexture(s,o,r)),h.source._resolution=i,h.source.width=s/i,h.source.height=o/i,h.source.pixelWidth=s,h.source.pixelHeight=o,h.frame.x=0,h.frame.y=0,h.frame.width=e,h.frame.height=t,h.updateUvs(),this._poolKeyHash[h.uid]=d,h}getSameSizeTexture(e,t=!1){let i=e.source;return this.getOptimalTexture(e.width,e.height,i._resolution,t)}returnTexture(e){let t=this._poolKeyHash[e.uid];this._texturePool[t].push(e)}clear(e){if(e=e!==!1,e)for(let t in this._texturePool){let i=this._texturePool[t];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0)}this._texturePool={}}},ze=new Od,Id=class{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new ie,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new zs,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;let t=e.children;for(let i=0;i<t.length;i++){let r=t[i];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(ze.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(let e in this.childrenToUpdate){let t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){let t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);let t=e.children;for(let i=0;i<t.length;i++)this.addChild(t[i])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}let t=e.children;for(let i=0;i<t.length;i++)this.removeChild(t[i])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){let t=this.root.children;for(let i=0;i<t.length;i++)this._getChildren(t[i],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;let i=e.children;for(let r=0;r<i.length;r++)this._getChildren(i[r],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new ie),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new ie),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;let e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new ie),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}};function Gd(a,e,t={}){for(let i in e)!t[i]&&e[i]!==void 0&&(a[i]=e[i])}var Mc=new Ve(null),Cc=new Ve(null),Oc=new Ve(null,1,1),Ws=1,_f=2,vr=4;var fe=class a extends xt{constructor(e={}){var t,i;super(),this.uid=Be("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new ie,this.relativeGroupTransform=new ie,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Ve(this,0,0),this._scale=Oc,this._pivot=Cc,this._skew=Mc,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Gd(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(r=>this.addChild(r)),(i=e.parent)==null||i.addChild(this)}static mixin(e){Object.defineProperties(a.prototype,Object.getOwnPropertyDescriptors(e))}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.addChild(e[r]);return e[0]}let t=e[0],i=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),i&&(i.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,i&&i.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.removeChild(e[r]);return e[0]}let t=e[0],i=this.children.indexOf(t);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,i),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=ye.get(Id,this),this.groupTransform=ie.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),ye.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new ie),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*q5}set angle(e){this.rotation=e*Z5}get pivot(){return this._pivot===Cc&&(this._pivot=new Ve(this,0,0)),this._pivot}set pivot(e){this._pivot===Cc&&(this._pivot=new Ve(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Mc&&(this._skew=new Ve(this,0,0)),this._skew}set skew(e){this._skew===Mc&&(this._skew=new Ve(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Oc&&(this._scale=new Ve(this,1,1)),this._scale}set scale(e){this._scale===Oc&&(this._scale=new Ve(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){let t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){let t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});let t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){var i;let r=this.getLocalBounds();typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,r.width),t!==void 0&&this._setHeight(t,r.height)}_updateSkew(){let e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){let e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;let t=this.localTransform,i=this._scale,r=this._pivot,s=this._position,o=i._x,d=i._y,h=r._x,f=r._y;t.a=this._cx*o,t.b=this._sx*o,t.c=this._cy*d,t.d=this._sy*d,t.tx=s._x-(h*t.a+f*t.c),t.ty=s._y-(h*t.b+f*t.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Ws,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){let t=Ee.shared.setValue(e??16777215).toBgrNumber();t!==this.localColor&&(this.localColor=t,this._updateFlags|=Ws,this._onUpdate())}get tint(){return xr(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=_f,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){let t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=vr,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){let t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=vr,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){let t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=vr,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var t;if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&i)for(let r=0;r<i.length;++r)i[r].destroy(e);(t=this.renderGroup)==null||t.destroy(),this.renderGroup=null}};fe.mixin(t4),fe.mixin(d4),fe.mixin(g4),fe.mixin(u4),fe.mixin(l4),fe.mixin(n4),fe.mixin(o4),fe.mixin(b4),fe.mixin($5),fe.mixin(e4),fe.mixin(h4),fe.mixin(a4);var Or=class a{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=a.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Ce,this.page=new Ce,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}},Ic=/iPhone/i,hu=/iPod/i,fu=/iPad/i,lu=/\biOS-universal(?:.+)Mac\b/i,Gc=/\bAndroid(?:.+)Mobile\b/i,uu=/Android/i,fi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,gs=/Silk/i,na=/Windows Phone/i,bu=/\bWindows(?:.+)ARM\b/i,pu=/BlackBerry/i,gu=/BB10/i,mu=/Opera Mini/i,_u=/\b(CriOS|Chrome)(?:.+)Mobile/i,yu=/Mobile(?:.+)Firefox\b/i,xu=function(a){return typeof a<"u"&&a.platform==="MacIntel"&&typeof a.maxTouchPoints=="number"&&a.maxTouchPoints>1&&typeof MSStream>"u"};function N4(a){return function(e){return e.test(a)}}function vu(a){var e={userAgent:"",platform:"",maxTouchPoints:0};!a&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof a=="string"?e.userAgent=a:a&&a.userAgent&&(e={userAgent:a.userAgent,platform:a.platform,maxTouchPoints:a.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]<"u"&&(t=i[0]);var r=N4(t),s={apple:{phone:r(Ic)&&!r(na),ipod:r(hu),tablet:!r(Ic)&&(r(fu)||xu(e))&&!r(na),universal:r(lu),device:(r(Ic)||r(hu)||r(fu)||r(lu)||xu(e))&&!r(na)},amazon:{phone:r(fi),tablet:!r(fi)&&r(gs),device:r(fi)||r(gs)},android:{phone:!r(na)&&r(fi)||!r(na)&&r(Gc),tablet:!r(na)&&!r(fi)&&!r(Gc)&&(r(gs)||r(uu)),device:!r(na)&&(r(fi)||r(gs)||r(Gc)||r(uu))||r(/\bokhttp\b/i)},windows:{phone:r(na),tablet:r(bu),device:r(na)||r(bu)},other:{blackberry:r(pu),blackberry10:r(gu),opera:r(mu),firefox:r(yu),chrome:r(_u),device:r(pu)||r(gu)||r(mu)||r(yu)||r(_u)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var Tu,j4=(Tu=vu.default)!=null?Tu:vu,Qa=j4(globalThis.navigator),X4=Object.defineProperty,Su=Object.getOwnPropertySymbols,H4=Object.prototype.hasOwnProperty,z4=Object.prototype.propertyIsEnumerable,wu=(a,e,t)=>e in a?X4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Au=(a,e)=>{for(var t in e||(e={}))H4.call(e,t)&&wu(a,t,e[t]);if(Su)for(var t of Su(e))z4.call(e,t)&&wu(a,t,e[t]);return a},V4=9,ms=100,W4=0,Y4=0,Eu=2,Pu=1,$4=-1e3,K4=-1e3,q4=2,Bd=class x2{constructor(e,t=Qa){this._mobileInfo=t,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(t.tablet||t.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){let e=document.createElement("button");e.style.width=`${Pu}px`,e.style.height=`${Pu}px`,e.style.position="absolute",e.style.top=`${$4}px`,e.style.left=`${K4}px`,e.style.zIndex=q4.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width=`${ms}px`,this._div.style.height=`${ms}px`,this._div.style.position="absolute",this._div.style.top=`${W4}px`,this._div.style.left=`${Y4}px`,this._div.style.zIndex=Eu.toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));let e=this._renderer.view.canvas;if(e.parentNode)e.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{let t=new MutationObserver(()=>{e.parentNode&&(e.parentNode.appendChild(this._div),t.disconnect(),this._initAccessibilitySetup())});t.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(let e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;this._pool.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);let t=e.children;if(t)for(let i=0;i<t.length;i++)this._updateAccessibleObjects(t[i])}init(e){let t=x2.defaultOptions,i={accessibilityOptions:Au(Au({},t),e?.accessibilityOptions||{})};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){let e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;let t=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(let i of this._children)i._renderId===this._renderId&&t.add(this._children.indexOf(i))}for(let i=this._children.length-1;i>=0;i--){let r=this._children[i];t.has(i)||(r._accessibleDiv&&r._accessibleDiv.parentNode&&(r._accessibleDiv.parentNode.removeChild(r._accessibleDiv),this._pool.push(r._accessibleDiv),r._accessibleDiv=null),r._accessibleActive=!1,d2(this._children,i,1))}if(this._renderer.renderingToScreen){let{x:i,y:r,width:s,height:o}=this._renderer.screen,d=this._div;d.style.left=`${i}px`,d.style.top=`${r}px`,d.style.width=`${s}px`,d.style.height=`${o}px`}for(let i=0;i<this._children.length;i++){let r=this._children[i];if(!r._accessibleActive||!r._accessibleDiv)continue;let s=r._accessibleDiv,o=r.hitArea||r.getBounds().rectangle;if(r.hitArea){let d=r.worldTransform,h=this._renderer.resolution,f=this._renderer.resolution;s.style.left=`${(d.tx+o.x*d.a)*h}px`,s.style.top=`${(d.ty+o.y*d.d)*f}px`,s.style.width=`${o.width*d.a*h}px`,s.style.height=`${o.height*d.d*f}px`}else{this._capHitArea(o);let d=this._renderer.resolution,h=this._renderer.resolution;s.style.left=`${o.x*d}px`,s.style.top=`${o.y*h}px`,s.style.width=`${o.width*d}px`,s.style.height=`${o.height*h}px`}}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);let{width:t,height:i}=this._renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}_addChild(e){let t=this._pool.pop();t||(e.accessibleType==="button"?t=document.createElement("button"):(t=document.createElement(e.accessibleType),t.style.cssText=`
    color: transparent;
    pointer-events: none;
    padding: 0;
    margin: 0;
    border: 0;
    outline: 0;
    background: transparent;
    box-sizing: border-box;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
`,e.accessibleText&&(t.innerText=e.accessibleText)),t.style.width=`${ms}px`,t.style.height=`${ms}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=Eu.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this._updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv),e.interactive&&(e._accessibleDiv.tabIndex=e.tabIndex)}_dispatchEvent(e,t){let{container:i}=e.target,r=this._renderer.events.rootBoundary,s=Object.assign(new Or(r),{target:i});r.rootTarget=this._renderer.lastObjectRendered,t.forEach(o=>r.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==V4||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}};Bd.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"accessibility"},Bd.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};var Z4=Bd,Q4={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1};pe.add(Z4),fe.mixin(Q4);var Ys=class{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let t,i;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{let{clientWidth:r,clientHeight:s}=this._resizeTo;t=r,i=s}this.renderer.resize(t,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};Ys.extension=B.Application;var Ca=(a=>(a[a.INTERACTION=50]="INTERACTION",a[a.HIGH=25]="HIGH",a[a.NORMAL=0]="NORMAL",a[a.LOW=-25]="LOW",a[a.UTILITY=-50]="UTILITY",a))(Ca||{}),Tr=class{constructor(e,t=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=i,this._once=r}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));let t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let t=this.next;return this.next=e?null:t,this.previous=null,t}},v2=class lt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Tr(null,null,1/0),this.deltaMS=1/lt.targetFPMS,this.elapsedMS=1/lt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Ca.NORMAL){return this._addListener(new Tr(e,t,i))}addOnce(e,t,i=Ca.NORMAL){return this._addListener(new Tr(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){let s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*lt.targetFPMS;let i=this._head,r=i.next;for(;r;)r=r.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,lt.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{let t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!lt._shared){let e=lt._shared=new lt;e.autoStart=!0,e._protected=!0}return lt._shared}static get system(){if(!lt._system){let e=lt._system=new lt;e.autoStart=!0,e._protected=!0}return lt._system}};v2.targetFPMS=.06;var tt=v2,$s=class{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Ca.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?tt.shared:new tt,e.autoStart&&this.start()}static destroy(){if(this._ticker){let e=this._ticker;this.ticker=null,e.destroy()}}};$s.extension=B.Application,pe.add(Ys),pe.add($s);var J4=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(a){this.removeTickerListener(),this.events=a,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(a){this._pauseUpdate=a}addTickerListener(){this._tickerAdded||!this.domElement||(tt.system.add(this._tickerUpdate,this,Ca.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(tt.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let a=this.events._rootPointerEvent;this.events.supportsTouchEvents&&a.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:a.clientX,clientY:a.clientY,pointerType:a.pointerType,pointerId:a.pointerId}))}_tickerUpdate(a){this._deltaTime+=a.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}},Pa=new J4,Pi=class extends Or{constructor(){super(...arguments),this.client=new Ce,this.movement=new Ce,this.offset=new Ce,this.global=new Ce,this.screen=new Ce}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,r,s,o,d,h,f,u,p,y,_,v,T){throw new Error("Method not implemented.")}},gt=class extends Pi{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}},Ma=class extends Pi{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};Ma.DOM_DELTA_PIXEL=0,Ma.DOM_DELTA_LINE=1,Ma.DOM_DELTA_PAGE=2;var e8=2048,t8=new Ce,rr=new Ce,Fd=class{constructor(e){this.dispatch=new xt,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((i,r)=>i.priority-r.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;let t=this.mappingTable[e.type];if(t)for(let i=0,r=t.length;i<r;i++)t[i].fn(e)}hitTest(e,t){Pa.pauseUpdate=!0;let i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",r=this[i](this.rootTarget,this.rootTarget.eventMode,t8.set(e,t),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(e,t){if(!e.target)return;let i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(e.currentTarget=i[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(e.currentTarget=i[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;let r=Array.isArray(t)?t:[t];for(let s=i.length-1;s>=0;s--)r.forEach(o=>{e.currentTarget=i[s],this.notifyTarget(e,o)})}propagationPath(e){let t=[e];for(let i=0;i<e8&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,r,s,o=!1){let d=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Pa.pauseUpdate=!1),e.interactiveChildren&&e.children){let u=e.children;for(let p=u.length-1;p>=0;p--){let y=u[p],_=this.hitTestMoveRecursive(y,this._isInteractive(t)?t:y.eventMode,i,r,s,o||s(e,i));if(_){if(_.length>0&&!_[_.length-1].parent)continue;let v=e.isInteractive();(_.length>0||v)&&(v&&this._allInteractiveElements.push(e),_.push(e)),this._hitElements.length===0&&(this._hitElements=_),d=!0}}}let h=this._isInteractive(t),f=e.isInteractive();return f&&f&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:d?this._hitElements:h&&!s(e,i)&&r(e,i)?f?[e]:[]:null}hitTestRecursive(e,t,i,r,s){if(this._interactivePrune(e)||s(e,i))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Pa.pauseUpdate=!1),e.interactiveChildren&&e.children){let h=e.children,f=i;for(let u=h.length-1;u>=0;u--){let p=h[u],y=this.hitTestRecursive(p,this._isInteractive(t)?t:p.eventMode,f,r,s);if(y){if(y.length>0&&!y[y.length-1].parent)continue;let _=e.isInteractive();return(y.length>0||_)&&y.push(e),y}}}let o=this._isInteractive(t),d=e.isInteractive();return o&&r(e,i)?d?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,rr),!e.hitArea.contains(rr.x,rr.y)))return!0;if(e.effects&&e.effects.length)for(let i=0;i<e.effects.length;i++){let r=e.effects[i];if(r.containsPoint&&!r.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return e.hitArea?!0:e!=null&&e.containsPoint?(e.worldTransform.applyInverse(t,rr),e.containsPoint(rr)):!1}notifyTarget(e,t){var i,r;if(!e.currentTarget.isInteractive())return;t!=null||(t=e.type);let s=`on${t}`;(r=(i=e.currentTarget)[s])==null||r.call(i,e);let o=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,o),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof gt))return;let t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){let r=t.button===2;this.dispatchEvent(t,r?"rightdown":"mousedown")}let i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var t,i,r;if(!(e instanceof gt))return;this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let s=this.createPointerEvent(e);this._isPointerMoveEvent=!1;let o=s.pointerType==="mouse"||s.pointerType==="pen",d=this.trackingData(e.pointerId),h=this.findMountedTarget(d.overTargets);if(((t=d.overTargets)==null?void 0:t.length)>0&&h!==s.target){let p=e.type==="mousemove"?"mouseout":"pointerout",y=this.createPointerEvent(e,p,h);if(this.dispatchEvent(y,"pointerout"),o&&this.dispatchEvent(y,"mouseout"),!s.composedPath().includes(h)){let _=this.createPointerEvent(e,"pointerleave",h);for(_.eventPhase=_.AT_TARGET;_.target&&!s.composedPath().includes(_.target);)_.currentTarget=_.target,this.notifyTarget(_),o&&this.notifyTarget(_,"mouseleave"),_.target=_.target.parent;this.freeEvent(_)}this.freeEvent(y)}if(h!==s.target){let p=e.type==="mousemove"?"mouseover":"pointerover",y=this.clonePointerEvent(s,p);this.dispatchEvent(y,"pointerover"),o&&this.dispatchEvent(y,"mouseover");let _=h?.parent;for(;_&&_!==this.rootTarget.parent&&_!==s.target;)_=_.parent;if(!_||_===this.rootTarget.parent){let v=this.clonePointerEvent(s,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==h&&v.target!==this.rootTarget.parent;)v.currentTarget=v.target,this.notifyTarget(v),o&&this.notifyTarget(v,"mouseenter"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(y)}let f=[],u=(i=this.enableGlobalMoveEvents)!=null?i:!0;this.moveOnAll?f.push("pointermove"):this.dispatchEvent(s,"pointermove"),u&&f.push("globalpointermove"),s.pointerType==="touch"&&(this.moveOnAll?f.splice(1,0,"touchmove"):this.dispatchEvent(s,"touchmove"),u&&f.push("globaltouchmove")),o&&(this.moveOnAll?f.splice(1,0,"mousemove"):this.dispatchEvent(s,"mousemove"),u&&f.push("globalmousemove"),this.cursor=(r=s.target)==null?void 0:r.cursor),f.length>0&&this.all(s,f),this._allInteractiveElements.length=0,this._hitElements.length=0,d.overTargets=s.composedPath(),this.freeEvent(s)}mapPointerOver(e){var t;if(!(e instanceof gt))return;let i=this.trackingData(e.pointerId),r=this.createPointerEvent(e),s=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),s&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(t=r.target)==null?void 0:t.cursor);let o=this.clonePointerEvent(r,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;i.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(o)}mapPointerOut(e){if(!(e instanceof gt))return;let t=this.trackingData(e.pointerId);if(t.overTargets){let i=e.pointerType==="mouse"||e.pointerType==="pen",r=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");let o=this.createPointerEvent(e,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof gt))return;let t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let d=i.button===2;this.dispatchEvent(i,d?"rightup":"mouseup")}let r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[e.button]),o=s;if(s&&!i.composedPath().includes(s)){let d=s;for(;d&&!i.composedPath().includes(d);){if(i.currentTarget=d,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let h=i.button===2;this.notifyTarget(i,h?"rightupoutside":"mouseupoutside")}d=d.parent}delete r.pressTargetsByButton[e.button],o=d}if(o){let d=this.clonePointerEvent(i,"click");d.target=o,d.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:d.target,timeStamp:t});let h=r.clicksByButton[e.button];if(h.target===d.target&&t-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=d.target,h.timeStamp=t,d.detail=h.clickCount,d.pointerType==="mouse"){let f=d.button===2;this.dispatchEvent(d,f?"rightclick":"click")}else d.pointerType==="touch"&&this.dispatchEvent(d,"tap");this.dispatchEvent(d,"pointertap"),this.freeEvent(d)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof gt))return;let t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(i){let s=i;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof Ma))return;let t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){var r;let s=this.allocateEvent(gt);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=(r=i??this.hitTest(s.global.x,s.global.y))!=null?r:this._hitElements[0],typeof t=="string"&&(s.type=t),s}createWheelEvent(e){let t=this.allocateEvent(Ma);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){let i=this.allocateEvent(gt);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof gt&&t instanceof gt&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Pi&&t instanceof Pi&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);let t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.defaultPrevented=!1,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){let i=e.currentTarget._events[t];if(i)if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let r=0,s=i.length;r<s&&!e.propagationImmediatelyStopped;r++)i[r].once&&e.currentTarget.removeListener(t,i[r].fn,void 0,!0),i[r].fn.call(i[r].context,e)}},a8=Object.defineProperty,Ru=Object.getOwnPropertySymbols,i8=Object.prototype.hasOwnProperty,r8=Object.prototype.propertyIsEnumerable,Mu=(a,e,t)=>e in a?a8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,s8=(a,e)=>{for(var t in e||(e={}))i8.call(e,t)&&Mu(a,t,e[t]);if(Ru)for(var t of Ru(e))r8.call(e,t)&&Mu(a,t,e[t]);return a},n8=1,o8={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Dd=class kd{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Fd(null),Pa.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new gt(null),this._rootWheelEvent=new Ma(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(s8({},kd.defaultEventFeatures),{set:(t,i,r)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),t[i]=r,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){var t,i;let{canvas:r,resolution:s}=this.renderer;this.setTargetElement(r),this.resolution=s,kd._defaultEventMode=(t=e.eventMode)!=null?t:"passive",Object.assign(this.features,(i=e.eventFeatures)!=null?i:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;let i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,r=t.length;i<r;i++){let s=t[i],o=this._bootstrapEvent(this._rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Pa.pointerMoved();let t=this._normalizeToPointerData(e);for(let i=0,r=t.length;i<r;i++){let s=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);let i=t!==this.domElement?"outside":"",r=this._normalizeToPointerData(e);for(let s=0,o=r.length;s<o;s++){let d=this._bootstrapEvent(this._rootPointerEvent,r[s]);d.type+=i,this.rootBoundary.mapEvent(d)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this._normalizeToPointerData(e);for(let i=0,r=t.length;i<r;i++){let s=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,Pa.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Pa.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Pa.removeTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,i){let r=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-r.left)*(this.domElement.width/r.width)*s,e.y=(i-r.top)*(this.domElement.height/r.height)*s}_normalizeToPointerData(e){let t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,r=e.changedTouches.length;i<r;i++){let s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=n8),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){let t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=o8[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Dd.extension={name:"events",type:[B.WebGLSystem,B.CanvasSystem,B.WebGPUSystem],priority:-1},Dd.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};var T2=Dd,c8={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(a){this.eventMode=a?"static":"passive"},_internalEventMode:void 0,get eventMode(){var a;return(a=this._internalEventMode)!=null?a:T2.defaultEventMode},set eventMode(a){this._internalEventMode=a},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(a,e,t){let i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,r=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;a=i?`${a}capture`:a;let d=typeof e=="function"?e:e.handleEvent,h=this;r&&r.addEventListener("abort",()=>{h.off(a,d,o)}),s?h.once(a,d,o):h.on(a,d,o)},removeEventListener(a,e,t){let i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,r=typeof e=="function"?void 0:e;a=i?`${a}capture`:a,e=typeof e=="function"?e:e.handleEvent,this.off(a,e,r)},dispatchEvent(a){if(!(a instanceof Or))throw new Error("Container cannot propagate events outside of the Federated Events API");return a.defaultPrevented=!1,a.path=null,a.target=this,a.manager.dispatchEvent(a),!a.defaultPrevented}};pe.add(T2),fe.mixin(c8);var Rt=(a=>(a[a.Low=0]="Low",a[a.Normal=1]="Normal",a[a.High=2]="High",a))(Rt||{}),d8={createCanvas:(a,e)=>{let t=document.createElement("canvas");return t.width=a,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var a;return(a=document.baseURI)!=null?a:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(a,e)=>fetch(a,e),parseXML:a=>new DOMParser().parseFromString(a,"text/xml")},Cu=d8,xe={get(){return Cu},set(a){Cu=a}};function Nt(a){if(typeof a!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(a)}`)}function sr(a){return a.split("?")[0].split("#")[0]}function h8(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f8(a,e,t){return a.replace(new RegExp(h8(e),"g"),t)}function l8(a,e){let t="",i=0,r=-1,s=0,o=-1;for(let d=0;d<=a.length;++d){if(d<a.length)o=a.charCodeAt(d);else{if(o===47)break;o=47}if(o===47){if(!(r===d-1||s===1))if(r!==d-1&&s===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){let h=t.lastIndexOf("/");if(h!==t.length-1){h===-1?(t="",i=0):(t=t.slice(0,h),i=t.length-1-t.lastIndexOf("/")),r=d,s=0;continue}}else if(t.length===2||t.length===1){t="",i=0,r=d,s=0;continue}}e&&(t.length>0?t+="/..":t="..",i=2)}else t.length>0?t+=`/${a.slice(r+1,d)}`:t=a.slice(r+1,d),i=d-r-1;r=d,s=0}else o===46&&s!==-1?++s:s=-1}return t}var _t={toPosix(a){return f8(a,"\\","/")},isUrl(a){return/^https?:/.test(this.toPosix(a))},isDataUrl(a){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(a)},isBlobUrl(a){return a.startsWith("blob:")},hasProtocol(a){return/^[^/:]+:/.test(this.toPosix(a))},getProtocol(a){Nt(a),a=this.toPosix(a);let e=/^file:\/\/\//.exec(a);if(e)return e[0];let t=/^[^/:]+:\/{0,2}/.exec(a);return t?t[0]:""},toAbsolute(a,e,t){if(Nt(a),this.isDataUrl(a)||this.isBlobUrl(a))return a;let i=sr(this.toPosix(e??xe.get().getBaseUrl())),r=sr(this.toPosix(t??this.rootname(i)));return a=this.toPosix(a),a.startsWith("/")?_t.join(r,a.slice(1)):this.isAbsolute(a)?a:this.join(i,a)},normalize(a){if(Nt(a),a.length===0)return".";if(this.isDataUrl(a)||this.isBlobUrl(a))return a;a=this.toPosix(a);let e="",t=a.startsWith("/");this.hasProtocol(a)&&(e=this.rootname(a),a=a.slice(e.length));let i=a.endsWith("/");return a=l8(a,!1),a.length>0&&i&&(a+="/"),t?`/${a}`:e+a},isAbsolute(a){return Nt(a),a=this.toPosix(a),this.hasProtocol(a)?!0:a.startsWith("/")},join(...a){var e;if(a.length===0)return".";let t;for(let i=0;i<a.length;++i){let r=a[i];if(Nt(r),r.length>0)if(t===void 0)t=r;else{let s=(e=a[i-1])!=null?e:"";this.joinExtensions.includes(this.extname(s).toLowerCase())?t+=`/../${r}`:t+=`/${r}`}}return t===void 0?".":this.normalize(t)},dirname(a){if(Nt(a),a.length===0)return".";a=this.toPosix(a);let e=a.charCodeAt(0),t=e===47,i=-1,r=!0,s=this.getProtocol(a),o=a;a=a.slice(s.length);for(let d=a.length-1;d>=1;--d)if(e=a.charCodeAt(d),e===47){if(!r){i=d;break}}else r=!1;return i===-1?t?"/":this.isUrl(o)?s+a:s:t&&i===1?"//":s+a.slice(0,i)},rootname(a){Nt(a),a=this.toPosix(a);let e="";if(a.startsWith("/")?e="/":e=this.getProtocol(a),this.isUrl(a)){let t=a.indexOf("/",e.length);t!==-1?e=a.slice(0,t):e=a,e.endsWith("/")||(e+="/")}return e},basename(a,e){Nt(a),e&&Nt(e),a=sr(this.toPosix(a));let t=0,i=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=a.length){if(e.length===a.length&&e===a)return"";let o=e.length-1,d=-1;for(s=a.length-1;s>=0;--s){let h=a.charCodeAt(s);if(h===47){if(!r){t=s+1;break}}else d===-1&&(r=!1,d=s+1),o>=0&&(h===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=d))}return t===i?i=d:i===-1&&(i=a.length),a.slice(t,i)}for(s=a.length-1;s>=0;--s)if(a.charCodeAt(s)===47){if(!r){t=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":a.slice(t,i)},extname(a){Nt(a),a=sr(this.toPosix(a));let e=-1,t=0,i=-1,r=!0,s=0;for(let o=a.length-1;o>=0;--o){let d=a.charCodeAt(o);if(d===47){if(!r){t=o+1;break}continue}i===-1&&(r=!1,i=o+1),d===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":a.slice(e,i)},parse(a){Nt(a);let e={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return e;a=sr(this.toPosix(a));let t=a.charCodeAt(0),i=this.isAbsolute(a),r,s="";e.root=this.rootname(a),i||this.hasProtocol(a)?r=1:r=0;let o=-1,d=0,h=-1,f=!0,u=a.length-1,p=0;for(;u>=r;--u){if(t=a.charCodeAt(u),t===47){if(!f){d=u+1;break}continue}h===-1&&(f=!1,h=u+1),t===46?o===-1?o=u:p!==1&&(p=1):o!==-1&&(p=-1)}return o===-1||h===-1||p===0||p===1&&o===h-1&&o===d+1?h!==-1&&(d===0&&i?e.base=e.name=a.slice(1,h):e.base=e.name=a.slice(d,h)):(d===0&&i?(e.name=a.slice(1,o),e.base=a.slice(1,h)):(e.name=a.slice(d,o),e.base=a.slice(d,h)),e.ext=a.slice(o,h)),e.dir=this.dirname(a),s&&(e.dir=s+e.dir),e},sep:"/",delimiter:":",joinExtensions:[".html"]},Xt=(a,e,t=!1)=>(Array.isArray(a)||(a=[a]),e?a.map(i=>typeof i=="string"||t?e(i):i):a);function S2(a,e,t,i,r){let s=e[t];for(let o=0;o<s.length;o++){let d=s[o];t<e.length-1?S2(a.replace(i[t],d),e,t+1,i,r):r.push(a.replace(i[t],d))}}function u8(a){let e=/\{(.*?)\}/g,t=a.match(e),i=[];if(t){let r=[];t.forEach(s=>{let o=s.substring(1,s.length-1).split(",");r.push(o)}),S2(a,r,0,t,i)}else i.push(a);return i}var Ks=a=>!Array.isArray(a),b8=Object.defineProperty,p8=Object.defineProperties,g8=Object.getOwnPropertyDescriptors,Ou=Object.getOwnPropertySymbols,m8=Object.prototype.hasOwnProperty,_8=Object.prototype.propertyIsEnumerable,Iu=(a,e,t)=>e in a?b8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,li=(a,e)=>{for(var t in e||(e={}))m8.call(e,t)&&Iu(a,t,e[t]);if(Ou)for(var t of Ou(e))_8.call(e,t)&&Iu(a,t,e[t]);return a},y8=(a,e)=>p8(a,g8(e)),ha=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){var t,i,r;if(this._bundleIdConnector=(t=e.connector)!=null?t:this._bundleIdConnector,this._createBundleAssetId=(i=e.createBundleAssetId)!=null?i:this._createBundleAssetId,this._extractAssetIdFromBundle=(r=e.extractAssetIdFromBundle)!=null?r:this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{let t=e;this._defaultSearchParams=Object.keys(t).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`).join("&")}}getAlias(e){let{alias:t,src:i}=e;return Xt(t||i,r=>typeof r=="string"?r:Array.isArray(r)?r.map(s=>{var o;return(o=s?.src)!=null?o:s}):r!=null&&r.src?r.src:r,!0)}addManifest(e){this._manifest,this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){let i=[],r=t;Array.isArray(t)||(r=Object.entries(t).map(([s,o])=>typeof o=="string"||Array.isArray(o)?{alias:s,src:o}:li({alias:s},o))),r.forEach(s=>{let o=s.src,d=s.alias,h;if(typeof d=="string"){let f=this._createBundleAssetId(e,d);i.push(f),h=[d,f]}else{let f=d.map(u=>this._createBundleAssetId(e,u));i.push(...f),h=[...d,...f]}this.add(y8(li({},s),{alias:h,src:o}))}),this._bundles[e]=i}add(e){let t=[];Array.isArray(e)?t.push(...e):t.push(e);let i;Xt(t).forEach(r=>{let{src:s}=r,{data:o,format:d,loadParser:h}=r,f=Xt(s).map(y=>typeof y=="string"?u8(y):Array.isArray(y)?y:[y]),u=this.getAlias(r),p=[];f.forEach(y=>{y.forEach(_=>{var v,T,A;let P={};if(typeof _!="object"){P.src=_;for(let I=0;I<this._parsers.length;I++){let F=this._parsers[I];if(F.test(_)){P=F.parse(_);break}}}else o=(v=_.data)!=null?v:o,d=(T=_.format)!=null?T:d,h=(A=_.loadParser)!=null?A:h,P=li(li({},P),_);if(!u)throw new Error(`[Resolver] alias is undefined for this asset: ${P.src}`);P=this._buildResolvedAsset(P,{aliases:u,data:o,format:d,loadParser:h}),p.push(P)})}),u.forEach(y=>{this._assetMap[y]=p})})}resolveBundle(e){let t=Ks(e);e=Xt(e);let i={};return e.forEach(r=>{let s=this._bundles[r];if(s){let o=this.resolve(s),d={};for(let h in o){let f=o[h];d[this._extractAssetIdFromBundle(r,h)]=f}i[r]=d}}),t?i[e[0]]:i}resolveUrl(e){let t=this.resolve(e);if(typeof e!="string"){let i={};for(let r in t)i[r]=t[r].src;return i}return t.src}resolve(e){let t=Ks(e);e=Xt(e);let i={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r],o=this._getPreferredOrder(s);o?.priority.forEach(d=>{o.params[d].forEach(h=>{let f=s.filter(u=>u[d]?u[d]===h:!1);f.length&&(s=f)})}),this._resolverHash[r]=s[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});i[r]=this._resolverHash[r]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){let i=e[t],r=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;let t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){var i,r;let{aliases:s,data:o,loadParser:d,format:h}=t;return(this._basePath||this._rootPath)&&(e.src=_t.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=(i=s??e.alias)!=null?i:[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data=li(li({},o||{}),e.data),e.loadParser=d??e.loadParser,e.format=(r=h??e.format)!=null?r:x8(e.src),e}};ha.RETINA_PREFIX=/@([0-9\.]+)x/;function x8(a){return a.split(".").pop().split("?").shift().split("#").shift()}var Ud=(a,e)=>{let t=e.split("?")[1];return t&&(a+=`?${t}`),a},w2=class mr{constructor(e,t){this.linkedSheets=[],this._texture=e instanceof K?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=t;let i=parseFloat(t.meta.scale);i?(this.resolution=i,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=mr.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e,i=mr.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){let r=this._frameKeys[t],s=this._frames[r],o=s.frame;if(o){let d=null,h=null,f=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new Pe(0,0,Math.floor(f.w)/this.resolution,Math.floor(f.h)/this.resolution);s.rotated?d=new Pe(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):d=new Pe(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new Pe(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new K({source:this.textureSource,frame:d,orig:u,trim:h,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:r.toString()})}t++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){let r=e[t][i];this.animations[t].push(this.textures[r])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*mr.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*mr.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(let i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};w2.BATCH_SIZE=1e3;var Gu=w2,v8=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function A2(a,e,t){let i={};if(a.forEach(r=>{i[r]=e}),Object.keys(e.textures).forEach(r=>{i[r]=e.textures[r]}),!t){let r=_t.dirname(a[0]);e.linkedSheets.forEach((s,o)=>{let d=A2([`${r}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(i,d)})}return i}var T8={extension:B.Asset,cache:{test:a=>a instanceof Gu,getCacheableAssets:(a,e)=>A2(a,e,!1)},resolver:{extension:{type:B.ResolveParser,name:"resolveSpritesheet"},test:a=>{let e=a.split("?")[0].split("."),t=e.pop(),i=e.pop();return t==="json"&&v8.includes(i)},parse:a=>{var e,t;let i=a.split(".");return{resolution:parseFloat((t=(e=ha.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:i[i.length-2],src:a}}},loader:{name:"spritesheetLoader",extension:{type:B.LoadParser,priority:Rt.Normal,name:"spritesheetLoader"},async testParse(a,e){return _t.extname(e.src).toLowerCase()===".json"&&!!a.frames},async parse(a,e,t){var i,r,s;let{texture:o,imageFilename:d,textureOptions:h}=(i=e?.data)!=null?i:{},f=_t.dirname(e.src);f&&f.lastIndexOf("/")!==f.length-1&&(f+="/");let u;if(o instanceof K)u=o;else{let _=Ud(f+(d??a.meta.image),e.src);u=(await t.load([{src:_,data:h}]))[_]}let p=new Gu(u.source,a);await p.parse();let y=(r=a?.meta)==null?void 0:r.related_multi_packs;if(Array.isArray(y)){let _=[];for(let T of y){if(typeof T!="string")continue;let A=f+T;(s=e.data)!=null&&s.ignoreMultiPack||(A=Ud(A,e.src),_.push(t.load({src:A,data:{ignoreMultiPack:!0}})))}let v=await Promise.all(_);p.linkedSheets=v,v.forEach(T=>{T.linkedSheets=[p].concat(p.linkedSheets.filter(A=>A!==T))})}return p},async unload(a,e,t){await t.unload(a.textureSource._sourceOrigin),a.destroy(!1)}}};pe.add(T8);function E2(a,e,t){let{width:i,height:r}=t.orig,s=t.trim;if(s){let o=s.width,d=s.height;a.minX=s.x-e._x*i,a.maxX=a.minX+o,a.minY=s.y-e._y*r,a.maxY=a.minY+d}else a.minX=-e._x*i,a.maxX=a.minX+i,a.minY=-e._y*r,a.maxY=a.minY+r}var fa=class extends fe{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new qe(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){let t=this.bounds,{x:i,y:r}=e;return i>=t.minX&&i<=t.maxX&&r>=t.minY&&r<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;let e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,i){let{renderPipes:r,renderableGC:s}=t;r.blendMode.setBlendMode(this,this.groupBlendMode,e),r[this.renderPipeId].addRenderable(this,e),s.addRenderable(this),this.didViewUpdate=!1;let o=this.children,d=o.length;for(let h=0;h<d;h++)o[h].collectRenderables(e,t,i)}},S8=Object.defineProperty,qs=Object.getOwnPropertySymbols,P2=Object.prototype.hasOwnProperty,R2=Object.prototype.propertyIsEnumerable,Bu=(a,e,t)=>e in a?S8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,w8=(a,e)=>{for(var t in e||(e={}))P2.call(e,t)&&Bu(a,t,e[t]);if(qs)for(var t of qs(e))R2.call(e,t)&&Bu(a,t,e[t]);return a},A8=(a,e)=>{var t={};for(var i in a)P2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&qs)for(var i of qs(a))e.indexOf(i)<0&&R2.call(a,i)&&(t[i]=a[i]);return t},we=class a extends fa{constructor(e=K.EMPTY){e instanceof K&&(e={texture:e});let t=e,{texture:i=K.EMPTY,anchor:r,roundPixels:s,width:o,height:d}=t,h=A8(t,["texture","anchor","roundPixels","width","height"]);super(w8({label:"Sprite"},h)),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Ve({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:i.defaultAnchor&&(this.anchor=i.defaultAnchor),this.texture=i,this.allowChildren=!1,this.roundPixels=s??!1,o!==void 0&&(this.width=o),d!==void 0&&(this.height=d)}static from(e,t=!1){return e instanceof K?new a(e):new a(K.from(e,t))}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return E2(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return this.visualBounds}updateBounds(){let e=this._anchor,t=this._texture,i=this._bounds,{width:r,height:s}=t.orig;i.minX=-e._x*r,i.maxX=i.minX+r,i.minY=-e._y*s,i.maxY=i.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){var i;typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}},E8=new qe;function M2(a,e,t){let i=E8;a.measurable=!0,Bo(a,t,i),e.addBoundsMask(i),a.measurable=!1}function C2(a,e,t){let i=ca.get();a.measurable=!0;let r=it.get().identity(),s=O2(a,t,r);mf(a,i,s),a.measurable=!1,e.addBoundsMask(i),it.return(r),ca.return(i)}function O2(a,e,t){return a&&a!==e&&(O2(a.parent,e,t),a.updateLocalTransform(),t.append(a.localTransform)),t}var Zs=class{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof we),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){this.inverse||M2(this.mask,e,t)}addLocalBounds(e,t){C2(this.mask,e,t)}containsPoint(e,t){let i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof we}};Zs.extension=B.MaskEffect;var Qs=class{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}};Qs.extension=B.MaskEffect;var Js=class{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){M2(this.mask,e,t)}addLocalBounds(e,t){C2(this.mask,e,t)}containsPoint(e,t){let i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof fe}};Js.extension=B.MaskEffect;var qt=class extends Fe{constructor(e){e.resource||(e.resource=xe.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,i=this._resolution){let r=super.resize(e,t,i);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}};qt.extension=B.TextureSource;var Oa=class extends Fe{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){let t=xe.get().createCanvas(e.resource.width,e.resource.height);t.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=t}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}};Oa.extension=B.TextureSource;var Bc;async function I2(){return Bc!=null||(Bc=(async()=>{var a;let e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";let t=await new Promise(o=>{let d=document.createElement("video");d.onloadeddata=()=>o(d),d.onerror=()=>o(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!t)return"premultiply-alpha-on-upload";let i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);let r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);let s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(r),e.deleteTexture(i),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Bc}var P8=Object.defineProperty,R8=Object.defineProperties,M8=Object.getOwnPropertyDescriptors,Fu=Object.getOwnPropertySymbols,C8=Object.prototype.hasOwnProperty,O8=Object.prototype.propertyIsEnumerable,Du=(a,e,t)=>e in a?P8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Ld=(a,e)=>{for(var t in e||(e={}))C8.call(e,t)&&Du(a,t,e[t]);if(Fu)for(var t of Fu(e))O8.call(e,t)&&Du(a,t,e[t]);return a},I8=(a,e)=>R8(a,M8(e)),ks=class G2 extends Fe{constructor(e){var t;super(e),this.isReady=!1,this.uploadMethodId="video",e=Ld(Ld({},G2.defaultOptions),e),this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=(t=e.alphaMode)!=null?t:"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let e=tt.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await I2(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(tt.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(tt.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(tt.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};ks.extension=B.TextureSource,ks.defaultOptions=I8(Ld({},Fe.defaultOptions),{autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1}),ks.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var Us=ks,G8=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(a){return this._cache.has(a)}get(a){return this._cache.get(a)}set(a,e){let t=Xt(a),i;for(let d=0;d<this.parsers.length;d++){let h=this.parsers[d];if(h.test(e)){i=h.getCacheableAssets(t,e);break}}let r=new Map(Object.entries(i||{}));i||t.forEach(d=>{r.set(d,e)});let s=[...r.keys()],o={cacheKeys:s,keys:t};t.forEach(d=>{this._cacheMap.set(d,o)}),s.forEach(d=>{let h=i?i[d]:e;this._cache.has(d)&&this._cache.get(d),this._cache.set(d,r.get(d))})}remove(a){if(!this._cacheMap.has(a))return;let e=this._cacheMap.get(a);e.cacheKeys.forEach(t=>{this._cache.delete(t)}),e.keys.forEach(t=>{this._cacheMap.delete(t)})}get parsers(){return this._parsers}},Oe=new G8,Nd=[];pe.handleByList(B.TextureSource,Nd);function B2(a={}){let e=a&&a.resource,t=e?a.resource:a,i=e?a:{resource:a};for(let r=0;r<Nd.length;r++){let s=Nd[r];if(s.test(t))return new s(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function B8(a={},e=!1){let t=a&&a.resource,i=t?a.resource:a,r=t?a:{resource:a};if(!e&&Oe.has(i))return Oe.get(i);let s=new K({source:B2(r)});return s.on("destroy",()=>{Oe.has(i)&&Oe.remove(i)}),e||Oe.set(i,s),s}function F8(a,e=!1){return typeof a=="string"?Oe.get(a):a instanceof Fe?new K({source:a}):B8(a,e)}K.from=F8,Fe.from=B2,pe.add(Zs,Qs,Js,Us,Oa,qt,Cr);var Ht=class{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(let i in e){let r=e[i];this.setResource(r,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let e=[],t=0;for(let i in this.resources)e[t++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,t){var i,r;let s=this.resources[t];e!==s&&(s&&((i=e.off)==null||i.call(e,"change",this.onResourceChange,this)),(r=e.on)==null||r.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){let t=this.resources;for(let i in t)t[i]._touched=e}destroy(){var e;let t=this.resources;for(let i in t){let r=t[i];(e=r.off)==null||e.call(r,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){let t=this.resources;for(let i in t)t[i]===e&&(t[i]=null)}else this._updateKey()}},nr;function F2(){return(!nr||nr!=null&&nr.isContextLost())&&(nr=xe.get().createCanvas().getContext("webgl",{})),nr}var D8=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function k8(a){let e="";for(let t=0;t<a;++t)t>0&&(e+=`
else `),t<a-1&&(e+=`if(test == ${t}.0){}`);return e}function U8(a,e){if(a===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){let i=D8.replace(/%forloop%/gi,k8(a));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))a=a/2|0;else break}}finally{e.deleteShader(t)}return a}var ui=null;function Ii(){var a;if(ui)return ui;let e=F2();return ui=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),ui=U8(ui,e),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),ui}var D2={};function yf(a,e){let t=2166136261;for(let i=0;i<e;i++)t^=a[i].uid,t=Math.imul(t,16777619),t>>>=0;return D2[t]||L8(a,e,t)}var Fc=0;function L8(a,e,t){let i={},r=0;Fc||(Fc=Ii());for(let o=0;o<Fc;o++){let d=o<e?a[o]:K.EMPTY.source;i[r++]=d.source,i[r++]=d.style}let s=new Ht(i);return D2[t]=s,s}var Ra=class{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}};function jd(a,e){let t=a.byteLength/8|0,i=new Float64Array(a,0,t);new Float64Array(e,0,t).set(i);let r=a.byteLength-t*8;if(r>0){let s=new Uint8Array(a,t*8,r);new Uint8Array(e,t*8,r).set(s)}}var N8={normal:"normal-npm",add:"add-npm",screen:"screen-npm"},Ne=(a=>(a[a.DISABLED=0]="DISABLED",a[a.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",a[a.MASK_ACTIVE=2]="MASK_ACTIVE",a[a.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",a[a.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",a[a.NONE=5]="NONE",a))(Ne||{});function Ir(a,e){return e.alphaMode==="no-premultiply-alpha"&&N8[a]||a}var Xd=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){let t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}},j8=Object.defineProperty,ku=Object.getOwnPropertySymbols,X8=Object.prototype.hasOwnProperty,H8=Object.prototype.propertyIsEnumerable,Uu=(a,e,t)=>e in a?j8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Lu=(a,e)=>{for(var t in e||(e={}))X8.call(e,t)&&Uu(a,t,e[t]);if(ku)for(var t of ku(e))H8.call(e,t)&&Uu(a,t,e[t]);return a},Hd=class{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new Xd,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}},k2=[],zd=0;function Nu(){return zd>0?k2[--zd]:new Hd}function ju(a){k2[zd++]=a}var or=0,U2=class Ls{constructor(e={}){this.uid=Be("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[];var t;Ls.defaultOptions.maxTextures=(t=Ls.defaultOptions.maxTextures)!=null?t:Ii(),e=Lu(Lu({},Ls.defaultOptions),e);let{maxTextures:i,attributesInitialSize:r,indicesInitialSize:s}=e;this.attributeBuffer=new Ra(r*4),this.indexBuffer=new Uint16Array(s),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)ju(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){let i=e._batch.textures.ids[t._source.uid];return!i&&i!==0?!1:(e._textureId=i,e.texture=t,!0)}updateElement(e){this.dirty=!0;let t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){let t=this._elements;if(!t[this.elementStart])return;let i=Nu(),r=i.textures;r.clear();let s=t[this.elementStart],o=Ir(s.blendMode,s.texture._source),d=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let h=this.attributeBuffer.float32View,f=this.attributeBuffer.uint32View,u=this.indexBuffer,p=this._batchIndexSize,y=this._batchIndexStart,_="startBatch",v=this.maxTextures;for(let T=this.elementStart;T<this.elementSize;++T){let A=t[T];t[T]=null;let P=A.texture._source,I=Ir(A.blendMode,P),F=o!==I||d!==A.topology;if(P._batchTick===or&&!F){A._textureId=P._textureBindLocation,p+=A.indexSize,A.packAsQuad?(this.packQuadAttributes(A,h,f,A._attributeStart,A._textureId),this.packQuadIndex(u,A._indexStart,A._attributeStart/this.vertexSize)):(this.packAttributes(A,h,f,A._attributeStart,A._textureId),this.packIndex(A,u,A._indexStart,A._attributeStart/this.vertexSize)),A._batch=i;continue}P._batchTick=or,(r.count>=v||F)&&(this._finishBatch(i,y,p-y,r,o,d,e,_),_="renderBatch",y=p,o=I,d=A.topology,i=Nu(),r=i.textures,r.clear(),++or),A._textureId=P._textureBindLocation=r.count,r.ids[P.uid]=r.count,r.textures[r.count++]=P,A._batch=i,p+=A.indexSize,A.packAsQuad?(this.packQuadAttributes(A,h,f,A._attributeStart,A._textureId),this.packQuadIndex(u,A._indexStart,A._attributeStart/this.vertexSize)):(this.packAttributes(A,h,f,A._attributeStart,A._textureId),this.packIndex(A,u,A._indexStart,A._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(i,y,p-y,r,o,d,e,_),y=p,++or),this.elementStart=this.elementSize,this._batchIndexStart=y,this._batchIndexSize=p}_finishBatch(e,t,i,r,s,o,d,h){e.gpuBindGroup=null,e.bindGroup=null,e.action=h,e.batcher=this,e.textures=r,e.blendMode=s,e.topology=o,e.start=t,e.size=i,++or,this.batches[this.batchIndex++]=e,d.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){let t=Math.max(e,this.attributeBuffer.size*2),i=new Ra(t);jd(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){let t=this.indexBuffer,i=Math.max(e,t.length*1.5);i+=i%2;let r=i>65535?new Uint32Array(i):new Uint16Array(i);if(r.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let s=0;s<t.length;s++)r[s]=t[s];else jd(t.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(e,t,i){e[t]=i+0,e[t+1]=i+1,e[t+2]=i+2,e[t+3]=i+0,e[t+4]=i+2,e[t+5]=i+3}packIndex(e,t,i,r){let s=e.indices,o=e.indexSize,d=e.indexOffset,h=e.attributeOffset;for(let f=0;f<o;f++)t[i++]=r+s[f+d]-h}destroy(){for(let e=0;e<this.batches.length;e++)ju(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};U2.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};var z8=U2,ve=(a=>(a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE",a[a.STATIC=1024]="STATIC",a))(ve||{}),rt=class extends xt{constructor(e){let{data:t,size:i}=e,{usage:r,label:s,shrinkToFit:o}=e;super(),this.uid=Be("buffer"),this._resourceType="buffer",this._resourceId=Be("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,i!=null||(i=t?.byteLength);let d=!!t;this.descriptor={size:i,usage:r,mappedAtCreation:d,label:s},this.shrinkToFit=o??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&ve.STATIC)}set static(e){e?this.descriptor.usage|=ve.STATIC:this.descriptor.usage&=~ve.STATIC}setDataWithSize(e,t,i){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){i&&this.emit("update",this);return}let r=this._data;if(this._data=e,this._dataInt32=null,!r||r.length!==e.length){!this.shrinkToFit&&r&&e.byteLength<r.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Be("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function L2(a,e){if(!(a instanceof rt)){let t=e?ve.INDEX:ve.VERTEX;a instanceof Array&&(e?(a=new Uint32Array(a),t=ve.INDEX|ve.COPY_DST):(a=new Float32Array(a),t=ve.VERTEX|ve.COPY_DST)),a=new rt({data:a,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return a}function V8(a,e,t){let i=a.getAttribute(e);if(!i)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;let r=i.buffer.data,s=1/0,o=1/0,d=-1/0,h=-1/0,f=r.BYTES_PER_ELEMENT,u=(i.offset||0)/f,p=(i.stride||2*4)/f;for(let y=u;y<r.length;y+=p){let _=r[y],v=r[y+1];_>d&&(d=_),v>h&&(h=v),_<s&&(s=_),v<o&&(o=v)}return t.minX=s,t.minY=o,t.maxX=d,t.maxY=h,t}function W8(a){return(a instanceof rt||Array.isArray(a)||a.BYTES_PER_ELEMENT)&&(a={buffer:a}),a.buffer=L2(a.buffer,!1),a}var Zt=class extends xt{constructor(e={}){var t;super(),this.uid=Be("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new qe,this._boundsDirty=!0;let{attributes:i,indexBuffer:r,topology:s}=e;if(this.buffers=[],this.attributes={},i)for(let o in i)this.addAttribute(o,i[o]);this.instanceCount=(t=e.instanceCount)!=null?t:1,r&&this.addIndex(r),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(let e in this.attributes){let t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){let i=W8(t);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=i}addIndex(e){this.indexBuffer=L2(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,V8(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}},Y8=new Float32Array(1),$8=new Uint32Array(1),Vd=class extends Zt{constructor(){let e=new rt({data:Y8,label:"attribute-batch-buffer",usage:ve.VERTEX|ve.COPY_DST,shrinkToFit:!1}),t=new rt({data:$8,label:"index-batch-buffer",usage:ve.INDEX|ve.COPY_DST,shrinkToFit:!1}),i=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:i,offset:0},aUV:{buffer:e,format:"float32x2",stride:i,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:i,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:i,offset:5*4}},indexBuffer:t})}},Dc=Object.create(null),Xu=Object.create(null);function Gr(a,e){let t=Xu[a];return t===void 0&&(Dc[e]===void 0&&(Dc[e]=1),Xu[a]=t=Dc[e]++),t}var _s;function K8(){if(!_s){_s="mediump";let a=F2();a&&a.getShaderPrecisionFormat&&(_s=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision?"highp":"mediump")}return _s}function q8(a,e,t){return e?a:t?(a=a.replace("out vec4 finalColor;",""),`

#ifdef GL_ES // This checks if it is WebGL1
#define in varying
#define finalColor gl_FragColor
#define texture texture2D
#endif
${a}
`):`

#ifdef GL_ES // This checks if it is WebGL1
#define in attribute
#define out varying
#endif
${a}
`}function Z8(a,e,t){let i=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(a.substring(0,9)!=="precision"){let r=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return r==="highp"&&i!=="highp"&&(r="mediump"),`precision ${r} float;
${a}`}else if(i!=="highp"&&a.substring(0,15)==="precision highp")return a.replace("precision highp","precision mediump");return a}function Q8(a,e){return e?`#version 300 es
${a}`:a}var J8={},e6={};function t6(a,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";let i=t?J8:e6;return i[e]?(i[e]++,e+=`-${i[e]}`):i[e]=1,a.indexOf("#define SHADER_NAME")!==-1?a:`${`#define SHADER_NAME ${e}`}
${a}`}function a6(a,e){return e?a.replace("#version 300 es",""):a}var i6=Object.defineProperty,Hu=Object.getOwnPropertySymbols,r6=Object.prototype.hasOwnProperty,s6=Object.prototype.propertyIsEnumerable,zu=(a,e,t)=>e in a?i6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Vu=(a,e)=>{for(var t in e||(e={}))r6.call(e,t)&&zu(a,t,e[t]);if(Hu)for(var t of Hu(e))s6.call(e,t)&&zu(a,t,e[t]);return a},kc={stripVersion:a6,ensurePrecision:Z8,addProgramDefines:q8,setProgramName:t6,insertVersion:Q8},Uc=Object.create(null),N2=class Wd{constructor(e){e=Vu(Vu({},Wd.defaultOptions),e);let t=e.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:K8()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t},r=e.fragment,s=e.vertex;Object.keys(kc).forEach(o=>{let d=i[o];r=kc[o](r,d,!0),s=kc[o](s,d,!1)}),this.fragment=r,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Gr(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){let t=`${e.vertex}:${e.fragment}`;return Uc[t]||(Uc[t]=new Wd(e)),Uc[t]}};N2.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};var ua=N2,Wu={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Ia(a){var e;return(e=Wu[a])!=null?e:Wu.float32}var n6={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function o6({source:a,entryPoint:e}){var t;let i={},r=a.indexOf(`fn ${e}`);if(r!==-1){let s=a.indexOf("->",r);if(s!==-1){let o=a.substring(r,s),d=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g,h;for(;(h=d.exec(o))!==null;){let f=(t=n6[h[3]])!=null?t:"float32";i[h[2]]={location:parseInt(h[1],10),format:f,stride:Ia(f).stride,offset:0,instance:!1,start:0}}}}return i}function Lc(a){var e,t,i;let r=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,s=/@group\((\d+)\)/,o=/@binding\((\d+)\)/,d=/var(<[^>]+>)? (\w+)/,h=/:\s*(\w+)/,f=/struct\s+(\w+)\s*{([^}]+)}/g,u=/(\w+)\s*:\s*([\w\<\>]+)/g,p=/struct\s+(\w+)/,y=(e=a.match(r))==null?void 0:e.map(v=>({group:parseInt(v.match(s)[1],10),binding:parseInt(v.match(o)[1],10),name:v.match(d)[2],isUniform:v.match(d)[1]==="<uniform>",type:v.match(h)[1]}));if(!y)return{groups:[],structs:[]};let _=(i=(t=a.match(f))==null?void 0:t.map(v=>{let T=v.match(p)[1],A=v.match(u).reduce((P,I)=>{let[F,D]=I.split(":");return P[F.trim()]=D.trim(),P},{});return A?{name:T,members:A}:null}).filter(({name:v})=>y.some(T=>T.type===v)))!=null?i:[];return{groups:y,structs:_}}var _r=(a=>(a[a.VERTEX=1]="VERTEX",a[a.FRAGMENT=2]="FRAGMENT",a[a.COMPUTE=4]="COMPUTE",a))(_r||{});function c6({groups:a}){let e=[];for(let t=0;t<a.length;t++){let i=a[t];e[i.group]||(e[i.group]=[]),i.isUniform?e[i.group].push({binding:i.binding,visibility:_r.VERTEX|_r.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?e[i.group].push({binding:i.binding,visibility:_r.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&e[i.group].push({binding:i.binding,visibility:_r.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function d6({groups:a}){let e=[];for(let t=0;t<a.length;t++){let i=a[t];e[i.group]||(e[i.group]={}),e[i.group][i.name]=i.binding}return e}function h6(a,e){let t=new Set,i=new Set,r=[...a.structs,...e.structs].filter(o=>t.has(o.name)?!1:(t.add(o.name),!0)),s=[...a.groups,...e.groups].filter(o=>{let d=`${o.name}-${o.binding}`;return i.has(d)?!1:(i.add(d),!0)});return{structs:r,groups:s}}var Nc=Object.create(null),Qt=class a{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;var t,i;let{fragment:r,vertex:s,layout:o,gpuLayout:d,name:h}=e;if(this.name=h,this.fragment=r,this.vertex=s,r.source===s.source){let f=Lc(r.source);this.structsAndGroups=f}else{let f=Lc(s.source),u=Lc(r.source);this.structsAndGroups=h6(f,u)}this.layout=o??d6(this.structsAndGroups),this.gpuLayout=d??c6(this.structsAndGroups),this.autoAssignGlobalUniforms=((t=this.layout[0])==null?void 0:t.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((i=this.layout[1])==null?void 0:i.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:e,fragment:t}=this,i=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Gr(i,"program")}get attributeData(){var e;return(e=this._attributeData)!=null||(this._attributeData=o6(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){let t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Nc[t]||(Nc[t]=new a(e)),Nc[t]}};function Yu(a,e,t){if(a)for(let i in a){let r=i.toLocaleLowerCase(),s=e[r];if(s){let o=a[i];i==="header"&&(o=o.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&s.push(`//----${t}----//`),s.push(o)}}}var f6=/\{\{(.*?)\}\}/g;function $u(a){var e,t;let i={};return((t=(e=a.match(f6))==null?void 0:e.map(r=>r.replace(/[{()}]/g,"")))!=null?t:[]).forEach(r=>{i[r]=[]}),i}function Ku(a,e){let t,i=/@in\s+([^;]+);/g;for(;(t=i.exec(a))!==null;)e.push(t[1])}function qu(a,e,t=!1){let i=[];Ku(e,i),a.forEach(d=>{d.header&&Ku(d.header,i)});let r=i;t&&r.sort();let s=r.map((d,h)=>`       @location(${h}) ${d},`).join(`
`),o=e.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`
${s}
`),o}function Zu(a,e){let t,i=/@out\s+([^;]+);/g;for(;(t=i.exec(a))!==null;)e.push(t[1])}function l6(a){let e=/\b(\w+)\s*:/g.exec(a);return e?e[1]:""}function u6(a){let e=/@.*?\s+/g;return a.replace(e,"")}function b6(a,e){let t=[];Zu(e,t),a.forEach(h=>{h.header&&Zu(h.header,t)});let i=0,r=t.sort().map(h=>h.indexOf("builtin")>-1?h:`@location(${i++}) ${h}`).join(`,
`),s=t.sort().map(h=>`       var ${u6(h)};`).join(`
`),o=`return VSOutput(
${t.sort().map(h=>` ${l6(h)}`).join(`,
`)});`,d=e.replace(/@out\s+[^;]+;\s*/g,"");return d=d.replace("{{struct}}",`
${r}
`),d=d.replace("{{start}}",`
${s}
`),d=d.replace("{{return}}",`
${o}
`),d}function Qu(a,e){let t=a;for(let i in e){let r=e[i];r.join(`
`).length?t=t.replace(`{{${i}}}`,`//-----${i} START-----//
${r.join(`
`)}
//----${i} FINISH----//`):t=t.replace(`{{${i}}}`,"")}return t}var Ya=Object.create(null),jc=new Map,p6=0;function g6({template:a,bits:e}){let t=j2(a,e);if(Ya[t])return Ya[t];let{vertex:i,fragment:r}=_6(a,e);return Ya[t]=X2(i,r,e),Ya[t]}function m6({template:a,bits:e}){let t=j2(a,e);return Ya[t]||(Ya[t]=X2(a.vertex,a.fragment,e)),Ya[t]}function _6(a,e){let t=e.map(o=>o.vertex).filter(o=>!!o),i=e.map(o=>o.fragment).filter(o=>!!o),r=qu(t,a.vertex,!0);r=b6(t,r);let s=qu(i,a.fragment,!0);return{vertex:r,fragment:s}}function j2(a,e){return e.map(t=>(jc.has(t)||jc.set(t,p6++),jc.get(t))).sort((t,i)=>t-i).join("-")+a.vertex+a.fragment}function X2(a,e,t){let i=$u(a),r=$u(e);return t.forEach(s=>{Yu(s.vertex,i,s.name),Yu(s.fragment,r,s.name)}),{vertex:Qu(a,i),fragment:Qu(e,r)}}var y6=`
@in aPosition: vec2<f32>;
@in aUV: vec2<f32>;

@out @builtin(position) vPosition: vec4<f32>;
@out vUV : vec2<f32>;
@out vColor : vec4<f32>;

{{header}}

struct VSOutput {
{{struct}}
};

@vertex
fn main( {{in}} ) -> VSOutput {

var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
var modelMatrix = mat3x3<f32>(
1.0, 0.0, 0.0,
0.0, 1.0, 0.0,
0.0, 0.0, 1.0
);
var position = aPosition;
var uv = aUV;

{{start}}

vColor = vec4<f32>(1., 1., 1., 1.);

{{main}}

vUV = uv;

var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

vColor *= globalUniforms.uWorldColorAlpha;

{{end}}

{{return}}
};
`,x6=`
@in vUV : vec2<f32>;
@in vColor : vec4<f32>;

{{header}}

@fragment
fn main(
{{in}}
) -> @location(0) vec4<f32> {

{{start}}

var outColor:vec4<f32>;

{{main}}

var finalColor:vec4<f32> = outColor * vColor;

{{end}}

return finalColor;
};
`,v6=`
in vec2 aPosition;
in vec2 aUV;

out vec4 vColor;
out vec2 vUV;

{{header}}

void main(void){

mat3 worldTransformMatrix = uWorldTransformMatrix;
mat3 modelMatrix = mat3(
1.0, 0.0, 0.0,
0.0, 1.0, 0.0,
0.0, 0.0, 1.0
);
vec2 position = aPosition;
vec2 uv = aUV;

{{start}}

vColor = vec4(1.);

{{main}}

vUV = uv;

mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

vColor *= uWorldColorAlpha;

{{end}}
}
`,T6=`

in vec4 vColor;
in vec2 vUV;

out vec4 finalColor;

{{header}}

void main(void) {

{{start}}

vec4 outColor;

{{main}}

finalColor = outColor * vColor;

{{end}}
}
`,S6={name:"global-uniforms-bit",vertex:{header:`
struct GlobalUniforms {
uProjectionMatrix:mat3x3<f32>,
uWorldTransformMatrix:mat3x3<f32>,
uWorldColorAlpha: vec4<f32>,
uResolution: vec2<f32>,
}

@group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
`}};var w6={name:"global-uniforms-bit",vertex:{header:`
uniform mat3 uProjectionMatrix;
uniform mat3 uWorldTransformMatrix;
uniform vec4 uWorldColorAlpha;
uniform vec2 uResolution;
`}},A6=Object.defineProperty,Ju=Object.getOwnPropertySymbols,E6=Object.prototype.hasOwnProperty,P6=Object.prototype.propertyIsEnumerable,e0=(a,e,t)=>e in a?A6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,R6=(a,e)=>{for(var t in e||(e={}))E6.call(e,t)&&e0(a,t,e[t]);if(Ju)for(var t of Ju(e))P6.call(e,t)&&e0(a,t,e[t]);return a};function Vr({bits:a,name:e}){let t=g6({template:{fragment:x6,vertex:y6},bits:[S6,...a]});return Qt.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function Wr({bits:a,name:e}){return new ua(R6({name:e},m6({template:{vertex:v6,fragment:T6},bits:[w6,...a]})))}var xf={name:"color-bit",vertex:{header:`
@in aColor: vec4<f32>;
`,main:`
vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
`}},vf={name:"color-bit",vertex:{header:`
in vec4 aColor;
`,main:`
vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
`}},Xc={};function M6(a){let e=[];if(a===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let i=0;i<a;i++)e.push(`@group(1) @binding(${t++}) var textureSource${i+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${i+1}: sampler;`)}return e.join(`
`)}function C6(a){let e=[];if(a===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<a;t++)t===a-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function Tf(a){return Xc[a]||(Xc[a]={name:"texture-batch-bit",vertex:{header:`
@in aTextureIdAndRound: vec2<u32>;
@out @interpolate(flat) vTextureId : u32;
`,main:`
vTextureId = aTextureIdAndRound.y;
`,end:`
if(aTextureIdAndRound.x == 1)
{
vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`},fragment:{header:`
@in @interpolate(flat) vTextureId: u32;

${M6(a)}
`,main:`
var uvDx = dpdx(vUV);
var uvDy = dpdy(vUV);

${C6(a)}
`}}),Xc[a]}var Hc={};function O6(a){let e=[];for(let t=0;t<a;t++)t>0&&e.push("else"),t<a-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function Sf(a){return Hc[a]||(Hc[a]={name:"texture-batch-bit",vertex:{header:`
in vec2 aTextureIdAndRound;
out float vTextureId;

`,main:`
vTextureId = aTextureIdAndRound.y;
`,end:`
if(aTextureIdAndRound.x == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`},fragment:{header:`
in float vTextureId;

uniform sampler2D uTextures[${a}];

`,main:`

${O6(a)}
`}}),Hc[a]}var Yr={name:"round-pixels-bit",vertex:{header:`
fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
{
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}
`}},$r={name:"round-pixels-bit",vertex:{header:`   
vec2 roundPixels(vec2 position, vec2 targetSize)
{       
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}
`}},H2=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],I6=H2.reduce((a,e)=>(a[e]=!0,a),{});function G6(a,e){switch(a){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var B6=Object.defineProperty,t0=Object.getOwnPropertySymbols,F6=Object.prototype.hasOwnProperty,D6=Object.prototype.propertyIsEnumerable,a0=(a,e,t)=>e in a?B6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,i0=(a,e)=>{for(var t in e||(e={}))F6.call(e,t)&&a0(a,t,e[t]);if(t0)for(var t of t0(e))D6.call(e,t)&&a0(a,t,e[t]);return a},z2=class V2{constructor(e,t){this._touched=0,this.uid=Be("uniform"),this._resourceType="uniformGroup",this._resourceId=Be("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1;var i,r;t=i0(i0({},V2.defaultOptions),t),this.uniformStructures=e;let s={};for(let o in e){let d=e[o];if(d.name=o,d.size=(i=d.size)!=null?i:1,!I6[d.type])throw new Error(`Uniform type ${d.type} is not supported. Supported uniform types are: ${H2.join(", ")}`);(r=d.value)!=null||(d.value=G6(d.type,d.size)),s[o]=d.value}this.uniforms=s,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Gr(Object.keys(s).map(o=>`${o}-${e[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};z2.defaultOptions={ubo:!1,isStatic:!1};var Je=z2,r0={};function wf(a){let e=r0[a];if(e)return e;let t=new Int32Array(a);for(let i=0;i<a;i++)t[i]=i;return e=r0[a]=new Je({uTextures:{value:t,type:"i32",size:a}},{isStatic:!0}),e}var yt=(a=>(a[a.WEBGL=1]="WEBGL",a[a.WEBGPU=2]="WEBGPU",a[a.BOTH=3]="BOTH",a))(yt||{}),k6=Object.defineProperty,en=Object.getOwnPropertySymbols,W2=Object.prototype.hasOwnProperty,Y2=Object.prototype.propertyIsEnumerable,s0=(a,e,t)=>e in a?k6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,U6=(a,e)=>{for(var t in e||(e={}))W2.call(e,t)&&s0(a,t,e[t]);if(en)for(var t of en(e))Y2.call(e,t)&&s0(a,t,e[t]);return a},L6=(a,e)=>{var t={};for(var i in a)W2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&en)for(var i of en(a))e.indexOf(i)<0&&Y2.call(a,i)&&(t[i]=a[i]);return t},ht=class a extends xt{constructor(e){super(),this.uid=Be("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:t,glProgram:i,groups:r,resources:s,compatibleRenderers:o,groupMap:d}=e;this.gpuProgram=t,this.glProgram=i,o===void 0&&(o=0,t&&(o|=yt.WEBGPU),i&&(o|=yt.WEBGL)),this.compatibleRenderers=o;let h={};if(!s&&!r&&(s={}),s&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&r&&!d)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&r&&d)for(let f in d)for(let u in d[f]){let p=d[f][u];h[p]={group:f,binding:u,name:p}}else if(t&&r&&!d){let f=t.structsAndGroups.groups;d={},f.forEach(u=>{d[u.group]=d[u.group]||{},d[u.group][u.binding]=u.name,h[u.name]=u})}else if(s){r={},d={},t&&t.structsAndGroups.groups.forEach(u=>{d[u.group]=d[u.group]||{},d[u.group][u.binding]=u.name,h[u.name]=u});let f=0;for(let u in s)h[u]||(r[99]||(r[99]=new Ht,this._ownedBindGroups.push(r[99])),h[u]={group:99,binding:f,name:u},d[99]=d[99]||{},d[99][f]=u,f++);for(let u in s){let p=u,y=s[u];!y.source&&!y._resourceType&&(y=new Je(y));let _=h[p];_&&(r[_.group]||(r[_.group]=new Ht,this._ownedBindGroups.push(r[_.group])),r[_.group].setResource(y,_.binding))}}this.groups=r,this._uniformBindMap=d,this.resources=this._buildResourceAccessor(r,h)}addResource(e,t,i){var r,s;(r=this._uniformBindMap)[t]||(r[t]={}),(s=this._uniformBindMap[t])[i]||(s[i]=e),this.groups[t]||(this.groups[t]=new Ht,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){let i={};for(let r in t){let s=t[r];Object.defineProperty(i,s.name,{get(){return e[s.group].getResource(s.binding)},set(o){e[s.group].setResource(o,s.binding)}})}return i}destroy(e=!1){var t,i;this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(r=>{r.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){let t=e,{gpu:i,gl:r}=t,s=L6(t,["gpu","gl"]),o,d;return i&&(o=Qt.from(i)),r&&(d=ua.from(r)),new a(U6({gpuProgram:o,glProgram:d},s))}},Yd=class extends ht{constructor(e){let t=Wr({name:"batch",bits:[vf,Sf(e),$r]}),i=Vr({name:"batch",bits:[xf,Tf(e),Yr]});super({glProgram:t,gpuProgram:i,resources:{batchSamplers:wf(e)}})}},n0=null,$2=class K2 extends z8{constructor(){super(...arguments),this.geometry=new Vd,this.shader=n0||(n0=new Yd(this.maxTextures)),this.name=K2.extension.name,this.vertexSize=6}packAttributes(e,t,i,r,s){let o=s<<16|e.roundPixels&65535,d=e.transform,h=d.a,f=d.b,u=d.c,p=d.d,y=d.tx,_=d.ty,{positions:v,uvs:T}=e,A=e.color,P=e.attributeOffset,I=P+e.attributeSize;for(let F=P;F<I;F++){let D=F*2,H=v[D],N=v[D+1];t[r++]=h*H+u*N+y,t[r++]=p*N+f*H+_,t[r++]=T[D],t[r++]=T[D+1],i[r++]=A,i[r++]=o}}packQuadAttributes(e,t,i,r,s){let o=e.texture,d=e.transform,h=d.a,f=d.b,u=d.c,p=d.d,y=d.tx,_=d.ty,v=e.bounds,T=v.maxX,A=v.minX,P=v.maxY,I=v.minY,F=o.uvs,D=e.color,H=s<<16|e.roundPixels&65535;t[r+0]=h*A+u*I+y,t[r+1]=p*I+f*A+_,t[r+2]=F.x0,t[r+3]=F.y0,i[r+4]=D,i[r+5]=H,t[r+6]=h*T+u*I+y,t[r+7]=p*I+f*T+_,t[r+8]=F.x1,t[r+9]=F.y1,i[r+10]=D,i[r+11]=H,t[r+12]=h*T+u*P+y,t[r+13]=p*P+f*T+_,t[r+14]=F.x2,t[r+15]=F.y2,i[r+16]=D,i[r+17]=H,t[r+18]=h*A+u*P+y,t[r+19]=p*P+f*A+_,t[r+20]=F.x3,t[r+21]=F.y3,i[r+22]=D,i[r+23]=H}};$2.extension={type:[B.Batcher],name:"default"};var Af=$2;function N6(a,e,t,i,r,s,o,d=null){let h=0;t*=e,r*=s;let f=d.a,u=d.b,p=d.c,y=d.d,_=d.tx,v=d.ty;for(;h<o;){let T=a[t],A=a[t+1];i[r]=f*T+p*A+_,i[r+1]=u*T+y*A+v,r+=s,t+=e,h++}}function j6(a,e,t,i){let r=0;for(e*=t;r<i;)a[e]=0,a[e+1]=0,e+=t,r++}function q2(a,e,t,i,r){let s=e.a,o=e.b,d=e.c,h=e.d,f=e.tx,u=e.ty;t||(t=0),i||(i=2),r||(r=a.length/i-t);let p=t*i;for(let y=0;y<r;y++){let _=a[p],v=a[p+1];a[p]=s*_+d*v+f,a[p+1]=o*_+h*v+u,p+=i}}var X6=new ie,Br=class{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){let e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,i=this.renderable;return i?f2(t,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||X6}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}},H6=Object.defineProperty,z6=Object.defineProperties,V6=Object.getOwnPropertyDescriptors,o0=Object.getOwnPropertySymbols,W6=Object.prototype.hasOwnProperty,Y6=Object.prototype.propertyIsEnumerable,c0=(a,e,t)=>e in a?H6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,tn=(a,e)=>{for(var t in e||(e={}))W6.call(e,t)&&c0(a,t,e[t]);if(o0)for(var t of o0(e))Y6.call(e,t)&&c0(a,t,e[t]);return a},an=(a,e)=>z6(a,V6(e)),Fr={extension:{type:B.ShapeBuilder,name:"circle"},build(a,e){let t,i,r,s,o,d;if(a.type==="circle"){let D=a;t=D.x,i=D.y,o=d=D.radius,r=s=0}else if(a.type==="ellipse"){let D=a;t=D.x,i=D.y,o=D.halfWidth,d=D.halfHeight,r=s=0}else{let D=a,H=D.width/2,N=D.height/2;t=D.x+H,i=D.y+N,o=d=Math.max(0,Math.min(D.radius,Math.min(H,N))),r=H-o,s=N-d}if(!(o>=0&&d>=0&&r>=0&&s>=0))return e;let h=Math.ceil(2.3*Math.sqrt(o+d)),f=h*8+(r?4:0)+(s?4:0);if(f===0)return e;if(h===0)return e[0]=e[6]=t+r,e[1]=e[3]=i+s,e[2]=e[4]=t-r,e[5]=e[7]=i-s,e;let u=0,p=h*4+(r?2:0)+2,y=p,_=f,v=r+o,T=s,A=t+v,P=t-v,I=i+T;if(e[u++]=A,e[u++]=I,e[--p]=I,e[--p]=P,s){let D=i-T;e[y++]=P,e[y++]=D,e[--_]=D,e[--_]=A}for(let D=1;D<h;D++){let H=Math.PI/2*(D/h),N=r+Math.cos(H)*o,j=s+Math.sin(H)*d,re=t+N,ce=t-N,Z=i+j,q=i-j;e[u++]=re,e[u++]=Z,e[--p]=Z,e[--p]=ce,e[y++]=ce,e[y++]=q,e[--_]=q,e[--_]=re}v=r,T=s+d,A=t+v,P=t-v,I=i+T;let F=i-T;return e[u++]=A,e[u++]=I,e[--_]=F,e[--_]=A,r&&(e[u++]=P,e[u++]=I,e[--_]=F,e[--_]=P),e},triangulate(a,e,t,i,r,s){if(a.length===0)return;let o=0,d=0;for(let u=0;u<a.length;u+=2)o+=a[u],d+=a[u+1];o/=a.length/2,d/=a.length/2;let h=i;e[h*t]=o,e[h*t+1]=d;let f=h++;for(let u=0;u<a.length;u+=2)e[h*t]=a[u],e[h*t+1]=a[u+1],u>0&&(r[s++]=h,r[s++]=f,r[s++]=h-1),h++;r[s++]=f+1,r[s++]=f,r[s++]=h-1}},$6=an(tn({},Fr),{extension:an(tn({},Fr.extension),{name:"ellipse"})}),K6=an(tn({},Fr),{extension:an(tn({},Fr.extension),{name:"roundedRectangle"})}),Z2=1e-4,d0=1e-4;function q6(a){let e=a.length;if(e<6)return 1;let t=0;for(let i=0,r=a[e-2],s=a[e-1];i<e;i+=2){let o=a[i],d=a[i+1];t+=(o-r)*(d+s),r=o,s=d}return t<0?-1:1}function h0(a,e,t,i,r,s,o,d){let h=a-t*r,f=e-i*r,u=a+t*s,p=e+i*s,y,_;o?(y=i,_=-t):(y=-i,_=t);let v=h+y,T=f+_,A=u+y,P=p+_;return d.push(v,T),d.push(A,P),2}function La(a,e,t,i,r,s,o,d){let h=t-a,f=i-e,u=Math.atan2(h,f),p=Math.atan2(r-a,s-e);d&&u<p?u+=Math.PI*2:!d&&u>p&&(p+=Math.PI*2);let y=u,_=p-u,v=Math.abs(_),T=Math.sqrt(h*h+f*f),A=(15*v*Math.sqrt(T)/Math.PI>>0)+1,P=_/A;if(y+=P,d){o.push(a,e),o.push(t,i);for(let I=1,F=y;I<A;I++,F+=P)o.push(a,e),o.push(a+Math.sin(F)*T,e+Math.cos(F)*T);o.push(a,e),o.push(r,s)}else{o.push(t,i),o.push(a,e);for(let I=1,F=y;I<A;I++,F+=P)o.push(a+Math.sin(F)*T,e+Math.cos(F)*T),o.push(a,e);o.push(r,s),o.push(a,e)}return A*2}function Z6(a,e,t,i,r,s){let o=Z2;if(a.length===0)return;let d=e,h=d.alignment;if(e.alignment!==.5){let Ae=q6(a);t&&(Ae*=-1),h=(h-.5)*Ae+.5}let f=new Ce(a[0],a[1]),u=new Ce(a[a.length-2],a[a.length-1]),p=i,y=Math.abs(f.x-u.x)<o&&Math.abs(f.y-u.y)<o;if(p){a=a.slice(),y&&(a.pop(),a.pop(),u.set(a[a.length-2],a[a.length-1]));let Ae=(f.x+u.x)*.5,Ot=(u.y+f.y)*.5;a.unshift(Ae,Ot),a.push(Ae,Ot)}let _=r,v=a.length/2,T=a.length,A=_.length/2,P=d.width/2,I=P*P,F=d.miterLimit*d.miterLimit,D=a[0],H=a[1],N=a[2],j=a[3],re=0,ce=0,Z=-(H-j),q=D-N,se=0,te=0,Ie=Math.sqrt(Z*Z+q*q);Z/=Ie,q/=Ie,Z*=P,q*=P;let Tt=h,ne=(1-Tt)*2,de=Tt*2;p||(d.cap==="round"?T+=La(D-Z*(ne-de)*.5,H-q*(ne-de)*.5,D-Z*ne,H-q*ne,D+Z*de,H+q*de,_,!0)+2:d.cap==="square"&&(T+=h0(D,H,Z,q,ne,de,!0,_))),_.push(D-Z*ne,H-q*ne),_.push(D+Z*de,H+q*de);for(let Ae=1;Ae<v-1;++Ae){D=a[(Ae-1)*2],H=a[(Ae-1)*2+1],N=a[Ae*2],j=a[Ae*2+1],re=a[(Ae+1)*2],ce=a[(Ae+1)*2+1],Z=-(H-j),q=D-N,Ie=Math.sqrt(Z*Z+q*q),Z/=Ie,q/=Ie,Z*=P,q*=P,se=-(j-ce),te=N-re,Ie=Math.sqrt(se*se+te*te),se/=Ie,te/=Ie,se*=P,te*=P;let Ot=N-D,ma=H-j,ta=N-re,_a=ce-j,ji=Ot*ta+ma*_a,Vt=ma*ta-_a*Ot,ya=Vt<0;if(Math.abs(Vt)<.001*Math.abs(ji)){_.push(N-Z*ne,j-q*ne),_.push(N+Z*de,j+q*de),ji>=0&&(d.join==="round"?T+=La(N,j,N-Z*ne,j-q*ne,N-se*ne,j-te*ne,_,!1)+4:T+=2,_.push(N-se*de,j-te*de),_.push(N+se*ne,j+te*ne));continue}let xa=(-Z+D)*(-q+j)-(-Z+N)*(-q+H),Fa=(-se+re)*(-te+j)-(-se+N)*(-te+ce),va=(Ot*Fa-ta*xa)/Vt,Ta=(_a*xa-ma*Fa)/Vt,Da=(va-N)*(va-N)+(Ta-j)*(Ta-j),It=N+(va-N)*ne,Gt=j+(Ta-j)*ne,Bt=N-(va-N)*de,Ft=j-(Ta-j)*de,Xi=Math.min(Ot*Ot+ma*ma,ta*ta+_a*_a),ri=ya?ne:de,si=Xi+ri*ri*I;Da<=si?d.join==="bevel"||Da/I>F?(ya?(_.push(It,Gt),_.push(N+Z*de,j+q*de),_.push(It,Gt),_.push(N+se*de,j+te*de)):(_.push(N-Z*ne,j-q*ne),_.push(Bt,Ft),_.push(N-se*ne,j-te*ne),_.push(Bt,Ft)),T+=2):d.join==="round"?ya?(_.push(It,Gt),_.push(N+Z*de,j+q*de),T+=La(N,j,N+Z*de,j+q*de,N+se*de,j+te*de,_,!0)+4,_.push(It,Gt),_.push(N+se*de,j+te*de)):(_.push(N-Z*ne,j-q*ne),_.push(Bt,Ft),T+=La(N,j,N-Z*ne,j-q*ne,N-se*ne,j-te*ne,_,!1)+4,_.push(N-se*ne,j-te*ne),_.push(Bt,Ft)):(_.push(It,Gt),_.push(Bt,Ft)):(_.push(N-Z*ne,j-q*ne),_.push(N+Z*de,j+q*de),d.join==="round"?ya?T+=La(N,j,N+Z*de,j+q*de,N+se*de,j+te*de,_,!0)+2:T+=La(N,j,N-Z*ne,j-q*ne,N-se*ne,j-te*ne,_,!1)+2:d.join==="miter"&&Da/I<=F&&(ya?(_.push(Bt,Ft),_.push(Bt,Ft)):(_.push(It,Gt),_.push(It,Gt)),T+=2),_.push(N-se*ne,j-te*ne),_.push(N+se*de,j+te*de),T+=2)}D=a[(v-2)*2],H=a[(v-2)*2+1],N=a[(v-1)*2],j=a[(v-1)*2+1],Z=-(H-j),q=D-N,Ie=Math.sqrt(Z*Z+q*q),Z/=Ie,q/=Ie,Z*=P,q*=P,_.push(N-Z*ne,j-q*ne),_.push(N+Z*de,j+q*de),p||(d.cap==="round"?T+=La(N-Z*(ne-de)*.5,j-q*(ne-de)*.5,N-Z*ne,j-q*ne,N+Z*de,j+q*de,_,!1)+2:d.cap==="square"&&(T+=h0(N,j,Z,q,ne,de,!1,_)));let Ni=d0*d0;for(let Ae=A;Ae<T+A-2;++Ae)D=_[Ae*2],H=_[Ae*2+1],N=_[(Ae+1)*2],j=_[(Ae+1)*2+1],re=_[(Ae+2)*2],ce=_[(Ae+2)*2+1],!(Math.abs(D*(j-ce)+N*(ce-H)+re*(H-j))<Ni)&&s.push(Ae,Ae+1,Ae+2)}function Q6(a,e,t,i){let r=Z2;if(a.length===0)return;let s=a[0],o=a[1],d=a[a.length-2],h=a[a.length-1],f=e||Math.abs(s-d)<r&&Math.abs(o-h)<r,u=t,p=a.length/2,y=u.length/2;for(let _=0;_<p;_++)u.push(a[_*2]),u.push(a[_*2+1]);for(let _=0;_<p-1;_++)i.push(y+_,y+_+1);f&&i.push(y+p-1,y)}var Fo={exports:{}},rS=Fo.exports;Fo.exports=Do;var sS=Fo.exports.default=Do;function Do(a,e,t){t=t||2;var i=e&&e.length,r=i?e[0]*t:a.length,s=Q2(a,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;var d,h,f,u,p,y,_;if(i&&(s=i7(a,e,s,t)),a.length>80*t){d=f=a[0],h=u=a[1];for(var v=t;v<r;v+=t)p=a[v],y=a[v+1],p<d&&(d=p),y<h&&(h=y),p>f&&(f=p),y>u&&(u=y);_=Math.max(f-d,u-h),_=_!==0?32767/_:0}return Dr(s,o,t,d,h,_,0),o}function Q2(a,e,t,i,r){var s,o;if(r===qd(a,e,t,i)>0)for(s=e;s<t;s+=i)o=f0(s,a[s],a[s+1],o);else for(s=t-i;s>=e;s-=i)o=f0(s,a[s],a[s+1],o);return o&&ko(o,o.next)&&(Ur(o),o=o.next),o}function qa(a,e){if(!a)return a;e||(e=a);var t=a,i;do if(i=!1,!t.steiner&&(ko(t,t.next)||Ue(t.prev,t,t.next)===0)){if(Ur(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Dr(a,e,t,i,r,s,o){if(a){!o&&s&&c7(a,i,r,s);for(var d=a,h,f;a.prev!==a.next;){if(h=a.prev,f=a.next,s?e7(a,i,r,s):J6(a)){e.push(h.i/t|0),e.push(a.i/t|0),e.push(f.i/t|0),Ur(a),a=f.next,d=f.next;continue}if(a=f,a===d){o?o===1?(a=t7(qa(a),e,t),Dr(a,e,t,i,r,s,2)):o===2&&a7(a,e,t,i,r,s):Dr(qa(a),e,t,i,r,s,1);break}}}}function J6(a){var e=a.prev,t=a,i=a.next;if(Ue(e,t,i)>=0)return!1;for(var r=e.x,s=t.x,o=i.x,d=e.y,h=t.y,f=i.y,u=r<s?r<o?r:o:s<o?s:o,p=d<h?d<f?d:f:h<f?h:f,y=r>s?r>o?r:o:s>o?s:o,_=d>h?d>f?d:f:h>f?h:f,v=i.next;v!==e;){if(v.x>=u&&v.x<=y&&v.y>=p&&v.y<=_&&xi(r,d,s,h,o,f,v.x,v.y)&&Ue(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function e7(a,e,t,i){var r=a.prev,s=a,o=a.next;if(Ue(r,s,o)>=0)return!1;for(var d=r.x,h=s.x,f=o.x,u=r.y,p=s.y,y=o.y,_=d<h?d<f?d:f:h<f?h:f,v=u<p?u<y?u:y:p<y?p:y,T=d>h?d>f?d:f:h>f?h:f,A=u>p?u>y?u:y:p>y?p:y,P=$d(_,v,e,t,i),I=$d(T,A,e,t,i),F=a.prevZ,D=a.nextZ;F&&F.z>=P&&D&&D.z<=I;){if(F.x>=_&&F.x<=T&&F.y>=v&&F.y<=A&&F!==r&&F!==o&&xi(d,u,h,p,f,y,F.x,F.y)&&Ue(F.prev,F,F.next)>=0||(F=F.prevZ,D.x>=_&&D.x<=T&&D.y>=v&&D.y<=A&&D!==r&&D!==o&&xi(d,u,h,p,f,y,D.x,D.y)&&Ue(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;F&&F.z>=P;){if(F.x>=_&&F.x<=T&&F.y>=v&&F.y<=A&&F!==r&&F!==o&&xi(d,u,h,p,f,y,F.x,F.y)&&Ue(F.prev,F,F.next)>=0)return!1;F=F.prevZ}for(;D&&D.z<=I;){if(D.x>=_&&D.x<=T&&D.y>=v&&D.y<=A&&D!==r&&D!==o&&xi(d,u,h,p,f,y,D.x,D.y)&&Ue(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function t7(a,e,t){var i=a;do{var r=i.prev,s=i.next.next;!ko(r,s)&&J2(r,i,i.next,s)&&kr(r,s)&&kr(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Ur(i),Ur(i.next),i=a=s),i=i.next}while(i!==a);return qa(i)}function a7(a,e,t,i,r,s){var o=a;do{for(var d=o.next.next;d!==o.prev;){if(o.i!==d.i&&f7(o,d)){var h=ep(o,d);o=qa(o,o.next),h=qa(h,h.next),Dr(o,e,t,i,r,s,0),Dr(h,e,t,i,r,s,0);return}d=d.next}o=o.next}while(o!==a)}function i7(a,e,t,i){var r=[],s,o,d,h,f;for(s=0,o=e.length;s<o;s++)d=e[s]*i,h=s<o-1?e[s+1]*i:a.length,f=Q2(a,d,h,i,!1),f===f.next&&(f.steiner=!0),r.push(h7(f));for(r.sort(r7),s=0;s<r.length;s++)t=s7(r[s],t);return t}function r7(a,e){return a.x-e.x}function s7(a,e){var t=n7(a,e);if(!t)return e;var i=ep(t,a);return qa(i,i.next),qa(t,t.next)}function n7(a,e){var t=e,i=a.x,r=a.y,s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){var d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s&&(s=d,o=t.x<t.next.x?t:t.next,d===i))return o}t=t.next}while(t!==e);if(!o)return null;var h=o,f=o.x,u=o.y,p=1/0,y;t=o;do i>=t.x&&t.x>=f&&i!==t.x&&xi(r<u?i:s,r,f,u,r<u?s:i,r,t.x,t.y)&&(y=Math.abs(r-t.y)/(i-t.x),kr(t,a)&&(y<p||y===p&&(t.x>o.x||t.x===o.x&&o7(o,t)))&&(o=t,p=y)),t=t.next;while(t!==h);return o}function o7(a,e){return Ue(a.prev,a,e.prev)<0&&Ue(e.next,a,a.next)<0}function c7(a,e,t,i){var r=a;do r.z===0&&(r.z=$d(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==a);r.prevZ.nextZ=null,r.prevZ=null,d7(r)}function d7(a){var e,t,i,r,s,o,d,h,f=1;do{for(t=a,a=null,s=null,o=0;t;){for(o++,i=t,d=0,e=0;e<f&&(d++,i=i.nextZ,!!i);e++);for(h=f;d>0||h>0&&i;)d!==0&&(h===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,d--):(r=i,i=i.nextZ,h--),s?s.nextZ=r:a=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(o>1);return a}function $d(a,e,t,i,r){return a=(a-t)*r|0,e=(e-i)*r|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a|e<<1}function h7(a){var e=a,t=a;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==a);return t}function xi(a,e,t,i,r,s,o,d){return(r-o)*(e-d)>=(a-o)*(s-d)&&(a-o)*(i-d)>=(t-o)*(e-d)&&(t-o)*(s-d)>=(r-o)*(i-d)}function f7(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!l7(a,e)&&(kr(a,e)&&kr(e,a)&&u7(a,e)&&(Ue(a.prev,a,e.prev)||Ue(a,e.prev,e))||ko(a,e)&&Ue(a.prev,a,a.next)>0&&Ue(e.prev,e,e.next)>0)}function Ue(a,e,t){return(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y)}function ko(a,e){return a.x===e.x&&a.y===e.y}function J2(a,e,t,i){var r=xs(Ue(a,e,t)),s=xs(Ue(a,e,i)),o=xs(Ue(t,i,a)),d=xs(Ue(t,i,e));return!!(r!==s&&o!==d||r===0&&ys(a,t,e)||s===0&&ys(a,i,e)||o===0&&ys(t,a,i)||d===0&&ys(t,e,i))}function ys(a,e,t){return e.x<=Math.max(a.x,t.x)&&e.x>=Math.min(a.x,t.x)&&e.y<=Math.max(a.y,t.y)&&e.y>=Math.min(a.y,t.y)}function xs(a){return a>0?1:a<0?-1:0}function l7(a,e){var t=a;do{if(t.i!==a.i&&t.next.i!==a.i&&t.i!==e.i&&t.next.i!==e.i&&J2(t,t.next,a,e))return!0;t=t.next}while(t!==a);return!1}function kr(a,e){return Ue(a.prev,a,a.next)<0?Ue(a,e,a.next)>=0&&Ue(a,a.prev,e)>=0:Ue(a,e,a.prev)<0||Ue(a,a.next,e)<0}function u7(a,e){var t=a,i=!1,r=(a.x+e.x)/2,s=(a.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==a);return i}function ep(a,e){var t=new Kd(a.i,a.x,a.y),i=new Kd(e.i,e.x,e.y),r=a.next,s=e.prev;return a.next=e,e.prev=a,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function f0(a,e,t,i){var r=new Kd(a,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ur(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Kd(a,e,t){this.i=a,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Do.deviation=function(a,e,t,i){var r=e&&e.length,s=r?e[0]*t:a.length,o=Math.abs(qd(a,0,s,t));if(r)for(var d=0,h=e.length;d<h;d++){var f=e[d]*t,u=d<h-1?e[d+1]*t:a.length;o-=Math.abs(qd(a,f,u,t))}var p=0;for(d=0;d<i.length;d+=3){var y=i[d]*t,_=i[d+1]*t,v=i[d+2]*t;p+=Math.abs((a[y]-a[v])*(a[_+1]-a[y+1])-(a[y]-a[_])*(a[v+1]-a[y+1]))}return o===0&&p===0?0:Math.abs((p-o)/o)};function qd(a,e,t,i){for(var r=0,s=e,o=t-i;s<t;s+=i)r+=(a[o]-a[s])*(a[s+1]+a[o+1]),o=s;return r}Do.flatten=function(a){for(var e=a[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,r=0;r<a.length;r++){for(var s=0;s<a[r].length;s++)for(var o=0;o<e;o++)t.vertices.push(a[r][s][o]);r>0&&(i+=a[r-1].length,t.holes.push(i))}return t};var b7=Fo.exports,p7=bf(b7);function tp(a,e,t,i,r,s,o){let d=p7(a,e,2);if(!d)return;for(let f=0;f<d.length;f+=3)s[o++]=d[f]+r,s[o++]=d[f+1]+r,s[o++]=d[f+2]+r;let h=r*i;for(let f=0;f<a.length;f+=2)t[h]=a[f],t[h+1]=a[f+1],h+=i}var g7=[],m7={extension:{type:B.ShapeBuilder,name:"polygon"},build(a,e){for(let t=0;t<a.points.length;t++)e[t]=a.points[t];return e},triangulate(a,e,t,i,r,s){tp(a,g7,e,t,i,r,s)}},_7={extension:{type:B.ShapeBuilder,name:"rectangle"},build(a,e){let t=a,i=t.x,r=t.y,s=t.width,o=t.height;return s>=0&&o>=0&&(e[0]=i,e[1]=r,e[2]=i+s,e[3]=r,e[4]=i+s,e[5]=r+o,e[6]=i,e[7]=r+o),e},triangulate(a,e,t,i,r,s){let o=0;i*=t,e[i+o]=a[0],e[i+o+1]=a[1],o+=t,e[i+o]=a[2],e[i+o+1]=a[3],o+=t,e[i+o]=a[6],e[i+o+1]=a[7],o+=t,e[i+o]=a[4],e[i+o+1]=a[5],o+=t;let d=i/t;r[s++]=d,r[s++]=d+1,r[s++]=d+2,r[s++]=d+1,r[s++]=d+3,r[s++]=d+2}},y7={extension:{type:B.ShapeBuilder,name:"triangle"},build(a,e){return e[0]=a.x,e[1]=a.y,e[2]=a.x2,e[3]=a.y2,e[4]=a.x3,e[5]=a.y3,e},triangulate(a,e,t,i,r,s){let o=0;i*=t,e[i+o]=a[0],e[i+o+1]=a[1],o+=t,e[i+o]=a[2],e[i+o+1]=a[3],o+=t,e[i+o]=a[4],e[i+o+1]=a[5];let d=i/t;r[s++]=d,r[s++]=d+1,r[s++]=d+2}},Uo={};pe.handleByMap(B.ShapeBuilder,Uo),pe.add(_7,m7,y7,Fr,$6,K6);var x7=new Pe;function v7(a,e){let{geometryData:t,batches:i}=e;i.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let r=0;r<a.instructions.length;r++){let s=a.instructions[r];if(s.action==="texture")T7(s.data,i,t);else if(s.action==="fill"||s.action==="stroke"){let o=s.action==="stroke",d=s.data.path.shapePath,h=s.data.style,f=s.data.hole;o&&f&&l0(f.shapePath,h,null,!0,i,t),l0(d,h,f,o,i,t)}}}function T7(a,e,t){let{vertices:i,uvs:r,indices:s}=t,o=s.length,d=i.length/2,h=[],f=Uo.rectangle,u=x7,p=a.image;u.x=a.dx,u.y=a.dy,u.width=a.dw,u.height=a.dh;let y=a.transform;f.build(u,h),y&&q2(h,y),f.triangulate(h,i,2,d,s,o);let _=p.uvs;r.push(_.x0,_.y0,_.x1,_.y1,_.x3,_.y3,_.x2,_.y2);let v=ye.get(Br);v.indexOffset=o,v.indexSize=s.length-o,v.attributeOffset=d,v.attributeSize=i.length/2-d,v.baseColor=a.style,v.alpha=a.alpha,v.texture=p,v.geometryData=t,e.push(v)}function l0(a,e,t,i,r,s){let{vertices:o,uvs:d,indices:h}=s,f=a.shapePrimitives.length-1;a.shapePrimitives.forEach(({shape:u,transform:p},y)=>{var _;let v=h.length,T=o.length/2,A=[],P=Uo[u.type],I="triangle-list";if(P.build(u,A),p&&q2(A,p),i){let N=(_=u.closePath)!=null?_:!0,j=e;j.pixelLine?(Q6(A,N,o,h),I="line-list"):Z6(A,j,!1,N,o,h)}else if(t&&f===y){let N=[],j=A.slice();S7(t.shapePath).forEach(re=>{N.push(j.length/2),j.push(...re)}),tp(j,N,o,2,T,h,v)}else P.triangulate(A,o,2,T,h,v);let F=d.length/2,D=e.texture;if(D!==K.WHITE){let N=e.matrix;N&&(p&&N.append(p.clone().invert()),N6(o,2,T,d,F,2,o.length/2-T,N))}else j6(d,F,2,o.length/2-T);let H=ye.get(Br);H.indexOffset=v,H.indexSize=h.length-v,H.attributeOffset=T,H.attributeSize=o.length/2-T,H.baseColor=e.color,H.alpha=e.alpha,H.texture=D,H.geometryData=s,H.topology=I,r.push(H)})}function S7(a){if(!a)return[];let e=a.shapePrimitives,t=[];for(let i=0;i<e.length;i++){let r=e[i].shape,s=[];Uo[r.type].build(r,s),t.push(s)}return t}var Zd=class{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}},Qd=class{constructor(){this.batcher=new Af,this.instructions=new zs}init(){this.instructions.reset()}get geometry(){return this.batcher.geometry}},Jd=class eh{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){var t;eh.defaultOptions.bezierSmoothness=(t=e?.bezierSmoothness)!=null?t:eh.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),v7(e,t);let i=e.batchMode;e.customShader||i==="no-batch"?t.isBatchable=!1:i==="auto"&&(t.isBatchable=t.geometryData.vertices.length<400),e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){let t=ye.get(Qd),{batches:i,geometryData:r}=this._gpuContextHash[e.uid],s=r.vertices.length,o=r.indices.length;for(let u=0;u<i.length;u++)i[u].applyTransform=!1;let d=t.batcher;d.ensureAttributeBuffer(s),d.ensureIndexBuffer(o),d.begin();for(let u=0;u<i.length;u++){let p=i[u];d.add(p)}d.finish(t.instructions);let h=d.geometry;h.indexBuffer.setDataWithSize(d.indexBuffer,d.indexSize,!0),h.buffers[0].setDataWithSize(d.attributeBuffer.float32View,d.attributeSize,!0);let f=d.batches;for(let u=0;u<f.length;u++){let p=f[u];p.bindGroup=yf(p.textures.textures,p.textures.count)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){let t=new Zd;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){let t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(ye.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(i=>{ye.return(i)})}destroy(){for(let e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};Jd.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"graphicsContext"},Jd.defaultOptions={bezierSmoothness:.5};var Ef=Jd,w7={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},zc=0,Vc=1,Wc=2,Yc=3,$c=4,Kc=5,th=class ap{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<zc)}set blend(e){!!(this.data&1<<zc)!==e&&(this.data^=1<<zc)}get offsets(){return!!(this.data&1<<Vc)}set offsets(e){!!(this.data&1<<Vc)!==e&&(this.data^=1<<Vc)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<Wc)}set culling(e){!!(this.data&1<<Wc)!==e&&(this.data^=1<<Wc)}get depthTest(){return!!(this.data&1<<Yc)}set depthTest(e){!!(this.data&1<<Yc)!==e&&(this.data^=1<<Yc)}get depthMask(){return!!(this.data&1<<Kc)}set depthMask(e){!!(this.data&1<<Kc)!==e&&(this.data^=1<<Kc)}get clockwiseFrontFace(){return!!(this.data&1<<$c)}set clockwiseFrontFace(e){!!(this.data&1<<$c)!==e&&(this.data^=1<<$c)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=w7[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){let e=new ap;return e.depthTest=!1,e.blend=!0,e}};th.default2d=th.for2d();var Et=th;function Kr(a,e,t){let i=(a>>24&255)/255;e[t++]=(a&255)/255*i,e[t++]=(a>>8&255)/255*i,e[t++]=(a>>16&255)/255*i,e[t++]=i}var rn=class{constructor(e,t){this.state=Et.for2d(),this._graphicsBatchesHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=t,this._adaptor.init(),this.renderer.renderableGC.addManagedHash(this,"_graphicsBatchesHash")}validateRenderable(e){let t=e.context,i=!!this._graphicsBatchesHash[e.uid],r=this.renderer.graphicsContext.updateGpuContext(t);return!!(r.isBatchable||i!==r.isBatchable)}addRenderable(e,t){let i=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),i.isBatchable?this._addToBatcher(e,t):(this.renderer.renderPipes.batch.break(t),t.add(e))}updateRenderable(e){let t=this._graphicsBatchesHash[e.uid];if(t)for(let i=0;i<t.length;i++){let r=t[i];r._batcher.updateElement(r)}}destroyRenderable(e){this._graphicsBatchesHash[e.uid]&&this._removeBatchForRenderable(e.uid),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;let t=this.renderer,i=e.context;if(!t.graphicsContext.getGpuContext(i).batches.length)return;let r=i.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;let s=r.resources.localUniforms.uniforms;s.uTransformMatrix=e.groupTransform,s.uRound=t._roundPixels|e._roundPixels,Kr(e.groupColorAlpha,s.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){let t=!!this._graphicsBatchesHash[e.uid],i=this.renderer.graphicsContext.updateGpuContext(e.context);t&&this._removeBatchForRenderable(e.uid),i.isBatchable&&this._initBatchesForRenderable(e),e.batched=i.isBatchable}_addToBatcher(e,t){let i=this.renderer.renderPipes.batch,r=this._getBatchesForRenderable(e);for(let s=0;s<r.length;s++){let o=r[s];i.addToBatch(o,t)}}_getBatchesForRenderable(e){return this._graphicsBatchesHash[e.uid]||this._initBatchesForRenderable(e)}_initBatchesForRenderable(e){let t=e.context,i=this.renderer.graphicsContext.getGpuContext(t),r=this.renderer._roundPixels|e._roundPixels,s=i.batches.map(o=>{let d=ye.get(Br);return o.copyTo(d),d.renderable=e,d.roundPixels=r,d});return this._graphicsBatchesHash[e.uid]===void 0&&e.on("destroyed",this._destroyRenderableBound),this._graphicsBatchesHash[e.uid]=s,s}_removeBatchForRenderable(e){this._graphicsBatchesHash[e].forEach(t=>{ye.return(t)}),this._graphicsBatchesHash[e]=null}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null;for(let e in this._graphicsBatchesHash)this._removeBatchForRenderable(e);this._graphicsBatchesHash=null}};rn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"graphics"},pe.add(rn),pe.add(Ef);var Lr=class{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){let e=this.geometry.getBuffer("aUV"),t=e.data,i=t,r=this.texture.textureMatrix;return r.isSimple||(i=this._transformedUvs,(this._textureMatrixUpdateId!==r._updateID||this._uvUpdateId!==e._updateID)&&((!i||i.length<t.length)&&(i=this._transformedUvs=new Float32Array(t.length)),this._textureMatrixUpdateId=r._updateID,this._uvUpdateId=e._updateID,r.multiplyUvs(t,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}},sn=class{constructor(e,t){this.localUniforms=new Je({uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new Ht({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=t,this._adaptor.init(),e.renderableGC.addManagedHash(this,"_gpuBatchableMeshHash"),e.renderableGC.addManagedHash(this,"_meshDataHash")}validateRenderable(e){let t=this._getMeshData(e),i=t.batched,r=e.batched;if(t.batched=r,i!==r)return!0;if(r){let s=e._geometry;if(s.indices.length!==t.indexSize||s.positions.length!==t.vertexSize)return t.indexSize=s.indices.length,t.vertexSize=s.positions.length,!0;let o=this._getBatchableMesh(e);return!o._batcher.checkAndUpdateTexture(o,e.texture)}return!1}addRenderable(e,t){let i=this.renderer.renderPipes.batch,{batched:r}=this._getMeshData(e);if(r){let s=this._getBatchableMesh(e);s.texture=e._texture,s.geometry=e._geometry,i.addToBatch(s,t)}else i.break(t),t.add(e)}updateRenderable(e){if(e.batched){let t=this._gpuBatchableMeshHash[e.uid];t.setTexture(e._texture),t.geometry=e._geometry,t._batcher.updateElement(t)}}destroyRenderable(e){this._meshDataHash[e.uid]=null;let t=this._gpuBatchableMeshHash[e.uid];t&&(ye.return(t),this._gpuBatchableMeshHash[e.uid]=null),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;e.state.blendMode=Ir(e.groupBlendMode,e.texture._source);let t=this.localUniforms;t.uniforms.uTransformMatrix=e.groupTransform,t.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,t.update(),Kr(e.groupColorAlpha,t.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){return this._meshDataHash[e.uid]||this._initMeshData(e)}_initMeshData(e){var t,i;return this._meshDataHash[e.uid]={batched:e.batched,indexSize:(t=e._geometry.indices)==null?void 0:t.length,vertexSize:(i=e._geometry.positions)==null?void 0:i.length},e.on("destroyed",this._destroyRenderableBound),this._meshDataHash[e.uid]}_getBatchableMesh(e){return this._gpuBatchableMeshHash[e.uid]||this._initBatchableMesh(e)}_initBatchableMesh(e){let t=ye.get(Lr);return t.renderable=e,t.texture=e._texture,t.transform=e.groupTransform,t.roundPixels=this.renderer._roundPixels|e._roundPixels,this._gpuBatchableMeshHash[e.uid]=t,t}destroy(){for(let e in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[e]&&ye.return(this._gpuBatchableMeshHash[e]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}};sn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"mesh"},pe.add(sn);var ah=class{execute(e,t){let i=e.state,r=e.renderer,s=t.shader||e.defaultShader;s.resources.uTexture=t.texture._source,s.resources.uniforms=e.localUniforms;let o=r.gl,d=e.getBuffers(t);r.shader.bind(s),r.state.set(i),r.geometry.bind(d.geometry,s.glProgram);let h=d.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;o.drawElements(o.TRIANGLES,t.particleChildren.length*6,h,0)}};function u0(a,e=null){let t=a*6;if(t>65535?e||(e=new Uint32Array(t)):e||(e=new Uint16Array(t)),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let i=0,r=0;i<t;i+=6,r+=4)e[i+0]=r+0,e[i+1]=r+1,e[i+2]=r+2,e[i+3]=r+0,e[i+4]=r+2,e[i+5]=r+3;return e}function A7(a){return{dynamicUpdate:b0(a,!0),staticUpdate:b0(a,!1)}}function b0(a,e){let t=[];t.push(`

var index = 0;

for (let i = 0; i < ps.length; ++i)
{
const p = ps[i];

`);let i=0;for(let s in a){let o=a[s];if(e!==o.dynamic)continue;t.push(`offset = index + ${i}`),t.push(o.code);let d=Ia(o.format);i+=d.stride/4}t.push(`
index += stride * 4;
}
`),t.unshift(`
var stride = ${i};
`);let r=t.join(`
`);return new Function("ps","f32v","u32v",r)}var ih=class{constructor(e){this._size=0,this._generateParticleUpdateCache={};var t;let i=this._size=(t=e.size)!=null?t:1e3,r=e.properties,s=0,o=0;for(let p in r){let y=r[p],_=Ia(y.format);y.dynamic?o+=_.stride:s+=_.stride}this._dynamicStride=o/4,this._staticStride=s/4,this.staticAttributeBuffer=new Ra(i*4*s),this.dynamicAttributeBuffer=new Ra(i*4*o),this.indexBuffer=u0(i);let d=new Zt,h=0,f=0;this._staticBuffer=new rt({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:ve.VERTEX|ve.COPY_DST}),this._dynamicBuffer=new rt({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:ve.VERTEX|ve.COPY_DST});for(let p in r){let y=r[p],_=Ia(y.format);y.dynamic?(d.addAttribute(y.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:h*4,format:y.format}),h+=_.size):(d.addAttribute(y.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:f*4,format:y.format}),f+=_.size)}d.addIndex(this.indexBuffer);let u=this.getParticleUpdate(r);this._dynamicUpload=u.dynamicUpdate,this._staticUpload=u.staticUpdate,this.geometry=d}getParticleUpdate(e){let t=E7(e);return this._generateParticleUpdateCache[t]?this._generateParticleUpdateCache[t]:(this._generateParticleUpdateCache[t]=this.generateParticleUpdate(e),this._generateParticleUpdateCache[t])}generateParticleUpdate(e){return A7(e)}update(e,t){e.length>this._size&&(t=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new Ra(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new Ra(this._size*this._dynamicStride*4*4),this.indexBuffer=u0(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));let i=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,i.float32View,i.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),t){let r=this.staticAttributeBuffer;this._staticUpload(e,r.float32View,r.uint32View),this._staticBuffer.setDataWithSize(r.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}};function E7(a){let e=[];for(let t in a){let i=a[t];e.push(t,i.code,i.dynamic?"d":"s")}return e.join("_")}var P7=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
vec4 color = texture2D(uTexture, vUV) * vColor;
gl_FragColor = color;
}`,R7=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
float cosRotation = cos(aRotation);
float sinRotation = sin(aRotation);
float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

vec2 v = vec2(x, y);
v = v + aPosition;

gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

if(uRound == 1.0)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}

vUV = aUV;
vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,p0=`
struct ParticleUniforms {
uProjectionMatrix:mat3x3<f32>,
uColor:vec4<f32>,
uResolution:vec2<f32>,
uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>,
@location(1) color : vec4<f32>,
};
@vertex
fn mainVertex(
@location(0) aVertex: vec2<f32>,
@location(1) aPosition: vec2<f32>,
@location(2) aUV: vec2<f32>,
@location(3) aColor: vec4<f32>,
@location(4) aRotation: f32,
) -> VSOutput {

let v = vec2(
aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
) + aPosition;

let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

return VSOutput(
position,
aUV,
vColor,
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@location(1) color: vec4<f32>,
@builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

var sample = textureSample(uTexture, uSampler, uv) * color;

return sample;
}`,rh=class extends ht{constructor(){let e=ua.from({vertex:R7,fragment:P7}),t=Qt.from({fragment:{source:p0,entryPoint:"mainFragment"},vertex:{source:p0,entryPoint:"mainVertex"}});super({glProgram:e,gpuProgram:t,resources:{uTexture:K.WHITE.source,uSampler:new g2({}),uniforms:{uTranslationMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Ee(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}},nn=class{constructor(e,t){this.state=Et.for2d(),this._gpuBufferHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.localUniforms=new Je({uTranslationMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=e,this.adaptor=t,this.defaultShader=new rh,this.state=Et.for2d()}validateRenderable(e){return!1}addRenderable(e,t){this.renderer.renderPipes.batch.break(t),t.add(e)}getBuffers(e){return this._gpuBufferHash[e.uid]||this._initBuffer(e)}_initBuffer(e){return this._gpuBufferHash[e.uid]=new ih({size:e.particleChildren.length,properties:e._properties}),e.on("destroyed",this._destroyRenderableBound),this._gpuBufferHash[e.uid]}updateRenderable(e){}destroyRenderable(e){this._gpuBufferHash[e.uid].destroy(),this._gpuBufferHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}execute(e){let t=e.particleChildren;if(t.length===0)return;let i=this.renderer,r=this.getBuffers(e);e.texture||(e.texture=t[0].texture);let s=this.state;r.update(t,e._childrenDirty),e._childrenDirty=!1,s.blendMode=Ir(e.blendMode,e.texture._source);let o=this.localUniforms.uniforms,d=o.uTranslationMatrix;e.worldTransform.copyTo(d),d.prepend(i.globalUniforms.globalUniformData.projectionMatrix),o.uResolution=i.globalUniforms.globalUniformData.resolution,o.uRound=i._roundPixels|e._roundPixels,Kr(e.groupColorAlpha,o.uColor,0),this.adaptor.execute(this,e)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}},on=class extends nn{constructor(e){super(e,new ah)}};on.extension={type:[B.WebGLPipes],name:"particle"};var sh=class{execute(e,t){let i=e.renderer,r=t.shader||e.defaultShader;r.groups[0]=i.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),r.groups[1]=i.texture.getTextureBindGroup(t.texture);let s=e.state,o=e.getBuffers(t);i.encoder.draw({geometry:o.geometry,shader:t.shader||e.defaultShader,state:s,size:t.particleChildren.length*6})}},cn=class extends nn{constructor(e){super(e,new sh)}};cn.extension={type:[B.WebGPUPipes],name:"particle"},pe.add(on),pe.add(cn);var Ri=class{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}};function nh(a,e){let{texture:t,bounds:i}=a;E2(i,e._anchor,t);let r=e._style.padding;i.minX-=r,i.minY-=r,i.maxX-=r,i.maxY-=r}var dn=class{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let e in this._gpuText){let t=this._gpuText[e];if(!t)continue;let i=t.batchableSprite.renderable;i._autoResolution&&(i._resolution=this._renderer.resolution,i.onViewUpdate())}}validateRenderable(e){let t=this._getGpuText(e),i=e._getKey();return t.currentKey!==i}addRenderable(e,t){let i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),t._batcher.updateElement(t)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){let t=this._gpuText[e];this._renderer.canvasText.decreaseReferenceCount(t.currentKey),ye.return(t.batchableSprite),this._gpuText[e]=null}_updateText(e){let t=e._getKey(),i=this._getGpuText(e),r=i.batchableSprite;i.currentKey!==t&&this._updateGpuText(e),e._didTextUpdate=!1,nh(r,e)}_updateGpuText(e){let t=this._getGpuText(e),i=t.batchableSprite;t.texture&&this._renderer.canvasText.decreaseReferenceCount(t.currentKey),t.texture=i.texture=this._renderer.canvasText.getManagedTexture(e),t.currentKey=e._getKey(),i.texture=t.texture}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){let t={texture:null,currentKey:"--",batchableSprite:ye.get(Ri)};return t.batchableSprite.renderable=e,t.batchableSprite.transform=e.groupTransform,t.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},t.batchableSprite.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuText[e.uid]=t,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._updateText(e),e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}};dn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"text"};var oh=class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){let i=xe.get().createCanvas();i.width=e,i.height=t;let r=i.getContext("2d");return{canvas:i,context:r}}getOptimalCanvasAndContext(e,t,i=1){e=Math.ceil(e*i-1e-6),t=Math.ceil(t*i-1e-6),e=Ei(e),t=Ei(t);let r=(e<<17)+(t<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let s=this._canvasPool[r].pop();return s||(s=this._createCanvasAndContext(e,t)),s}returnCanvasAndContext(e){let t=e.canvas,{width:i,height:r}=t,s=(i<<17)+(r<<1);e.context.clearRect(0,0,i,r),this._canvasPool[s].push(e)}clear(){this._canvasPool={}}},da=new oh;function g0(a,e,t){for(let i=0,r=4*t*e;i<e;++i,r+=4)if(a[r+3]!==0)return!1;return!0}function m0(a,e,t,i,r){let s=4*e;for(let o=i,d=i*s+4*t;o<=r;++o,d+=s)if(a[d+3]!==0)return!1;return!0}function M7(a,e=1){let{width:t,height:i}=a,r=a.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");let s=r.getImageData(0,0,t,i).data,o=0,d=0,h=t-1,f=i-1;for(;d<i&&g0(s,t,d);)++d;if(d===i)return Pe.EMPTY;for(;g0(s,t,f);)--f;for(;m0(s,t,o,d,f);)++o;for(;m0(s,t,h,d,f);)--h;return++h,++f,new Pe(o/e,d/e,(h-o)/e,(f-d)/e)}var ip=class ch{constructor(e,t,i,r){this.uid=Be("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=e,this.y0=t,this.x1=i,this.y1=r}addColorStop(e,t){return this.gradientStops.push({offset:e,color:Ee.shared.setValue(t).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;let e=ch.defaultTextureSize,{gradientStops:t}=this,i=xe.get().createCanvas();i.width=e,i.height=e;let r=i.getContext("2d"),s=r.createLinearGradient(0,0,ch.defaultTextureSize,1);for(let T=0;T<t.length;T++){let A=t[T];s.addColorStop(A.offset,A.color)}r.fillStyle=s,r.fillRect(0,0,e,e),this.texture=new K({source:new Oa({resource:i,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});let{x0:o,y0:d,x1:h,y1:f}=this,u=new ie,p=h-o,y=f-d,_=Math.sqrt(p*p+y*y),v=Math.atan2(y,p);u.translate(-o,-d),u.scale(1/e,1/e),u.rotate(-v),u.scale(256/_,1),this.transform=u,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;let e=this.gradientStops.map(r=>`${r.offset}-${r.color}`).join("-"),t=this.texture.uid,i=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${e}-${t}-${i}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};ip.defaultTextureSize=256;var Nr=ip,_0={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},Mi=class{constructor(e,t){this.uid=Be("fillPattern"),this.transform=new ie,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=_0[t].addressModeU,e.source.style.addressModeV=_0[t].addressModeV)}setTransform(e){let t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}},C7=I7,qc={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},O7=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function I7(a){var e=[];return a.replace(O7,function(t,i,r){var s=i.toLowerCase();for(r=B7(r),s=="m"&&r.length>2&&(e.push([i].concat(r.splice(0,2))),s="l",i=i=="m"?"l":"L");;){if(r.length==qc[s])return r.unshift(i),e.push(r);if(r.length<qc[s])throw new Error("malformed path data");e.push([i].concat(r.splice(0,qc[s])))}}),e}var G7=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function B7(a){var e=a.match(G7);return e?e.map(Number):[]}var F7=bf(C7);function D7(a,e){let t=F7(a),i=[],r=null,s=0,o=0;for(let d=0;d<t.length;d++){let h=t[d],f=h[0],u=h;switch(f){case"M":s=u[1],o=u[2],e.moveTo(s,o);break;case"m":s+=u[1],o+=u[2],e.moveTo(s,o);break;case"H":s=u[1],e.lineTo(s,o);break;case"h":s+=u[1],e.lineTo(s,o);break;case"V":o=u[1],e.lineTo(s,o);break;case"v":o+=u[1],e.lineTo(s,o);break;case"L":s=u[1],o=u[2],e.lineTo(s,o);break;case"l":s+=u[1],o+=u[2],e.lineTo(s,o);break;case"C":s=u[5],o=u[6],e.bezierCurveTo(u[1],u[2],u[3],u[4],s,o);break;case"c":e.bezierCurveTo(s+u[1],o+u[2],s+u[3],o+u[4],s+u[5],o+u[6]),s+=u[5],o+=u[6];break;case"S":s=u[3],o=u[4],e.bezierCurveToShort(u[1],u[2],s,o);break;case"s":e.bezierCurveToShort(s+u[1],o+u[2],s+u[3],o+u[4]),s+=u[3],o+=u[4];break;case"Q":s=u[3],o=u[4],e.quadraticCurveTo(u[1],u[2],s,o);break;case"q":e.quadraticCurveTo(s+u[1],o+u[2],s+u[3],o+u[4]),s+=u[3],o+=u[4];break;case"T":s=u[1],o=u[2],e.quadraticCurveToShort(s,o);break;case"t":s+=u[1],o+=u[2],e.quadraticCurveToShort(s,o);break;case"A":s=u[6],o=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],s,o);break;case"a":s+=u[6],o+=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],s,o);break;case"Z":case"z":e.closePath(),i.length>0&&(r=i.pop(),r?(s=r.startX,o=r.startY):(s=0,o=0)),r=null;break;default:}f!=="Z"&&f!=="z"&&r===null&&(r={startX:s,startY:o},i.push(r))}return e}var dh=class a{constructor(e=0,t=0,i=0){this.type="circle",this.x=e,this.y=t,this.radius=i}clone(){return new a(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;let i=this.radius*this.radius,r=this.x-e,s=this.y-t;return r*=r,s*=s,r+s<=i}strokeContains(e,t,i,r=.5){if(this.radius===0)return!1;let s=this.x-e,o=this.y-t,d=this.radius,h=(1-r)*i,f=Math.sqrt(s*s+o*o);return f<=d+h&&f>d-(i-h)}getBounds(e){return e||(e=new Pe),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}},hh=class a{constructor(e=0,t=0,i=0,r=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=i,this.halfHeight=r}clone(){return new a(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,r=(t-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(e,t,i,r=.5){let{halfWidth:s,halfHeight:o}=this;if(s<=0||o<=0)return!1;let d=i*(1-r),h=i-d,f=s-h,u=o-h,p=s+d,y=o+d,_=e-this.x,v=t-this.y,T=_*_/(f*f)+v*v/(u*u),A=_*_/(p*p)+v*v/(y*y);return T>1&&A<=1}getBounds(e){return e||(e=new Pe),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}};function k7(a,e,t,i,r,s){let o=a-t,d=e-i,h=r-t,f=s-i,u=o*h+d*f,p=h*h+f*f,y=-1;p!==0&&(y=u/p);let _,v;y<0?(_=t,v=i):y>1?(_=r,v=s):(_=t+y*h,v=i+y*f);let T=a-_,A=e-v;return T*T+A*A}var Sr=class a{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){let i=[];for(let r=0,s=t.length;r<s;r++)i.push(t[r].x,t[r].y);t=i}this.points=t,this.closePath=!0}clone(){let e=this.points.slice(),t=new a(e);return t.closePath=this.closePath,t}contains(e,t){let i=!1,r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){let d=this.points[s*2],h=this.points[s*2+1],f=this.points[o*2],u=this.points[o*2+1];h>t!=u>t&&e<(f-d)*((t-h)/(u-h))+d&&(i=!i)}return i}strokeContains(e,t,i,r=.5){let s=i*i,o=s*(1-r),d=s-o,{points:h}=this,f=h.length-(this.closePath?0:2);for(let u=0;u<f;u+=2){let p=h[u],y=h[u+1],_=h[(u+2)%h.length],v=h[(u+3)%h.length],T=k7(e,t,p,y,_,v),A=Math.sign((_-p)*(t-y)-(v-y)*(e-p));if(T<=(A<0?d:o))return!0}return!1}getBounds(e){e||(e=new Pe);let t=this.points,i=1/0,r=-1/0,s=1/0,o=-1/0;for(let d=0,h=t.length;d<h;d+=2){let f=t[d],u=t[d+1];i=f<i?f:i,r=f>r?f:r,s=u<s?u:s,o=u>o?u:o}return e.x=i,e.width=r-i,e.y=s,e.height=o-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}},vs=(a,e,t,i,r,s,o)=>{let d=a-t,h=e-i,f=Math.sqrt(d*d+h*h);return f>=r-s&&f<=r+o},fh=class a{constructor(e=0,t=0,i=0,r=0,s=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=i,this.height=r,this.radius=s}getBounds(e){return e||(e=new Pe),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new a(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){let i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let r=e-(this.x+i),s=t-(this.y+i),o=i*i;if(r*r+s*s<=o||(r=e-(this.x+this.width-i),r*r+s*s<=o)||(s=t-(this.y+this.height-i),r*r+s*s<=o)||(r=e-(this.x+i),r*r+s*s<=o))return!0}return!1}strokeContains(e,t,i,r=.5){let{x:s,y:o,width:d,height:h,radius:f}=this,u=i*(1-r),p=i-u,y=s+f,_=o+f,v=d-f*2,T=h-f*2,A=s+d,P=o+h;return(e>=s-u&&e<=s+p||e>=A-p&&e<=A+u)&&t>=_&&t<=_+T||(t>=o-u&&t<=o+p||t>=P-p&&t<=P+u)&&e>=y&&e<=y+v?!0:e<y&&t<_&&vs(e,t,y,_,f,p,u)||e>A-f&&t<_&&vs(e,t,A-f,_,f,p,u)||e>A-f&&t>P-f&&vs(e,t,A-f,P-f,f,p,u)||e<y&&t>P-f&&vs(e,t,y,P-f,f,p,u)}},U7=8,Ts=11920929e-14,L7=1,Zc=.01,bi=0,Na=0;function rp(a,e,t,i,r,s,o,d,h,f){let u=Math.min(.99,Math.max(0,f??Ef.defaultOptions.bezierSmoothness)),p=(L7-u)/1;return p*=p,N7(e,t,i,r,s,o,d,h,a,p),a}function N7(a,e,t,i,r,s,o,d,h,f){lh(a,e,t,i,r,s,o,d,h,f,0),h.push(o,d)}function lh(a,e,t,i,r,s,o,d,h,f,u){if(u>U7)return;let p=Math.PI,y=(a+t)/2,_=(e+i)/2,v=(t+r)/2,T=(i+s)/2,A=(r+o)/2,P=(s+d)/2,I=(y+v)/2,F=(_+T)/2,D=(v+A)/2,H=(T+P)/2,N=(I+D)/2,j=(F+H)/2;if(u>0){let re=o-a,ce=d-e,Z=Math.abs((t-o)*ce-(i-d)*re),q=Math.abs((r-o)*ce-(s-d)*re),se,te;if(Z>Ts&&q>Ts){if((Z+q)*(Z+q)<=f*(re*re+ce*ce)){if(bi<Zc){h.push(N,j);return}let Ie=Math.atan2(s-i,r-t);if(se=Math.abs(Ie-Math.atan2(i-e,t-a)),te=Math.abs(Math.atan2(d-s,o-r)-Ie),se>=p&&(se=2*p-se),te>=p&&(te=2*p-te),se+te<bi){h.push(N,j);return}if(Na!==0){if(se>Na){h.push(t,i);return}if(te>Na){h.push(r,s);return}}}}else if(Z>Ts){if(Z*Z<=f*(re*re+ce*ce)){if(bi<Zc){h.push(N,j);return}if(se=Math.abs(Math.atan2(s-i,r-t)-Math.atan2(i-e,t-a)),se>=p&&(se=2*p-se),se<bi){h.push(t,i),h.push(r,s);return}if(Na!==0&&se>Na){h.push(t,i);return}}}else if(q>Ts){if(q*q<=f*(re*re+ce*ce)){if(bi<Zc){h.push(N,j);return}if(se=Math.abs(Math.atan2(d-s,o-r)-Math.atan2(s-i,r-t)),se>=p&&(se=2*p-se),se<bi){h.push(t,i),h.push(r,s);return}if(Na!==0&&se>Na){h.push(r,s);return}}}else if(re=N-(a+o)/2,ce=j-(e+d)/2,re*re+ce*ce<=f){h.push(N,j);return}}lh(a,e,y,_,I,F,N,j,h,f,u+1),lh(N,j,D,H,A,P,o,d,h,f,u+1)}var j7=8,X7=11920929e-14,H7=1,z7=.01,y0=0;function V7(a,e,t,i,r,s,o,d){let h=Math.min(.99,Math.max(0,d??Ef.defaultOptions.bezierSmoothness)),f=(H7-h)/1;return f*=f,W7(e,t,i,r,s,o,a,f),a}function W7(a,e,t,i,r,s,o,d){uh(o,a,e,t,i,r,s,d,0),o.push(r,s)}function uh(a,e,t,i,r,s,o,d,h){if(h>j7)return;let f=Math.PI,u=(e+i)/2,p=(t+r)/2,y=(i+s)/2,_=(r+o)/2,v=(u+y)/2,T=(p+_)/2,A=s-e,P=o-t,I=Math.abs((i-s)*P-(r-o)*A);if(I>X7){if(I*I<=d*(A*A+P*P)){if(y0<z7){a.push(v,T);return}let F=Math.abs(Math.atan2(o-r,s-i)-Math.atan2(r-t,i-e));if(F>=f&&(F=2*f-F),F<y0){a.push(v,T);return}}}else if(A=v-(e+s)/2,P=T-(t+o)/2,A*A+P*P<=d){a.push(v,T);return}uh(a,e,t,u,p,v,T,d,h+1),uh(a,v,T,y,_,s,o,d,h+1)}function sp(a,e,t,i,r,s,o,d){let h=Math.abs(r-s);(!o&&r>s||o&&s>r)&&(h=2*Math.PI-h),d||(d=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(h/Math.PI)))),d=Math.max(d,3);let f=h/d,u=r;f*=o?-1:1;for(let p=0;p<d+1;p++){let y=Math.cos(u),_=Math.sin(u),v=e+y*i,T=t+_*i;a.push(v,T),u+=f}}function Y7(a,e,t,i,r,s){let o=a[a.length-2],d=a[a.length-1]-t,h=o-e,f=r-t,u=i-e,p=Math.abs(d*u-h*f);if(p<1e-8||s===0){(a[a.length-2]!==e||a[a.length-1]!==t)&&a.push(e,t);return}let y=d*d+h*h,_=f*f+u*u,v=d*f+h*u,T=s*Math.sqrt(y)/p,A=s*Math.sqrt(_)/p,P=T*v/y,I=A*v/_,F=T*u+A*h,D=T*f+A*d,H=h*(A+P),N=d*(A+P),j=u*(T+I),re=f*(T+I),ce=Math.atan2(N-D,H-F),Z=Math.atan2(re-D,j-F);sp(a,F+e,D+t,s,ce,Z,h*f>u*d)}var wr=Math.PI*2,Qc={centerX:0,centerY:0,ang1:0,ang2:0},Jc=({x:a,y:e},t,i,r,s,o,d,h)=>{a*=t,e*=i;let f=r*a-s*e,u=s*a+r*e;return h.x=f+o,h.y=u+d,h};function $7(a,e){let t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=e===1.5707963267948966?.551915024494:t,r=Math.cos(a),s=Math.sin(a),o=Math.cos(a+e),d=Math.sin(a+e);return[{x:r-s*i,y:s+r*i},{x:o+d*i,y:d-o*i},{x:o,y:d}]}var x0=(a,e,t,i)=>{let r=a*i-e*t<0?-1:1,s=a*t+e*i;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)},K7=(a,e,t,i,r,s,o,d,h,f,u,p,y)=>{let _=Math.pow(r,2),v=Math.pow(s,2),T=Math.pow(u,2),A=Math.pow(p,2),P=_*v-_*A-v*T;P<0&&(P=0),P/=_*A+v*T,P=Math.sqrt(P)*(o===d?-1:1);let I=P*r/s*p,F=P*-s/r*u,D=f*I-h*F+(a+t)/2,H=h*I+f*F+(e+i)/2,N=(u-I)/r,j=(p-F)/s,re=(-u-I)/r,ce=(-p-F)/s,Z=x0(1,0,N,j),q=x0(N,j,re,ce);d===0&&q>0&&(q-=wr),d===1&&q<0&&(q+=wr),y.centerX=D,y.centerY=H,y.ang1=Z,y.ang2=q};function q7(a,e,t,i,r,s,o,d=0,h=0,f=0){if(s===0||o===0)return;let u=Math.sin(d*wr/360),p=Math.cos(d*wr/360),y=p*(e-i)/2+u*(t-r)/2,_=-u*(e-i)/2+p*(t-r)/2;if(y===0&&_===0)return;s=Math.abs(s),o=Math.abs(o);let v=Math.pow(y,2)/Math.pow(s,2)+Math.pow(_,2)/Math.pow(o,2);v>1&&(s*=Math.sqrt(v),o*=Math.sqrt(v)),K7(e,t,i,r,s,o,h,f,u,p,y,_,Qc);let{ang1:T,ang2:A}=Qc,{centerX:P,centerY:I}=Qc,F=Math.abs(A)/(wr/4);Math.abs(1-F)<1e-7&&(F=1);let D=Math.max(Math.ceil(F),1);A/=D;let H=a[a.length-2],N=a[a.length-1],j={x:0,y:0};for(let re=0;re<D;re++){let ce=$7(T,A),{x:Z,y:q}=Jc(ce[0],s,o,p,u,P,I,j),{x:se,y:te}=Jc(ce[1],s,o,p,u,P,I,j),{x:Ie,y:Tt}=Jc(ce[2],s,o,p,u,P,I,j);rp(a,H,N,Z,q,se,te,Ie,Tt),H=Ie,N=Tt,T+=A}}function Z7(a,e,t){var i;let r=(d,h)=>{let f=h.x-d.x,u=h.y-d.y,p=Math.sqrt(f*f+u*u),y=f/p,_=u/p;return{len:p,nx:y,ny:_}},s=(d,h)=>{d===0?a.moveTo(h.x,h.y):a.lineTo(h.x,h.y)},o=e[e.length-1];for(let d=0;d<e.length;d++){let h=e[d%e.length],f=(i=h.radius)!=null?i:t;if(f<=0){s(d,h),o=h;continue}let u=e[(d+1)%e.length],p=r(h,o),y=r(h,u);if(p.len<1e-4||y.len<1e-4){s(d,h),o=h;continue}let _=Math.asin(p.nx*y.ny-p.ny*y.nx),v=1,T=!1;p.nx*y.nx-p.ny*-y.ny<0?_<0?_=Math.PI+_:(_=Math.PI-_,v=-1,T=!0):_>0&&(v=-1,T=!0);let A=_/2,P,I=Math.abs(Math.cos(A)*f/Math.sin(A));I>Math.min(p.len/2,y.len/2)?(I=Math.min(p.len/2,y.len/2),P=Math.abs(I*Math.sin(A)/Math.cos(A))):P=f;let F=h.x+y.nx*I+-y.ny*P*v,D=h.y+y.ny*I+y.nx*P*v,H=Math.atan2(p.ny,p.nx)+Math.PI/2*v,N=Math.atan2(y.ny,y.nx)-Math.PI/2*v;d===0&&a.moveTo(F+Math.cos(H)*P,D+Math.sin(H)*P),a.arc(F,D,P,H,N,T),o=h}}function Q7(a,e,t,i){var r;let s=(h,f)=>Math.sqrt((h.x-f.x)**2+(h.y-f.y)**2),o=(h,f,u)=>({x:h.x+(f.x-h.x)*u,y:h.y+(f.y-h.y)*u}),d=e.length;for(let h=0;h<d;h++){let f=e[(h+1)%d],u=(r=f.radius)!=null?r:t;if(u<=0){h===0?a.moveTo(f.x,f.y):a.lineTo(f.x,f.y);continue}let p=e[h],y=e[(h+2)%d],_=s(p,f),v;if(_<1e-4)v=f;else{let P=Math.min(_/2,u);v=o(f,p,P/_)}let T=s(y,f),A;if(T<1e-4)A=f;else{let P=Math.min(T/2,u);A=o(f,y,P/T)}h===0?a.moveTo(v.x,v.y):a.lineTo(v.x,v.y),a.quadraticCurveTo(f.x,f.y,A.x,A.y,i)}}var J7=new Pe,bh=class{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new qe,this._graphicsPath2D=e}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();let i=this._currentPoly.points,r=i[i.length-2],s=i[i.length-1];return(r!==e||s!==t)&&i.push(e,t),this}arc(e,t,i,r,s,o){this._ensurePoly(!1);let d=this._currentPoly.points;return sp(d,e,t,i,r,s,o),this}arcTo(e,t,i,r,s){this._ensurePoly();let o=this._currentPoly.points;return Y7(o,e,t,i,r,s),this}arcToSvg(e,t,i,r,s,o,d){let h=this._currentPoly.points;return q7(h,this._currentPoly.lastX,this._currentPoly.lastY,o,d,e,t,i,r,s),this}bezierCurveTo(e,t,i,r,s,o,d){this._ensurePoly();let h=this._currentPoly;return rp(this._currentPoly.points,h.lastX,h.lastY,e,t,i,r,s,o,d),this}quadraticCurveTo(e,t,i,r,s){this._ensurePoly();let o=this._currentPoly;return V7(this._currentPoly.points,o.lastX,o.lastY,e,t,i,r,s),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));for(let i=0;i<e.instructions.length;i++){let r=e.instructions[i];this[r.action](...r.data)}return this}finish(e=!1){this.endPoly(e)}rect(e,t,i,r,s){return this.drawShape(new Pe(e,t,i,r),s),this}circle(e,t,i,r){return this.drawShape(new dh(e,t,i),r),this}poly(e,t,i){let r=new Sr(e);return r.closePath=t,this.drawShape(r,i),this}regularPoly(e,t,i,r,s=0,o){r=Math.max(r|0,3);let d=-1*Math.PI/2+s,h=Math.PI*2/r,f=[];for(let u=0;u<r;u++){let p=d-u*h;f.push(e+i*Math.cos(p),t+i*Math.sin(p))}return this.poly(f,!0,o),this}roundPoly(e,t,i,r,s,o=0,d){if(r=Math.max(r|0,3),s<=0)return this.regularPoly(e,t,i,r,o);let h=i*Math.sin(Math.PI/r)-.001;s=Math.min(s,h);let f=-1*Math.PI/2+o,u=Math.PI*2/r,p=(r-2)*Math.PI/r/2;for(let y=0;y<r;y++){let _=y*u+f,v=e+i*Math.cos(_),T=t+i*Math.sin(_),A=_+Math.PI+p,P=_-Math.PI-p,I=v+s*Math.cos(A),F=T+s*Math.sin(A),D=v+s*Math.cos(P),H=T+s*Math.sin(P);y===0?this.moveTo(I,F):this.lineTo(I,F),this.quadraticCurveTo(v,T,D,H,d)}return this.closePath()}roundShape(e,t,i=!1,r){return e.length<3?this:(i?Q7(this,e,t,r):Z7(this,e,t),this.closePath())}filletRect(e,t,i,r,s){if(s===0)return this.rect(e,t,i,r);let o=Math.min(i,r)/2,d=Math.min(o,Math.max(-o,s)),h=e+i,f=t+r,u=d<0?-d:0,p=Math.abs(d);return this.moveTo(e,t+p).arcTo(e+u,t+u,e+p,t,p).lineTo(h-p,t).arcTo(h-u,t+u,h,t+p,p).lineTo(h,f-p).arcTo(h-u,f-u,e+i-p,f,p).lineTo(e+p,f).arcTo(e+u,f-u,e,f-p,p).closePath()}chamferRect(e,t,i,r,s,o){if(s<=0)return this.rect(e,t,i,r);let d=Math.min(s,Math.min(i,r)/2),h=e+i,f=t+r,u=[e+d,t,h-d,t,h,t+d,h,f-d,h-d,f,e+d,f,e,f-d,e,t+d];for(let p=u.length-1;p>=2;p-=2)u[p]===u[p-2]&&u[p-1]===u[p-3]&&u.splice(p-1,2);return this.poly(u,!0,o)}ellipse(e,t,i,r,s){return this.drawShape(new hh(e,t,i,r),s),this}roundRect(e,t,i,r,s,o){return this.drawShape(new fh(e,t,i,r,s),o),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let i=this._currentPoly;return i&&this.endPoly(),i=new Sr,i.points.push(e,t),this._currentPoly=i,this}endPoly(e=!1){let t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Sr,e)){let t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let i=t.shape.x,r=t.shape.y;if(t.transform&&!t.transform.isIdentity()){let s=t.transform,o=i;i=s.a*i+s.c*r+s.tx,r=s.b*o+s.d*r+s.ty}this._currentPoly.points.push(i,r)}else this._currentPoly.points.push(0,0)}}buildPath(){let e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){let i=e.instructions[t];this[i.action](...i.data)}this.finish()}get bounds(){let e=this._bounds;e.clear();let t=this.shapePrimitives;for(let i=0;i<t.length;i++){let r=t[i],s=r.shape.getBounds(J7);r.transform?e.addRect(s,r.transform):e.addRect(s)}return e}},Ci=class a{constructor(e){this.instructions=[],this.uid=Be("graphicsPath"),this._dirty=!0;var t;typeof e=="string"?D7(e,this):this.instructions=(t=e?.slice())!=null?t:[]}get shapePath(){return this._shapePath||(this._shapePath=new bh(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,i,r,s){let o=this.instructions[this.instructions.length-1],d=this.getLastPoint(Ce.shared),h=0,f=0;if(!o||o.action!=="bezierCurveTo")h=d.x,f=d.y;else{h=o.data[2],f=o.data[3];let u=d.x,p=d.y;h=u+(u-h),f=p+(p-f)}return this.instructions.push({action:"bezierCurveTo",data:[h,f,e,t,i,r,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,i){let r=this.instructions[this.instructions.length-1],s=this.getLastPoint(Ce.shared),o=0,d=0;if(!r||r.action!=="quadraticCurveTo")o=s.x,d=s.y;else{o=r.data[0],d=r.data[1];let h=s.x,f=s.y;o=h+(h-o),d=f+(f-d)}return this.instructions.push({action:"quadraticCurveTo",data:[o,d,e,t,i]}),this._dirty=!0,this}rect(e,t,i,r,s){return this.instructions.push({action:"rect",data:[e,t,i,r,s]}),this._dirty=!0,this}circle(e,t,i,r){return this.instructions.push({action:"circle",data:[e,t,i,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,i,r,s,o,d){s||(s=r/2);let h=-1*Math.PI/2+o,f=i*2,u=Math.PI*2/f,p=[];for(let y=0;y<f;y++){let _=y%2?s:r,v=y*u+h;p.push(e+_*Math.cos(v),t+_*Math.sin(v))}return this.poly(p,!0,d),this}clone(e=!1){let t=new a;if(!e)t.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){let r=this.instructions[i];t.instructions.push({action:r.action,data:r.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;let t=e.a,i=e.b,r=e.c,s=e.d,o=e.tx,d=e.ty,h=0,f=0,u=0,p=0,y=0,_=0,v=0,T=0;for(let A=0;A<this.instructions.length;A++){let P=this.instructions[A],I=P.data;switch(P.action){case"moveTo":case"lineTo":h=I[0],f=I[1],I[0]=t*h+r*f+o,I[1]=i*h+s*f+d;break;case"bezierCurveTo":u=I[0],p=I[1],y=I[2],_=I[3],h=I[4],f=I[5],I[0]=t*u+r*p+o,I[1]=i*u+s*p+d,I[2]=t*y+r*_+o,I[3]=i*y+s*_+d,I[4]=t*h+r*f+o,I[5]=i*h+s*f+d;break;case"quadraticCurveTo":u=I[0],p=I[1],h=I[2],f=I[3],I[0]=t*u+r*p+o,I[1]=i*u+s*p+d,I[2]=t*h+r*f+o,I[3]=i*h+s*f+d;break;case"arcToSvg":h=I[5],f=I[6],v=I[0],T=I[1],I[0]=t*v+r*T,I[1]=i*v+s*T,I[5]=t*h+r*f+o,I[6]=i*h+s*f+d;break;case"circle":I[4]=cr(I[3],e);break;case"rect":I[4]=cr(I[4],e);break;case"ellipse":I[8]=cr(I[8],e);break;case"roundRect":I[5]=cr(I[5],e);break;case"addPath":I[0].transform(e);break;case"poly":I[2]=cr(I[2],e);break;default:break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,i=this.instructions[t];if(!i)return e.x=0,e.y=0,e;for(;i.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;i=this.instructions[t]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e);break}return e}};function cr(a,e){return a?a.prepend(e):e.clone()}var e9=Object.defineProperty,v0=Object.getOwnPropertySymbols,t9=Object.prototype.hasOwnProperty,a9=Object.prototype.propertyIsEnumerable,T0=(a,e,t)=>e in a?e9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Ss=(a,e)=>{for(var t in e||(e={}))t9.call(e,t)&&T0(a,t,e[t]);if(v0)for(var t of v0(e))a9.call(e,t)&&T0(a,t,e[t]);return a};function i9(a,e){if(typeof a=="string"){let i=document.createElement("div");i.innerHTML=a.trim(),a=i.querySelector("svg")}let t={context:e,path:new Ci};return np(a,t,null,null),e}function np(a,e,t,i){let r=a.children,{fillStyle:s,strokeStyle:o}=r9(a);s&&t?t=Ss(Ss({},t),s):s&&(t=s),o&&i?i=Ss(Ss({},i),o):o&&(i=o),e.context.fillStyle=t,e.context.strokeStyle=i;let d,h,f,u,p,y,_,v,T,A,P,I,F,D,H,N,j;switch(a.nodeName.toLowerCase()){case"path":D=a.getAttribute("d"),H=new Ci(D),e.context.path(H),t&&e.context.fill(),i&&e.context.stroke();break;case"circle":_=$e(a,"cx",0),v=$e(a,"cy",0),T=$e(a,"r",0),e.context.ellipse(_,v,T,T),t&&e.context.fill(),i&&e.context.stroke();break;case"rect":d=$e(a,"x",0),h=$e(a,"y",0),N=$e(a,"width",0),j=$e(a,"height",0),A=$e(a,"rx",0),P=$e(a,"ry",0),A||P?e.context.roundRect(d,h,N,j,A||P):e.context.rect(d,h,N,j),t&&e.context.fill(),i&&e.context.stroke();break;case"ellipse":_=$e(a,"cx",0),v=$e(a,"cy",0),A=$e(a,"rx",0),P=$e(a,"ry",0),e.context.beginPath(),e.context.ellipse(_,v,A,P),t&&e.context.fill(),i&&e.context.stroke();break;case"line":f=$e(a,"x1",0),u=$e(a,"y1",0),p=$e(a,"x2",0),y=$e(a,"y2",0),e.context.beginPath(),e.context.moveTo(f,u),e.context.lineTo(p,y),i&&e.context.stroke();break;case"polygon":F=a.getAttribute("points"),I=F.match(/\d+/g).map(re=>parseInt(re,10)),e.context.poly(I,!0),t&&e.context.fill(),i&&e.context.stroke();break;case"polyline":F=a.getAttribute("points"),I=F.match(/\d+/g).map(re=>parseInt(re,10)),e.context.poly(I,!1),i&&e.context.stroke();break;case"g":case"svg":break;default:break}for(let re=0;re<r.length;re++)np(r[re],e,t,i)}function $e(a,e,t){let i=a.getAttribute(e);return i?Number(i):t}function r9(a){let e=a.getAttribute("style"),t={},i={},r=!1,s=!1;if(e){let o=e.split(";");for(let d=0;d<o.length;d++){let h=o[d],[f,u]=h.split(":");switch(f){case"stroke":u!=="none"&&(t.color=Ee.shared.setValue(u).toNumber(),s=!0);break;case"stroke-width":t.width=Number(u);break;case"fill":u!=="none"&&(r=!0,i.color=Ee.shared.setValue(u).toNumber());break;case"fill-opacity":i.alpha=Number(u);break;case"stroke-opacity":t.alpha=Number(u);break;case"opacity":i.alpha=Number(u),t.alpha=Number(u);break}}}else{let o=a.getAttribute("stroke");o&&o!=="none"&&(s=!0,t.color=Ee.shared.setValue(o).toNumber(),t.width=$e(a,"stroke-width",1));let d=a.getAttribute("fill");d&&d!=="none"&&(r=!0,i.color=Ee.shared.setValue(d).toNumber())}return{strokeStyle:s?t:null,fillStyle:r?i:null}}var s9=Object.defineProperty,hn=Object.getOwnPropertySymbols,op=Object.prototype.hasOwnProperty,cp=Object.prototype.propertyIsEnumerable,S0=(a,e,t)=>e in a?s9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,la=(a,e)=>{for(var t in e||(e={}))op.call(e,t)&&S0(a,t,e[t]);if(hn)for(var t of hn(e))cp.call(e,t)&&S0(a,t,e[t]);return a},n9=(a,e)=>{var t={};for(var i in a)op.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&hn)for(var i of hn(a))e.indexOf(i)<0&&cp.call(a,i)&&(t[i]=a[i]);return t};function o9(a){return Ee.isColorLike(a)}function w0(a){return a instanceof Mi}function A0(a){return a instanceof Nr}function c9(a,e,t){let i=Ee.shared.setValue(e??0);return a.color=i.toNumber(),a.alpha=i.alpha===1?t.alpha:i.alpha,a.texture=K.WHITE,la(la({},t),a)}function E0(a,e,t){return a.fill=e,a.color=16777215,a.texture=e.texture,a.matrix=e.transform,la(la({},t),a)}function P0(a,e,t){return e.buildLinearGradient(),a.fill=e,a.color=16777215,a.texture=e.texture,a.matrix=e.transform,la(la({},t),a)}function d9(a,e){var t;let i=la(la({},e),a);if(i.texture){if(i.texture!==K.WHITE){let o=((t=i.matrix)==null?void 0:t.clone().invert())||new ie;o.translate(i.texture.frame.x,i.texture.frame.y),o.scale(1/i.texture.source.width,1/i.texture.source.height),i.matrix=o}let s=i.texture.source.style;s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update())}let r=Ee.shared.setValue(i.color);return i.alpha*=r.alpha,i.color=r.toNumber(),i.matrix=i.matrix?i.matrix.clone():null,i}function $a(a,e){if(a==null)return null;let t={},i=a;return o9(a)?c9(t,a,e):w0(a)?E0(t,a,e):A0(a)?P0(t,a,e):i.fill&&w0(i.fill)?E0(i,i.fill,e):i.fill&&A0(i.fill)?P0(i,i.fill,e):d9(i,e)}function fn(a,e){let t=e,{width:i,alignment:r,miterLimit:s,cap:o,join:d,pixelLine:h}=t,f=n9(t,["width","alignment","miterLimit","cap","join","pixelLine"]),u=$a(a,f);return u?la({width:i,alignment:r,miterLimit:s,cap:o,join:d,pixelLine:h},u):null}var h9=Object.defineProperty,R0=Object.getOwnPropertySymbols,f9=Object.prototype.hasOwnProperty,l9=Object.prototype.propertyIsEnumerable,M0=(a,e,t)=>e in a?h9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,pi=(a,e)=>{for(var t in e||(e={}))f9.call(e,t)&&M0(a,t,e[t]);if(R0)for(var t of R0(e))l9.call(e,t)&&M0(a,t,e[t]);return a},u9=new Ce,C0=new ie,ph=class Kt extends xt{constructor(){super(...arguments),this.uid=Be("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Ci,this._transform=new ie,this._fillStyle=pi({},Kt.defaultFillStyle),this._strokeStyle=pi({},Kt.defaultStrokeStyle),this._stateStack=[],this._tick=0,this._bounds=new qe,this._boundsDirty=!0}clone(){let e=new Kt;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle=pi({},this._fillStyle),e._strokeStyle=pi({},this._strokeStyle),e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=$a(e,Kt.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=fn(e,Kt.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=$a(e,Kt.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=$a(e,Kt.defaultStrokeStyle),this}texture(e,t,i,r,s,o){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:r||0,dw:s||e.frame.width,dh:o||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?Ee.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Ci,this}fill(e,t){let i,r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?i=r.data.path:i=this._activePath.clone(),i?(e!=null&&(t!==void 0&&typeof e=="number"&&(e={color:e,alpha:t}),this._fillStyle=$a(e,Kt.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){let{x:e,y:t}=this._activePath.getLastPoint(Ce.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t,i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?t=i.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=fn(e,Kt.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){let t=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(i);else{t.data.hole=i;break}}return this._initNextPathLocation(),this}arc(e,t,i,r,s,o){this._tick++;let d=this._transform;return this._activePath.arc(d.a*e+d.c*t+d.tx,d.b*e+d.d*t+d.ty,i,r,s,o),this}arcTo(e,t,i,r,s){this._tick++;let o=this._transform;return this._activePath.arcTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,s),this}arcToSvg(e,t,i,r,s,o,d){this._tick++;let h=this._transform;return this._activePath.arcToSvg(e,t,i,r,s,h.a*o+h.c*d+h.tx,h.b*o+h.d*d+h.ty),this}bezierCurveTo(e,t,i,r,s,o,d){this._tick++;let h=this._transform;return this._activePath.bezierCurveTo(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,h.a*i+h.c*r+h.tx,h.b*i+h.d*r+h.ty,h.a*s+h.c*o+h.tx,h.b*s+h.d*o+h.ty,d),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,i,r){return this._tick++,this._activePath.ellipse(e,t,i,r,this._transform.clone()),this}circle(e,t,i){return this._tick++,this._activePath.circle(e,t,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;let i=this._transform;return this._activePath.lineTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty),this}moveTo(e,t){this._tick++;let i=this._transform,r=this._activePath.instructions,s=i.a*e+i.c*t+i.tx,o=i.b*e+i.d*t+i.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=s,r[0].data[1]=o,this):(this._activePath.moveTo(s,o),this)}quadraticCurveTo(e,t,i,r,s){this._tick++;let o=this._transform;return this._activePath.quadraticCurveTo(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,s),this}rect(e,t,i,r){return this._tick++,this._activePath.rect(e,t,i,r,this._transform.clone()),this}roundRect(e,t,i,r,s){return this._tick++,this._activePath.roundRect(e,t,i,r,s,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,i,r,s=0,o){return this._tick++,this._activePath.regularPoly(e,t,i,r,s,o),this}roundPoly(e,t,i,r,s,o){return this._tick++,this._activePath.roundPoly(e,t,i,r,s,o),this}roundShape(e,t,i,r){return this._tick++,this._activePath.roundShape(e,t,i,r),this}filletRect(e,t,i,r,s){return this._tick++,this._activePath.filletRect(e,t,i,r,s),this}chamferRect(e,t,i,r,s,o){return this._tick++,this._activePath.chamferRect(e,t,i,r,s,o),this}star(e,t,i,r,s=0,o=0){return this._tick++,this._activePath.star(e,t,i,r,s,o,this._transform.clone()),this}svg(e){return this._tick++,i9(e,this),this}restore(){let e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:pi({},this._fillStyle),strokeStyle:pi({},this._strokeStyle)}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,i,r,s,o){return e instanceof ie?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,i,r,s,o),this)}transform(e,t,i,r,s,o){return e instanceof ie?(this._transform.append(e),this):(C0.set(e,t,i,r,s,o),this._transform.append(C0),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){let i=this.instructions[t],r=i.action;if(r==="fill"){let s=i.data;e.addBounds(s.path.bounds)}else if(r==="texture"){let s=i.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(r==="stroke"){let s=i.data,o=s.style.alignment,d=s.style.width*(1-o),h=s.path.bounds;e.addFrame(h.minX-d,h.minY-d,h.maxX+d,h.maxY+d)}}return e}containsPoint(e){var t;if(!this.bounds.containsPoint(e.x,e.y))return!1;let i=this.instructions,r=!1;for(let s=0;s<i.length;s++){let o=i[s],d=o.data,h=d.path;if(!o.action||!h)continue;let f=d.style,u=h.shapePath.shapePrimitives;for(let p=0;p<u.length;p++){let y=u[p].shape;if(!f||!y)continue;let _=u[p].transform,v=_?_.applyInverse(e,u9):e;if(o.action==="fill")r=y.contains(v.x,v.y);else{let A=f;r=y.strokeContains(v.x,v.y,A.width,A.alignment)}let T=d.hole;if(T){let A=(t=T.shapePath)==null?void 0:t.shapePrimitives;if(A)for(let P=0;P<A.length;P++)A[P].shape.contains(v.x,v.y)&&(r=!1)}if(r)return!0}}return r}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(t),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(t)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};ph.defaultFillStyle={color:16777215,alpha:1,texture:K.WHITE,matrix:null,fill:null},ph.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:K.WHITE,matrix:null,fill:null,pixelLine:!1};var dt=ph,O0=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function dp(a){let e=[],t=0;for(let i=0;i<O0.length;i++){let r=`_${O0[i]}`;e[t++]=a[r]}return t=hp(a._fill,e,t),t=b9(a._stroke,e,t),t=p9(a.dropShadow,e,t),e.join("-")}function hp(a,e,t){var i;return a&&(e[t++]=a.color,e[t++]=a.alpha,e[t++]=(i=a.fill)==null?void 0:i.styleKey),t}function b9(a,e,t){return a&&(t=hp(a,e,t),e[t++]=a.width,e[t++]=a.alignment,e[t++]=a.cap,e[t++]=a.join,e[t++]=a.miterLimit),t}function p9(a,e,t){return a&&(e[t++]=a.alpha,e[t++]=a.angle,e[t++]=a.blur,e[t++]=a.distance,e[t++]=Ee.shared.setValue(a.color).toNumber()),t}var g9=Object.defineProperty,m9=Object.defineProperties,_9=Object.getOwnPropertyDescriptors,I0=Object.getOwnPropertySymbols,y9=Object.prototype.hasOwnProperty,x9=Object.prototype.propertyIsEnumerable,G0=(a,e,t)=>e in a?g9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ut=(a,e)=>{for(var t in e||(e={}))y9.call(e,t)&&G0(a,t,e[t]);if(I0)for(var t of I0(e))x9.call(e,t)&&G0(a,t,e[t]);return a},v9=(a,e)=>m9(a,_9(e)),gh=class yi extends xt{constructor(e={}){super(),T9(e);let t=ut(ut({},yi.defaultTextStyle),e);for(let i in t){let r=i;this[r]=t[i]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy(ut(ut({},yi.defaultDropShadow),e)):this._dropShadow=e?this._createProxy(ut({},yi.defaultDropShadow)):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy(ut(ut({},dt.defaultFillStyle),e),()=>{this._fill=$a(ut({},this._originalFill),dt.defaultFillStyle)})),this._fill=$a(e===0?"black":e,dt.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy(ut(ut({},dt.defaultStrokeStyle),e),()=>{this._stroke=fn(ut({},this._originalStroke),dt.defaultStrokeStyle)})),this._stroke=fn(e,dt.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=dp(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let e=yi.defaultTextStyle;for(let t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new yi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?ut({},this._dropShadow):null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){var t,i,r,s;if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let o=typeof e=="boolean"?e:e?.textureSource;(t=this._fill)!=null&&t.texture&&this._fill.texture.destroy(o),(i=this._originalFill)!=null&&i.texture&&this._originalFill.texture.destroy(o),(r=this._stroke)!=null&&r.texture&&this._stroke.texture.destroy(o),(s=this._originalStroke)!=null&&s.texture&&this._originalStroke.texture.destroy(o)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(i,r,s)=>(i[r]=s,t?.(r,s),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(Ee.isColorLike(e)||e instanceof Nr||e instanceof Mi)}};gh.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},gh.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var Pt=gh;function T9(a){var e,t,i,r,s;let o=a;if(typeof o.dropShadow=="boolean"&&o.dropShadow){let d=Pt.defaultDropShadow;a.dropShadow={alpha:(e=o.dropShadowAlpha)!=null?e:d.alpha,angle:(t=o.dropShadowAngle)!=null?t:d.angle,blur:(i=o.dropShadowBlur)!=null?i:d.blur,color:(r=o.dropShadowColor)!=null?r:d.color,distance:(s=o.dropShadowDistance)!=null?s:d.distance}}if(o.strokeThickness!==void 0){let d=o.stroke,h={};if(Ee.isColorLike(d))h.color=d;else if(d instanceof Nr||d instanceof Mi)h.fill=d;else if(Object.hasOwnProperty.call(d,"color")||Object.hasOwnProperty.call(d,"fill"))h=d;else throw new Error("Invalid stroke value.");a.stroke=v9(ut({},h),{width:o.strokeThickness})}if(Array.isArray(o.fillGradientStops)){let d;a.fontSize==null?a.fontSize=Pt.defaultTextStyle.fontSize:typeof a.fontSize=="string"?d=parseInt(a.fontSize,10):d=a.fontSize;let h=new Nr(0,0,0,d*1.7),f=o.fillGradientStops.map(u=>Ee.shared.setValue(u).toNumber());f.forEach((u,p)=>{let y=p/(f.length-1);h.addColorStop(y,u)}),a.fill={fill:h}}}var S9=new qe;function fp(a,e,t,i){let r=S9;r.minX=0,r.minY=0,r.maxX=a.width/i|0,r.maxY=a.height/i|0;let s=ze.getOptimalTexture(r.width,r.height,i,!1);return s.source.uploadMethodId="image",s.source.resource=a,s.source.alphaMode="premultiply-alpha-on-upload",s.frame.width=e/i,s.frame.height=t/i,s.source.emit("update",s.source),s.updateUvs(),s}var w9=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function ln(a){let e=typeof a.fontSize=="number"?`${a.fontSize}px`:a.fontSize,t=a.fontFamily;Array.isArray(a.fontFamily)||(t=a.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let r=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!w9.includes(r)&&(r=`"${r}"`),t[i]=r}return`${a.fontStyle} ${a.fontVariant} ${a.fontWeight} ${e} ${t.join(",")}`}var ed={willReadFrequently:!0},jt=class ee{static get experimentalLetterSpacingSupported(){let e=ee._experimentalLetterSpacingSupported;if(e!==void 0){let t=xe.get().getCanvasRenderingContext2D().prototype;e=ee._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,r,s,o,d,h,f){this.text=e,this.style=t,this.width=i,this.height=r,this.lines=s,this.lineWidths=o,this.lineHeight=d,this.maxLineWidth=h,this.fontProperties=f}static measureText(e=" ",t,i=ee._canvas,r=t.wordWrap){var s;let o=`${e}:${t.styleKey}`;if(ee._measurementCache[o])return ee._measurementCache[o];let d=ln(t),h=ee.measureFont(d);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);let f=ee.__context;f.font=d;let u=(r?ee._wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),p=new Array(u.length),y=0;for(let P=0;P<u.length;P++){let I=ee._measureText(u[P],t.letterSpacing,f);p[P]=I,y=Math.max(y,I)}let _=((s=t._stroke)==null?void 0:s.width)||0,v=y+_;t.dropShadow&&(v+=t.dropShadow.distance);let T=t.lineHeight||h.fontSize,A=Math.max(T,h.fontSize+_)+(u.length-1)*(T+t.leading);return t.dropShadow&&(A+=t.dropShadow.distance),new ee(e,t,v,A,u,p,T+t.leading,y,h)}static _measureText(e,t,i){let r=!1;ee.experimentalLetterSpacingSupported&&(ee.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,r=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(e),o=s.width,d=-s.actualBoundingBoxLeft,h=s.actualBoundingBoxRight-d;if(o>0)if(r)o-=t,h-=t;else{let f=(ee.graphemeSegmenter(e).length-1)*t;o+=f,h+=f}return Math.max(o,h)}static _wordWrap(e,t,i=ee._canvas){let r=i.getContext("2d",ed),s=0,o="",d="",h=Object.create(null),{letterSpacing:f,whiteSpace:u}=t,p=ee._collapseSpaces(u),y=ee._collapseNewlines(u),_=!p,v=t.wordWrapWidth+f,T=ee._tokenize(e);for(let A=0;A<T.length;A++){let P=T[A];if(ee._isNewline(P)){if(!y){d+=ee._addLine(o),_=!p,o="",s=0;continue}P=" "}if(p){let F=ee.isBreakingSpace(P),D=ee.isBreakingSpace(o[o.length-1]);if(F&&D)continue}let I=ee._getFromCache(P,f,h,r);if(I>v)if(o!==""&&(d+=ee._addLine(o),o="",s=0),ee.canBreakWords(P,t.breakWords)){let F=ee.wordWrapSplit(P);for(let D=0;D<F.length;D++){let H=F[D],N=H,j=1;for(;F[D+j];){let ce=F[D+j];if(!ee.canBreakChars(N,ce,P,D,t.breakWords))H+=ce;else break;N=ce,j++}D+=j-1;let re=ee._getFromCache(H,f,h,r);re+s>v&&(d+=ee._addLine(o),_=!1,o="",s=0),o+=H,s+=re}}else{o.length>0&&(d+=ee._addLine(o),o="",s=0);let F=A===T.length-1;d+=ee._addLine(P,!F),_=!1,o="",s=0}else I+s>v&&(_=!1,d+=ee._addLine(o),o="",s=0),(o.length>0||!ee.isBreakingSpace(P)||_)&&(o+=P,s+=I)}return d+=ee._addLine(o,!1),d}static _addLine(e,t=!0){return e=ee._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,i,r){let s=i[e];return typeof s!="number"&&(s=ee._measureText(e,t,r)+t,i[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){let i=e[t];if(!ee.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:ee._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ee._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){let t=[],i="";if(typeof e!="string")return t;for(let r=0;r<e.length;r++){let s=e[r],o=e[r+1];if(ee.isBreakingSpace(s,o)||ee._isNewline(s)){i!==""&&(t.push(i),i=""),t.push(s);continue}i+=s}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,r,s){return!0}static wordWrapSplit(e){return ee.graphemeSegmenter(e)}static measureFont(e){if(ee._fonts[e])return ee._fonts[e];let t=ee._context;t.font=e;let i=t.measureText(ee.METRICS_STRING+ee.BASELINE_SYMBOL),r={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return ee._fonts[e]=r,r}static clearMetrics(e=""){e?delete ee._fonts[e]:ee._fonts={}}static get _canvas(){if(!ee.__canvas){let e;try{let t=new OffscreenCanvas(0,0),i=t.getContext("2d",ed);if(i!=null&&i.measureText)return ee.__canvas=t,t;e=xe.get().createCanvas()}catch{e=xe.get().createCanvas()}e.width=e.height=10,ee.__canvas=e}return ee.__canvas}static get _context(){return ee.__context||(ee.__context=ee._canvas.getContext("2d",ed)),ee.__context}};jt.METRICS_STRING="|\xC9q\xC5",jt.BASELINE_SYMBOL="M",jt.BASELINE_MULTIPLIER=1.4,jt.HEIGHT_MULTIPLIER=2,jt.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let a=new Intl.Segmenter;return e=>[...a.segment(e)].map(t=>t.segment)}return a=>[...a]})(),jt.experimentalLetterSpacing=!1,jt._fonts={},jt._newlines=[10,13],jt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],jt._measurementCache={};var oa=jt;function un(a,e){var t;if(a.texture===K.WHITE&&!a.fill)return Ee.shared.setValue(a.color).setAlpha((t=a.alpha)!=null?t:1).toHexa();if(a.fill){if(a.fill instanceof Mi){let i=a.fill,r=e.createPattern(i.texture.source.resource,"repeat"),s=i.transform.copyTo(ie.shared);return s.scale(i.texture.frame.width,i.texture.frame.height),r.setTransform(s),r}else if(a.fill instanceof Nr){let i=a.fill;if(i.type==="linear"){let r=e.createLinearGradient(i.x0,i.y0,i.x1,i.y1);return i.gradientStops.forEach(s=>{r.addColorStop(s.offset,Ee.shared.setValue(s.color).toHex())}),r}}}else{let i=e.createPattern(a.texture.source.resource,"repeat"),r=a.matrix.copyTo(ie.shared);return r.scale(a.texture.frame.width,a.texture.frame.height),i.setTransform(r),i}return"red"}var bn=class{constructor(e){this._activeTextures={},this._renderer=e}getTextureSize(e,t,i){let r=oa.measureText(e||" ",i),s=Math.ceil(Math.ceil(Math.max(1,r.width)+i.padding*2)*t),o=Math.ceil(Math.ceil(Math.max(1,r.height)+i.padding*2)*t);return s=Math.ceil(s-1e-6),o=Math.ceil(o-1e-6),s=Ei(s),o=Ei(o),{width:s,height:o}}getTexture(e,t,i,r){typeof e=="string"&&(e={text:e,style:i,resolution:t}),e.style instanceof Pt||(e.style=new Pt(e.style));let{texture:s,canvasAndContext:o}=this.createTextureAndCanvas(e);return this._renderer.texture.initSource(s._source),da.returnCanvasAndContext(o),s}createTextureAndCanvas(e){var t;let{text:i,style:r}=e,s=(t=e.resolution)!=null?t:this._renderer.resolution,o=oa.measureText(i||" ",r),d=Math.ceil(Math.ceil(Math.max(1,o.width)+r.padding*2)*s),h=Math.ceil(Math.ceil(Math.max(1,o.height)+r.padding*2)*s),f=da.getOptimalCanvasAndContext(d,h),{canvas:u}=f;this.renderTextToCanvas(i,r,s,f);let p=fp(u,d,h,s);if(r.trim){let y=M7(u,s);p.frame.copyFrom(y),p.updateUvs()}return{texture:p,canvasAndContext:f}}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;let t=e._getKey();if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].texture;let{texture:i,canvasAndContext:r}=this.createTextureAndCanvas(e);return this._activeTextures[t]={canvasAndContext:r,texture:i,usageCount:1},i}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){let t=this._activeTextures[e];if(t.usageCount--,t.usageCount===0){da.returnCanvasAndContext(t.canvasAndContext),ze.returnTexture(t.texture);let i=t.texture.source;i.resource=null,i.uploadMethodId="unknown",i.alphaMode="no-premultiply-alpha",this._activeTextures[e]=null}}getReferenceCount(e){return this._activeTextures[e].usageCount}renderTextToCanvas(e,t,i,r){var s,o,d,h,f;let{canvas:u,context:p}=r,y=ln(t),_=oa.measureText(e||" ",t),v=_.lines,T=_.lineHeight,A=_.lineWidths,P=_.maxLineWidth,I=_.fontProperties,F=u.height;if(p.resetTransform(),p.scale(i,i),p.textBaseline=t.textBaseline,(s=t._stroke)!=null&&s.width){let j=t._stroke;p.lineWidth=j.width,p.miterLimit=j.miterLimit,p.lineJoin=j.join,p.lineCap=j.cap}p.font=y;let D,H,N=t.dropShadow?2:1;for(let j=0;j<N;++j){let re=t.dropShadow&&j===0,ce=re?Math.ceil(Math.max(1,F)+t.padding*2):0,Z=ce*i;if(re){p.fillStyle="black",p.strokeStyle="black";let te=t.dropShadow,Ie=te.color,Tt=te.alpha;p.shadowColor=Ee.shared.setValue(Ie).setAlpha(Tt).toRgbaString();let ne=te.blur*i,de=te.distance*i;p.shadowBlur=ne,p.shadowOffsetX=Math.cos(te.angle)*de,p.shadowOffsetY=Math.sin(te.angle)*de+Z}else p.fillStyle=t._fill?un(t._fill,p):null,(o=t._stroke)!=null&&o.width&&(p.strokeStyle=un(t._stroke,p)),p.shadowColor="black";let q=(T-I.fontSize)/2;T-I.fontSize<0&&(q=0);let se=(h=(d=t._stroke)==null?void 0:d.width)!=null?h:0;for(let te=0;te<v.length;te++)D=se/2,H=se/2+te*T+I.ascent+q,t.align==="right"?D+=P-A[te]:t.align==="center"&&(D+=(P-A[te])/2),(f=t._stroke)!=null&&f.width&&this._drawLetterSpacing(v[te],t,r,D+t.padding,H+t.padding-ce,!0),t._fill!==void 0&&this._drawLetterSpacing(v[te],t,r,D+t.padding,H+t.padding-ce)}}_drawLetterSpacing(e,t,i,r,s,o=!1){let{context:d}=i,h=t.letterSpacing,f=!1;if(oa.experimentalLetterSpacingSupported&&(oa.experimentalLetterSpacing?(d.letterSpacing=`${h}px`,d.textLetterSpacing=`${h}px`,f=!0):(d.letterSpacing="0px",d.textLetterSpacing="0px")),h===0||f){o?d.strokeText(e,r,s):d.fillText(e,r,s);return}let u=r,p=oa.graphemeSegmenter(e),y=d.measureText(e).width,_=0;for(let v=0;v<p.length;++v){let T=p[v];o?d.strokeText(T,u,s):d.fillText(T,u,s);let A="";for(let P=v+1;P<p.length;++P)A+=p[P];_=d.measureText(A).width,u+=y-_+h,y=_}}destroy(){this._activeTextures=null}};bn.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"canvasText"},pe.add(bn),pe.add(dn);var A9=Object.defineProperty,pn=Object.getOwnPropertySymbols,lp=Object.prototype.hasOwnProperty,up=Object.prototype.propertyIsEnumerable,B0=(a,e,t)=>e in a?A9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,E9=(a,e)=>{for(var t in e||(e={}))lp.call(e,t)&&B0(a,t,e[t]);if(pn)for(var t of pn(e))up.call(e,t)&&B0(a,t,e[t]);return a},P9=(a,e)=>{var t={};for(var i in a)lp.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&pn)for(var i of pn(a))e.indexOf(i)<0&&up.call(a,i)&&(t[i]=a[i]);return t},We=class a extends fa{constructor(e){e instanceof dt&&(e={context:e});let t=e||{},{context:i,roundPixels:r}=t,s=P9(t,["context","roundPixels"]);super(E9({label:"Graphics"},s)),this.renderPipeId="graphics",i?this._context=i:this._context=this._ownedContext=new dt,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=r??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new a(this._context.clone()):(this._ownedContext=null,new a(this._context))}lineStyle(e,t,i){let r={};return e&&(r.width=e),t&&(r.color=t),i&&(r.alpha=i),this.context.strokeStyle=r,this}beginFill(e,t){let i={};return e!==void 0&&(i.color=e),t!==void 0&&(i.alpha=t),this.context.fillStyle=i,this}endFill(){this.context.fill();let e=this.context.strokeStyle;return(e.width!==dt.defaultStrokeStyle.width||e.color!==dt.defaultStrokeStyle.color||e.alpha!==dt.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return this._callContextMethod("circle",e)}drawEllipse(...e){return this._callContextMethod("ellipse",e)}drawPolygon(...e){return this._callContextMethod("poly",e)}drawRect(...e){return this._callContextMethod("rect",e)}drawRoundedRect(...e){return this._callContextMethod("roundRect",e)}drawStar(...e){return this._callContextMethod("star",e)}},R9={name:"local-uniform-msdf-bit",vertex:{header:`
struct LocalUniforms {
uColor:vec4<f32>,
uTransformMatrix:mat3x3<f32>,
uDistance: f32,
uRound:f32,
}

@group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:`
vColor *= localUniforms.uColor;
modelMatrix *= localUniforms.uTransformMatrix;
`,end:`
if(localUniforms.uRound == 1)
{
vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`},fragment:{header:`
struct LocalUniforms {
uColor:vec4<f32>,
uTransformMatrix:mat3x3<f32>,
uDistance: f32
}

@group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:` 
outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
`}},M9={name:"local-uniform-msdf-bit",vertex:{header:`
uniform mat3 uTransformMatrix;
uniform vec4 uColor;
uniform float uRound;
`,main:`
vColor *= uColor;
modelMatrix *= uTransformMatrix;
`,end:`
if(uRound == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`},fragment:{header:`
uniform float uDistance;
`,main:` 
outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
`}},C9={name:"msdf-bit",fragment:{header:`
fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

// MSDF
var median = msdfColor.r + msdfColor.g + msdfColor.b -
min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
max(msdfColor.r, max(msdfColor.g, msdfColor.b));

// SDF
median = min(median, msdfColor.a);

var screenPxDistance = distance * (median - 0.5);
var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
if (median < 0.01) {
alpha = 0.0;
} else if (median > 0.99) {
alpha = 1.0;
}

// Gamma correction for coverage-like alpha
var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
var coverage: f32 = pow(shapeColor.a * alpha, gamma);

return coverage;

}
`}},O9={name:"msdf-bit",fragment:{header:`
float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

// MSDF
float median = msdfColor.r + msdfColor.g + msdfColor.b -
            min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
            max(msdfColor.r, max(msdfColor.g, msdfColor.b));

// SDF
median = min(median, msdfColor.a);

float screenPxDistance = distance * (median - 0.5);
float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

if (median < 0.01) {
alpha = 0.0;
} else if (median > 0.99) {
alpha = 1.0;
}

// Gamma correction for coverage-like alpha
float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
float gamma = mix(1.0, 1.0 / 2.2, luma);
float coverage = pow(shapeColor.a * alpha, gamma);  

return coverage;
}
`}},td,ad,mh=class extends ht{constructor(){let e=new Je({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),t=Ii();td!=null||(td=Vr({name:"sdf-shader",bits:[xf,Tf(t),R9,C9,Yr]})),ad!=null||(ad=Wr({name:"sdf-shader",bits:[vf,Sf(t),M9,O9,$r]})),super({glProgram:ad,gpuProgram:td,resources:{localUniforms:e,batchSamplers:wf(t)}})}},id=0,F0=500;function Jt(...a){id!==F0&&id++}var gn=class extends xt{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return this.fontFamily}get pageTextures(){return this.pages}get size(){return this.fontMetrics.fontSize}get distanceFieldRange(){return this.distanceField.range}get distanceFieldType(){return this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(let i in this.chars)(t=this.chars[i].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}};function bp(a){if(a==="")return[];typeof a=="string"&&(a=[a]);let e=[];for(let t=0,i=a.length;t<i;t++){let r=a[t];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");let s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let d=s,h=o;d<=h;d++)e.push(String.fromCharCode(d))}else e.push(...Array.from(r))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var I9=Object.defineProperty,D0=Object.getOwnPropertySymbols,G9=Object.prototype.hasOwnProperty,B9=Object.prototype.propertyIsEnumerable,k0=(a,e,t)=>e in a?I9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,U0=(a,e)=>{for(var t in e||(e={}))G9.call(e,t)&&k0(a,t,e[t]);if(D0)for(var t of D0(e))B9.call(e,t)&&k0(a,t,e[t]);return a},pp=class gp extends gn{constructor(e){var t,i,r;super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;let s=U0(U0({},gp.defaultOptions),e);this._textureSize=s.textureSize,this._mipmap=s.mipmap;let o=s.style.clone();s.overrideFill&&(o._fill.color=16777215,o._fill.alpha=1,o._fill.texture=K.WHITE,o._fill.fill=null),this.applyFillAsTint=s.overrideFill;let d=o.fontSize;o.fontSize=this.baseMeasurementFontSize;let h=ln(o);s.overrideSize?o._stroke&&(o._stroke.width*=this.baseRenderedFontSize/d):o.fontSize=this.baseRenderedFontSize=d,this._style=o,this._skipKerning=(t=s.skipKerning)!=null?t:!1,this.resolution=(i=s.resolution)!=null?i:1,this._padding=(r=s.padding)!=null?r:4,this.fontMetrics=oa.measureFont(h),this.lineHeight=o.lineHeight||this.fontMetrics.fontSize||o.fontSize}ensureCharacters(e){var t,i,r,s;let o=bp(e).filter(D=>!this._currentChars.includes(D)).filter((D,H,N)=>N.indexOf(D)===H);if(!o.length)return;this._currentChars=[...this._currentChars,...o];let d;this._currentPageIndex===-1?d=this._nextPage():d=this.pages[this._currentPageIndex];let{canvas:h,context:f}=d.canvasAndContext,u=d.texture.source,p=this._style,y=this._currentX,_=this._currentY,v=this.baseRenderedFontSize/this.baseMeasurementFontSize,T=this._padding*v,A=0,P=!1,I=h.width/this.resolution,F=h.height/this.resolution;for(let D=0;D<o.length;D++){let H=o[D],N=oa.measureText(H,p,h,!1);N.lineHeight=N.height;let j=N.width*v,re=Math.ceil((p.fontStyle==="italic"?2:1)*j),ce=N.height*v,Z=re+T*2,q=ce+T*2;if(P=!1,H!==`
`&&H!=="\r"&&H!=="	"&&H!==" "&&(P=!0,A=Math.ceil(Math.max(q,A))),y+Z>I&&(_+=A,A=q,y=0,_+A>F)){u.update();let te=this._nextPage();h=te.canvasAndContext.canvas,f=te.canvasAndContext.context,u=te.texture.source,_=0}let se=j/v-((i=(t=p.dropShadow)==null?void 0:t.distance)!=null?i:0)-((s=(r=p._stroke)==null?void 0:r.width)!=null?s:0);if(this.chars[H]={id:H.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:se,kerning:{}},P){this._drawGlyph(f,N,y+T,_+T,v,p);let te=u.width*v,Ie=u.height*v,Tt=new Pe(y/te*u.width,_/Ie*u.height,Z/te*u.width,q/Ie*u.height);this.chars[H].texture=new K({source:u,frame:Tt}),y+=Math.ceil(Z)}}u.update(),this._currentX=y,this._currentY=_,this._skipKerning&&this._applyKerning(o,f)}get pageTextures(){return this.pages}_applyKerning(e,t){let i=this._measureCache;for(let r=0;r<e.length;r++){let s=e[r];for(let o=0;o<this._currentChars.length;o++){let d=this._currentChars[o],h=i[s];h||(h=i[s]=t.measureText(s).width);let f=i[d];f||(f=i[d]=t.measureText(d).width);let u=t.measureText(s+d).width,p=u-(h+f);p&&(this.chars[s].kerning[d]=p),u=t.measureText(s+d).width,p=u-(h+f),p&&(this.chars[d].kerning[s]=p)}}}_nextPage(){this._currentPageIndex++;let e=this.resolution,t=da.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);let i=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new K({source:new Oa({resource:t.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),s={canvasAndContext:t,texture:r};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,t,i){var r;t.fontSize=this.baseRenderedFontSize,e.scale(i,i),e.font=ln(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;let s=t._stroke,o=(r=s?.width)!=null?r:0;if(s&&(e.lineWidth=o,e.lineJoin=s.join,e.miterLimit=s.miterLimit,e.strokeStyle=un(s,e)),t._fill&&(e.fillStyle=un(t._fill,e)),t.dropShadow){let d=t.dropShadow,h=Ee.shared.setValue(d.color).toArray(),f=d.blur*i,u=d.distance*i;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${d.alpha})`,e.shadowBlur=f,e.shadowOffsetX=Math.cos(d.angle)*u,e.shadowOffsetY=Math.sin(d.angle)*u}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,i,r,s,o){var d;let h=t.text,f=t.fontProperties,u=o._stroke,p=((d=u?.width)!=null?d:0)*s,y=i+p/2,_=r-p/2,v=f.descent*s,T=t.lineHeight*s;o.stroke&&p&&e.strokeText(h,y,_+T-v),o._fill&&e.fillText(h,y,_+T-v)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{canvasAndContext:t,texture:i}=this.pages[e];da.returnCanvasAndContext(t),i.destroy(!0)}this.pages=null}};pp.defaultOptions={textureSize:512,style:new Pt,mipmap:!0};var L0=pp;function mp(a,e,t,i){let r={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=t.baseLineOffset;let s=r.lines[0],o=null,d=!0,h={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},f=v=>{let T=s.width;for(let A=0;A<h.index;A++){let P=v.positions[A];s.chars.push(v.chars[A]),s.charPositions.push(P+T)}s.width+=v.width,d=!1,h.width=0,h.index=0,h.chars.length=0},u=()=>{let v=s.chars.length-1;if(i){let T=s.chars[v];for(;T===" ";)s.width-=t.chars[T].xAdvance,T=s.chars[--v]}r.width=Math.max(r.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},d=!0,r.lines.push(s),r.height+=t.lineHeight},p=t.baseMeasurementFontSize/e.fontSize,y=e.letterSpacing*p,_=e.wordWrapWidth*p;for(let v=0;v<a.length+1;v++){let T,A=v===a.length;A||(T=a[v]);let P=t.chars[T]||t.chars[" "];if(/(?:\s)/.test(T)||T==="\r"||T===`
`||A){if(!d&&e.wordWrap&&s.width+h.width-y>_?(u(),f(h),A||s.charPositions.push(0)):(h.start=s.width,f(h),A||s.charPositions.push(0)),T==="\r"||T===`
`)s.width!==0&&u();else if(!A){let I=P.xAdvance+(P.kerning[o]||0)+y;s.width+=I,s.spaceWidth=I,s.spacesIndex.push(s.charPositions.length),s.chars.push(T)}}else{let I=P.kerning[o]||0,F=P.xAdvance+I+y;h.positions[h.index++]=h.width+I,h.chars.push(T),h.width+=F}o=T}return u(),e.align==="center"?F9(r):e.align==="right"?D9(r):e.align==="justify"&&k9(r),r}function F9(a){for(let e=0;e<a.lines.length;e++){let t=a.lines[e],i=a.width/2-t.width/2;for(let r=0;r<t.charPositions.length;r++)t.charPositions[r]+=i}}function D9(a){for(let e=0;e<a.lines.length;e++){let t=a.lines[e],i=a.width-t.width;for(let r=0;r<t.charPositions.length;r++)t.charPositions[r]+=i}}function k9(a){let e=a.width;for(let t=0;t<a.lines.length;t++){let i=a.lines[t],r=0,s=i.spacesIndex[r++],o=0,d=i.spacesIndex.length,h=(e-i.width)/d;for(let f=0;f<i.charPositions.length;f++)f===s&&(s=i.spacesIndex[r++],o+=h),i.charPositions[f]+=o}}var U9=Object.defineProperty,N0=Object.getOwnPropertySymbols,L9=Object.prototype.hasOwnProperty,N9=Object.prototype.propertyIsEnumerable,j0=(a,e,t)=>e in a?U9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,rd=(a,e)=>{for(var t in e||(e={}))L9.call(e,t)&&j0(a,t,e[t]);if(N0)for(var t of N0(e))N9.call(e,t)&&j0(a,t,e[t]);return a},ws=0,j9=class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(a,e){var t;let i=`${e.fontFamily}-bitmap`,r=!0;if(e._fill.fill&&!e._stroke)i+=e._fill.fill.styleKey,r=!1;else if(e._stroke||e.dropShadow){let o=e.styleKey;o=o.substring(0,o.lastIndexOf("-")),i=`${o}-bitmap`,r=!1}if(!Oe.has(i)){let o=new L0(rd({style:e,overrideFill:r,overrideSize:!0},this.defaultOptions));ws++,ws>50&&Jt("BitmapText",`You have dynamically created ${ws} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),o.once("destroy",()=>{ws--,Oe.remove(i)}),Oe.set(i,o)}let s=Oe.get(i);return(t=s.ensureCharacters)==null||t.call(s,a),s}getLayout(a,e,t=!0){let i=this.getFont(a,e);return mp([...a],e,i,t)}measureText(a,e,t=!0){return this.getLayout(a,e,t)}install(...a){var e,t,i,r;let s=a[0];typeof s=="string"&&(s={name:s,style:a[1],chars:(e=a[2])==null?void 0:e.chars,resolution:(t=a[2])==null?void 0:t.resolution,padding:(i=a[2])==null?void 0:i.padding,skipKerning:(r=a[2])==null?void 0:r.skipKerning});let o=s?.name;if(!o)throw new Error("[BitmapFontManager] Property `name` is required.");s=rd(rd({},this.defaultOptions),s);let d=s.style,h=d instanceof Pt?d:new Pt(d),f=h._fill.fill!==null&&h._fill.fill!==void 0,u=new L0({style:h,overrideFill:f,skipKerning:s.skipKerning,padding:s.padding,resolution:s.resolution,overrideSize:!1}),p=bp(s.chars);return u.ensureCharacters(p.join("")),Oe.set(`${o}-bitmap`,u),u.once("destroy",()=>Oe.remove(`${o}-bitmap`)),u}uninstall(a){let e=`${a}-bitmap`,t=Oe.get(e);t&&t.destroy()}},mn=new j9,_n=class{constructor(e){this._gpuBitmapText={},this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(e){let t=this._getGpuBitmapText(e);return e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,t)),this._renderer.renderPipes.graphics.validateRenderable(t)}addRenderable(e,t){let i=this._getGpuBitmapText(e);X0(e,i),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,i)),this._renderer.renderPipes.graphics.addRenderable(i,t),i.context.customShader&&this._updateDistanceField(e)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableByUid(e.uid)}_destroyRenderableByUid(e){let t=this._gpuBitmapText[e].context;t.customShader&&(ye.return(t.customShader),t.customShader=null),ye.return(this._gpuBitmapText[e]),this._gpuBitmapText[e]=null}updateRenderable(e){let t=this._getGpuBitmapText(e);X0(e,t),this._renderer.renderPipes.graphics.updateRenderable(t),t.context.customShader&&this._updateDistanceField(e)}_updateContext(e,t){let{context:i}=t,r=mn.getFont(e.text,e._style);i.clear(),r.distanceField.type!=="none"&&(i.customShader||(i.customShader=ye.get(mh)));let s=Array.from(e.text),o=e._style,d=r.baseLineOffset,h=mp(s,o,r,!0),f=0,u=o.padding,p=h.scale,y=h.width,_=h.height+h.offsetY;o._stroke&&(y+=o._stroke.width/p,_+=o._stroke.width/p),i.translate(-e._anchor._x*y-u,-e._anchor._y*_-u).scale(p,p);let v=r.applyFillAsTint?o._fill.color:16777215;for(let T=0;T<h.lines.length;T++){let A=h.lines[T];for(let P=0;P<A.charPositions.length;P++){let I=s[f++],F=r.chars[I];F!=null&&F.texture&&i.texture(F.texture,v||"black",Math.round(A.charPositions[P]+F.xOffset),Math.round(d+F.yOffset))}d+=r.lineHeight}}_getGpuBitmapText(e){return this._gpuBitmapText[e.uid]||this.initGpuText(e)}initGpuText(e){let t=ye.get(We);return this._gpuBitmapText[e.uid]=t,this._updateContext(e,t),e.on("destroyed",this._destroyRenderableBound),this._gpuBitmapText[e.uid]}_updateDistanceField(e){let t=this._getGpuBitmapText(e).context,i=e._style.fontFamily,r=Oe.get(`${i}-bitmap`),{a:s,b:o,c:d,d:h}=e.groupTransform,f=Math.sqrt(s*s+o*o),u=Math.sqrt(d*d+h*h),p=(Math.abs(f)+Math.abs(u))/2,y=r.baseRenderedFontSize/e._style.fontSize,_=p*r.distanceField.range*(1/y);t.customShader.resources.localUniforms.uniforms.uDistance=_}destroy(){for(let e in this._gpuBitmapText)this._destroyRenderableByUid(e);this._gpuBitmapText=null,this._renderer=null}};_n.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"bitmapText"};function X0(a,e){e.groupTransform=a.groupTransform,e.groupColorAlpha=a.groupColorAlpha,e.groupColor=a.groupColor,e.groupBlendMode=a.groupBlendMode,e.globalDisplayStatus=a.globalDisplayStatus,e.groupTransform=a.groupTransform,e.localDisplayStatus=a.localDisplayStatus,e.groupAlpha=a.groupAlpha,e._roundPixels=a._roundPixels}pe.add(_n);var yn=class{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let e in this._gpuText){let t=this._gpuText[e];if(!t)continue;let i=t.batchableSprite.renderable;i._autoResolution&&(i._resolution=this._renderer.resolution,i.onViewUpdate())}}validateRenderable(e){let t=this._getGpuText(e),i=e._getKey();return t.textureNeedsUploading?(t.textureNeedsUploading=!1,!0):t.currentKey!==i}addRenderable(e,t){let i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),t._batcher.updateElement(t)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){let t=this._gpuText[e];this._renderer.htmlText.decreaseReferenceCount(t.currentKey),ye.return(t.batchableSprite),this._gpuText[e]=null}_updateText(e){let t=e._getKey(),i=this._getGpuText(e),r=i.batchableSprite;i.currentKey!==t&&this._updateGpuText(e).catch(s=>{}),e._didTextUpdate=!1,nh(r,e)}async _updateGpuText(e){var t;e._didTextUpdate=!1;let i=this._getGpuText(e);if(i.generatingTexture)return;let r=e._getKey();this._renderer.htmlText.decreaseReferenceCount(i.currentKey),i.generatingTexture=!0,i.currentKey=r;let s=(t=e.resolution)!=null?t:this._renderer.resolution,o=await this._renderer.htmlText.getManagedTexture(e.text,s,e._style,e._getKey()),d=i.batchableSprite;d.texture=i.texture=o,i.generatingTexture=!1,i.textureNeedsUploading=!0,e.onViewUpdate(),nh(d,e)}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){let t={texture:K.EMPTY,currentKey:"--",batchableSprite:ye.get(Ri),textureNeedsUploading:!1,generatingTexture:!1},i=t.batchableSprite;return i.renderable=e,i.transform=e.groupTransform,i.texture=K.EMPTY,i.bounds={minX:0,maxX:1,minY:0,maxY:0},i.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._gpuText[e.uid]=t,e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}};yn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"htmlText"};function X9(){let{userAgent:a}=xe.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(a)}var H0="http://www.w3.org/2000/svg",z0="http://www.w3.org/1999/xhtml",xn=class{constructor(){this.svgRoot=document.createElementNS(H0,"svg"),this.foreignObject=document.createElementNS(H0,"foreignObject"),this.domElement=document.createElementNS(z0,"div"),this.styleElement=document.createElementNS(z0,"style"),this.image=new Image;let{foreignObject:e,svgRoot:t,styleElement:i,domElement:r}=this;e.setAttribute("width","10000"),e.setAttribute("height","10000"),e.style.overflow="hidden",t.appendChild(e),e.appendChild(i),e.appendChild(r)}};function H9(a){let e=a._stroke,t=a._fill,i=[`div { ${[`color: ${Ee.shared.setValue(t.color).toHex()}`,`font-size: ${a.fontSize}px`,`font-family: ${a.fontFamily}`,`font-weight: ${a.fontWeight}`,`font-style: ${a.fontStyle}`,`font-variant: ${a.fontVariant}`,`letter-spacing: ${a.letterSpacing}px`,`text-align: ${a.align}`,`padding: ${a.padding}px`,`white-space: ${a.whiteSpace==="pre"&&a.wordWrap?"pre-wrap":a.whiteSpace}`,...a.lineHeight?[`line-height: ${a.lineHeight}px`]:[],...a.wordWrap?[`word-wrap: ${a.breakWords?"break-all":"break-word"}`,`max-width: ${a.wordWrapWidth}px`]:[],...e?[yp(e)]:[],...a.dropShadow?[_p(a.dropShadow)]:[],...a.cssOverrides].join(";")} }`];return z9(a.tagStyles,i),i.join(" ")}function _p(a){let e=Ee.shared.setValue(a.color).setAlpha(a.alpha).toHexa(),t=Math.round(Math.cos(a.angle)*a.distance),i=Math.round(Math.sin(a.angle)*a.distance),r=`${t}px ${i}px`;return a.blur>0?`text-shadow: ${r} ${a.blur}px ${e}`:`text-shadow: ${r} ${e}`}function yp(a){return[`-webkit-text-stroke-width: ${a.width}px`,`-webkit-text-stroke-color: ${Ee.shared.setValue(a.color).toHex()}`,`text-stroke-width: ${a.width}px`,`text-stroke-color: ${Ee.shared.setValue(a.color).toHex()}`,"paint-order: stroke"].join(";")}var V0={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},W0={fill:a=>`color: ${Ee.shared.setValue(a).toHex()}`,breakWords:a=>`word-wrap: ${a?"break-all":"break-word"}`,stroke:yp,dropShadow:_p};function z9(a,e){for(let t in a){let i=a[t],r=[];for(let s in i)W0[s]?r.push(W0[s](i[s])):V0[s]&&r.push(V0[s].replace("{{VALUE}}",i[s]));e.push(`${t} { ${r.join(";")} }`)}}var V9=Object.defineProperty,Y0=Object.getOwnPropertySymbols,W9=Object.prototype.hasOwnProperty,Y9=Object.prototype.propertyIsEnumerable,$0=(a,e,t)=>e in a?V9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,$9=(a,e)=>{for(var t in e||(e={}))W9.call(e,t)&&$0(a,t,e[t]);if(Y0)for(var t of Y0(e))Y9.call(e,t)&&$0(a,t,e[t]);return a},vn=class a extends Pt{constructor(e={}){var t,i;super(e),this._cssOverrides=[],(t=this.cssOverrides)!=null||(this.cssOverrides=e.cssOverrides),this.tagStyles=(i=e.tagStyles)!=null?i:{}}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=dp(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new a({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?$9({},this.dropShadow):null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=H9(this)),this._cssStyle}addOverride(...e){let t=e.filter(i=>!this.cssOverrides.includes(i));t.length>0&&(this.cssOverrides.push(...t),this.update())}removeOverride(...e){let t=e.filter(i=>this.cssOverrides.includes(i));t.length>0&&(this.cssOverrides=this.cssOverrides.filter(i=>!t.includes(i)),this.update())}set fill(e){super.fill=e}set stroke(e){super.stroke=e}};function K9(a,e){let t=e.fontFamily,i=[],r={},s=/font-family:([^;"\s]+)/g,o=a.match(s);function d(h){r[h]||(i.push(h),r[h]=!0)}if(Array.isArray(t))for(let h=0;h<t.length;h++)d(t[h]);else d(t);o&&o.forEach(h=>{let f=h.split(":")[1].trim();d(f)});for(let h in e.tagStyles){let f=e.tagStyles[h].fontFamily;d(f)}return i}async function q9(a){let e=await(await xe.get().fetch(a)).blob(),t=new FileReader;return await new Promise((i,r)=>{t.onloadend=()=>i(t.result),t.onerror=r,t.readAsDataURL(e)})}async function K0(a,e){let t=await q9(e);return`@font-face {
font-family: "${a.fontFamily}";
src: url('${t}');
font-weight: ${a.fontWeight};
font-style: ${a.fontStyle};
}`}var As=new Map;async function Z9(a,e,t){let i=a.filter(r=>Oe.has(`${r}-and-url`)).map((r,s)=>{if(!As.has(r)){let{url:o}=Oe.get(`${r}-and-url`);s===0?As.set(r,K0({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:r},o)):As.set(r,K0({fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:r},o))}return As.get(r)});return(await Promise.all(i)).join(`
`)}function Q9(a,e,t,i,r){let{domElement:s,styleElement:o,svgRoot:d}=r;s.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${a}</div>`,s.setAttribute("style",`transform: scale(${t});transform-origin: top left; display: inline-block`),o.textContent=i;let{width:h,height:f}=r.image;return d.setAttribute("width",h.toString()),d.setAttribute("height",f.toString()),new XMLSerializer().serializeToString(d)}function J9(a,e){let t=da.getOptimalCanvasAndContext(a.width,a.height,e),{context:i}=t;return i.clearRect(0,0,a.width,a.height),i.drawImage(a,0,0),t}function eg(a,e,t){return new Promise(async i=>{t&&await new Promise(r=>setTimeout(r,100)),a.onload=()=>{i()},a.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,a.crossOrigin="anonymous"})}var q0;function xp(a,e,t,i){i||(i=q0||(q0=new xn));let{domElement:r,styleElement:s,svgRoot:o}=i;r.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${a}</div>`,r.setAttribute("style","transform-origin: top left; display: inline-block"),t&&(s.textContent=t),document.body.appendChild(o);let d=r.getBoundingClientRect();o.remove();let h=e.padding*2;return{width:d.width-h,height:d.height-h}}var Ar=class{constructor(e){this._activeTextures={},this._renderer=e,this._createCanvas=e.type===yt.WEBGPU}getTexture(e){return this._buildTexturePromise(e.text,e.resolution,e.style)}getManagedTexture(e,t,i,r){if(this._activeTextures[r])return this._increaseReferenceCount(r),this._activeTextures[r].promise;let s=this._buildTexturePromise(e,t,i).then(o=>(this._activeTextures[r].texture=o,o));return this._activeTextures[r]={texture:null,promise:s,usageCount:1},s}async _buildTexturePromise(e,t,i){let r=ye.get(xn),s=K9(e,i),o=await Z9(s,i,vn.defaultTextStyle),d=xp(e,i,o,r),h=Math.ceil(Math.ceil(Math.max(1,d.width)+i.padding*2)*t),f=Math.ceil(Math.ceil(Math.max(1,d.height)+i.padding*2)*t),u=r.image,p=2;u.width=(h|0)+p,u.height=(f|0)+p;let y=Q9(e,i,t,o,r);await eg(u,y,X9()&&s.length>0);let _=u,v;this._createCanvas&&(v=J9(u,t));let T=fp(v?v.canvas:_,u.width-p,u.height-p,t);return this._createCanvas&&(this._renderer.texture.initSource(T.source),da.returnCanvasAndContext(v)),ye.return(r),T}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){let t=this._activeTextures[e];t&&(t.usageCount--,t.usageCount===0&&(t.texture?this._cleanUp(t):t.promise.then(i=>{t.texture=i,this._cleanUp(t)}).catch(()=>{}),this._activeTextures[e]=null))}_cleanUp(e){ze.returnTexture(e.texture),e.texture.source.resource=null,e.texture.source.uploadMethodId="unknown"}getReferenceCount(e){return this._activeTextures[e].usageCount}destroy(){this._activeTextures=null}};Ar.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"htmlText"},Ar.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"},pe.add(Ar),pe.add(yn);var tg=Object.defineProperty,Z0=Object.getOwnPropertySymbols,ag=Object.prototype.hasOwnProperty,ig=Object.prototype.propertyIsEnumerable,Q0=(a,e,t)=>e in a?tg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,J0=(a,e)=>{for(var t in e||(e={}))ag.call(e,t)&&Q0(a,t,e[t]);if(Z0)for(var t of Z0(e))ig.call(e,t)&&Q0(a,t,e[t]);return a},vp=class Tp extends Zt{constructor(...e){var t;let i=(t=e[0])!=null?t:{};i instanceof Float32Array&&(i={positions:i,uvs:e[1],indices:e[2]}),i=J0(J0({},Tp.defaultOptions),i);let r=i.positions||new Float32Array([0,0,1,0,1,1,0,1]),s=i.uvs;s||(i.positions?s=new Float32Array(r.length):s=new Float32Array([0,0,1,0,1,1,0,1]));let o=i.indices||new Uint32Array([0,1,2,0,2,3]),d=i.shrinkBuffersToFit,h=new rt({data:r,label:"attribute-mesh-positions",shrinkToFit:d,usage:ve.VERTEX|ve.COPY_DST}),f=new rt({data:s,label:"attribute-mesh-uvs",shrinkToFit:d,usage:ve.VERTEX|ve.COPY_DST}),u=new rt({data:o,label:"index-mesh-buffer",shrinkToFit:d,usage:ve.INDEX|ve.COPY_DST});super({attributes:{aPosition:{buffer:h,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:f,format:"float32x2",stride:2*4,offset:0}},indexBuffer:u,topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};vp.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};var qr=vp,rg=Object.defineProperty,sg=Object.defineProperties,ng=Object.getOwnPropertyDescriptors,eb=Object.getOwnPropertySymbols,og=Object.prototype.hasOwnProperty,cg=Object.prototype.propertyIsEnumerable,tb=(a,e,t)=>e in a?rg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ab=(a,e)=>{for(var t in e||(e={}))og.call(e,t)&&tb(a,t,e[t]);if(eb)for(var t of eb(e))cg.call(e,t)&&tb(a,t,e[t]);return a},ib=(a,e)=>sg(a,ng(e)),Er={name:"local-uniform-bit",vertex:{header:`

struct LocalUniforms {
uTransformMatrix:mat3x3<f32>,
uColor:vec4<f32>,
uRound:f32,
}

@group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:`
vColor *= localUniforms.uColor;
modelMatrix *= localUniforms.uTransformMatrix;
`,end:`
if(localUniforms.uRound == 1)
{
vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`}},dg=ib(ab({},Er),{vertex:ib(ab({},Er.vertex),{header:Er.vertex.header.replace("group(1)","group(2)")})}),Pf={name:"local-uniform-bit",vertex:{header:`

uniform mat3 uTransformMatrix;
uniform vec4 uColor;
uniform float uRound;
`,main:`
vColor *= uColor;
modelMatrix = uTransformMatrix;
`,end:`
if(uRound == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`}},hg={name:"tiling-bit",vertex:{header:`
struct TilingUniforms {
uMapCoord:mat3x3<f32>,
uClampFrame:vec4<f32>,
uClampOffset:vec2<f32>,
uTextureTransform:mat3x3<f32>,
uSizeAnchor:vec4<f32>
};

@group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
@group(2) @binding(1) var uTexture: texture_2d<f32>;
@group(2) @binding(2) var uSampler: sampler;
`,main:`
uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
`},fragment:{header:`
struct TilingUniforms {
uMapCoord:mat3x3<f32>,
uClampFrame:vec4<f32>,
uClampOffset:vec2<f32>,
uTextureTransform:mat3x3<f32>,
uSizeAnchor:vec4<f32>
};

@group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
@group(2) @binding(1) var uTexture: texture_2d<f32>;
@group(2) @binding(2) var uSampler: sampler;
`,main:`

var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
var unclamped = coord;
coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

var bias = 0.;

if(unclamped.x == coord.x && unclamped.y == coord.y)
{
bias = -32.;
} 

outColor = textureSampleBias(uTexture, uSampler, coord, bias);
`}},fg={name:"tiling-bit",vertex:{header:`
uniform mat3 uTextureTransform;
uniform vec4 uSizeAnchor;

`,main:`
uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
`},fragment:{header:`
uniform sampler2D uTexture;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;
`,main:`

vec2 coord = vUV + ceil(uClampOffset - vUV);
coord = (uMapCoord * vec3(coord, 1.0)).xy;
vec2 unclamped = coord;
coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

`}},sd,nd,_h=class extends ht{constructor(){sd!=null||(sd=Vr({name:"tiling-sprite-shader",bits:[Er,hg,Yr]})),nd!=null||(nd=Wr({name:"tiling-sprite-shader",bits:[Pf,fg,$r]}));let e=new Je({uMapCoord:{value:new ie,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new ie,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:nd,gpuProgram:sd,resources:{localUniforms:new Je({uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:K.EMPTY.source,uSampler:K.EMPTY.source.style}})}updateUniforms(e,t,i,r,s,o){let d=this.resources.tilingUniforms,h=o.width,f=o.height,u=o.textureMatrix,p=d.uniforms.uTextureTransform;p.set(i.a*h/e,i.b*h/t,i.c*f/e,i.d*f/t,i.tx/e,i.ty/t),p.invert(),d.uniforms.uMapCoord=u.mapCoord,d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset,d.uniforms.uTextureTransform=p,d.uniforms.uSizeAnchor[0]=e,d.uniforms.uSizeAnchor[1]=t,d.uniforms.uSizeAnchor[2]=r,d.uniforms.uSizeAnchor[3]=s,o&&(this.resources.uTexture=o.source,this.resources.uSampler=o.source.style)}},yh=class extends qr{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}};function lg(a,e){let t=a.anchor.x,i=a.anchor.y;e[0]=-t*a.width,e[1]=-i*a.height,e[2]=(1-t)*a.width,e[3]=-i*a.height,e[4]=(1-t)*a.width,e[5]=(1-i)*a.height,e[6]=-t*a.width,e[7]=(1-i)*a.height}function ug(a,e,t,i){let r=0,s=a.length/(e||2),o=i.a,d=i.b,h=i.c,f=i.d,u=i.tx,p=i.ty;for(t*=e;r<s;){let y=a[t],_=a[t+1];a[t]=o*y+h*_+u,a[t+1]=d*y+f*_+p,t+=e,r++}}function bg(a,e){let t=a.texture,i=t.frame.width,r=t.frame.height,s=0,o=0;a.applyAnchorToTexture&&(s=a.anchor.x,o=a.anchor.y),e[0]=e[6]=-s,e[2]=e[4]=1-s,e[1]=e[3]=-o,e[5]=e[7]=1-o;let d=ie.shared;d.copyFrom(a._tileTransform.matrix),d.tx/=a.width,d.ty/=a.height,d.invert(),d.scale(a.width/i,a.height/r),ug(e,2,0,d)}var Es=new yh,Tn=class{constructor(e){this._state=Et.default2d,this._tilingSpriteDataHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_tilingSpriteDataHash")}validateRenderable(e){let t=this._getTilingSpriteData(e),i=t.canBatch;this._updateCanBatch(e);let r=t.canBatch;if(r&&r===i){let{batchableMesh:s}=t;return!s._batcher.checkAndUpdateTexture(s,e.texture)}return i!==r}addRenderable(e,t){let i=this._renderer.renderPipes.batch;this._updateCanBatch(e);let r=this._getTilingSpriteData(e),{geometry:s,canBatch:o}=r;if(o){r.batchableMesh||(r.batchableMesh=new Lr);let d=r.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),d.geometry=s,d.renderable=e,d.transform=e.groupTransform,d.setTexture(e._texture)),d.roundPixels=this._renderer._roundPixels|e._roundPixels,i.addToBatch(d,t)}else i.break(t),r.shader||(r.shader=new _h),this.updateRenderable(e),t.add(e)}execute(e){let{shader:t}=this._tilingSpriteDataHash[e.uid];t.groups[0]=this._renderer.globalUniforms.bindGroup;let i=t.resources.localUniforms.uniforms;i.uTransformMatrix=e.groupTransform,i.uRound=this._renderer._roundPixels|e._roundPixels,Kr(e.groupColorAlpha,i.uColor,0),this._state.blendMode=Ir(e.groupBlendMode,e.texture._source),this._renderer.encoder.draw({geometry:Es,shader:t,state:this._state})}updateRenderable(e){let t=this._getTilingSpriteData(e),{canBatch:i}=t;if(i){let{batchableMesh:r}=t;e.didViewUpdate&&this._updateBatchableMesh(e),r._batcher.updateElement(r)}else if(e.didViewUpdate){let{shader:r}=t;r.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}destroyRenderable(e){var t;let i=this._getTilingSpriteData(e);i.batchableMesh=null,(t=i.shader)==null||t.destroy(),this._tilingSpriteDataHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_getTilingSpriteData(e){return this._tilingSpriteDataHash[e.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){let t=new qr({indices:Es.indices,positions:Es.positions.slice(),uvs:Es.uvs.slice()});return this._tilingSpriteDataHash[e.uid]={canBatch:!0,renderable:e,geometry:t},e.on("destroyed",this._destroyRenderableBound),this._tilingSpriteDataHash[e.uid]}_updateBatchableMesh(e){let t=this._getTilingSpriteData(e),{geometry:i}=t,r=e.texture.source.style;r.addressMode!=="repeat"&&(r.addressMode="repeat",r.update()),bg(e,i.uvs),lg(e,i.positions)}destroy(){for(let e in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[e].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(e){let t=this._getTilingSpriteData(e),i=e.texture,r=!0;return this._renderer.type===yt.WEBGL&&(r=this._renderer.context.supports.nonPowOf2wrapping),t.canBatch=i.textureMatrix.isSimple&&(r||i.source.isPowerOfTwo),t.canBatch}};Tn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"tilingSprite"},pe.add(Tn);var pg=Object.defineProperty,rb=Object.getOwnPropertySymbols,gg=Object.prototype.hasOwnProperty,mg=Object.prototype.propertyIsEnumerable,sb=(a,e,t)=>e in a?pg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,nb=(a,e)=>{for(var t in e||(e={}))gg.call(e,t)&&sb(a,t,e[t]);if(rb)for(var t of rb(e))mg.call(e,t)&&sb(a,t,e[t]);return a},Sp=class wp extends qr{constructor(...e){var t;super({});let i=(t=e[0])!=null?t:{};typeof i=="number"&&(i={width:i,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(i)}build(e){var t,i,r,s;e=nb(nb({},wp.defaultOptions),e),this.verticesX=(t=this.verticesX)!=null?t:e.verticesX,this.verticesY=(i=this.verticesY)!=null?i:e.verticesY,this.width=(r=this.width)!=null?r:e.width,this.height=(s=this.height)!=null?s:e.height;let o=this.verticesX*this.verticesY,d=[],h=[],f=[],u=this.verticesX-1,p=this.verticesY-1,y=this.width/u,_=this.height/p;for(let T=0;T<o;T++){let A=T%this.verticesX,P=T/this.verticesX|0;d.push(A*y,P*_),h.push(A/u,P/p)}let v=u*p;for(let T=0;T<v;T++){let A=T%u,P=T/u|0,I=P*this.verticesX+A,F=P*this.verticesX+A+1,D=(P+1)*this.verticesX+A,H=(P+1)*this.verticesX+A+1;f.push(I,F,D,F,H,D)}this.buffers[0].data=new Float32Array(d),this.buffers[1].data=new Float32Array(h),this.indexBuffer.data=new Uint32Array(f),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};Sp.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};var Ap=Sp,_g=Object.defineProperty,ob=Object.getOwnPropertySymbols,yg=Object.prototype.hasOwnProperty,xg=Object.prototype.propertyIsEnumerable,cb=(a,e,t)=>e in a?_g(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,db=(a,e)=>{for(var t in e||(e={}))yg.call(e,t)&&cb(a,t,e[t]);if(ob)for(var t of ob(e))xg.call(e,t)&&cb(a,t,e[t]);return a},Ep=class Pp extends Ap{constructor(e={}){e=db(db({},Pp.defaultOptions),e),super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){var t,i,r,s,o,d,h,f;this.width=(t=e.width)!=null?t:this.width,this.height=(i=e.height)!=null?i:this.height,this._originalWidth=(r=e.originalWidth)!=null?r:this._originalWidth,this._originalHeight=(s=e.originalHeight)!=null?s:this._originalHeight,this._leftWidth=(o=e.leftWidth)!=null?o:this._leftWidth,this._rightWidth=(d=e.rightWidth)!=null?d:this._rightWidth,this._topHeight=(h=e.topHeight)!=null?h:this._topHeight,this._bottomHeight=(f=e.bottomHeight)!=null?f:this._bottomHeight,this.updateUvs(),this.updatePositions()}updatePositions(){let e=this.positions,t=this._leftWidth+this._rightWidth,i=this.width>t?1:this.width/t,r=this._topHeight+this._bottomHeight,s=this.height>r?1:this.height/r,o=Math.min(i,s);e[9]=e[11]=e[13]=e[15]=this._topHeight*o,e[17]=e[19]=e[21]=e[23]=this.height-this._bottomHeight*o,e[25]=e[27]=e[29]=e[31]=this.height,e[2]=e[10]=e[18]=e[26]=this._leftWidth*o,e[4]=e[12]=e[20]=e[28]=this.width-this._rightWidth*o,e[6]=e[14]=e[22]=e[30]=this.width,this.getBuffer("aPosition").update()}updateUvs(){let e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;let t=1/this._originalWidth,i=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=t*this._leftWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-t*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.getBuffer("aUV").update()}};Ep.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};var Wa=Ep,Sn=class{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,t){let i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){let t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}destroyRenderable(e){let t=this._gpuSpriteHash[e.uid];ye.return(t.geometry),ye.return(t),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,t){t.geometry.update(e),t.setTexture(e._texture)}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){let t=ye.get(Lr);return t.geometry=ye.get(Wa),t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=t,e.didViewUpdate||this._updateBatchableSprite(e,t),e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuSpriteHash)this._gpuSpriteHash[e].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}};Sn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"nineSliceSprite"},pe.add(Sn);var wn=class{constructor(e){this._renderer=e}push(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:t,filterEffect:e})}pop(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(e){e.action==="pushFilter"?this._renderer.filter.push(e):e.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}};wn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"filter"};function vg(a,e){e.clear();let t=e.matrix;for(let i=0;i<a.length;i++){let r=a[i];r.globalDisplayStatus<7||(e.matrix=r.worldTransform,e.addBounds(r.bounds))}return e.matrix=t,e}var Tg=new Zt({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])}),An=class{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new Je({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new Ht({}),this.renderer=e}get activeBackTexture(){var e;return(e=this._activeFilterData)==null?void 0:e.backTexture}push(e){var t,i;let r=this.renderer,s=e.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());let o=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,s.length===0){o.skip=!0;return}let d=o.bounds;if(e.renderables?vg(e.renderables,d):e.filterEffect.filterArea?(d.clear(),d.addRect(e.filterEffect.filterArea),d.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,d),e.container){let T=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;T&&d.applyMatrix(T)}let h=r.renderTarget.renderTarget.colorTexture.source,f=1/0,u=0,p=!0,y=!1,_=!1,v=!0;for(let T=0;T<s.length;T++){let A=s[T];if(f=Math.min(f,A.resolution==="inherit"?h._resolution:A.resolution),u+=A.padding,A.antialias==="off"?p=!1:A.antialias==="inherit"&&p&&(p=h.antialias),A.clipToViewport||(v=!1),!(A.compatibleRenderers&r.type)){_=!1;break}if(A.blendRequired&&!((i=(t=r.backBuffer)==null?void 0:t.useBackBuffer)==null||i)){_=!1;break}_=A.enabled||_,y||(y=A.blendRequired)}if(!_){o.skip=!0;return}if(v){let T=r.renderTarget.rootViewPort,A=r.renderTarget.renderTarget.resolution;d.fitBounds(0,T.width/A,0,T.height/A)}if(d.scale(f).ceil().scale(1/f).pad(u|0),!d.isPositive){o.skip=!0;return}o.skip=!1,o.bounds=d,o.blendRequired=y,o.container=e.container,o.filterEffect=e.filterEffect,o.previousRenderSurface=r.renderTarget.renderSurface,o.inputTexture=ze.getOptimalTexture(d.width,d.height,f,p),r.renderTarget.bind(o.inputTexture,!0),r.globalUniforms.push({offset:d})}pop(){let e=this.renderer;this._filterStackIndex--;let t=this._filterStack[this._filterStackIndex];if(t.skip)return;this._activeFilterData=t;let i=t.inputTexture,r=t.bounds,s=K.EMPTY;if(e.renderTarget.finishRenderPass(),t.blendRequired){let d=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,h=e.renderTarget.getRenderTarget(t.previousRenderSurface);s=this.getBackTexture(h,r,d)}t.backTexture=s;let o=t.filterEffect.filters;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(s.source,3),e.globalUniforms.pop(),o.length===1)o[0].apply(this,i,t.previousRenderSurface,!1),ze.returnTexture(i);else{let d=t.inputTexture,h=ze.getOptimalTexture(r.width,r.height,d.source._resolution,!1),f=0;for(f=0;f<o.length-1;++f){o[f].apply(this,d,h,!0);let u=d;d=h,h=u}o[f].apply(this,d,t.previousRenderSurface,!1),ze.returnTexture(d),ze.returnTexture(h)}t.blendRequired&&ze.returnTexture(s)}getBackTexture(e,t,i){let r=e.colorTexture.source._resolution,s=ze.getOptimalTexture(t.width,t.height,r,!1),o=t.minX,d=t.minY;i&&(o-=i.minX,d-=i.minY),o=Math.floor(o*r),d=Math.floor(d*r);let h=Math.ceil(t.width*r),f=Math.ceil(t.height*r);return this.renderer.renderTarget.copyToTexture(e,s,{x:o,y:d},{width:h,height:f},{x:0,y:0}),s}applyFilter(e,t,i,r){let s=this.renderer,o=this._filterStack[this._filterStackIndex],d=o.bounds,h=Ce.shared,f=o.previousRenderSurface===i,u=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,p=this._filterStackIndex-1;for(;p>0&&this._filterStack[p].skip;)--p;p>0&&(u=this._filterStack[p].inputTexture.source._resolution);let y=this._filterGlobalUniforms,_=y.uniforms,v=_.uOutputFrame,T=_.uInputSize,A=_.uInputPixel,P=_.uInputClamp,I=_.uGlobalFrame,F=_.uOutputTexture;if(f){let N=this._filterStackIndex;for(;N>0;){N--;let j=this._filterStack[this._filterStackIndex-1];if(!j.skip){h.x=j.bounds.minX,h.y=j.bounds.minY;break}}v[0]=d.minX-h.x,v[1]=d.minY-h.y}else v[0]=0,v[1]=0;v[2]=t.frame.width,v[3]=t.frame.height,T[0]=t.source.width,T[1]=t.source.height,T[2]=1/T[0],T[3]=1/T[1],A[0]=t.source.pixelWidth,A[1]=t.source.pixelHeight,A[2]=1/A[0],A[3]=1/A[1],P[0]=.5*A[2],P[1]=.5*A[3],P[2]=t.frame.width*T[2]-.5*A[2],P[3]=t.frame.height*T[3]-.5*A[3];let D=this.renderer.renderTarget.rootRenderTarget.colorTexture;I[0]=h.x*u,I[1]=h.y*u,I[2]=D.source.width*u,I[3]=D.source.height*u;let H=this.renderer.renderTarget.getRenderTarget(i);if(s.renderTarget.bind(i,!!r),i instanceof K?(F[0]=i.frame.width,F[1]=i.frame.height):(F[0]=H.width,F[1]=H.height),F[2]=H.isRoot?-1:1,y.update(),s.renderPipes.uniformBatch){let N=s.renderPipes.uniformBatch.getUboResource(y);this._globalFilterBindGroup.setResource(N,0)}else this._globalFilterBindGroup.setResource(y,0);this._globalFilterBindGroup.setResource(t.source,1),this._globalFilterBindGroup.setResource(t.source.style,2),e.groups[0]=this._globalFilterBindGroup,s.encoder.draw({geometry:Tg,shader:e,state:e._state,topology:"triangle-list"}),s.type===yt.WEBGL&&s.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new qe,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(e,t){let i=this._activeFilterData,r=e.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),s=t.worldTransform.copyTo(ie.shared),o=t.renderGroup||t.parentRenderGroup;return o&&o.cacheToLocalTransform&&s.prepend(o.cacheToLocalTransform),s.invert(),r.prepend(s),r.scale(1/t.texture.frame.width,1/t.texture.frame.height),r.translate(t.anchor.x,t.anchor.y),r}};An.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"filter"},pe.add(An),pe.add(wn);var Sg={__proto__:null},xh=[];pe.handleByNamedList(B.Environment,xh);async function wg(a){if(!a)for(let e=0;e<xh.length;e++){let t=xh[e];if(t.value.test()){await t.value.load();return}}}var dr;function Rp(){if(typeof dr=="boolean")return dr;try{dr=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{dr=!1}return dr}var mt=(a=>(a[a.NONE=0]="NONE",a[a.COLOR=16384]="COLOR",a[a.STENCIL=1024]="STENCIL",a[a.DEPTH=256]="DEPTH",a[a.COLOR_DEPTH=16640]="COLOR_DEPTH",a[a.COLOR_STENCIL=17408]="COLOR_STENCIL",a[a.DEPTH_STENCIL=1280]="DEPTH_STENCIL",a[a.ALL=17664]="ALL",a))(mt||{}),En=class{constructor(e){this.items=[],this._name=e}emit(e,t,i,r,s,o,d,h){let{name:f,items:u}=this;for(let p=0,y=u.length;p<y;p++)u[p][f](e,t,i,r,s,o,d,h);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){let t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}},Ag=Object.defineProperty,hb=Object.getOwnPropertySymbols,Eg=Object.prototype.hasOwnProperty,Pg=Object.prototype.propertyIsEnumerable,fb=(a,e,t)=>e in a?Ag(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Ps=(a,e)=>{for(var t in e||(e={}))Eg.call(e,t)&&fb(a,t,e[t]);if(hb)for(var t of hb(e))Pg.call(e,t)&&fb(a,t,e[t]);return a},Rg=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Mp=class Cp extends xt{constructor(e){var t;super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;let i=[...Rg,...(t=this.config.runners)!=null?t:[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(e={}){let t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await wg(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(let i in this._systemsHash){let r=this._systemsHash[i].constructor.defaultOptions;e=Ps(Ps({},r),e)}e=Ps(Ps({},Cp.defaultOptions),e),this._roundPixels=e.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(e);this._initOptions=e}render(e,t){var i,r;let s=e;if(s instanceof fe&&(s={container:s},t&&(s.target=t.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,(i=s.clearColor)!=null||(s.clearColor=this.background.colorRgba),(r=s.clear)!=null||(s.clear=this.background.clearBeforeRender)),s.clearColor){let o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:Ee.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s)}resize(e,t,i){let r=this.view.resolution;this.view.resize(e,t,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==r&&this.runners.resolutionChange.emit(i)}clear(e={}){var t;let i=this;e.target||(e.target=i.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),(t=e.clear)!=null||(e.clear=mt.ALL);let{clear:r,clearColor:s,target:o}=e;Ee.shared.setValue(s??this.background.colorRgba),i.renderTarget.clear(o,r,Ee.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new En(t)})}_addSystems(e){let t;for(t in e){let i=e[t];this._addSystem(i.value,i.name)}}_addSystem(e,t){let i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(let r in this.runners)this.runners[r].add(i);return this}_addPipes(e,t){let i=t.reduce((r,s)=>(r[s.name]=s.value,r),{});e.forEach(r=>{let s=r.value,o=r.name,d=i[o];this.renderPipes[o]=new s(this,d?new d:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Rp())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Mp.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};var Lo=Mp,od;function No(a){return od!==void 0||(od=(()=>{var e;let t={stencil:!0,failIfMajorPerformanceCaveat:a??Lo.defaultOptions.failIfMajorPerformanceCaveat};try{if(!xe.get().getWebGLRenderingContext())return!1;let i=xe.get().createCanvas().getContext("webgl",t),r=!!((e=i?.getContextAttributes())!=null&&e.stencil);if(i){let s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,r}catch{return!1}})()),od}var cd;async function jo(a={}){return cd!==void 0||(cd=await(async()=>{let e=xe.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(a)).requestDevice(),!0}catch{return!1}})()),cd}var Mg=Object.defineProperty,lb=Object.getOwnPropertySymbols,Cg=Object.prototype.hasOwnProperty,Og=Object.prototype.propertyIsEnumerable,ub=(a,e,t)=>e in a?Mg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,hr=(a,e)=>{for(var t in e||(e={}))Cg.call(e,t)&&ub(a,t,e[t]);if(lb)for(var t of lb(e))Og.call(e,t)&&ub(a,t,e[t]);return a},bb=["webgl","webgpu","canvas"];async function Xo(a){var e;let t=[];a.preference?(t.push(a.preference),bb.forEach(o=>{o!==a.preference&&t.push(o)})):t=bb.slice();let i,r={};for(let o=0;o<t.length;o++){let d=t[o];if(d==="webgpu"&&await jo()){let{WebGPURenderer:h}=await Promise.resolve().then(function(){return lT});i=h,r=hr(hr({},a),a.webgpu);break}else if(d==="webgl"&&No((e=a.failIfMajorPerformanceCaveat)!=null?e:Lo.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:h}=await Promise.resolve().then(function(){return Xv});i=h,r=hr(hr({},a),a.webgl);break}else if(d==="canvas")throw r=hr({},a),new Error("CanvasRenderer is not yet implemented")}if(delete r.webgpu,delete r.webgl,!i)throw new Error("No available renderer for the current environment");let s=new i;return await s.init(r),s}var Pn="8.7.3",Rn=class{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,Pn)}static destroy(){}};Rn.extension=B.Application;var Mn=class{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,Pn)}destroy(){this._renderer=null}};Mn.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"initHook",priority:-10};var Ig=Object.defineProperty,pb=Object.getOwnPropertySymbols,Gg=Object.prototype.hasOwnProperty,Bg=Object.prototype.propertyIsEnumerable,gb=(a,e,t)=>e in a?Ig(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Fg=(a,e)=>{for(var t in e||(e={}))Gg.call(e,t)&&gb(a,t,e[t]);if(pb)for(var t of pb(e))Bg.call(e,t)&&gb(a,t,e[t]);return a},Op=class vh{constructor(...e){this.stage=new fe}async init(e){e=Fg({},e),this.renderer=await Xo(e),vh._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){let i=vh._plugins.slice(0);i.reverse(),i.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Op._plugins=[];var Dg=Op;pe.handleByList(B.Application,Dg._plugins),pe.add(Rn);var Cn=class extends gn{constructor(e,t){var i;super();let{textures:r,data:s}=e;Object.keys(s.pages).forEach(o=>{let d=s.pages[parseInt(o,10)],h=r[d.id];this.pages.push({texture:h})}),Object.keys(s.chars).forEach(o=>{var d;let h=s.chars[o],{frame:f,source:u}=r[h.page],p=new Pe(h.x+f.x,h.y+f.y,h.width,h.height),y=new K({source:u,frame:p});this.chars[o]={id:o.codePointAt(0),xOffset:h.xOffset,yOffset:h.yOffset,xAdvance:h.xAdvance,kerning:(d=h.kerning)!=null?d:{},texture:y}}),this.baseRenderedFontSize=s.fontSize,this.baseMeasurementFontSize=s.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:s.fontSize},this.baseLineOffset=s.baseLineOffset,this.lineHeight=s.lineHeight,this.fontFamily=s.fontFamily,this.distanceField=(i=s.distanceField)!=null?i:{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){mn.install(e)}static uninstall(e){mn.uninstall(e)}},dd={test(a){return typeof a=="string"&&a.startsWith("info face=")},parse(a){var e,t,i;let r=a.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let v in r){let T=r[v].match(/^[a-z]+/gm)[0],A=r[v].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),P={};for(let I in A){let F=A[I].split("="),D=F[0],H=F[1].replace(/"/gm,""),N=parseFloat(H),j=isNaN(N)?H:N;P[D]=j}s[T].push(P)}let o={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[d]=s.info,[h]=s.common,[f]=(e=s.distanceField)!=null?e:[];f&&(o.distanceField={range:parseInt(f.distanceRange,10),type:f.fieldType}),o.fontSize=parseInt(d.size,10),o.fontFamily=d.face,o.lineHeight=parseInt(h.lineHeight,10);let u=s.page;for(let v=0;v<u.length;v++)o.pages.push({id:parseInt(u[v].id,10)||0,file:u[v].file});let p={};o.baseLineOffset=o.lineHeight-parseInt(h.base,10);let y=s.char;for(let v=0;v<y.length;v++){let T=y[v],A=parseInt(T.id,10),P=(i=(t=T.letter)!=null?t:T.char)!=null?i:String.fromCharCode(A);P==="space"&&(P=" "),p[A]=P,o.chars[P]={id:A,page:parseInt(T.page,10)||0,x:parseInt(T.x,10),y:parseInt(T.y,10),width:parseInt(T.width,10),height:parseInt(T.height,10),xOffset:parseInt(T.xoffset,10),yOffset:parseInt(T.yoffset,10),xAdvance:parseInt(T.xadvance,10),kerning:{}}}let _=s.kerning||[];for(let v=0;v<_.length;v++){let T=parseInt(_[v].first,10),A=parseInt(_[v].second,10),P=parseInt(_[v].amount,10);o.chars[p[A]].kerning[p[T]]=P}return o}},mb={test(a){let e=a;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(a){var e,t;let i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},r=a.getElementsByTagName("info")[0],s=a.getElementsByTagName("common")[0],o=a.getElementsByTagName("distanceField")[0];o&&(i.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});let d=a.getElementsByTagName("page"),h=a.getElementsByTagName("char"),f=a.getElementsByTagName("kerning");i.fontSize=parseInt(r.getAttribute("size"),10),i.fontFamily=r.getAttribute("face"),i.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let p=0;p<d.length;p++)i.pages.push({id:parseInt(d[p].getAttribute("id"),10)||0,file:d[p].getAttribute("file")});let u={};i.baseLineOffset=i.lineHeight-parseInt(s.getAttribute("base"),10);for(let p=0;p<h.length;p++){let y=h[p],_=parseInt(y.getAttribute("id"),10),v=(t=(e=y.getAttribute("letter"))!=null?e:y.getAttribute("char"))!=null?t:String.fromCharCode(_);v==="space"&&(v=" "),u[_]=v,i.chars[v]={id:_,page:parseInt(y.getAttribute("page"),10)||0,x:parseInt(y.getAttribute("x"),10),y:parseInt(y.getAttribute("y"),10),width:parseInt(y.getAttribute("width"),10),height:parseInt(y.getAttribute("height"),10),xOffset:parseInt(y.getAttribute("xoffset"),10),yOffset:parseInt(y.getAttribute("yoffset"),10),xAdvance:parseInt(y.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<f.length;p++){let y=parseInt(f[p].getAttribute("first"),10),_=parseInt(f[p].getAttribute("second"),10),v=parseInt(f[p].getAttribute("amount"),10);i.chars[u[_]].kerning[u[y]]=v}return i}},_b={test(a){return typeof a=="string"&&a.includes("<font>")?mb.test(xe.get().parseXML(a)):!1},parse(a){return mb.parse(xe.get().parseXML(a))}},kg=[".xml",".fnt"],Ug={extension:{type:B.CacheParser,name:"cacheBitmapFont"},test:a=>a instanceof Cn,getCacheableAssets(a,e){let t={};return a.forEach(i=>{t[i]=e,t[`${i}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},Lg={extension:{type:B.LoadParser,priority:Rt.Normal},name:"loadBitmapFont",test(a){return kg.includes(_t.extname(a).toLowerCase())},async testParse(a){return dd.test(a)||_b.test(a)},async parse(a,e,t){let i=dd.test(a)?dd.parse(a):_b.parse(a),{src:r}=e,{pages:s}=i,o=[],d=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let u=0;u<s.length;++u){let p=s[u].file,y=_t.join(_t.dirname(r),p);y=Ud(y,r),o.push({src:y,data:d})}let h=await t.load(o),f=o.map(u=>h[u.src]);return new Cn({data:i,textures:f},r)},async load(a,e){return await(await xe.get().fetch(a)).text()},async unload(a,e,t){await Promise.all(a.pages.map(i=>t.unload(i.texture.source._sourceOrigin))),a.destroy()}},Th=class{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose,this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}},Ng={extension:{type:B.CacheParser,name:"cacheTextureArray"},test:a=>Array.isArray(a)&&a.every(e=>e instanceof K),getCacheableAssets:(a,e)=>{let t={};return a.forEach(i=>{e.forEach((r,s)=>{t[i+(s===0?"":s+1)]=r})}),t}};async function Ip(a){if("Image"in globalThis)return new Promise(e=>{let t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=a});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let e=await(await fetch(a)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}var jg={extension:{type:B.DetectionParser,priority:1},test:async()=>Ip("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async a=>[...a,"avif"],remove:async a=>a.filter(e=>e!=="avif")},yb=["png","jpg","jpeg"],Xg={extension:{type:B.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async a=>[...a,...yb],remove:async a=>a.filter(e=>!yb.includes(e))},Hg="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Rf(a){return Hg?!1:document.createElement("video").canPlayType(a)!==""}var zg={extension:{type:B.DetectionParser,priority:0},test:async()=>Rf("video/mp4"),add:async a=>[...a,"mp4","m4v"],remove:async a=>a.filter(e=>e!=="mp4"&&e!=="m4v")},Vg={extension:{type:B.DetectionParser,priority:0},test:async()=>Rf("video/ogg"),add:async a=>[...a,"ogv"],remove:async a=>a.filter(e=>e!=="ogv")},Wg={extension:{type:B.DetectionParser,priority:0},test:async()=>Rf("video/webm"),add:async a=>[...a,"webm"],remove:async a=>a.filter(e=>e!=="webm")},Yg={extension:{type:B.DetectionParser,priority:0},test:async()=>Ip("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async a=>[...a,"webp"],remove:async a=>a.filter(e=>e!=="webp")},$g=Object.defineProperty,Kg=Object.defineProperties,qg=Object.getOwnPropertyDescriptors,xb=Object.getOwnPropertySymbols,Zg=Object.prototype.hasOwnProperty,Qg=Object.prototype.propertyIsEnumerable,vb=(a,e,t)=>e in a?$g(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Jg=(a,e)=>{for(var t in e||(e={}))Zg.call(e,t)&&vb(a,t,e[t]);if(xb)for(var t of xb(e))Qg.call(e,t)&&vb(a,t,e[t]);return a},em=(a,e)=>Kg(a,qg(e)),Sh=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let i={promise:null,parser:null};return i.promise=(async()=>{var r,s;let o=null,d=null;if(t.loadParser&&(d=this._parserHash[t.loadParser]),!d){for(let h=0;h<this.parsers.length;h++){let f=this.parsers[h];if(f.load&&(r=f.test)!=null&&r.call(f,e,t,this)){d=f;break}}if(!d)return null}o=await d.load(e,t,this),i.parser=d;for(let h=0;h<this.parsers.length;h++){let f=this.parsers[h];f.parse&&f.parse&&await((s=f.testParse)==null?void 0:s.call(f,o,t,this))&&(o=await f.parse(o,t,this)||o,i.parser=f)}return o})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0,r={},s=Ks(e),o=Xt(e,f=>({alias:[f],src:f,data:{}})),d=o.length,h=o.map(async f=>{let u=_t.toAbsolute(f.src);if(!r[f.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,f)),r[f.src]=await this.promiseCache[u].promise,t&&t(++i/d)}catch(p){throw delete this.promiseCache[u],delete r[f.src],new Error(`[Loader.load] Failed to load ${u}.
${p}`)}});return await Promise.all(h),s?r[o[0].src]:r}async unload(e){let t=Xt(e,i=>({alias:[i],src:i})).map(async i=>{var r,s;let o=_t.toAbsolute(i.src),d=this.promiseCache[o];if(d){let h=await d.promise;delete this.promiseCache[o],await((s=(r=d.parser)==null?void 0:r.unload)==null?void 0:s.call(r,h,i,this))}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(t.name&&e[t.name],em(Jg({},e),{[t.name]:t})),{})}};function Gi(a,e){if(Array.isArray(e)){for(let t of e)if(a.startsWith(`data:${t}`))return!0;return!1}return a.startsWith(`data:${e}`)}function zt(a,e){let t=a.split("?")[0],i=_t.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}var tm=".json",am="application/json",im={extension:{type:B.LoadParser,priority:Rt.Low},name:"loadJson",test(a){return Gi(a,am)||zt(a,tm)},async load(a){return await(await xe.get().fetch(a)).json()}},rm=".txt",sm="text/plain",nm={name:"loadTxt",extension:{type:B.LoadParser,priority:Rt.Low,name:"loadTxt"},test(a){return Gi(a,sm)||zt(a,rm)},async load(a){return await(await xe.get().fetch(a)).text()}},om=Object.defineProperty,cm=Object.defineProperties,dm=Object.getOwnPropertyDescriptors,Tb=Object.getOwnPropertySymbols,hm=Object.prototype.hasOwnProperty,fm=Object.prototype.propertyIsEnumerable,Sb=(a,e,t)=>e in a?om(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,lm=(a,e)=>{for(var t in e||(e={}))hm.call(e,t)&&Sb(a,t,e[t]);if(Tb)for(var t of Tb(e))fm.call(e,t)&&Sb(a,t,e[t]);return a},um=(a,e)=>cm(a,dm(e)),bm=["normal","bold","100","200","300","400","500","600","700","800","900"],pm=[".ttf",".otf",".woff",".woff2"],gm=["font/ttf","font/otf","font/woff","font/woff2"],mm=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function _m(a){let e=_t.extname(a),t=_t.basename(a,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)),i=t.length>0;for(let s of t)if(!s.match(mm)){i=!1;break}let r=t.join(" ");return i||(r=`"${r.replace(/[\\"]/g,"\\$&")}"`),r}var ym=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function xm(a){return ym.test(a)?a:encodeURI(a)}var vm={extension:{type:B.LoadParser,priority:Rt.Low},name:"loadWebFont",test(a){return Gi(a,gm)||zt(a,pm)},async load(a,e){var t,i,r,s,o,d;let h=xe.get().getFontFaceSet();if(h){let f=[],u=(i=(t=e.data)==null?void 0:t.family)!=null?i:_m(a),p=(o=(s=(r=e.data)==null?void 0:r.weights)==null?void 0:s.filter(_=>bm.includes(_)))!=null?o:["normal"],y=(d=e.data)!=null?d:{};for(let _=0;_<p.length;_++){let v=p[_],T=new FontFace(u,`url(${xm(a)})`,um(lm({},y),{weight:v}));await T.load(),h.add(T),f.push(T)}return Oe.set(`${u}-and-url`,{url:a,fontFaces:f}),f.length===1?f[0]:f}return null},unload(a){(Array.isArray(a)?a:[a]).forEach(e=>{Oe.remove(`${e.family}-and-url`),xe.get().getFontFaceSet().delete(e)})}};function Mf(a,e=1){var t;let i=(t=ha.RETINA_PREFIX)==null?void 0:t.exec(a);return i?parseFloat(i[1]):e}function Ja(a,e,t){a.label=t,a._sourceOrigin=t;let i=new K({source:a,label:t}),r=()=>{delete e.promiseCache[t],Oe.has(t)&&Oe.remove(t)};return i.source.once("destroy",()=>{e.promiseCache[t]&&r()}),i.once("destroy",()=>{a.destroyed||r()}),i}var Tm=Object.defineProperty,On=Object.getOwnPropertySymbols,Gp=Object.prototype.hasOwnProperty,Bp=Object.prototype.propertyIsEnumerable,wb=(a,e,t)=>e in a?Tm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Sm=(a,e)=>{for(var t in e||(e={}))Gp.call(e,t)&&wb(a,t,e[t]);if(On)for(var t of On(e))Bp.call(e,t)&&wb(a,t,e[t]);return a},wm=(a,e)=>{var t={};for(var i in a)Gp.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&On)for(var i of On(a))e.indexOf(i)<0&&Bp.call(a,i)&&(t[i]=a[i]);return t},Am=".svg",Em="image/svg+xml",Pm={extension:{type:B.LoadParser,priority:Rt.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(a){return Gi(a,Em)||zt(a,Am)},async load(a,e,t){var i,r;return((r=(i=e.data)==null?void 0:i.parseAsGraphicsContext)!=null?r:this.config.parseAsGraphicsContext)?Mm(a):Rm(a,e,t,this.config.crossOrigin)},unload(a){a.destroy(!0)}};async function Rm(a,e,t,i){var r,s,o,d,h,f;let u=await(await xe.get().fetch(a)).blob(),p=URL.createObjectURL(u),y=new Image;y.src=p,y.crossOrigin=i,await y.decode(),URL.revokeObjectURL(p);let _=document.createElement("canvas"),v=_.getContext("2d"),T=((r=e.data)==null?void 0:r.resolution)||Mf(a),A=(o=(s=e.data)==null?void 0:s.width)!=null?o:y.width,P=(h=(d=e.data)==null?void 0:d.height)!=null?h:y.height;_.width=A*T,_.height=P*T,v.drawImage(y,0,0,A*T,P*T);let I=(f=e.data)!=null?f:{},{parseAsGraphicsContext:F}=I,D=wm(I,["parseAsGraphicsContext"]),H=new Oa(Sm({resource:_,alphaMode:"premultiply-alpha-on-upload",resolution:T},D));return Ja(H,t,a)}async function Mm(a){let e=await(await xe.get().fetch(a)).text(),t=new dt;return t.svg(e),t}var Cm=`(function(){"use strict";const e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";async function a(){try{if(typeof createImageBitmap!="function")return!1;const A=await(await fetch(e)).blob(),t=await createImageBitmap(A);return t.width===1&&t.height===1}catch(A){return!1}}a().then(A=>{self.postMessage(A)})})();
`,vi=null,wh=class{constructor(){vi||(vi=URL.createObjectURL(new Blob([Cm],{type:"application/javascript"}))),this.worker=new Worker(vi)}};wh.revokeObjectURL=function(){vi&&(URL.revokeObjectURL(vi),vi=null)};var Om='(function(){"use strict";async function s(a,t){const e=await fetch(a);if(!e.ok)throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${a}: ${e.status} ${e.statusText}`);const i=await e.blob();return t==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}self.onmessage=async a=>{try{const t=await s(a.data.data[0],a.data.data[1]);self.postMessage({data:t,uuid:a.data.uuid,id:a.data.id},[t])}catch(t){self.postMessage({error:t,uuid:a.data.uuid,id:a.data.id})}}})();\n',Ti=null,Fp=class{constructor(){Ti||(Ti=URL.createObjectURL(new Blob([Om],{type:"application/javascript"}))),this.worker=new Worker(Ti)}};Fp.revokeObjectURL=function(){Ti&&(URL.revokeObjectURL(Ti),Ti=null)};var Ab=0,hd,Im=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(a=>{let{worker:e}=new wh;e.addEventListener("message",t=>{e.terminate(),wh.revokeObjectURL(),a(t.data)})}),this._isImageBitmapSupported)}loadImageBitmap(a,e){var t;return this._run("loadImageBitmap",[a,(t=e?.data)==null?void 0:t.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){hd===void 0&&(hd=navigator.hardwareConcurrency||4);let a=this._workerPool.pop();return!a&&this._createdWorkers<hd&&(this._createdWorkers++,a=new Fp().worker,a.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),a}_returnWorker(a){this._workerPool.push(a)}_complete(a){a.error!==void 0?this._resolveHash[a.uuid].reject(a.error):this._resolveHash[a.uuid].resolve(a.data),this._resolveHash[a.uuid]=null}async _run(a,e){await this._initWorkers();let t=new Promise((i,r)=>{this._queue.push({id:a,arguments:e,resolve:i,reject:r})});return this._next(),t}_next(){if(!this._queue.length)return;let a=this._getWorker();if(!a)return;let e=this._queue.pop(),t=e.id;this._resolveHash[Ab]={resolve:e.resolve,reject:e.reject},a.postMessage({data:e.arguments,uuid:Ab++,id:t})}},Eb=new Im,Gm=Object.defineProperty,Pb=Object.getOwnPropertySymbols,Bm=Object.prototype.hasOwnProperty,Fm=Object.prototype.propertyIsEnumerable,Rb=(a,e,t)=>e in a?Gm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Dm=(a,e)=>{for(var t in e||(e={}))Bm.call(e,t)&&Rb(a,t,e[t]);if(Pb)for(var t of Pb(e))Fm.call(e,t)&&Rb(a,t,e[t]);return a},km=[".jpeg",".jpg",".png",".webp",".avif"],Um=["image/jpeg","image/png","image/webp","image/avif"];async function Lm(a,e){var t;let i=await xe.get().fetch(a);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${a}: ${i.status} ${i.statusText}`);let r=await i.blob();return((t=e?.data)==null?void 0:t.alphaMode)==="premultiplied-alpha"?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}var Dp={name:"loadTextures",extension:{type:B.LoadParser,priority:Rt.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(a){return Gi(a,Um)||zt(a,km)},async load(a,e,t){var i;let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Eb.isImageBitmapSupported()?r=await Eb.loadImageBitmap(a,e):r=await Lm(a,e):r=await new Promise((o,d)=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=a,r.complete?o(r):(r.onload=()=>{o(r)},r.onerror=d)});let s=new Oa(Dm({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:((i=e.data)==null?void 0:i.resolution)||Mf(a)},e.data));return Ja(s,t,a)},unload(a){a.destroy(!0)}},Nm=Object.defineProperty,jm=Object.defineProperties,Xm=Object.getOwnPropertyDescriptors,Mb=Object.getOwnPropertySymbols,Hm=Object.prototype.hasOwnProperty,zm=Object.prototype.propertyIsEnumerable,Cb=(a,e,t)=>e in a?Nm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,fd=(a,e)=>{for(var t in e||(e={}))Hm.call(e,t)&&Cb(a,t,e[t]);if(Mb)for(var t of Mb(e))zm.call(e,t)&&Cb(a,t,e[t]);return a},Ob=(a,e)=>jm(a,Xm(e)),kp=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],Vm=kp.map(a=>`video/${a.substring(1)}`);function Wm(a,e,t){t===void 0&&!e.startsWith("data:")?a.crossOrigin=$m(e):t!==!1&&(a.crossOrigin=typeof t=="string"?t:"anonymous")}function Ym(a){return new Promise((e,t)=>{a.addEventListener("canplaythrough",i),a.addEventListener("error",r),a.load();function i(){s(),e()}function r(o){s(),t(o)}function s(){a.removeEventListener("canplaythrough",i),a.removeEventListener("error",r)}})}function $m(a,e=globalThis.location){if(a.startsWith("data:"))return"";e||(e=globalThis.location);let t=new URL(a,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}var Km={name:"loadVideo",extension:{type:B.LoadParser,name:"loadVideo"},test(a){let e=Gi(a,Vm),t=zt(a,kp);return e||t},async load(a,e,t){var i,r;let s=fd(Ob(fd({},Us.defaultOptions),{resolution:((i=e.data)==null?void 0:i.resolution)||Mf(a),alphaMode:((r=e.data)==null?void 0:r.alphaMode)||await I2()}),e.data),o=document.createElement("video"),d={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(d).forEach(u=>{let p=d[u];p!==void 0&&o.setAttribute(u,p)}),s.muted===!0&&(o.muted=!0),Wm(o,a,s.crossorigin);let h=document.createElement("source"),f;if(a.startsWith("data:"))f=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){let u=a.split("?")[0].slice(a.lastIndexOf(".")+1).toLowerCase();f=Us.MIME_TYPES[u]||`video/${u}`}return h.src=a,f&&(h.type=f),new Promise(u=>{let p=async()=>{let y=new Us(Ob(fd({},s),{resource:o}));o.removeEventListener("canplay",p),e.data.preload&&await Ym(o),u(Ja(y,t,a))};o.addEventListener("canplay",p),o.appendChild(h)})},unload(a){a.destroy(!0)}},Up={extension:{type:B.ResolveParser,name:"resolveTexture"},test:Dp.test,parse:a=>{var e,t;return{resolution:parseFloat((t=(e=ha.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:a.split(".").pop(),src:a}}},qm={extension:{type:B.ResolveParser,priority:-2,name:"resolveJson"},test:a=>ha.RETINA_PREFIX.test(a)&&a.endsWith(".json"),parse:Up.parse},Ah=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ha,this.loader=new Sh,this.cache=Oe,this._backgroundLoader=new Th(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var t,i,r;if(this._initialized)return;if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let h=e.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}let s=(i=(t=e.texturePreference)==null?void 0:t.resolution)!=null?i:1,o=typeof s=="number"?[s]:s,d=await this._detectFormats({preferredFormats:(r=e.texturePreference)==null?void 0:r.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:d,resolution:o}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();let i=Ks(e),r=Xt(e).map(d=>{if(typeof d!="string"){let h=this.resolver.getAlias(d);return h.some(f=>!this.resolver.hasKey(f))&&this.add(d),Array.isArray(h)?h[0]:h}return this.resolver.hasKey(d)||this.add({alias:d,src:d}),d}),s=this.resolver.resolve(r),o=await this._mapLoadToResolve(s,t);return i?o[r[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);let r=this.resolver.resolveBundle(e),s={},o=Object.keys(r),d=0,h=0,f=()=>{t?.(++d/h)},u=o.map(p=>{let y=r[p];return h+=Object.keys(y).length,this._mapLoadToResolve(y,f).then(_=>{s[p]=_})});return await Promise.all(u),i?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Oe.get(e);let t={};for(let i=0;i<e.length;i++)t[i]=Oe.get(e[i]);return t}async _mapLoadToResolve(e,t){let i=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;let r=await this.loader.load(i,t);this._backgroundLoader.active=!0;let s={};return i.forEach(o=>{let d=r[o.src],h=[o.src];o.alias&&h.push(...o.alias),h.forEach(f=>{s[f]=d}),Oe.set(h,d)}),s}async unload(e){this._initialized||await this.init();let t=Xt(e).map(r=>typeof r!="string"?r.src:r),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Xt(e);let t=this.resolver.resolveBundle(e),i=Object.keys(t).map(r=>this._unloadFromResolved(t[r]));await Promise.all(i)}async _unloadFromResolved(e){let t=Object.values(e);t.forEach(i=>{Oe.remove(i.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((i,r)=>t.indexOf(i)===r),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(i=>i in e).forEach(i=>{t.config[i]=e[i]})})}},ge=new Ah;pe.handleByList(B.LoadParser,ge.loader.parsers).handleByList(B.ResolveParser,ge.resolver.parsers).handleByList(B.CacheParser,ge.cache.parsers).handleByList(B.DetectionParser,ge.detections),pe.add(Ng,Xg,jg,Yg,zg,Vg,Wg,im,nm,vm,Pm,Dp,Km,Lg,Ug,Up,qm);var Ib={loader:B.LoadParser,resolver:B.ResolveParser,cache:B.CacheParser,detection:B.DetectionParser};pe.handle(B.Asset,a=>{let e=a.ref;Object.entries(Ib).filter(([t])=>!!e[t]).forEach(([t,i])=>{var r;return pe.add(Object.assign(e[t],{extension:(r=e[t].extension)!=null?r:i}))})},a=>{let e=a.ref;Object.keys(Ib).filter(t=>!!e[t]).forEach(t=>pe.remove(e[t]))});var nS={extension:{type:B.DetectionParser,priority:3},test:async()=>!!(await jo()||No()),add:async a=>[...a,"basis"],remove:async a=>a.filter(e=>e!=="basis")},Oi=class extends Fe{constructor(e){super(e),this.uploadMethodId="compressed",this.resource=e.resource,this.mipLevelCount=this.resource.length}},Rs;function Gb(){if(Rs)return Rs;let a=document.createElement("canvas").getContext("webgl");return a?(Rs=[...a.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...a.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...a.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...a.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...a.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...a.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Rs):[]}var Ms;async function Bb(){if(Ms)return Ms;let a=await xe.get().getNavigator().gpu.requestAdapter();return Ms=[...a.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...a.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...a.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Ms}var ld;async function Lp(){return ld!==void 0||(ld=await(async()=>{let a=await jo(),e=No();if(a&&e){let t=await Bb(),i=Gb();return t.filter(r=>i.includes(r))}else{if(a)return await Bb();if(e)return Gb()}return[]})()),ld}var Zm=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"],Cs;async function Ho(){if(Cs!==void 0)return Cs;let a=await Lp();return Cs=[...Zm,...a],Cs}var Qm='(function(){"use strict";function g(r,a){const t=r.getNumImages(),s=r.getNumLevels(0);if(!r.startTranscoding())throw new Error("startTranscoding failed");const m=[];for(let e=0;e<s;++e)for(let o=0;o<t;++o){const B=r.getImageTranscodedSizeInBytes(o,e,a),f=new Uint8Array(B);if(!r.transcodeImage(f,o,e,a,1,0))throw new Error("transcodeImage failed");m.push(f)}return m}const w={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function d(r){const a=w[r];if(a)return a;throw new Error(`Unsupported transcoderFormat: ${r}`)}const n={jsUrl:"basis/basis_transcoder.js",wasmUrl:"basis/basis_transcoder.wasm"};let u,i,c;async function l(){if(!c){const r=new URL(n.jsUrl,location.origin).href,a=new URL(n.wasmUrl,location.origin).href;importScripts(r),c=new Promise(t=>{BASIS({locateFile:s=>a}).then(s=>{s.initializeBasis(),t(s.BasisFile)})})}return c}async function b(r,a){const t=await fetch(r);if(t.ok){const s=await t.arrayBuffer();return new a(new Uint8Array(s))}throw new Error(`Failed to load Basis texture: ${r}`)}const h=["bc7-rgba-unorm","astc-4x4-unorm","etc2-rgba8unorm","bc3-rgba-unorm","rgba8unorm"];async function p(r){const a=await l(),t=await b(r,a),s=g(t,u);return{width:t.getImageWidth(0,0),height:t.getImageHeight(0,0),format:i,resource:s,alphaMode:"no-premultiply-alpha"}}async function y(r,a,t){r&&(n.jsUrl=r),a&&(n.wasmUrl=a),i=h.filter(s=>t.includes(s))[0],u=d(i),await l()}const U={init:async r=>{const{jsUrl:a,wasmUrl:t,supportedTextures:s}=r;await y(a,t,s)},load:async r=>{var a;try{const t=await p(r.url);return{type:"load",url:r.url,success:!0,textureOptions:t,transferables:(a=t.resource)==null?void 0:a.map(s=>s.buffer)}}catch(t){throw t}}};self.onmessage=async r=>{const a=r.data,t=await U[a.type](a);t&&self.postMessage(t,t.transferables)}})();\n',Si=null,Np=class{constructor(){Si||(Si=URL.createObjectURL(new Blob([Qm],{type:"application/javascript"}))),this.worker=new Worker(Si)}};Np.revokeObjectURL=function(){Si&&(URL.revokeObjectURL(Si),Si=null)};var Fb={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};var fr,jp={};function Jm(a){return fr||(fr=new Np().worker,fr.onmessage=e=>{let{success:t,url:i,textureOptions:r}=e.data;jp[i](r)},fr.postMessage({type:"init",jsUrl:Fb.jsUrl,wasmUrl:Fb.wasmUrl,supportedTextures:a})),fr}function e_(a,e){let t=Jm(e);return new Promise(i=>{jp[a]=i,t.postMessage({type:"load",url:a})})}var oS={extension:{type:B.LoadParser,priority:Rt.High,name:"loadBasis"},name:"loadBasis",test(a){return zt(a,[".basis"])},async load(a,e,t){let i=await Ho(),r=await e_(a,i),s=new Oi(r);return Ja(s,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}};var t_={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},a_={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Xp=(a=>(a[a.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",a[a.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",a[a.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",a[a.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",a[a.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",a[a.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",a[a.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",a[a.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",a[a.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",a[a.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",a[a.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",a[a.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",a[a.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",a[a.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",a[a.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",a[a.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",a[a.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",a[a.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",a[a.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",a[a.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",a[a.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",a[a.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",a[a.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",a[a.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",a[a.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",a[a.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",a[a.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",a[a.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",a[a.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",a[a.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",a[a.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",a[a.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",a[a.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",a[a.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",a[a.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",a[a.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",a[a.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",a[a.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",a[a.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",a[a.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",a[a.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",a[a.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",a[a.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",a[a.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",a[a.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",a[a.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",a[a.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",a[a.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",a[a.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",a[a.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",a[a.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",a[a.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",a[a.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",a[a.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",a[a.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",a[a.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",a[a.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",a[a.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",a[a.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",a[a.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",a[a.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",a[a.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",a[a.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",a[a.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",a[a.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",a[a.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",a[a.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",a[a.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",a[a.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",a[a.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",a[a.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",a[a.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",a[a.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",a[a.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",a[a.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",a[a.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",a[a.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",a[a.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",a[a.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",a[a.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",a[a.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",a[a.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",a[a.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",a[a.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",a[a.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",a[a.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",a[a.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",a[a.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",a[a.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",a[a.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",a[a.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",a[a.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",a[a.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",a[a.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",a[a.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",a[a.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",a[a.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",a[a.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",a[a.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",a[a.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",a[a.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",a[a.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",a[a.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",a[a.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",a[a.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",a[a.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",a[a.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",a[a.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",a[a.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",a[a.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",a[a.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",a[a.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",a[a.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",a[a.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",a[a.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",a[a.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",a[a.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",a[a.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",a[a.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",a[a.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",a))(Xp||{}),Hp=(a=>(a[a.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",a[a.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",a[a.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",a))(Hp||{});function Ye(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}var bt=(a=>(a[a.UNKNOWN=0]="UNKNOWN",a[a.R8G8B8=20]="R8G8B8",a[a.A8R8G8B8=21]="A8R8G8B8",a[a.X8R8G8B8=22]="X8R8G8B8",a[a.R5G6B5=23]="R5G6B5",a[a.X1R5G5B5=24]="X1R5G5B5",a[a.A1R5G5B5=25]="A1R5G5B5",a[a.A4R4G4B4=26]="A4R4G4B4",a[a.R3G3B2=27]="R3G3B2",a[a.A8=28]="A8",a[a.A8R3G3B2=29]="A8R3G3B2",a[a.X4R4G4B4=30]="X4R4G4B4",a[a.A2B10G10R10=31]="A2B10G10R10",a[a.A8B8G8R8=32]="A8B8G8R8",a[a.X8B8G8R8=33]="X8B8G8R8",a[a.G16R16=34]="G16R16",a[a.A2R10G10B10=35]="A2R10G10B10",a[a.A16B16G16R16=36]="A16B16G16R16",a[a.A8P8=40]="A8P8",a[a.P8=41]="P8",a[a.L8=50]="L8",a[a.A8L8=51]="A8L8",a[a.A4L4=52]="A4L4",a[a.V8U8=60]="V8U8",a[a.L6V5U5=61]="L6V5U5",a[a.X8L8V8U8=62]="X8L8V8U8",a[a.Q8W8V8U8=63]="Q8W8V8U8",a[a.V16U16=64]="V16U16",a[a.A2W10V10U10=67]="A2W10V10U10",a[a.Q16W16V16U16=110]="Q16W16V16U16",a[a.R16F=111]="R16F",a[a.G16R16F=112]="G16R16F",a[a.A16B16G16R16F=113]="A16B16G16R16F",a[a.R32F=114]="R32F",a[a.G32R32F=115]="G32R32F",a[a.A32B32G32R32F=116]="A32B32G32R32F",a[a.UYVY=Ye("UYVY")]="UYVY",a[a.R8G8_B8G8=Ye("RGBG")]="R8G8_B8G8",a[a.YUY2=Ye("YUY2")]="YUY2",a[a.D3DFMT_G8R8_G8B8=Ye("GRGB")]="D3DFMT_G8R8_G8B8",a[a.DXT1=Ye("DXT1")]="DXT1",a[a.DXT2=Ye("DXT2")]="DXT2",a[a.DXT3=Ye("DXT3")]="DXT3",a[a.DXT4=Ye("DXT4")]="DXT4",a[a.DXT5=Ye("DXT5")]="DXT5",a[a.ATI1=Ye("ATI1")]="ATI1",a[a.AT1N=Ye("AT1N")]="AT1N",a[a.ATI2=Ye("ATI2")]="ATI2",a[a.AT2N=Ye("AT2N")]="AT2N",a[a.BC4U=Ye("BC4U")]="BC4U",a[a.BC4S=Ye("BC4S")]="BC4S",a[a.BC5U=Ye("BC5U")]="BC5U",a[a.BC5S=Ye("BC5S")]="BC5S",a[a.DX10=Ye("DX10")]="DX10",a))(bt||{}),Db={[bt.DXT1]:"bc1-rgba-unorm",[bt.DXT2]:"bc2-rgba-unorm",[bt.DXT3]:"bc2-rgba-unorm",[bt.DXT4]:"bc3-rgba-unorm",[bt.DXT5]:"bc3-rgba-unorm",[bt.ATI1]:"bc4-r-unorm",[bt.BC4U]:"bc4-r-unorm",[bt.BC4S]:"bc4-r-snorm",[bt.ATI2]:"bc5-rg-unorm",[bt.BC5U]:"bc5-rg-unorm",[bt.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},pt={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},ue={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:t_,HEADER_DX10_FIELDS:a_,DXGI_FORMAT:Xp,D3D10_RESOURCE_DIMENSION:Hp,D3DFMT:bt},i_={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function r_(a,e){let{format:t,fourCC:i,width:r,height:s,dataOffset:o,mipmapCount:d}=n_(a);if(!e.includes(t))throw new Error(`Unsupported texture format: ${i} ${t}, supported: ${e}`);if(d<=1)return{format:t,width:r,height:s,resource:[new Uint8Array(a,o)],alphaMode:"no-premultiply-alpha"};let h=s_(t,r,s,o,d,a);return{format:t,width:r,height:s,resource:h,alphaMode:"no-premultiply-alpha"}}function s_(a,e,t,i,r,s){let o=[],d=i_[a],h=e,f=t,u=i;for(let p=0;p<r;++p){let y=Math.ceil(Math.max(4,h)/4)*4,_=Math.ceil(Math.max(4,f)/4)*4,v=d?y/4*_/4*d:h*f*4,T=new Uint8Array(s,u,v);o.push(T),u+=v,h=Math.max(h>>1,1),f=Math.max(f>>1,1)}return o}function n_(a){let e=new Uint32Array(a,0,ue.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[ue.HEADER_FIELDS.MAGIC]!==ue.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");let t=e[ue.HEADER_FIELDS.HEIGHT],i=e[ue.HEADER_FIELDS.WIDTH],r=Math.max(1,e[ue.HEADER_FIELDS.MIPMAP_COUNT]),s=e[ue.HEADER_FIELDS.PF_FLAGS],o=e[ue.HEADER_FIELDS.FOURCC],d=o_(e,s,o,a),h=ue.MAGIC_SIZE+ue.HEADER_SIZE+(o===ue.D3DFMT.DX10?ue.HEADER_DX10_SIZE:0);return{format:d,fourCC:o,width:i,height:t,dataOffset:h,mipmapCount:r}}function o_(a,e,t,i){if(e&ue.PIXEL_FORMAT_FLAGS.FOURCC){if(t===ue.D3DFMT.DX10){let r=new Uint32Array(i,ue.MAGIC_SIZE+ue.HEADER_SIZE,ue.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(r[ue.HEADER_DX10_FIELDS.MISC_FLAG]===ue.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(r[ue.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===ue.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");let s=r[ue.HEADER_DX10_FIELDS.DXGI_FORMAT];if(s in pt)return pt[s];throw new Error(`DDSParser cannot parse texture data with DXGI format ${s}`)}if(t in Db)return Db[t];throw new Error(`DDSParser cannot parse texture data with fourCC format ${t}`)}if(e&ue.PIXEL_FORMAT_FLAGS.RGB||e&ue.PIXEL_FORMAT_FLAGS.RGBA)return c_(a);throw e&ue.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):e&ue.PIXEL_FORMAT_FLAGS.LUMINANCE||e&ue.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):e&ue.PIXEL_FORMAT_FLAGS.ALPHA||e&ue.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function c_(a){let e=a[ue.HEADER_FIELDS.RGB_BITCOUNT],t=a[ue.HEADER_FIELDS.R_BIT_MASK],i=a[ue.HEADER_FIELDS.G_BIT_MASK],r=a[ue.HEADER_FIELDS.B_BIT_MASK],s=a[ue.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(t===255&&i===65280&&r===16711680&&s===4278190080)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(t===16711680&&i===65280&&r===255&&s===4278190080)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(t===1072693248&&i===1047552&&r===1023&&s===3221225472)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(t===65535&&i===4294901760&&r===0&&s===0)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(t===4294967295&&i===0&&r===0&&s===0)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(t===31744&&i===992&&r===31&&s===32768)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(t===63488&&i===2016&&r===31&&s===0)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(t===3840&&i===240&&r===15&&s===61440)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(t===255&&i===0&&r===0&&s===65280)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(t===65535&&i===0&&r===0&&s===0)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(t===255&&i===0&&r===0&&s===0)return pt[ue.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
bitCount = ${e}, rBitMask = ${t}, gBitMask = ${i}, aBitMask = ${s}`)}var cS={extension:{type:B.LoadParser,priority:Rt.High,name:"loadDDS"},name:"loadDDS",test(a){return zt(a,[".dds"])},async load(a,e,t){let i=await Ho(),r=await(await fetch(a)).arrayBuffer(),s=r_(r,i),o=new Oi(s);return Ja(o,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}},d_=(a=>(a[a.RGBA8_SNORM=36759]="RGBA8_SNORM",a[a.RGBA=6408]="RGBA",a[a.RGBA8UI=36220]="RGBA8UI",a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",a[a.RGBA8I=36238]="RGBA8I",a[a.RGBA8=32856]="RGBA8",a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",a[a.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",a[a.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",a[a.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",a[a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",a[a.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",a[a.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",a[a.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",a[a.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",a[a.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",a[a.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",a[a.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",a[a.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",a[a.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",a[a.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",a[a.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",a[a.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",a[a.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",a[a.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",a[a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",a[a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",a[a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",a))(d_||{}),h_=(a=>(a[a.RGBA=6408]="RGBA",a[a.RGB=6407]="RGB",a[a.RG=33319]="RG",a[a.RED=6403]="RED",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.ALPHA=6406]="ALPHA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a))(h_||{}),f_=(a=>(a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.BYTE=5120]="BYTE",a[a.SHORT=5122]="SHORT",a[a.INT=5124]="INT",a[a.FLOAT=5126]="FLOAT",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.HALF_FLOAT=36193]="HALF_FLOAT",a))(f_||{}),l_={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},u_=[171,75,84,88,32,49,49,187,13,10,26,10],b_={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},p_=64,g_=67305985,m_={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},__={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},y_={32819:2,32820:2,33635:2},x_={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Le={FILE_HEADER_SIZE:p_,FILE_IDENTIFIER:u_,FORMATS_TO_COMPONENTS:__,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:x_,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:l_,FIELDS:b_,TYPES_TO_BYTES_PER_COMPONENT:m_,TYPES_TO_BYTES_PER_PIXEL:y_,ENDIANNESS:g_};function v_(a,e){let t=new DataView(a);if(!A_(t))throw new Error("Invalid KTX identifier in header");let{littleEndian:i,glType:r,glFormat:s,glInternalFormat:o,pixelWidth:d,pixelHeight:h,numberOfMipmapLevels:f,offset:u}=w_(t),p=Le.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[o];if(!p)throw new Error(`Unknown texture format ${o}`);if(!e.includes(p))throw new Error(`Unsupported texture format: ${p}, supportedFormats: ${e}`);let y=S_(r,s,o),_=T_(t,r,y,d,h,u,f,i);return{format:p,width:d,height:h,resource:_,alphaMode:"no-premultiply-alpha"}}function T_(a,e,t,i,r,s,o,d){let h=i+3&-4,f=r+3&-4,u=i*r;e===0&&(u=h*f);let p=u*t,y=i,_=r,v=h,T=f,A=s,P=new Array(o);for(let I=0;I<o;I++){let F=a.getUint32(A,d),D=A+4;P[I]=new Uint8Array(a.buffer,D,p),D+=p,A+=F+4,A=A%4!==0?A+4-A%4:A,y=y>>1||1,_=_>>1||1,v=y+4-1&-4,T=_+4-1&-4,p=v*T*t}return P}function S_(a,e,t){let i=Le.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[t];if(a!==0&&(Le.TYPES_TO_BYTES_PER_COMPONENT[a]?i=Le.TYPES_TO_BYTES_PER_COMPONENT[a]*Le.FORMATS_TO_COMPONENTS[e]:i=Le.TYPES_TO_BYTES_PER_PIXEL[a]),i===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return i}function w_(a){let e=a.getUint32(Le.FIELDS.ENDIANNESS,!0)===Le.ENDIANNESS,t=a.getUint32(Le.FIELDS.GL_TYPE,e),i=a.getUint32(Le.FIELDS.GL_FORMAT,e),r=a.getUint32(Le.FIELDS.GL_INTERNAL_FORMAT,e),s=a.getUint32(Le.FIELDS.PIXEL_WIDTH,e),o=a.getUint32(Le.FIELDS.PIXEL_HEIGHT,e)||1,d=a.getUint32(Le.FIELDS.PIXEL_DEPTH,e)||1,h=a.getUint32(Le.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,f=a.getUint32(Le.FIELDS.NUMBER_OF_FACES,e),u=a.getUint32(Le.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),p=a.getUint32(Le.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(o===0||d!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:t,glFormat:i,glInternalFormat:r,pixelWidth:s,pixelHeight:o,numberOfMipmapLevels:u,offset:Le.FILE_HEADER_SIZE+p}}function A_(a){for(let e=0;e<Le.FILE_IDENTIFIER.length;e++)if(a.getUint8(e)!==Le.FILE_IDENTIFIER[e])return!1;return!0}var dS={extension:{type:B.LoadParser,priority:Rt.High,name:"loadKTX"},name:"loadKTX",test(a){return zt(a,".ktx")},async load(a,e,t){let i=await Ho(),r=await(await fetch(a)).arrayBuffer(),s=v_(r,i),o=new Oi(s);return Ja(o,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}},E_='(function(){"use strict";const s={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:i},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:i}};function f(r){const t=r.format;if(s[t]){const n=s[t].convertFunction,o=r.resource;for(let e=0;e<o.length;e++)o[e]=n(o[e]);r.format=s[t].convertedFormat}}function i(r){const t=r.byteLength/3,n=new Uint32Array(t);for(let o=0;o<t;++o)n[o]=r[o*3]+(r[o*3+1]<<8)+(r[o*3+2]<<16)+4278190080;return new Uint8Array(n.buffer)}function d(r){const t=[];for(let n=0;n<r.numLevels;n++){const o=r.getImageData(n,0,0),e=new Uint8Array(o.byteLength);e.set(o),t.push(e)}return t}const w={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function p(r){const t=w[r];if(t)return t;throw new Error(`Unsupported glInternalFormat: ${r}`)}const h={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function F(r){const t=h[r];if(t)return t;throw new Error(`Unsupported VkFormat: ${r}`)}function U(r){return r.classId===2?F(r.vkFormat):p(r.glInternalformat)}const T={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function y(r){const t=T[r];if(t)return t;throw new Error(`Unsupported transcoderFormat: ${r}`)}const a={jsUrl:"",wasmUrl:""};let l,u,c;async function g(){if(!c){const r=new URL(a.jsUrl,location.origin).href,t=new URL(a.wasmUrl,location.origin).href;importScripts(r),c=new Promise(n=>{LIBKTX({locateFile:o=>t}).then(o=>{n(o)})})}return c}async function v(r,t){const n=await fetch(r);if(n.ok){const o=await n.arrayBuffer();return new t.ktxTexture(new Uint8Array(o))}throw new Error(`Failed to load KTX(2) texture: ${r}`)}const x=["bc7-rgba-unorm","astc-4x4-unorm","etc2-rgba8unorm","bc3-rgba-unorm","rgba8unorm"];async function B(r){const t=await g(),n=await v(r,t);let o;if(n.needsTranscoding){o=u;const R=t.TranscodeTarget[l];if(n.transcodeBasis(R,0)!==t.ErrorCode.SUCCESS)throw new Error("Unable to transcode basis texture.")}else o=U(n);const e=d(n),b={width:n.baseWidth,height:n.baseHeight,format:o,mipLevelCount:n.numLevels,resource:e,alphaMode:"no-premultiply-alpha"};return f(b),b}async function A(r,t,n){r&&(a.jsUrl=r),t&&(a.wasmUrl=t),u=x.filter(o=>n.includes(o))[0],l=y(u),await g()}const m={init:async r=>{const{jsUrl:t,wasmUrl:n,supportedTextures:o}=r;await A(t,n,o)},load:async r=>{var t;try{const n=await B(r.url);return{type:"load",url:r.url,success:!0,textureOptions:n,transferables:(t=n.resource)==null?void 0:t.map(o=>o.buffer)}}catch(n){throw n}}};self.onmessage=async r=>{var t;const n=r.data,o=await((t=m[n.type])==null?void 0:t.call(m,n));o&&self.postMessage(o,o.transferables)}})();\n',wi=null,In=class{constructor(){wi||(wi=URL.createObjectURL(new Blob([E_],{type:"application/javascript"}))),this.worker=new Worker(wi)}};In.revokeObjectURL=function(){wi&&(URL.revokeObjectURL(wi),wi=null)};var kb={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};var lr,zp={};function P_(a){return lr||(lr=new In().worker,lr.onmessage=e=>{let{success:t,url:i,textureOptions:r}=e.data;zp[i](r)},lr.postMessage({type:"init",jsUrl:kb.jsUrl,wasmUrl:kb.wasmUrl,supportedTextures:a})),lr}function R_(a,e){let t=P_(e);return new Promise(i=>{zp[a]=i,t.postMessage({type:"load",url:a})})}var hS={extension:{type:B.LoadParser,priority:Rt.High,name:"loadKTX2"},name:"loadKTX2",test(a){return zt(a,".ktx2")},async load(a,e,t){let i=await Ho(),r=await R_(a,i),s=new Oi(r);return Ja(s,t,a)},async unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}};var Eh=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],fS={extension:B.ResolveParser,test:a=>zt(a,[".ktx",".ktx2",".dds"]),parse:a=>{var e,t;let i,r=a.split(".");if(r.length>2){let s=r[r.length-2];Eh.includes(s)&&(i=s)}else i=r[r.length-1];return{resolution:parseFloat((t=(e=ha.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:i,src:a}}},Os,lS={extension:{type:B.DetectionParser,priority:2},test:async()=>!!(await jo()||No()),add:async a=>{let e=await Lp();return Os=M_(e),[...Os,...a]},remove:async a=>Os?a.filter(e=>!(e in Os)):a};function M_(a){let e=["basis"],t={};return a.forEach(i=>{let r=i.split("-")[0];r&&!t[r]&&(t[r]=!0,e.push(r))}),e.sort((i,r)=>{let s=Eh.indexOf(i),o=Eh.indexOf(r);return s===-1?1:o===-1?-1:s-o}),e}var C_=new qe,Ph=class{cull(a,e,t=!0){this._cullRecursive(a,e,t)}_cullRecursive(a,e,t=!0){var i;if(a.cullable&&a.measurable&&a.includeInBuild){let r=(i=a.cullArea)!=null?i:Bo(a,t,C_);a.culled=r.x>=e.x+e.width||r.y>=e.y+e.height||r.x+r.width<=e.x||r.y+r.height<=e.y}else a.culled=!1;if(!(!a.cullableChildren||a.culled||!a.renderable||!a.measurable||!a.includeInBuild))for(let r=0;r<a.children.length;r++)this._cullRecursive(a.children[r],e,t)}};Ph.shared=new Ph;var O_=Ph,Rh=class{static init(){this._renderRef=this.render.bind(this),this.render=()=>{O_.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}};Rh.extension={priority:10,type:B.Application,name:"culler"};var uS={extension:{type:B.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.resolve().then(function(){return Sg})}},I_=Object.defineProperty,Gn=Object.getOwnPropertySymbols,Vp=Object.prototype.hasOwnProperty,Wp=Object.prototype.propertyIsEnumerable,Ub=(a,e,t)=>e in a?I_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ud=(a,e)=>{for(var t in e||(e={}))Vp.call(e,t)&&Ub(a,t,e[t]);if(Gn)for(var t of Gn(e))Wp.call(e,t)&&Ub(a,t,e[t]);return a},G_=(a,e)=>{var t={};for(var i in a)Vp.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Gn)for(var i of Gn(a))e.indexOf(i)<0&&Wp.call(a,i)&&(t[i]=a[i]);return t},Yp=class Mh extends ht{constructor(e){e=ud(ud({},Mh.defaultOptions),e),super(e),this.enabled=!0,this._state=Et.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(e,t,i,r){e.applyFilter(this,t,i,r)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){let t=e,{gpu:i,gl:r}=t,s=G_(t,["gpu","gl"]),o,d;return i&&(o=Qt.from(i)),r&&(d=ua.from(r)),new Mh(ud({gpuProgram:o,glProgram:d},s))}};Yp.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};var Zr=Yp;var $p=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
gl_Position = filterVertexPosition();
vTextureCoord = filterTextureCoord();
}
`,B_=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,Lb=`struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition)
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var sample = textureSample(uTexture, uSampler, uv);

return sample * alphaUniforms.uAlpha;
}`,F_=Object.defineProperty,D_=Object.defineProperties,k_=Object.getOwnPropertyDescriptors,Bn=Object.getOwnPropertySymbols,Kp=Object.prototype.hasOwnProperty,qp=Object.prototype.propertyIsEnumerable,Nb=(a,e,t)=>e in a?F_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,bd=(a,e)=>{for(var t in e||(e={}))Kp.call(e,t)&&Nb(a,t,e[t]);if(Bn)for(var t of Bn(e))qp.call(e,t)&&Nb(a,t,e[t]);return a},U_=(a,e)=>D_(a,k_(e)),L_=(a,e)=>{var t={};for(var i in a)Kp.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Bn)for(var i of Bn(a))e.indexOf(i)<0&&qp.call(a,i)&&(t[i]=a[i]);return t},N_=class Zp extends Zr{constructor(e){e=bd(bd({},Zp.defaultOptions),e);let t=Qt.from({vertex:{source:Lb,entryPoint:"mainVertex"},fragment:{source:Lb,entryPoint:"mainFragment"}}),i=ua.from({vertex:$p,fragment:B_,name:"alpha-filter"}),r=e,{alpha:s}=r,o=L_(r,["alpha"]),d=new Je({uAlpha:{value:s,type:"f32"}});super(U_(bd({},o),{gpuProgram:t,glProgram:i,resources:{alphaUniforms:d}}))}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}};N_.defaultOptions={alpha:1};var Qp={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},j_=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function X_(a){let e=Qp[a],t=e.length,i=j_,r="",s="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;",o;for(let d=0;d<a;d++){let h=s.replace("%index%",d.toString());o=d,d>=t&&(o=a-d-1),h=h.replace("%value%",e[o].toString()),r+=h,r+=`
`}return i=i.replace("%blur%",r),i=i.replace("%size%",a.toString()),i}var H_=`
in vec2 aPosition;

uniform float uStrength;

out vec2 vBlurTexCoords[%size%];

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
gl_Position = filterVertexPosition();

float pixelStrength = uInputSize.%dimension% * uStrength;

vec2 textureCoord = filterTextureCoord();
%blur%
}`;function z_(a,e){let t=Math.ceil(a/2),i=H_,r="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let o=0;o<a;o++){let d=s.replace("%index%",o.toString());d=d.replace("%sampleIndex%",`${o-(t-1)}.0`),r+=d,r+=`
`}return i=i.replace("%blur%",r),i=i.replace("%size%",a.toString()),i=i.replace("%dimension%",e?"z":"w"),i}function V_(a,e){let t=z_(e,a),i=X_(e);return ua.from({vertex:t,fragment:i,name:`blur-${a?"horizontal":"vertical"}-pass-filter`})}var W_=`

struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
@builtin(position) position: vec4<f32>,
%blur-struct%
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {

let filteredCord = filterTextureCoord(aPosition);

let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

return VSOutput(
filterVertexPosition(aPosition),
%blur-vertex-out%
);
}

@fragment
fn mainFragment(
@builtin(position) position: vec4<f32>,
%blur-fragment-in%
) -> @location(0) vec4<f32> {

var   finalColor = vec4(0.0);

%blur-sampling%

return finalColor;
}`;function Y_(a,e){let t=Qp[e],i=t.length,r=[],s=[],o=[];for(let p=0;p<e;p++){r[p]=`@location(${p}) offset${p}: vec2<f32>,`,a?s[p]=`filteredCord + vec2(${p-i+1} * pixelStrength, 0.0),`:s[p]=`filteredCord + vec2(0.0, ${p-i+1} * pixelStrength),`;let y=p<i?p:e-p-1,_=t[y].toString();o[p]=`finalColor += textureSample(uTexture, uSampler, offset${p}) * ${_};`}let d=r.join(`
`),h=s.join(`
`),f=o.join(`
`),u=W_.replace("%blur-struct%",d).replace("%blur-vertex-out%",h).replace("%blur-fragment-in%",d).replace("%blur-sampling%",f).replace("%dimension%",a?"z":"w");return Qt.from({vertex:{source:u,entryPoint:"mainVertex"},fragment:{source:u,entryPoint:"mainFragment"}})}var $_=Object.defineProperty,jb=Object.getOwnPropertySymbols,K_=Object.prototype.hasOwnProperty,q_=Object.prototype.propertyIsEnumerable,Xb=(a,e,t)=>e in a?$_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,pd=(a,e)=>{for(var t in e||(e={}))K_.call(e,t)&&Xb(a,t,e[t]);if(jb)for(var t of jb(e))q_.call(e,t)&&Xb(a,t,e[t]);return a},Jp=class e3 extends Zr{constructor(e){e=pd(pd({},e3.defaultOptions),e);let t=V_(e.horizontal,e.kernelSize),i=Y_(e.horizontal,e.kernelSize);super(pd({glProgram:t,gpuProgram:i,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}}},e)),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,t,i,r){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,t,i,r);else{let s=ze.getSameSizeTexture(t),o=t,d=s;this._state.blend=!1;let h=e.renderer.type===yt.WEBGPU;for(let f=0;f<this.passes-1;f++){e.applyFilter(this,o,d,f===0?!0:h);let u=d;d=o,o=u}this._state.blend=!0,e.applyFilter(this,o,i,r),ze.returnTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};Jp.defaultOptions={strength:8,quality:4,kernelSize:5};var gd=Jp,Z_=Object.defineProperty,Q_=Object.defineProperties,J_=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertySymbols,t3=Object.prototype.hasOwnProperty,a3=Object.prototype.propertyIsEnumerable,Hb=(a,e,t)=>e in a?Z_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ur=(a,e)=>{for(var t in e||(e={}))t3.call(e,t)&&Hb(a,t,e[t]);if(Fn)for(var t of Fn(e))a3.call(e,t)&&Hb(a,t,e[t]);return a},ey=(a,e)=>Q_(a,J_(e)),ty=(a,e)=>{var t={};for(var i in a)t3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Fn)for(var i of Fn(a))e.indexOf(i)<0&&a3.call(a,i)&&(t[i]=a[i]);return t},Ch=class extends Zr{constructor(...e){var t;let i=(t=e[0])!=null?t:{};typeof i=="number"&&(i={strength:i},e[1]!==void 0&&(i.quality=e[1]),e[2]!==void 0&&(i.resolution=e[2]||"inherit"),e[3]!==void 0&&(i.kernelSize=e[3])),i=ur(ur({},gd.defaultOptions),i);let r=i,{strength:s,strengthX:o,strengthY:d,quality:h}=r,f=ty(r,["strength","strengthX","strengthY","quality"]);super(ey(ur({},f),{compatibleRenderers:yt.BOTH,resources:{}})),this._repeatEdgePixels=!1,this.blurXFilter=new gd(ur({horizontal:!0},i)),this.blurYFilter=new gd(ur({horizontal:!1},i)),this.quality=h,this.strengthX=o??s,this.strengthY=d??s,this.repeatEdgePixels=!1}apply(e,t,i,r){let s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){let d=ze.getSameSizeTexture(t);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,t,d,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,d,i,r),ze.returnTexture(d)}else o?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,t,i,r)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,t,i,r))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return this.strength}set blur(e){this.strength=e}get blurX(){return this.strengthX}set blurX(e){this.strengthX=e}get blurY(){return this.strengthY}set blurY(e){this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}};Ch.defaultOptions={strength:8,quality:4,kernelSize:5};var ay=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
vec4 color = texture(uTexture, vTextureCoord);
float randomValue = rand(gl_FragCoord.xy * uSeed);
float diff = (randomValue - 0.5) *  uNoise;

// Un-premultiply alpha before applying the color matrix. See issue #3539.
if (color.a > 0.0) {
color.rgb /= color.a;
}

color.r += diff;
color.g += diff;
color.b += diff;

// Premultiply alpha again.
color.rgb *= color.a;

finalColor = color;
}
`,zb=`

struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
uNoise:f32,
uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition)
);
}

fn rand(co:vec2<f32>) -> f32
{
return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);


var sample = textureSample(uTexture, uSampler, uv);
var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
var diff = (randomValue - 0.5) * noiseUniforms.uNoise;

// Un-premultiply alpha before applying the color matrix. See issue #3539.
if (sample.a > 0.0) {
sample.r /= sample.a;
sample.g /= sample.a;
sample.b /= sample.a;
}

sample.r += diff;
sample.g += diff;
sample.b += diff;

// Premultiply alpha again.
sample.r *= sample.a;
sample.g *= sample.a;
sample.b *= sample.a;

return sample;
}`,iy=Object.defineProperty,ry=Object.defineProperties,sy=Object.getOwnPropertyDescriptors,Dn=Object.getOwnPropertySymbols,i3=Object.prototype.hasOwnProperty,r3=Object.prototype.propertyIsEnumerable,Vb=(a,e,t)=>e in a?iy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,md=(a,e)=>{for(var t in e||(e={}))i3.call(e,t)&&Vb(a,t,e[t]);if(Dn)for(var t of Dn(e))r3.call(e,t)&&Vb(a,t,e[t]);return a},ny=(a,e)=>ry(a,sy(e)),oy=(a,e)=>{var t={};for(var i in a)i3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Dn)for(var i of Dn(a))e.indexOf(i)<0&&r3.call(a,i)&&(t[i]=a[i]);return t},cy=class s3 extends Zr{constructor(e={}){e=md(md({},s3.defaultOptions),e);let t=Qt.from({vertex:{source:zb,entryPoint:"mainVertex"},fragment:{source:zb,entryPoint:"mainFragment"}}),i=ua.from({vertex:$p,fragment:ay,name:"noise-filter"}),r=e,{noise:s,seed:o}=r,d=oy(r,["noise","seed"]);super(ny(md({},d),{gpuProgram:t,glProgram:i,resources:{noiseUniforms:new Je({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}})),this.noise=s,this.seed=o??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}};cy.defaultOptions={noise:.5};var dy=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
float clip = step(3.5,
step(uMaskClamp.x, vMaskCoord.x) +
step(uMaskClamp.y, vMaskCoord.y) +
step(vMaskCoord.x, uMaskClamp.z) +
step(vMaskCoord.y, uMaskClamp.w));

// TODO look into why this is needed
float npmAlpha = uAlpha;
vec4 original = texture(uTexture, vTextureCoord);
vec4 masky = texture(uMaskTexture, vMaskCoord);
float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

float a = alphaMul * masky.r * npmAlpha * clip;

if (uInverse == 1.0) {
a = 1.0 - a;
}

finalColor = original * a;
}
`,hy=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
gl_Position = filterVertexPosition(aPosition);
vTextureCoord = filterTextureCoord(aPosition);
vMaskCoord = getFilterCoord(aPosition);
}
`,Wb=`struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
uFilterMatrix:mat3x3<f32>,
uMaskClamp:vec4<f32>,
uAlpha:f32,
uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>,
@location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>,
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition),
getFilterCoord(aPosition)
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@location(1) filterUv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var maskClamp = filterUniforms.uMaskClamp;
var uAlpha = filterUniforms.uAlpha;

var clip = step(3.5,
step(maskClamp.x, filterUv.x) +
step(maskClamp.y, filterUv.y) +
step(filterUv.x, maskClamp.z) +
step(filterUv.y, maskClamp.w));

var mask = textureSample(uMaskTexture, uSampler, filterUv);
var source = textureSample(uTexture, uSampler, uv);
var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

var a: f32 = alphaMul * mask.r * uAlpha * clip;

if (filterUniforms.uInverse == 1.0) {
a = 1.0 - a;
}

return source * a;
}
`,fy=Object.defineProperty,ly=Object.defineProperties,uy=Object.getOwnPropertyDescriptors,kn=Object.getOwnPropertySymbols,n3=Object.prototype.hasOwnProperty,o3=Object.prototype.propertyIsEnumerable,Yb=(a,e,t)=>e in a?fy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,by=(a,e)=>{for(var t in e||(e={}))n3.call(e,t)&&Yb(a,t,e[t]);if(kn)for(var t of kn(e))o3.call(e,t)&&Yb(a,t,e[t]);return a},py=(a,e)=>ly(a,uy(e)),gy=(a,e)=>{var t={};for(var i in a)n3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&kn)for(var i of kn(a))e.indexOf(i)<0&&o3.call(a,i)&&(t[i]=a[i]);return t},Oh=class extends Zr{constructor(e){let t=e,{sprite:i}=t,r=gy(t,["sprite"]),s=new Vs(i.texture),o=new Je({uFilterMatrix:{value:new ie,type:"mat3x3<f32>"},uMaskClamp:{value:s.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:e.inverse?1:0,type:"f32"}}),d=Qt.from({vertex:{source:Wb,entryPoint:"mainVertex"},fragment:{source:Wb,entryPoint:"mainFragment"}}),h=ua.from({vertex:hy,fragment:dy,name:"mask-filter"});super(py(by({},r),{gpuProgram:d,glProgram:h,resources:{filterUniforms:o,uMaskTexture:i.texture.source}})),this.sprite=i,this._textureMatrix=s}set inverse(e){this.resources.filterUniforms.uniforms.uInverse=e?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(e,t,i,r){this._textureMatrix.texture=this.sprite.texture,e.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,e.applyFilter(this,t,i,r)}};function $b(a,e,t,i,r,s,o,d){let h=o-t,f=d-i,u=r-t,p=s-i,y=a-t,_=e-i,v=h*h+f*f,T=h*u+f*p,A=h*y+f*_,P=u*u+p*p,I=u*y+p*_,F=1/(v*P-T*T),D=(P*A-T*I)*F,H=(v*I-T*A)*F;return D>=0&&H>=0&&D+H<1}var c3=class d3{constructor(e){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{let{queue:t}=this,i=0;for(;t.length&&i<d3.uploadsPerFrame;){let r=t.shift();this.uploadQueueItem(r),i++}t.length?tt.system.addOnce(this._tick,this,Ca.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(e){let t=Array.isArray(e)?e:[e];for(let i of t)i instanceof fe?this._addContainer(i):this.resolveQueueItem(i,this.queue);return this}_addContainer(e){this.resolveQueueItem(e,this.queue);for(let t of e.children)this._addContainer(t)}upload(e){return e&&this.add(e),new Promise(t=>{this.queue.length?(this.resolves.push(t),this.dedupeQueue(),tt.system.addOnce(this._tick,this,Ca.UTILITY)):t()})}dedupeQueue(){let e=Object.create(null),t=0;for(let i=0;i<this.queue.length;i++){let r=this.queue[i];e[r.uid]||(e[r.uid]=!0,this.queue[t++]=r)}this.queue.length=t}_resolve(){let{resolves:e}=this,t=e.slice(0);e.length=0;for(let i of t)i()}};c3.uploadsPerFrame=4;var my=c3,_y=Object.defineProperty,Un=Object.getOwnPropertySymbols,h3=Object.prototype.hasOwnProperty,f3=Object.prototype.propertyIsEnumerable,Kb=(a,e,t)=>e in a?_y(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,yy=(a,e)=>{for(var t in e||(e={}))h3.call(e,t)&&Kb(a,t,e[t]);if(Un)for(var t of Un(e))f3.call(e,t)&&Kb(a,t,e[t]);return a},xy=(a,e)=>{var t={};for(var i in a)h3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Un)for(var i of Un(a))e.indexOf(i)<0&&f3.call(a,i)&&(t[i]=a[i]);return t},Za=class extends fa{constructor(...e){var t;let i=e[0];i instanceof Zt&&(i={geometry:i,shader:e[1]},e[3]&&(i.geometry.topology=e[3]));let r=i,{geometry:s,shader:o,texture:d,roundPixels:h,state:f}=r,u=xy(r,["geometry","shader","texture","roundPixels","state"]);super(yy({label:"Mesh"},u)),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=o??null,this.texture=(t=d??o?.texture)!=null?t:K.WHITE,this.state=f??Et.for2d(),this._geometry=s,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=h??!1}get material(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){var t;this._geometry!==e&&((t=this._geometry)==null||t.off("update",this.onViewUpdate,this),e.on("update",this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||this.state.data&12?!1:this._geometry instanceof qr?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){let{x:t,y:i}=e;if(!this.bounds.containsPoint(t,i))return!1;let r=this.geometry.getBuffer("aPosition").data,s=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){let o=this.geometry.getIndex().data,d=o.length;for(let h=0;h+2<d;h+=s){let f=o[h]*2,u=o[h+1]*2,p=o[h+2]*2;if($b(t,i,r[f],r[f+1],r[u],r[u+1],r[p],r[p+1]))return!0}}else{let o=r.length/2;for(let d=0;d+2<o;d+=s){let h=d*2,f=(d+1)*2,u=(d+2)*2;if($b(t,i,r[h],r[h+1],r[f],r[f+1],r[u],r[u+1]))return!0}}return!1}destroy(e){var t;if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(i)}(t=this._geometry)==null||t.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}},vy=Object.defineProperty,Ty=Object.defineProperties,Sy=Object.getOwnPropertyDescriptors,Ln=Object.getOwnPropertySymbols,l3=Object.prototype.hasOwnProperty,u3=Object.prototype.propertyIsEnumerable,qb=(a,e,t)=>e in a?vy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,wy=(a,e)=>{for(var t in e||(e={}))l3.call(e,t)&&qb(a,t,e[t]);if(Ln)for(var t of Ln(e))u3.call(e,t)&&qb(a,t,e[t]);return a},Ay=(a,e)=>Ty(a,Sy(e)),Ey=(a,e)=>{var t={};for(var i in a)l3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Ln)for(var i of Ln(a))e.indexOf(i)<0&&u3.call(a,i)&&(t[i]=a[i]);return t},Ih=class a extends we{constructor(...e){let t=e[0];Array.isArray(e[0])&&(t={textures:e[0],autoUpdate:e[1]});let i=t,{textures:r,autoUpdate:s}=i,o=Ey(i,["textures","autoUpdate"]),[d]=r;super(Ay(wy({},o),{texture:d instanceof K?d:d.texture})),this._textures=null,this._durations=null,this._autoUpdate=s??!0,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=r}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(tt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(tt.shared.add(this.update,this,Ca.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;let t=e.deltaTime,i=this.animationSpeed*t,r=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=i/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];let o=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this._updateTexture())}_updateTexture(){let e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this.texture=this._textures[e],this.updateAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){let t=[];for(let i=0;i<e.length;++i)t.push(K.from(e[i]));return new a(t)}static fromImages(e){let t=[];for(let i=0;i<e.length;++i)t.push(K.from(e[i]));return new a(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof K)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(tt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(tt.shared.add(this.update,this),this._isConnectedToTicker=!0))}},Gh=class{constructor({matrix:e,observer:t}={}){this.dirty=!0,this._matrix=e??new ie,this.observer=t,this.position=new Ve(this,0,0),this.scale=new Ve(this,1,1),this.pivot=new Ve(this,0,0),this.skew=new Ve(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){let e=this._matrix;return this.dirty&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1),e}_onUpdate(e){var t;this.dirty=!0,e===this.skew&&this.updateSkew(),(t=this.observer)==null||t._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}},Py=Object.defineProperty,Nn=Object.getOwnPropertySymbols,b3=Object.prototype.hasOwnProperty,p3=Object.prototype.propertyIsEnumerable,Zb=(a,e,t)=>e in a?Py(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,br=(a,e)=>{for(var t in e||(e={}))b3.call(e,t)&&Zb(a,t,e[t]);if(Nn)for(var t of Nn(e))p3.call(e,t)&&Zb(a,t,e[t]);return a},Ry=(a,e)=>{var t={};for(var i in a)b3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Nn)for(var i of Nn(a))e.indexOf(i)<0&&p3.call(a,i)&&(t[i]=a[i]);return t},g3=class Ns extends fa{constructor(...e){let t=e[0]||{};t instanceof K&&(t={texture:t}),e.length>1&&(t.width=e[1],t.height=e[2]),t=br(br({},Ns.defaultOptions),t);let i=t??{},{texture:r,anchor:s,tilePosition:o,tileScale:d,tileRotation:h,width:f,height:u,applyAnchorToTexture:p,roundPixels:y}=i,_=Ry(i,["texture","anchor","tilePosition","tileScale","tileRotation","width","height","applyAnchorToTexture","roundPixels"]);super(br({label:"TilingSprite"},_)),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new Ve({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=p,this.texture=r,this._width=f??r.width,this._height=u??r.height,this._tileTransform=new Gh({observer:{_onUpdate:()=>this.onViewUpdate()}}),s&&(this.anchor=s),this.tilePosition=o,this.tileScale=d,this.tileRotation=h,this.roundPixels=y??!1}static from(e,t={}){return typeof e=="string"?new Ns(br({texture:Oe.get(e)},t)):new Ns(br({texture:e},t))}get uvRespectAnchor(){return Jt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){Jt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,t){var i;typeof e=="object"&&(t=(i=e.height)!=null?i:e.width,e=e.width),this._width=e,this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){let e=this._bounds,t=this._anchor,i=this._width,r=this._height;e.maxX=-t._x*i,e.minX=e.maxX+i,e.maxY=-t._y*r,e.minY=e.maxY+r}containsPoint(e){let t=this._width,i=this._height,r=-t*this._anchor._x,s=0;return e.x>=r&&e.x<=r+t&&(s=-i*this._anchor._y,e.y>=s&&e.y<=s+i)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}};g3.defaultOptions={texture:K.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};var My=g3,Cy=Object.defineProperty,jn=Object.getOwnPropertySymbols,m3=Object.prototype.hasOwnProperty,_3=Object.prototype.propertyIsEnumerable,Qb=(a,e,t)=>e in a?Cy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Oy=(a,e)=>{for(var t in e||(e={}))m3.call(e,t)&&Qb(a,t,e[t]);if(jn)for(var t of jn(e))_3.call(e,t)&&Qb(a,t,e[t]);return a},Iy=(a,e)=>{var t={};for(var i in a)m3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&jn)for(var i of jn(a))e.indexOf(i)<0&&_3.call(a,i)&&(t[i]=a[i]);return t},jr=class extends fa{constructor(e,t){let i=e,{text:r,resolution:s,style:o,anchor:d,width:h,height:f,roundPixels:u}=i,p=Iy(i,["text","resolution","style","anchor","width","height","roundPixels"]);super(Oy({},p)),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=r??"",this.style=o,this.resolution=s??null,this.allowChildren=!1,this._anchor=new Ve({_onUpdate:()=>{this.onViewUpdate()}}),d&&(this.anchor=d),this.roundPixels=u??!1,h!==void 0&&(this.width=h),f!==void 0&&(this.height=f)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){var i;typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){let t=this.bounds.width,i=this.bounds.height,r=-t*this.anchor.x,s=0;return e.x>=r&&e.x<=r+t&&(s=-i*this.anchor.y,e.y>=s&&e.y<=s+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}};function Cf(a,e){var t;let i=(t=a[0])!=null?t:{};return(typeof i=="string"||a[1])&&(i={text:i,style:a[1]}),i}var je=class extends jr{constructor(...e){let t=Cf(e,"Text");super(t,Pt),this.renderPipeId="text"}updateBounds(){let e=this._bounds,t=this._anchor,i=oa.measureText(this._text,this._style),{width:r,height:s}=i;e.minX=-t._x*r,e.maxX=e.minX+r,e.minY=-t._y*s,e.maxY=e.minY+s}},Bh=class extends my{resolveQueueItem(e,t){return e instanceof fe?this.resolveContainerQueueItem(e,t):e instanceof Fe||e instanceof K?t.push(e.source):e instanceof dt&&t.push(e),null}resolveContainerQueueItem(e,t){e instanceof we||e instanceof My||e instanceof Za?t.push(e.texture.source):e instanceof je?t.push(e):e instanceof We?t.push(e.context):e instanceof Ih&&e.textures.forEach(i=>{i.source?t.push(i.source):t.push(i.texture.source)})}resolveGraphicsContextQueueItem(e){this.renderer.graphicsContext.getContextRenderData(e);let{instructions:t}=e;for(let i of t)if(i.action==="texture"){let{image:r}=i.data;return r.source}else if(i.action==="fill"){let{texture:r}=i.data.style;return r.source}return null}},Fh=class extends jr{constructor(...e){var t,i,r;let s=Cf(e,"BitmapText");(t=s.style)!=null||(s.style=s.style||{}),(r=(i=s.style).fill)!=null||(i.fill=16777215),super(s,Pt),this.renderPipeId="bitmapText"}updateBounds(){let e=this._bounds,t=this._anchor,i=mn.measureText(this.text,this._style),r=i.scale,s=i.offsetY*r,o=i.width*r,d=i.height*r,h=this._style._stroke;h&&(o+=h.width,d+=h.width),e.minX=-t._x*o,e.maxX=e.minX+o,e.minY=-t._y*(d+s),e.maxY=e.minY+d}set resolution(e){}get resolution(){return this._resolution}},Dh=class extends jr{constructor(...e){let t=Cf(e,"HtmlText");super(t,vn),this.renderPipeId="htmlText"}updateBounds(){let e=this._bounds,t=this._anchor,i=xp(this.text,this._style),{width:r,height:s}=i;e.minX=-t._x*r,e.maxX=e.minX+r,e.minY=-t._y*s,e.maxY=e.minY+s}},kh=class extends Bh{uploadQueueItem(e){e instanceof Fe?this.uploadTextureSource(e):e instanceof je?this.uploadText(e):e instanceof Dh?this.uploadHTMLText(e):e instanceof Fh?this.uploadBitmapText(e):e instanceof dt&&this.uploadGraphicsContext(e)}uploadTextureSource(e){this.renderer.texture.initSource(e)}uploadText(e){this.renderer.renderPipes.text.initGpuText(e)}uploadBitmapText(e){this.renderer.renderPipes.bitmapText.initGpuText(e)}uploadHTMLText(e){this.renderer.renderPipes.htmlText.initGpuText(e)}uploadGraphicsContext(e){this.renderer.graphicsContext.getContextRenderData(e);let{instructions:t}=e;for(let i of t)if(i.action==="texture"){let{image:r}=i.data;this.uploadTextureSource(r.source)}else if(i.action==="fill"){let{texture:r}=i.data.style;this.uploadTextureSource(r.source)}return null}},Uh=class extends kh{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}};Uh.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"prepare"};var Xn=class{constructor(){this._tempState=Et.for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,t,i){let r=e.renderer,s=this._didUploadHash[i.uid];r.shader.bind(i,s),s||(this._didUploadHash[i.uid]=!0),r.shader.updateUniformGroup(r.globalUniforms.uniformGroup),r.geometry.bind(t,i.glProgram)}execute(e,t){let i=e.renderer;this._tempState.blendMode=t.blendMode,i.state.set(this._tempState);let r=t.textures.textures;for(let s=0;s<t.textures.count;s++)i.texture.bind(r[s],s);i.geometry.draw(t.topology,t.size,t.start)}};Xn.extension={type:[B.WebGLPipesAdaptor],name:"batch"};var Is=Et.for2d(),Hn=class{start(e,t,i){let r=e.renderer,s=r.encoder,o=i.gpuProgram;this._shader=i,this._geometry=t,s.setGeometry(t,o),Is.blendMode="normal",r.pipeline.getPipeline(t,o,Is);let d=r.globalUniforms.bindGroup;s.resetBindGroup(1),s.setBindGroup(0,d,o)}execute(e,t){let i=this._shader.gpuProgram,r=e.renderer,s=r.encoder;if(!t.bindGroup){let h=t.textures;t.bindGroup=yf(h.textures,h.count)}Is.blendMode=t.blendMode;let o=r.bindGroup.getBindGroup(t.bindGroup,i,1),d=r.pipeline.getPipeline(this._geometry,i,Is,t.topology);t.bindGroup._touch(r.textureGC.count),s.setPipeline(d),s.renderPassEncoder.setBindGroup(1,o),s.renderPassEncoder.drawIndexed(t.size,1,t.start)}};Hn.extension={type:[B.WebGPUPipesAdaptor],name:"batch"};var Lh=class y3{constructor(e,t){this.state=Et.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null);var i,r;this.renderer=e,this._adaptor=t,(r=(i=this._adaptor).init)==null||r.call(i,this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let t=this._batchersByInstructionSet[e.uid];t||(t=this._batchersByInstructionSet[e.uid]=Object.create(null),t.default||(t.default=new Af)),this._activeBatches=t,this._activeBatch=this._activeBatches.default;for(let i in this._activeBatches)this._activeBatches[i].begin()}addToBatch(e,t){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(t);let i=this._activeBatches[e.batcherName];i||(i=this._activeBatches[e.batcherName]=y3.getBatcher(e.batcherName),i.begin()),this._activeBatch=i}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);let t=this._activeBatches;for(let i in t){let r=t[i],s=r.geometry;s.indexBuffer.setDataWithSize(r.indexBuffer,r.indexSize,!0),s.buffers[0].setDataWithSize(r.attributeBuffer.float32View,r.attributeSize,!1)}}upload(e){let t=this._batchersByInstructionSet[e.uid];for(let i in t){let r=t[i],s=r.geometry;r.dirty&&(r.dirty=!1,s.buffers[0].update(r.attributeSize*4))}}execute(e){if(e.action==="startBatch"){let t=e.batcher,i=t.geometry,r=t.shader;this._adaptor.start(this,i,r)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(let e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}};Lh.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"batch"},Lh._availableBatchers=Object.create(null);var x3=Lh;pe.handleByMap(B.Batcher,x3._availableBatchers),pe.add(Af);var Gy={name:"texture-bit",vertex:{header:`

struct TextureUniforms {
uTextureMatrix:mat3x3<f32>,
}

@group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
`,main:`
uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
`},fragment:{header:`
@group(2) @binding(0) var uTexture: texture_2d<f32>;
@group(2) @binding(1) var uSampler: sampler;


`,main:`
outColor = textureSample(uTexture, uSampler, vUV);
`}},By={name:"texture-bit",vertex:{header:`
uniform mat3 uTextureMatrix;
`,main:`
uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
`},fragment:{header:`
uniform sampler2D uTexture;


`,main:`
outColor = texture(uTexture, vUV);
`}},Fy=new qe,Dy=class extends Ai{constructor(){super(),this.filters=[new Oh({sprite:new we(K.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(a){this.filters[0].sprite=a}get inverse(){return this.filters[0].inverse}set inverse(a){this.filters[0].inverse=a}},zn=class{constructor(e){this._activeMaskStage=[],this._renderer=e}push(e,t,i){let r=this._renderer;if(r.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1,maskedContainer:t}),e.inverse=t._maskOptions.inverse,e.renderMaskToTexture){let s=e.mask;s.includeInBuild=!0,s.collectRenderables(i,r,null),s.includeInBuild=!1}r.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:e,maskedContainer:t,inverse:t._maskOptions.inverse,canBundle:!1})}pop(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1})}execute(e){let t=this._renderer,i=e.mask.renderMaskToTexture;if(e.action==="pushMaskBegin"){let r=ye.get(Dy);if(r.inverse=e.inverse,i){e.mask.mask.measurable=!0;let s=Bo(e.mask.mask,!0,Fy);e.mask.mask.measurable=!1,s.ceil();let o=t.renderTarget.renderTarget.colorTexture.source,d=ze.getOptimalTexture(s.width,s.height,o._resolution,o.antialias);t.renderTarget.push(d,!0),t.globalUniforms.push({offset:s,worldColor:4294967295});let h=r.sprite;h.texture=d,h.worldTransform.tx=s.minX,h.worldTransform.ty=s.minY,this._activeMaskStage.push({filterEffect:r,maskedContainer:e.maskedContainer,filterTexture:d})}else r.sprite=e.mask.mask,this._activeMaskStage.push({filterEffect:r,maskedContainer:e.maskedContainer})}else if(e.action==="pushMaskEnd"){let r=this._activeMaskStage[this._activeMaskStage.length-1];i&&(t.type===yt.WEBGL&&t.renderTarget.finishRenderPass(),t.renderTarget.pop(),t.globalUniforms.pop()),t.filter.push({renderPipeId:"filter",action:"pushFilter",container:r.maskedContainer,filterEffect:r.filterEffect,canBundle:!1})}else if(e.action==="popMaskEnd"){t.filter.pop();let r=this._activeMaskStage.pop();i&&ze.returnTexture(r.filterTexture),ye.return(r.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}};zn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"alphaMask"};var Vn=class{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,t,i){this._renderer.renderPipes.batch.break(i);let r=this._colorStack;r[this._colorStackIndex]=r[this._colorStackIndex-1]&e.mask;let s=this._colorStack[this._colorStackIndex];s!==this._currentColor&&(this._currentColor=s,i.add({renderPipeId:"colorMask",colorMask:s,canBundle:!1})),this._colorStackIndex++}pop(e,t,i){this._renderer.renderPipes.batch.break(i);let r=this._colorStack;this._colorStackIndex--;let s=r[this._colorStackIndex-1];s!==this._currentColor&&(this._currentColor=s,i.add({renderPipeId:"colorMask",colorMask:s,canBundle:!1}))}execute(e){this._renderer.colorMask.setMask(e.colorMask)}destroy(){this._colorStack=null}};Vn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"colorMask"};var Wn=class{constructor(e){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=e}push(e,t,i){var r,s;let o=e,d=this._renderer;d.renderPipes.batch.break(i),d.renderPipes.blendMode.setBlendMode(o.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});let h=o.mask;h.includeInBuild=!0,this._maskHash.has(o)||this._maskHash.set(o,{instructionsStart:0,instructionsLength:0});let f=this._maskHash.get(o);f.instructionsStart=i.instructionSize,h.collectRenderables(i,d,null),h.includeInBuild=!1,d.renderPipes.batch.break(i),i.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});let u=i.instructionSize-f.instructionsStart-1;f.instructionsLength=u;let p=d.renderTarget.renderTarget.uid;(s=(r=this._maskStackHash)[p])!=null||(r[p]=0)}pop(e,t,i){let r=e,s=this._renderer;s.renderPipes.batch.break(i),s.renderPipes.blendMode.setBlendMode(r.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:t._maskOptions.inverse,canBundle:!1});let o=this._maskHash.get(e);for(let d=0;d<o.instructionsLength;d++)i.instructions[i.instructionSize++]=i.instructions[o.instructionsStart++];i.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(e){var t,i;let r=this._renderer,s=r.renderTarget.renderTarget.uid,o=(i=(t=this._maskStackHash)[s])!=null?i:t[s]=0;e.action==="pushMaskBegin"?(r.renderTarget.ensureDepthStencil(),r.stencil.setStencilMode(Ne.RENDERING_MASK_ADD,o),o++,r.colorMask.setMask(0)):e.action==="pushMaskEnd"?(e.inverse?r.stencil.setStencilMode(Ne.INVERSE_MASK_ACTIVE,o):r.stencil.setStencilMode(Ne.MASK_ACTIVE,o),r.colorMask.setMask(15)):e.action==="popMaskBegin"?(r.colorMask.setMask(0),o!==0?r.stencil.setStencilMode(Ne.RENDERING_MASK_REMOVE,o):(r.renderTarget.clear(null,mt.STENCIL),r.stencil.setStencilMode(Ne.DISABLED,o)),o--):e.action==="popMaskEnd"&&(e.inverse?r.stencil.setStencilMode(Ne.INVERSE_MASK_ACTIVE,o):r.stencil.setStencilMode(Ne.MASK_ACTIVE,o),r.colorMask.setMask(15)),this._maskStackHash[s]=o}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}};Wn.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"stencilMask"};var js=(a=>(a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",a))(js||{}),Nh=class{constructor(e,t){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=t}},Yn=class{constructor(e){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){let e=this._gl=this._renderer.gl;this._gpuBuffers=Object.create(null),this._maxBindings=e.MAX_UNIFORM_BUFFER_BINDINGS?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0}getGlBuffer(e){return this._gpuBuffers[e.uid]||this.createGLBuffer(e)}bind(e){let{_gl:t}=this,i=this.getGlBuffer(e);t.bindBuffer(i.type,i.buffer)}bindBufferBase(e,t){let{_gl:i}=this;this._boundBufferBases[t]!==e&&(this._boundBufferBases[t]=e,e._lastBindBaseLocation=t,i.bindBufferBase(i.UNIFORM_BUFFER,t,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let t=this.getLastBindBaseLocation(e);if(t>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,t;let i=0,r=this._nextBindBaseIndex;for(;i<2;){r>=this._maxBindings&&(r=this._minBaseLocation,i++);let s=this._boundBufferBases[r];if(s&&s._lastBindCallId===this._bindCallId){r++;continue}break}return t=r,this._nextBindBaseIndex=r+1,i>=2?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[t]=null,t)}getLastBindBaseLocation(e){let t=e._lastBindBaseLocation;return this._boundBufferBases[t]===e?t:-1}bindBufferRange(e,t,i,r){let{_gl:s}=this;i||(i=0),t||(t=0),this._boundBufferBases[t]=null,s.bindBufferRange(s.UNIFORM_BUFFER,t||0,e.buffer,i*256,r||256)}updateBuffer(e){let{_gl:t}=this,i=this.getGlBuffer(e);if(e._updateID===i.updateID)return i;i.updateID=e._updateID,t.bindBuffer(i.type,i.buffer);let r=e.data,s=e.descriptor.usage&ve.STATIC?t.STATIC_DRAW:t.DYNAMIC_DRAW;return r?i.byteLength>=r.byteLength?t.bufferSubData(i.type,0,r,0,e._updateSize/r.BYTES_PER_ELEMENT):(i.byteLength=r.byteLength,t.bufferData(i.type,r,s)):(i.byteLength=e.descriptor.size,t.bufferData(i.type,i.byteLength,s)),i}destroyAll(){let e=this._gl;for(let t in this._gpuBuffers)e.deleteBuffer(this._gpuBuffers[t].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(e,t){let i=this._gpuBuffers[e.uid],r=this._gl;t||r.deleteBuffer(i.buffer),this._gpuBuffers[e.uid]=null}createGLBuffer(e){let{_gl:t}=this,i=js.ARRAY_BUFFER;e.descriptor.usage&ve.INDEX?i=js.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&ve.UNIFORM&&(i=js.UNIFORM_BUFFER);let r=new Nh(t.createBuffer(),i);return this._gpuBuffers[e.uid]=r,e.on("destroy",this.onBufferDestroy,this),r}resetState(){this._boundBufferBases=Object.create(null)}};Yn.extension={type:[B.WebGLSystem],name:"buffer"};var ky=Object.defineProperty,Uy=Object.defineProperties,Ly=Object.getOwnPropertyDescriptors,Jb=Object.getOwnPropertySymbols,Ny=Object.prototype.hasOwnProperty,jy=Object.prototype.propertyIsEnumerable,e1=(a,e,t)=>e in a?ky(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Gs=(a,e)=>{for(var t in e||(e={}))Ny.call(e,t)&&e1(a,t,e[t]);if(Jb)for(var t of Jb(e))jy.call(e,t)&&e1(a,t,e[t]);return a},t1=(a,e)=>Uy(a,Ly(e)),jh=class v3{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){var t,i;e=Gs(Gs({},v3.defaultOptions),e);let r=this.multiView=e.multiView;if(e.context&&r&&(Jt("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),r=!1),r?this.canvas=xe.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{let s=this._renderer.background.alpha<1,o=(t=e.premultipliedAlpha)!=null?t:!0,d=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:s,premultipliedAlpha:o,antialias:d,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:(i=e.powerPreference)!=null?i:"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&Jt("multiView is disabled, but targetCanvas is not the main canvas");return}let{canvas:t}=this;(t.width<e.width||t.height<e.height)&&(t.width=Math.max(e.width,e.width),t.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof xe.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);let t=this._renderer.view.canvas;t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,t){let i,r=this.canvas;if(e===2&&(i=r.getContext("webgl2",t)),!i&&(i=r.getContext("webgl",t),!i))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=i,this.initFromContext(this.gl)}getExtensions(){let{gl:e}=this,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions=t1(Gs({},t),{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")});else{this.extensions=t1(Gs({},t),{colorBufferFloat:e.getExtension("EXT_color_buffer_float")});let i=e.getExtension("WEBGL_provoking_vertex");i&&i.provokingVertexWEBGL(i.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{var t;this.gl.isContextLost()&&((t=this.extensions.loseContext)==null||t.restoreContext())},0))}handleContextRestored(){this._renderer.runners.contextChange.emit(this.gl)}destroy(){var e;let t=this._renderer.view.canvas;this._renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),(e=this.extensions.loseContext)==null||e.loseContext()}forceContextLoss(){var e;(e=this.extensions.loseContext)==null||e.loseContext(),this._contextLossForced=!0}validateContext(e){let t=e.getContextAttributes();t&&t.stencil;let i=this.supports,r=this.webGLVersion===2,s=this.extensions;i.uint32Indices=r||!!s.uint32ElementIndex,i.uniformBufferObject=r,i.vertexArrayObject=r||!!s.vertexArrayObject,i.srgbTextures=r||!!s.srgb,i.nonPowOf2wrapping=r,i.nonPowOf2mipmaps=r,i.msaa=r,i.uint32Indices}};jh.extension={type:[B.WebGLSystem],name:"context"},jh.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};var Xy=jh;function T3(a,e){var t,i,r;for(let s in a.attributes){let o=a.attributes[s],d=e[s];d?((t=o.format)!=null||(o.format=d.format),(i=o.offset)!=null||(o.offset=d.offset),(r=o.instance)!=null||(o.instance=d.instance)):Jt(`Attribute ${s} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}Hy(a)}function Hy(a){var e,t;let{buffers:i,attributes:r}=a,s={},o={};for(let d in i){let h=i[d];s[h.uid]=0,o[h.uid]=0}for(let d in r){let h=r[d];s[h.buffer.uid]+=Ia(h.format).stride}for(let d in r){let h=r[d];(e=h.stride)!=null||(h.stride=s[h.buffer.uid]),(t=h.start)!=null||(h.start=o[h.buffer.uid]),o[h.buffer.uid]+=Ia(h.format).stride}}var Xh=(a=>(a[a.RGBA=6408]="RGBA",a[a.RGB=6407]="RGB",a[a.RG=33319]="RG",a[a.RED=6403]="RED",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.ALPHA=6406]="ALPHA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a))(Xh||{}),S3=(a=>(a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a))(S3||{}),zy=(a=>(a[a.CLAMP=33071]="CLAMP",a[a.REPEAT=10497]="REPEAT",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a))(zy||{}),Se=(a=>(a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.BYTE=5120]="BYTE",a[a.SHORT=5122]="SHORT",a[a.INT=5124]="INT",a[a.FLOAT=5126]="FLOAT",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.HALF_FLOAT=36193]="HALF_FLOAT",a))(Se||{}),a1={uint8x2:Se.UNSIGNED_BYTE,uint8x4:Se.UNSIGNED_BYTE,sint8x2:Se.BYTE,sint8x4:Se.BYTE,unorm8x2:Se.UNSIGNED_BYTE,unorm8x4:Se.UNSIGNED_BYTE,snorm8x2:Se.BYTE,snorm8x4:Se.BYTE,uint16x2:Se.UNSIGNED_SHORT,uint16x4:Se.UNSIGNED_SHORT,sint16x2:Se.SHORT,sint16x4:Se.SHORT,unorm16x2:Se.UNSIGNED_SHORT,unorm16x4:Se.UNSIGNED_SHORT,snorm16x2:Se.SHORT,snorm16x4:Se.SHORT,float16x2:Se.HALF_FLOAT,float16x4:Se.HALF_FLOAT,float32:Se.FLOAT,float32x2:Se.FLOAT,float32x3:Se.FLOAT,float32x4:Se.FLOAT,uint32:Se.UNSIGNED_INT,uint32x2:Se.UNSIGNED_INT,uint32x3:Se.UNSIGNED_INT,uint32x4:Se.UNSIGNED_INT,sint32:Se.INT,sint32x2:Se.INT,sint32x3:Se.INT,sint32x4:Se.INT};function Vy(a){var e;return(e=a1[a])!=null?e:a1.float32}var Wy={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5},$n=class{constructor(e){this._geometryVaoHash=Object.create(null),this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){let e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");let t=this._renderer.context.extensions.vertexArrayObject;t&&(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=r=>t.bindVertexArrayOES(r),e.deleteVertexArray=r=>t.deleteVertexArrayOES(r));let i=this._renderer.context.extensions.vertexAttribDivisorANGLE;i&&(e.drawArraysInstanced=(r,s,o,d)=>{i.drawArraysInstancedANGLE(r,s,o,d)},e.drawElementsInstanced=(r,s,o,d,h)=>{i.drawElementsInstancedANGLE(r,s,o,d,h)},e.vertexAttribDivisor=(r,s)=>i.vertexAttribDivisorANGLE(r,s)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(e,t){let i=this.gl;this._activeGeometry=e;let r=this.getVao(e,t);this._activeVao!==r&&(this._activeVao=r,i.bindVertexArray(r)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){let e=this._activeGeometry,t=this._renderer.buffer;for(let i=0;i<e.buffers.length;i++){let r=e.buffers[i];t.updateBuffer(r)}}checkCompatibility(e,t){let i=e.attributes,r=t._attributeData;for(let s in r)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){let i=e.attributes,r=t._attributeData,s=["g",e.uid];for(let o in i)r[o]&&s.push(o,r[o].location);return s.join("-")}getVao(e,t){var i;return((i=this._geometryVaoHash[e.uid])==null?void 0:i[t._key])||this.initGeometryVao(e,t)}initGeometryVao(e,t,i=!0){let r=this._renderer.gl,s=this._renderer.buffer;this._renderer.shader._getProgramData(t),this.checkCompatibility(e,t);let o=this.getSignature(e,t);this._geometryVaoHash[e.uid]||(this._geometryVaoHash[e.uid]=Object.create(null),e.on("destroy",this.onGeometryDestroy,this));let d=this._geometryVaoHash[e.uid],h=d[o];if(h)return d[t._key]=h,h;T3(e,t._attributeData);let f=e.buffers;h=r.createVertexArray(),r.bindVertexArray(h);for(let u=0;u<f.length;u++){let p=f[u];s.bind(p)}return this.activateVao(e,t),d[t._key]=h,d[o]=h,r.bindVertexArray(null),h}onGeometryDestroy(e,t){let i=this._geometryVaoHash[e.uid],r=this.gl;if(i){if(t)for(let s in i)this._activeVao!==i[s]&&this.unbind(),r.deleteVertexArray(i[s]);this._geometryVaoHash[e.uid]=null}}destroyAll(e=!1){let t=this.gl;for(let i in this._geometryVaoHash){if(e)for(let r in this._geometryVaoHash[i]){let s=this._geometryVaoHash[i];this._activeVao!==s&&this.unbind(),t.deleteVertexArray(s[r])}this._geometryVaoHash[i]=null}}activateVao(e,t){var i,r;let s=this._renderer.gl,o=this._renderer.buffer,d=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);let h=null;for(let f in d){let u=d[f],p=u.buffer,y=o.getGlBuffer(p),_=t._attributeData[f];if(_){h!==y&&(o.bind(p),h=y);let v=_.location;s.enableVertexAttribArray(v);let T=Ia(u.format),A=Vy(u.format);if(((i=_.format)==null?void 0:i.substring(1,4))==="int"?s.vertexAttribIPointer(v,T.size,A,u.stride,u.offset):s.vertexAttribPointer(v,T.size,A,T.normalised,u.stride,u.offset),u.instance)if(this.hasInstance){let P=(r=u.divisor)!=null?r:1;s.vertexAttribDivisor(v,P)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,i,r){let{gl:s}=this._renderer,o=this._activeGeometry,d=Wy[e||o.topology];if(r!=null||(r=o.instanceCount),o.indexBuffer){let h=o.indexBuffer.data.BYTES_PER_ELEMENT,f=h===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;r>1?s.drawElementsInstanced(d,t||o.indexBuffer.data.length,f,(i||0)*h,r):s.drawElements(d,t||o.indexBuffer.data.length,f,(i||0)*h)}else r>1?s.drawArraysInstanced(d,i||0,t||o.getSize(),r):s.drawArrays(d,i||0,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}};$n.extension={type:[B.WebGLSystem],name:"geometry"};var Yy=Object.defineProperty,i1=Object.getOwnPropertySymbols,$y=Object.prototype.hasOwnProperty,Ky=Object.prototype.propertyIsEnumerable,r1=(a,e,t)=>e in a?Yy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,s1=(a,e)=>{for(var t in e||(e={}))$y.call(e,t)&&r1(a,t,e[t]);if(i1)for(var t of i1(e))Ky.call(e,t)&&r1(a,t,e[t]);return a},qy=new Zt({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),Hh=class w3{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){let{useBackBuffer:t,antialias:i}=s1(s1({},w3.defaultOptions),e);this.useBackBuffer=t,this._antialias=i,this._renderer.context.supports.msaa||(Jt("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Et.for2d();let r=new ua({vertex:`
attribute vec2 aPosition;
out vec2 vUv;

void main() {
gl_Position = vec4(aPosition, 0.0, 1.0);

vUv = (aPosition + 1.0) / 2.0;

// flip dem UVs
vUv.y = 1.0 - vUv.y;
}`,fragment:`
in vec2 vUv;
out vec4 finalColor;

uniform sampler2D uTexture;

void main() {
finalColor = texture(uTexture, vUv);
}`,name:"big-triangle"});this._bigTriangleShader=new ht({glProgram:r,resources:{uTexture:K.WHITE.source}})}renderStart(e){let t=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!t.isRoot,this._useBackBufferThisRender){let i=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=i.colorTexture,e.target=this._getBackBufferTexture(i.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:qy,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new K({source:new Fe({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};Hh.extension={type:[B.WebGLSystem],name:"backBuffer",priority:1},Hh.defaultOptions={useBackBuffer:!1};var Zy=Hh,Kn=class{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(e&8),!!(e&4),!!(e&2),!!(e&1)))}};Kn.extension={type:[B.WebGLSystem],name:"colorMask"};var qn=class{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,t){this._renderer.geometry.bind(e,t.glProgram)}finishRenderPass(){}draw(e){let t=this._renderer,{geometry:i,shader:r,state:s,skipSync:o,topology:d,size:h,start:f,instanceCount:u}=e;t.shader.bind(r,o),t.geometry.bind(i,t.shader._activeProgram),s&&t.state.set(s),t.geometry.draw(d,h,f,u??i.instanceCount)}destroy(){this._renderer=null}};qn.extension={type:[B.WebGLSystem],name:"encoder"};var zh=class{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}},Ea=[];Ea[Ne.NONE]=void 0,Ea[Ne.DISABLED]={stencilWriteMask:0,stencilReadMask:0},Ea[Ne.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}},Ea[Ne.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}},Ea[Ne.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}},Ea[Ne.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"replace"},stencilBack:{compare:"not-equal",passOp:"replace"}};var Zn=class{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:Ne.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this._stencilCache.enabled=!1,this._stencilCache.stencilMode=Ne.NONE,this._stencilCache.stencilReference=0}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:Ne.DISABLED,stencilReference:0}),this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){let i=this._renderTargetStencilState[this._activeRenderTarget.uid],r=this._gl,s=Ea[e],o=this._stencilCache;if(i.stencilMode=e,i.stencilReference=t,e===Ne.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,r.disable(r.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,r.enable(r.STENCIL_TEST)),(e!==o.stencilMode||o.stencilReference!==t)&&(o.stencilMode=e,o.stencilReference=t,r.stencilFunc(this._comparisonFuncMapping[s.stencilBack.compare],t,255),r.stencilOp(r.KEEP,r.KEEP,this._stencilOpsMapping[s.stencilBack.passOp]))}};Zn.extension={type:[B.WebGLSystem],name:"stencil"};var Qn=class{constructor(e){this._syncFunctionHash=Object.create(null),this._adaptor=e,this._systemCheck()}_systemCheck(){if(!Rp())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(e){let t=this.getUniformGroupData(e);e.buffer||(e.buffer=new rt({data:new Float32Array(t.layout.size/4),usage:ve.UNIFORM|ve.COPY_DST}))}getUniformGroupData(e){return this._syncFunctionHash[e._signature]||this._initUniformGroup(e)}_initUniformGroup(e){let t=e._signature,i=this._syncFunctionHash[t];if(!i){let r=Object.keys(e.uniformStructures).map(d=>e.uniformStructures[d]),s=this._adaptor.createUboElements(r),o=this._generateUboSync(s.uboElements);i=this._syncFunctionHash[t]={layout:s,syncFunction:o}}return this._syncFunctionHash[t]}_generateUboSync(e){return this._adaptor.generateUboSync(e)}syncUniformGroup(e,t,i){let r=this.getUniformGroupData(e);e.buffer||(e.buffer=new rt({data:new Float32Array(r.layout.size/4),usage:ve.UNIFORM|ve.COPY_DST}));let s=null;return t||(t=e.buffer.data,s=e.buffer.dataInt32),i||(i=0),r.syncFunction(e.uniforms,t,s,i),!0}updateUniformGroup(e){if(e.isStatic&&!e._dirtyId)return!1;e._dirtyId=0;let t=this.syncUniformGroup(e);return e.buffer.update(),t}destroy(){this._syncFunctionHash=null}},A3={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function Qy(a){let e=a.map(s=>({data:s,offset:0,size:0})),t=16,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s];if(i=A3[o.data.type],!i)throw new Error(`Unknown type ${o.data.type}`);o.data.size>1&&(i=Math.max(i,t)*o.data.size);let d=i===12?16:i;o.size=i;let h=r%t;h>0&&t-h<d?r+=(t-h)%16:r+=(i-h%i)%i,o.offset=r,r+=i}return r=Math.ceil(r/16)*16,{uboElements:e,size:r}}var Ka=[{type:"mat3x3<f32>",test:a=>a.value.a!==void 0,ubo:`
var matrix = uv[name].toArray(true);
data[offset] = matrix[0];
data[offset + 1] = matrix[1];
data[offset + 2] = matrix[2];
data[offset + 4] = matrix[3];
data[offset + 5] = matrix[4];
data[offset + 6] = matrix[5];
data[offset + 8] = matrix[6];
data[offset + 9] = matrix[7];
data[offset + 10] = matrix[8];
`,uniform:`
gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
`},{type:"vec4<f32>",test:a=>a.type==="vec4<f32>"&&a.size===1&&a.value.width!==void 0,ubo:`
v = uv[name];
data[offset] = v.x;
data[offset + 1] = v.y;
data[offset + 2] = v.width;
data[offset + 3] = v.height;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
cv[0] = v.x;
cv[1] = v.y;
cv[2] = v.width;
cv[3] = v.height;
gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
}
`},{type:"vec2<f32>",test:a=>a.type==="vec2<f32>"&&a.size===1&&a.value.x!==void 0,ubo:`
v = uv[name];
data[offset] = v.x;
data[offset + 1] = v.y;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.x || cv[1] !== v.y) {
cv[0] = v.x;
cv[1] = v.y;
gl.uniform2f(ud[name].location, v.x, v.y);
}
`},{type:"vec4<f32>",test:a=>a.type==="vec4<f32>"&&a.size===1&&a.value.red!==void 0,ubo:`
v = uv[name];
data[offset] = v.red;
data[offset + 1] = v.green;
data[offset + 2] = v.blue;
data[offset + 3] = v.alpha;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
cv[0] = v.red;
cv[1] = v.green;
cv[2] = v.blue;
cv[3] = v.alpha;
gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
}
`},{type:"vec3<f32>",test:a=>a.type==="vec3<f32>"&&a.size===1&&a.value.red!==void 0,ubo:`
v = uv[name];
data[offset] = v.red;
data[offset + 1] = v.green;
data[offset + 2] = v.blue;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
cv[0] = v.red;
cv[1] = v.green;
cv[2] = v.blue;
gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
}
`}];function E3(a,e,t,i){let r=[`
var v = null;
var v2 = null;
var t = 0;
var index = 0;
var name = null;
var arrayOffset = null;
`],s=0;for(let d=0;d<a.length;d++){let h=a[d],f=h.data.name,u=!1,p=0;for(let y=0;y<Ka.length;y++)if(Ka[y].test(h.data)){p=h.offset/4,r.push(`name = "${f}";`,`offset += ${p-s};`,Ka[y][e]||Ka[y].ubo),u=!0;break}if(!u)if(h.data.size>1)p=h.offset/4,r.push(t(h,p-s));else{let y=i[h.data.type];p=h.offset/4,r.push(`
v = uv.${f};
offset += ${p-s};
${y};
`)}s=p}let o=r.join(`
`);return new Function("uv","data","dataInt32","offset",o)}var Jy=Object.defineProperty,ex=Object.defineProperties,tx=Object.getOwnPropertyDescriptors,n1=Object.getOwnPropertySymbols,ax=Object.prototype.hasOwnProperty,ix=Object.prototype.propertyIsEnumerable,o1=(a,e,t)=>e in a?Jy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,rx=(a,e)=>{for(var t in e||(e={}))ax.call(e,t)&&o1(a,t,e[t]);if(n1)for(var t of n1(e))ix.call(e,t)&&o1(a,t,e[t]);return a},sx=(a,e)=>ex(a,tx(e));function gi(a,e){return`
for (let i = 0; i < ${a*e}; i++) {
data[offset + (((i / ${a})|0) * 4) + (i % ${a})] = v[i];
}
`}var P3={f32:`
data[offset] = v;`,i32:`
dataInt32[offset] = v;`,"vec2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];`,"vec3<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];`,"vec4<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 3] = v[3];`,"vec2<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];
dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];
dataInt32[offset + 2] = v[2];
dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 4] = v[2];
data[offset + 5] = v[3];`,"mat3x3<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 4] = v[3];
data[offset + 5] = v[4];
data[offset + 6] = v[5];
data[offset + 8] = v[6];
data[offset + 9] = v[7];
data[offset + 10] = v[8];`,"mat4x4<f32>":`
for (let i = 0; i < 16; i++) {
data[offset + i] = v[i];
}`,"mat3x2<f32>":gi(3,2),"mat4x2<f32>":gi(4,2),"mat2x3<f32>":gi(2,3),"mat4x3<f32>":gi(4,3),"mat2x4<f32>":gi(2,4),"mat3x4<f32>":gi(3,4)},nx=sx(rx({},P3),{"mat2x2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 3] = v[3];
`});function ox(a,e){let t=Math.max(A3[a.data.type]/16,1),i=a.data.value.length/a.data.size,r=(4-i%4)%4,s=a.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
v = uv.${a.data.name};
offset += ${e};

arrayOffset = offset;

t = 0;

for(var i=0; i < ${a.data.size*t}; i++)
{
for(var j = 0; j < ${i}; j++)
{
${s}[arrayOffset++] = v[t++];
}
${r!==0?`arrayOffset += ${r};`:""}
}
`}function cx(a){return E3(a,"uboStd40",ox,P3)}var Jn=class extends Qn{constructor(){super({createUboElements:Qy,generateUboSync:cx})}};Jn.extension={type:[B.WebGLSystem],name:"ubo"};var Vh=class{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Pe}init(e,t){this._renderer=e,this._renderTargetSystem=t,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Pe}copyToTexture(e,t,i,r,s){let o=this._renderTargetSystem,d=this._renderer,h=o.getGpuRenderTarget(e),f=d.gl;return this.finishRenderPass(e),f.bindFramebuffer(f.FRAMEBUFFER,h.resolveTargetFramebuffer),d.texture.bind(t,0),f.copyTexSubImage2D(f.TEXTURE_2D,0,s.x,s.y,i.x,i.y,r.width,r.height),t}startRenderPass(e,t=!0,i,r){let s=this._renderTargetSystem,o=e.colorTexture,d=s.getGpuRenderTarget(e),h=r.y;e.isRoot&&(h=o.pixelHeight-r.height),e.colorTextures.forEach(p=>{this._renderer.texture.unbind(p)});let f=this._renderer.gl;f.bindFramebuffer(f.FRAMEBUFFER,d.framebuffer);let u=this._viewPortCache;(u.x!==r.x||u.y!==h||u.width!==r.width||u.height!==r.height)&&(u.x=r.x,u.y=h,u.width=r.width,u.height=r.height,f.viewport(r.x,h,r.width,r.height)),!d.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(d),this.clear(e,t,i)}finishRenderPass(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);if(!t.msaa)return;let i=this._renderer.gl;i.bindFramebuffer(i.FRAMEBUFFER,t.resolveTargetFramebuffer),i.bindFramebuffer(i.READ_FRAMEBUFFER,t.framebuffer),i.blitFramebuffer(0,0,t.width,t.height,0,0,t.width,t.height,i.COLOR_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,t.framebuffer)}initGpuRenderTarget(e){let t=this._renderer,i=t.gl,r=new zh;return e.colorTexture.resource===t.canvas?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),r.framebuffer=null,r):(this._initColor(e,r),i.bindFramebuffer(i.FRAMEBUFFER,null),r)}destroyGpuRenderTarget(e){let t=this._renderer.gl;e.framebuffer&&(t.deleteFramebuffer(e.framebuffer),e.framebuffer=null),e.resolveTargetFramebuffer&&(t.deleteFramebuffer(e.resolveTargetFramebuffer),e.resolveTargetFramebuffer=null),e.depthStencilRenderBuffer&&(t.deleteRenderbuffer(e.depthStencilRenderBuffer),e.depthStencilRenderBuffer=null),e.msaaRenderBuffer.forEach(i=>{t.deleteRenderbuffer(i)}),e.msaaRenderBuffer=null}clear(e,t,i){if(!t)return;let r=this._renderTargetSystem;typeof t=="boolean"&&(t=t?mt.ALL:mt.NONE);let s=this._renderer.gl;if(t&mt.COLOR){i!=null||(i=r.defaultClearColor);let o=this._clearColorCache,d=i;(o[0]!==d[0]||o[1]!==d[1]||o[2]!==d[2]||o[3]!==d[3])&&(o[0]=d[0],o[1]=d[1],o[2]=d[2],o[3]=d[3],s.clearColor(d[0],d[1],d[2],d[3]))}s.clear(t)}resizeGpuRenderTarget(e){if(e.isRoot)return;let t=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,t),(e.stencil||e.depth)&&this._resizeStencil(t)}_initColor(e,t){let i=this._renderer,r=i.gl,s=r.createFramebuffer();if(t.resolveTargetFramebuffer=s,r.bindFramebuffer(r.FRAMEBUFFER,s),t.width=e.colorTexture.source.pixelWidth,t.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((o,d)=>{let h=o.source;h.antialias&&(i.context.supports.msaa?t.msaa=!0:Jt("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),i.texture.bindSource(h,0);let f=i.texture.getGlSource(h).texture;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+d,3553,f,0)}),t.msaa){let o=r.createFramebuffer();t.framebuffer=o,r.bindFramebuffer(r.FRAMEBUFFER,o),e.colorTextures.forEach((d,h)=>{let f=r.createRenderbuffer();t.msaaRenderBuffer[h]=f})}else t.framebuffer=s;this._resizeColor(e,t)}_resizeColor(e,t){let i=e.colorTexture.source;if(t.width=i.pixelWidth,t.height=i.pixelHeight,e.colorTextures.forEach((r,s)=>{s!==0&&r.source.resize(i.width,i.height,i._resolution)}),t.msaa){let r=this._renderer,s=r.gl,o=t.framebuffer;s.bindFramebuffer(s.FRAMEBUFFER,o),e.colorTextures.forEach((d,h)=>{let f=d.source;r.texture.bindSource(f,0);let u=r.texture.getGlSource(f).internalFormat,p=t.msaaRenderBuffer[h];s.bindRenderbuffer(s.RENDERBUFFER,p),s.renderbufferStorageMultisample(s.RENDERBUFFER,4,u,f.pixelWidth,f.pixelHeight),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+h,s.RENDERBUFFER,p)})}}_initStencil(e){if(e.framebuffer===null)return;let t=this._renderer.gl,i=t.createRenderbuffer();e.depthStencilRenderBuffer=i,t.bindRenderbuffer(t.RENDERBUFFER,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i),this._resizeStencil(e)}_resizeStencil(e){let t=this._renderer.gl;t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,this._renderer.context.webGLVersion===2?t.DEPTH24_STENCIL8:t.DEPTH_STENCIL,e.width,e.height)}prerender(e){let t=e.colorTexture.resource;this._renderer.context.multiView&&qt.test(t)&&this._renderer.context.ensureCanvasSize(t)}postrender(e){if(this._renderer.context.multiView&&qt.test(e.colorTexture.resource)){let t=this._renderer.context.canvas,i=e.colorTexture;i.context2D.drawImage(t,0,i.pixelHeight-t.height)}}};function dx(a,e,t,i,r,s){let o=s?1:-1;return a.identity(),a.a=1/i*2,a.d=o*(1/r*2),a.tx=-1-e*a.a,a.ty=-o-t*a.d,a}var hx=Object.defineProperty,c1=Object.getOwnPropertySymbols,fx=Object.prototype.hasOwnProperty,lx=Object.prototype.propertyIsEnumerable,d1=(a,e,t)=>e in a?hx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ux=(a,e)=>{for(var t in e||(e={}))fx.call(e,t)&&d1(a,t,e[t]);if(c1)for(var t of c1(e))lx.call(e,t)&&d1(a,t,e[t]);return a},pr=new Map;function R3(a,e){if(!pr.has(a)){let t=new K({source:new qt(ux({resource:a},e))}),i=()=>{pr.get(a)===t&&pr.delete(a)};t.once("destroy",i),t.source.once("destroy",i),pr.set(a,t)}return pr.get(a)}function bx(a){let e=a.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}var px=Object.defineProperty,h1=Object.getOwnPropertySymbols,gx=Object.prototype.hasOwnProperty,mx=Object.prototype.propertyIsEnumerable,f1=(a,e,t)=>e in a?px(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,l1=(a,e)=>{for(var t in e||(e={}))gx.call(e,t)&&f1(a,t,e[t]);if(h1)for(var t of h1(e))mx.call(e,t)&&f1(a,t,e[t]);return a},M3=class C3{constructor(e={}){if(this.uid=Be("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e=l1(l1({},C3.defaultOptions),e),this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let t=0;t<e.colorTextures;t++)this.colorTextures.push(new Fe({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(i=>i.source)];let t=this.colorTexture.source;this.resize(t.width,t.height,t._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof K||e.depthStencilTexture instanceof Fe?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){let e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Fe({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,t,i=this.resolution,r=!1){this.dirtyId++,this.colorTextures.forEach((s,o)=>{r&&o===0||s.source.resize(e,t,i)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,t,i)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};M3.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};var Wh=M3,eo=class{constructor(e){this.rootViewPort=new Pe,this.viewport=new Pe,this.onRenderTargetChange=new En("onRenderTargetChange"),this.projectionMatrix=new ie,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:e,clear:t,clearColor:i,frame:r}){var s,o;this._renderTargetStack.length=0,this.push(e,t,i,r),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=bx(this.rootRenderTarget),(o=(s=this.adaptor).prerender)==null||o.call(s,this.rootRenderTarget)}postrender(){var e,t;(t=(e=this.adaptor).postrender)==null||t.call(e,this.rootRenderTarget)}bind(e,t=!0,i,r){let s=this.getRenderTarget(e),o=this.renderTarget!==s;this.renderTarget=s,this.renderSurface=e;let d=this.getGpuRenderTarget(s);(s.pixelWidth!==d.width||s.pixelHeight!==d.height)&&(this.adaptor.resizeGpuRenderTarget(s),d.width=s.pixelWidth,d.height=s.pixelHeight);let h=s.colorTexture,f=this.viewport,u=h.pixelWidth,p=h.pixelHeight;if(!r&&e instanceof K&&(r=e.frame),r){let y=h._resolution;f.x=r.x*y+.5|0,f.y=r.y*y+.5|0,f.width=r.width*y+.5|0,f.height=r.height*y+.5|0}else f.x=0,f.y=0,f.width=u,f.height=p;return dx(this.projectionMatrix,0,0,f.width/h.resolution,f.height/h.resolution,!s.isRoot),this.adaptor.startRenderPass(s,t,i,f),o&&this.onRenderTargetChange.emit(s),s}clear(e,t=mt.ALL,i){t&&(e&&(e=this.getRenderTarget(e)),this.adaptor.clear(e||this.renderTarget,t,i,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(e,t=mt.ALL,i,r){let s=this.bind(e,t,i,r);return this._renderTargetStack.push({renderTarget:s,frame:r}),s}pop(){this._renderTargetStack.pop();let e=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(e.renderTarget,!1,null,e.frame)}getRenderTarget(e){var t;return e.isTexture&&(e=e.source),(t=this._renderSurfaceToRenderTargetHash.get(e))!=null?t:this._initRenderTarget(e)}copyToTexture(e,t,i,r,s){i.x<0&&(r.width+=i.x,s.x-=i.x,i.x=0),i.y<0&&(r.height+=i.y,s.y-=i.y,i.y=0);let{pixelWidth:o,pixelHeight:d}=e;return r.width=Math.min(r.width,o-i.x),r.height=Math.min(r.height,d-i.y),this.adaptor.copyToTexture(e,t,i,r,s)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((e,t)=>{e!==t&&e.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(e){let t=null;return qt.test(e)&&(e=R3(e).source),e instanceof Wh?t=e:e instanceof Fe&&(t=new Wh({colorTextures:[e]}),qt.test(e.source.resource)&&(t.isRoot=!0),e.once("destroy",()=>{t.destroy(),this._renderSurfaceToRenderTargetHash.delete(e);let i=this._gpuRenderTargetHash[t.uid];i&&(this._gpuRenderTargetHash[t.uid]=null,this.adaptor.destroyGpuRenderTarget(i))})),this._renderSurfaceToRenderTargetHash.set(e,t),t}getGpuRenderTarget(e){return this._gpuRenderTargetHash[e.uid]||(this._gpuRenderTargetHash[e.uid]=this.adaptor.initGpuRenderTarget(e))}resetState(){this.renderTarget=null,this.renderSurface=null}},to=class extends eo{constructor(e){super(e),this.adaptor=new Vh,this.adaptor.init(e,this)}};to.extension={type:[B.WebGLSystem],name:"renderTarget"};var Xr=class extends xt{constructor({buffer:e,offset:t,size:i}){super(),this.uid=Be("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Be("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=e,this.offset=t|0,this.size=i,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Be("resource"),this.emit("change",this)}destroy(e=!1){this.destroyed=!0,e&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}};function _x(a,e){let t=[],i=[`
var g = s.groups;
var sS = r.shader;
var p = s.glProgram;
var ugS = r.uniformGroup;
var resources;
`],r=!1,s=0,o=e._getProgramData(a.glProgram);for(let h in a.groups){let f=a.groups[h];t.push(`
resources = g[${h}].resources;
`);for(let u in f.resources){let p=f.resources[u];if(p instanceof Je)if(p.ubo){let y=a._uniformBindMap[h][Number(u)];t.push(`
    sS.bindUniformBlock(
        resources[${u}],
        '${y}',
        ${a.glProgram._uniformBlockData[y].index}
    );
`)}else t.push(`
    ugS.updateUniformGroup(resources[${u}], p, sD);
`);else if(p instanceof Xr){let y=a._uniformBindMap[h][Number(u)];t.push(`
sS.bindUniformBlock(
    resources[${u}],
    '${y}',
    ${a.glProgram._uniformBlockData[y].index}
);
`)}else if(p instanceof Fe){let y=a._uniformBindMap[h][u],_=o.uniformData[y];_&&(r||(r=!0,i.push(`
    var tS = r.texture;
    `)),e._gl.uniform1i(_.location,s),t.push(`
    tS.bind(resources[${u}], ${s});
`),s++)}}}let d=[...i,...t].join(`
`);return new Function("r","s","sD",d)}var Yh=class{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}};function u1(a,e,t){let i=a.createShader(e);return a.shaderSource(i,t),a.compileShader(i),i}function _d(a){let e=new Array(a);for(let t=0;t<e.length;t++)e[t]=!1;return e}function O3(a,e){switch(a){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return _d(2*e);case"bvec3":return _d(3*e);case"bvec4":return _d(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Bs=null,b1={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},yx={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function I3(a,e){if(!Bs){let t=Object.keys(b1);Bs={};for(let i=0;i<t.length;++i){let r=t[i];Bs[a[r]]=b1[r]}}return Bs[e]}function xx(a,e){let t=I3(a,e);return yx[t]||"float32"}function vx(a,e,t=!1){let i={},r=e.getProgramParameter(a,e.ACTIVE_ATTRIBUTES);for(let o=0;o<r;o++){let d=e.getActiveAttrib(a,o);if(d.name.startsWith("gl_"))continue;let h=xx(e,d.type);i[d.name]={location:0,format:h,stride:Ia(h).stride,offset:0,instance:!1,start:0}}let s=Object.keys(i);if(t){s.sort((o,d)=>o>d?1:-1);for(let o=0;o<s.length;o++)i[s[o]].location=o,e.bindAttribLocation(a,o,s[o]);e.linkProgram(a)}else for(let o=0;o<s.length;o++)i[s[o]].location=e.getAttribLocation(a,s[o]);return i}function Tx(a,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};let t={},i=e.getProgramParameter(a,e.ACTIVE_UNIFORM_BLOCKS);for(let r=0;r<i;r++){let s=e.getActiveUniformBlockName(a,r),o=e.getUniformBlockIndex(a,s),d=e.getActiveUniformBlockParameter(a,r,e.UNIFORM_BLOCK_DATA_SIZE);t[s]={name:s,index:o,size:d}}return t}function Sx(a,e){let t={},i=e.getProgramParameter(a,e.ACTIVE_UNIFORMS);for(let r=0;r<i;r++){let s=e.getActiveUniform(a,r),o=s.name.replace(/\[.*?\]$/,""),d=!!s.name.match(/\[.*?\]$/),h=I3(e,s.type);t[o]={name:o,index:r,type:h,size:s.size,isArray:d,value:O3(h,s.size)}}return t}function p1(a,e){let t=a.getShaderSource(e).split(`
`).map((f,u)=>`${u}: ${f}`),i=a.getShaderInfoLog(e),r=i.split(`
`),s={},o=r.map(f=>parseFloat(f.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(f=>f&&!s[f]?(s[f]=!0,!0):!1),d=[""];o.forEach(f=>{t[f-1]=`%c${t[f-1]}%c`,d.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let h=t.join(`
`);d[0]=h}function wx(a,e,t,i){a.getProgramParameter(e,a.LINK_STATUS)||(a.getShaderParameter(t,a.COMPILE_STATUS)||p1(a,t),a.getShaderParameter(i,a.COMPILE_STATUS)||p1(a,i),a.getProgramInfoLog(e))}function Ax(a,e){let t=u1(a,a.VERTEX_SHADER,e.vertex),i=u1(a,a.FRAGMENT_SHADER,e.fragment),r=a.createProgram();a.attachShader(r,t),a.attachShader(r,i);let s=e.transformFeedbackVaryings;s&&(typeof a.transformFeedbackVaryings!="function"||a.transformFeedbackVaryings(r,s.names,s.bufferMode==="separate"?a.SEPARATE_ATTRIBS:a.INTERLEAVED_ATTRIBS)),a.linkProgram(r),a.getProgramParameter(r,a.LINK_STATUS)||wx(a,r,t,i),e._attributeData=vx(r,a,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=Sx(r,a),e._uniformBlockData=Tx(r,a),a.deleteShader(t),a.deleteShader(i);let o={};for(let d in e._uniformData){let h=e._uniformData[d];o[d]={location:a.getUniformLocation(r,d),value:O3(h.type,h.size)}}return new Yh(r,o)}var Fs={textureCount:0,blockIndex:0},ao=class{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=Ii()}bind(e,t){if(this._setProgram(e.glProgram),t)return;Fs.textureCount=0,Fs.blockIndex=0;let i=this._shaderSyncFunctions[e.glProgram._key];i||(i=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this)),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),i(this._renderer,e,Fs)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,Fs)}bindUniformBlock(e,t,i=0){let r=this._renderer.buffer,s=this._getProgramData(this._activeProgram),o=e._bufferResource;o||this._renderer.ubo.updateUniformGroup(e);let d=e.buffer,h=r.updateBuffer(d),f=r.freeLocationForBufferBase(h);if(o){let{offset:p,size:y}=e;p===0&&y===d.data.byteLength?r.bindBufferBase(h,f):r.bindBufferRange(h,f,p)}else r.getLastBindBaseLocation(h)!==f&&r.bindBufferBase(h,f);let u=this._activeProgram._uniformBlockData[t].index;s.uniformBlockBindings[i]!==f&&(s.uniformBlockBindings[i]=f,this._renderer.gl.uniformBlockBinding(s.program,u,f))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;let t=this._getProgramData(e);this._gl.useProgram(t.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){let t=e._key;return this._programDataHash[t]=Ax(this._gl,e),this._programDataHash[t]}destroy(){for(let e of Object.keys(this._programDataHash))this._programDataHash[e].destroy(),this._programDataHash[e]=null;this._programDataHash=null}_generateShaderSync(e,t){return _x(e,t)}resetState(){this._activeProgram=null}};ao.extension={type:[B.WebGLSystem],name:"shader"};var Ex={f32:`if (cv !== v) {
cu.value = v;
gl.uniform1f(location, v);
}`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2f(location, v[0], v[1]);
}`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3f(location, v[0], v[1], v[2]);
}`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4f(location, v[0], v[1], v[2], v[3]);
}`,i32:`if (cv !== v) {
cu.value = v;
gl.uniform1i(location, v);
}`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2i(location, v[0], v[1]);
}`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3i(location, v[0], v[1], v[2]);
}`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4i(location, v[0], v[1], v[2], v[3]);
}`,u32:`if (cv !== v) {
cu.value = v;
gl.uniform1ui(location, v);
}`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2ui(location, v[0], v[1]);
}`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3ui(location, v[0], v[1], v[2]);
}`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
}`,bool:`if (cv !== v) {
cu.value = v;
gl.uniform1i(location, v);
}`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2i(location, v[0], v[1]);
}`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3i(location, v[0], v[1], v[2]);
}`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4i(location, v[0], v[1], v[2], v[3]);
}`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},Px={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function Rx(a,e){let t=[`
var v = null;
var cv = null;
var cu = null;
var t = 0;
var gl = renderer.gl;
var name = null;
`];for(let i in a.uniforms){if(!e[i]){a.uniforms[i]instanceof Je?a.uniforms[i].ubo?t.push(`
    renderer.shader.bindUniformBlock(uv.${i}, "${i}");
`):t.push(`
    renderer.shader.updateUniformGroup(uv.${i});
`):a.uniforms[i]instanceof Xr&&t.push(`
    renderer.shader.bindBufferResource(uv.${i}, "${i}");
`);continue}let r=a.uniformStructures[i],s=!1;for(let o=0;o<Ka.length;o++){let d=Ka[o];if(r.type===d.type&&d.test(r)){t.push(`name = "${i}";`,Ka[o].uniform),s=!0;break}}if(!s){let o=(r.size===1?Ex:Px)[r.type].replace("location",`ud["${i}"].location`);t.push(`
cu = ud["${i}"];
cv = cu.value;
v = uv["${i}"];
${o};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var io=class{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,t,i){let r=this._renderer.shader._getProgramData(t);(!e.isStatic||e._dirtyId!==r.uniformDirtyGroups[e.uid])&&(r.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,t)(r.uniformData,e.uniforms,this._renderer,i))}_getUniformSyncFunction(e,t){var i;return((i=this._uniformGroupSyncHash[e._signature])==null?void 0:i[t._key])||this._createUniformSyncFunction(e,t)}_createUniformSyncFunction(e,t){let i=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),r=this._getSignature(e,t._uniformData,"u");return this._cache[r]||(this._cache[r]=this._generateUniformsSync(e,t._uniformData)),i[t._key]=this._cache[r],i[t._key]}_generateUniformsSync(e,t){return Rx(e,t)}_getSignature(e,t,i){let r=e.uniforms,s=[`${i}-`];for(let o in r)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}destroy(){this._renderer=null,this._cache=null}};io.extension={type:[B.WebGLSystem],name:"uniformGroup"};function Mx(a){let e={};if(e.normal=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e.add=[a.ONE,a.ONE],e.multiply=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.screen=[a.ONE,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[a.SRC_ALPHA,a.ONE,a.ONE,a.ONE],e["screen-npm"]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.erase=[a.ZERO,a.ONE_MINUS_SRC_ALPHA],!(a instanceof xe.get().getWebGLRenderingContext()))e.min=[a.ONE,a.ONE,a.ONE,a.ONE,a.MIN,a.MIN],e.max=[a.ONE,a.ONE,a.ONE,a.ONE,a.MAX,a.MAX];else{let t=a.getExtension("EXT_blend_minmax");t&&(e.min=[a.ONE,a.ONE,a.ONE,a.ONE,t.MIN_EXT,t.MIN_EXT],e.max=[a.ONE,a.ONE,a.ONE,a.ONE,t.MAX_EXT,t.MAX_EXT])}return e}var Cx=0,Ox=1,Ix=2,Gx=3,Bx=4,Fx=5,G3=class $h{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[Cx]=this.setBlend,this.map[Ox]=this.setOffset,this.map[Ix]=this.setCullFace,this.map[Gx]=this.setDepthTest,this.map[Bx]=this.setFrontFace,this.map[Fx]=this.setDepthMask,this.checks=[],this.defaultState=Et.for2d()}contextChange(e){this.gl=e,this.blendModesMap=Mx(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t>>=1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e||(e=this.defaultState);for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this._updateCheck($h._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck($h._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;let t=this.blendModesMap[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}resetState(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,t){let i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static _checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static _checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};G3.extension={type:[B.WebGLSystem],name:"state"};var Dx=G3,Kh=class{constructor(e){this.target=S3.TEXTURE_2D,this.texture=e,this.width=-1,this.height=-1,this.type=Se.UNSIGNED_BYTE,this.internalFormat=Xh.RGBA,this.format=Xh.RGBA,this.samplerType=0}},kx={id:"buffer",upload(a,e,t){e.width===a.width||e.height===a.height?t.texSubImage2D(t.TEXTURE_2D,0,0,0,a.width,a.height,e.format,e.type,a.resource):t.texImage2D(e.target,0,e.internalFormat,a.width,a.height,0,e.format,e.type,a.resource),e.width=a.width,e.height=a.height}},Ux={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},Lx={id:"compressed",upload(a,e,t){t.pixelStorei(t.UNPACK_ALIGNMENT,4);let i=a.pixelWidth,r=a.pixelHeight,s=!!Ux[a.format];for(let o=0;o<a.resource.length;o++){let d=a.resource[o];s?t.compressedTexImage2D(t.TEXTURE_2D,o,e.internalFormat,i,r,0,d):t.texImage2D(t.TEXTURE_2D,o,e.internalFormat,i,r,0,e.format,e.type,d),i=Math.max(i>>1,1),r=Math.max(r>>1,1)}}},B3={id:"image",upload(a,e,t,i){let r=e.width,s=e.height,o=a.pixelWidth,d=a.pixelHeight,h=a.resourceWidth,f=a.resourceHeight;h<o||f<d?((r!==o||s!==d)&&t.texImage2D(e.target,0,e.internalFormat,o,d,0,e.format,e.type,null),i===2?t.texSubImage2D(t.TEXTURE_2D,0,0,0,h,f,e.format,e.type,a.resource):t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,a.resource)):r===o&&s===d?t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,a.resource):i===2?t.texImage2D(e.target,0,e.internalFormat,o,d,0,e.format,e.type,a.resource):t.texImage2D(e.target,0,e.internalFormat,e.format,e.type,a.resource),e.width=o,e.height=d}},Nx={id:"video",upload(a,e,t,i){if(!a.isValid){t.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null);return}B3.upload(a,e,t,i)}},g1={linear:9729,nearest:9728},jx={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},yd={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},Xx={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function m1(a,e,t,i,r,s,o,d){let h=s;if(!d||a.addressModeU!=="repeat"||a.addressModeV!=="repeat"||a.addressModeW!=="repeat"){let f=yd[o?"clamp-to-edge":a.addressModeU],u=yd[o?"clamp-to-edge":a.addressModeV],p=yd[o?"clamp-to-edge":a.addressModeW];e[r](h,e.TEXTURE_WRAP_S,f),e[r](h,e.TEXTURE_WRAP_T,u),e.TEXTURE_WRAP_R&&e[r](h,e.TEXTURE_WRAP_R,p)}if((!d||a.magFilter!=="linear")&&e[r](h,e.TEXTURE_MAG_FILTER,g1[a.magFilter]),t){if(!d||a.mipmapFilter!=="linear"){let f=jx[a.minFilter][a.mipmapFilter];e[r](h,e.TEXTURE_MIN_FILTER,f)}}else e[r](h,e.TEXTURE_MIN_FILTER,g1[a.minFilter]);if(i&&a.maxAnisotropy>1){let f=Math.min(a.maxAnisotropy,e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[r](h,i.TEXTURE_MAX_ANISOTROPY_EXT,f)}a.compare&&e[r](h,e.TEXTURE_COMPARE_FUNC,Xx[a.compare])}function Hx(a){return{r8unorm:a.RED,r8snorm:a.RED,r8uint:a.RED,r8sint:a.RED,r16uint:a.RED,r16sint:a.RED,r16float:a.RED,rg8unorm:a.RG,rg8snorm:a.RG,rg8uint:a.RG,rg8sint:a.RG,r32uint:a.RED,r32sint:a.RED,r32float:a.RED,rg16uint:a.RG,rg16sint:a.RG,rg16float:a.RG,rgba8unorm:a.RGBA,"rgba8unorm-srgb":a.RGBA,rgba8snorm:a.RGBA,rgba8uint:a.RGBA,rgba8sint:a.RGBA,bgra8unorm:a.RGBA,"bgra8unorm-srgb":a.RGBA,rgb9e5ufloat:a.RGB,rgb10a2unorm:a.RGBA,rg11b10ufloat:a.RGB,rg32uint:a.RG,rg32sint:a.RG,rg32float:a.RG,rgba16uint:a.RGBA,rgba16sint:a.RGBA,rgba16float:a.RGBA,rgba32uint:a.RGBA,rgba32sint:a.RGBA,rgba32float:a.RGBA,stencil8:a.STENCIL_INDEX8,depth16unorm:a.DEPTH_COMPONENT,depth24plus:a.DEPTH_COMPONENT,"depth24plus-stencil8":a.DEPTH_STENCIL,depth32float:a.DEPTH_COMPONENT,"depth32float-stencil8":a.DEPTH_STENCIL}}var zx=Object.defineProperty,Vx=Object.defineProperties,Wx=Object.getOwnPropertyDescriptors,_1=Object.getOwnPropertySymbols,Yx=Object.prototype.hasOwnProperty,$x=Object.prototype.propertyIsEnumerable,y1=(a,e,t)=>e in a?zx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ja=(a,e)=>{for(var t in e||(e={}))Yx.call(e,t)&&y1(a,t,e[t]);if(_1)for(var t of _1(e))$x.call(e,t)&&y1(a,t,e[t]);return a},Kx=(a,e)=>Vx(a,Wx(e));function qx(a,e){let t={},i=a.RGBA;return a instanceof xe.get().getWebGLRenderingContext()?e.srgb&&(t={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(t={"rgba8unorm-srgb":a.SRGB8_ALPHA8,"bgra8unorm-srgb":a.SRGB8_ALPHA8},i=a.RGBA8),ja(ja(ja(ja(ja(ja(Kx(ja({r8unorm:a.R8,r8snorm:a.R8_SNORM,r8uint:a.R8UI,r8sint:a.R8I,r16uint:a.R16UI,r16sint:a.R16I,r16float:a.R16F,rg8unorm:a.RG8,rg8snorm:a.RG8_SNORM,rg8uint:a.RG8UI,rg8sint:a.RG8I,r32uint:a.R32UI,r32sint:a.R32I,r32float:a.R32F,rg16uint:a.RG16UI,rg16sint:a.RG16I,rg16float:a.RG16F,rgba8unorm:a.RGBA},t),{rgba8snorm:a.RGBA8_SNORM,rgba8uint:a.RGBA8UI,rgba8sint:a.RGBA8I,bgra8unorm:i,rgb9e5ufloat:a.RGB9_E5,rgb10a2unorm:a.RGB10_A2,rg11b10ufloat:a.R11F_G11F_B10F,rg32uint:a.RG32UI,rg32sint:a.RG32I,rg32float:a.RG32F,rgba16uint:a.RGBA16UI,rgba16sint:a.RGBA16I,rgba16float:a.RGBA16F,rgba32uint:a.RGBA32UI,rgba32sint:a.RGBA32I,rgba32float:a.RGBA32F,stencil8:a.STENCIL_INDEX8,depth16unorm:a.DEPTH_COMPONENT16,depth24plus:a.DEPTH_COMPONENT24,"depth24plus-stencil8":a.DEPTH24_STENCIL8,depth32float:a.DEPTH_COMPONENT32F,"depth32float-stencil8":a.DEPTH32F_STENCIL8}),e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{}),e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{}),e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{}),e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{}),e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{}),e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{})}function Zx(a){return{r8unorm:a.UNSIGNED_BYTE,r8snorm:a.BYTE,r8uint:a.UNSIGNED_BYTE,r8sint:a.BYTE,r16uint:a.UNSIGNED_SHORT,r16sint:a.SHORT,r16float:a.HALF_FLOAT,rg8unorm:a.UNSIGNED_BYTE,rg8snorm:a.BYTE,rg8uint:a.UNSIGNED_BYTE,rg8sint:a.BYTE,r32uint:a.UNSIGNED_INT,r32sint:a.INT,r32float:a.FLOAT,rg16uint:a.UNSIGNED_SHORT,rg16sint:a.SHORT,rg16float:a.HALF_FLOAT,rgba8unorm:a.UNSIGNED_BYTE,"rgba8unorm-srgb":a.UNSIGNED_BYTE,rgba8snorm:a.BYTE,rgba8uint:a.UNSIGNED_BYTE,rgba8sint:a.BYTE,bgra8unorm:a.UNSIGNED_BYTE,"bgra8unorm-srgb":a.UNSIGNED_BYTE,rgb9e5ufloat:a.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:a.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:a.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:a.UNSIGNED_INT,rg32sint:a.INT,rg32float:a.FLOAT,rgba16uint:a.UNSIGNED_SHORT,rgba16sint:a.SHORT,rgba16float:a.HALF_FLOAT,rgba32uint:a.UNSIGNED_INT,rgba32sint:a.INT,rgba32float:a.FLOAT,stencil8:a.UNSIGNED_BYTE,depth16unorm:a.UNSIGNED_SHORT,depth24plus:a.UNSIGNED_INT,"depth24plus-stencil8":a.UNSIGNED_INT_24_8,depth32float:a.FLOAT,"depth32float-stencil8":a.FLOAT_32_UNSIGNED_INT_24_8_REV}}var Qx=4,ro=class{constructor(e){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:B3,buffer:kx,video:Nx,compressed:Lx},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=qx(e,this._renderer.context.extensions),this._mapFormatToType=Zx(e),this._mapFormatToFormat=Hx(e)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let t=0;t<16;t++)this.bind(K.EMPTY,t)}initSource(e){this.bind(e)}bind(e,t=0){let i=e.source;e?(this.bindSource(i,t),this._useSeparateSamplers&&this._bindSampler(i.style,t)):(this.bindSource(null,t),this._useSeparateSamplers&&this._bindSampler(null,t))}bindSource(e,t=0){let i=this._gl;if(e._touched=this._renderer.textureGC.count,this._boundTextures[t]!==e){this._boundTextures[t]=e,this._activateLocation(t),e||(e=K.EMPTY.source);let r=this.getGlSource(e);i.bindTexture(r.target,r.texture)}}_bindSampler(e,t=0){let i=this._gl;if(!e){this._boundSamplers[t]=null,i.bindSampler(t,null);return}let r=this._getGlSampler(e);this._boundSamplers[t]!==r&&(this._boundSamplers[t]=r,i.bindSampler(t,r))}unbind(e){let t=e.source,i=this._boundTextures,r=this._gl;for(let s=0;s<i.length;s++)if(i[s]===t){this._activateLocation(s);let o=this.getGlSource(t);r.bindTexture(o.target,null),i[s]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){let t=this._gl,i=new Kh(t.createTexture());if(i.type=this._mapFormatToType[e.format],i.internalFormat=this._mapFormatToInternalFormat[e.format],i.format=this._mapFormatToFormat[e.format],e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){let r=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(r))+1}return this._glTextures[e.uid]=i,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceUpdate,this),e.on("styleChange",this.onStyleChange,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),this.updateStyle(e,!1),i}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,t){let i=this._gl,r=this.getGlSource(e);i.bindTexture(i.TEXTURE_2D,r.texture),this._boundTextures[this._activeTextureLocation]=e,m1(e.style,i,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,t)}onSourceUnload(e){let t=this._glTextures[e.uid];t&&(this.unbind(e),this._glTextures[e.uid]=null,this._gl.deleteTexture(t.texture))}onSourceUpdate(e){let t=this._gl,i=this.getGlSource(e);t.bindTexture(t.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=e;let r=e.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==r&&(this._premultiplyAlpha=r,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r)),this._uploads[e.uploadMethodId]?this._uploads[e.uploadMethodId].upload(e,i,t,this._renderer.context.webGLVersion):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.pixelWidth,e.pixelHeight,0,t.RGBA,t.UNSIGNED_BYTE,null),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,t=!0){t&&this.bindSource(e,0);let i=this.getGlSource(e);this._gl.generateMipmap(i.target)}onSourceDestroy(e){e.off("destroy",this.onSourceDestroy,this),e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("styleChange",this.onStyleChange,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}_initSampler(e){let t=this._gl,i=this._gl.createSampler();return this._glSamplers[e._resourceId]=i,m1(e,t,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",i,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return this._glTextures[e.uid]||this._initSource(e)}generateCanvas(e){let{pixels:t,width:i,height:r}=this.getPixels(e),s=xe.get().createCanvas();s.width=i,s.height=r;let o=s.getContext("2d");if(o){let d=o.createImageData(i,r);d.data.set(t),o.putImageData(d,0,0)}return s}getPixels(e){let t=e.source.resolution,i=e.frame,r=Math.max(Math.round(i.width*t),1),s=Math.max(Math.round(i.height*t),1),o=new Uint8Array(Qx*r*s),d=this._renderer,h=d.renderTarget.getRenderTarget(e),f=d.renderTarget.getGpuRenderTarget(h),u=d.gl;return u.bindFramebuffer(u.FRAMEBUFFER,f.resolveTargetFramebuffer),u.readPixels(Math.round(i.x*t),Math.round(i.y*t),r,s,u.RGBA,u.UNSIGNED_BYTE,o),{pixels:new Uint8ClampedArray(o.buffer),width:r,height:s}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(K.EMPTY.source),this._boundSamplers=Object.create(null)}};ro.extension={type:[B.WebGLSystem],name:"texture"};var so=class{init(){let e=new Je({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),t=Ii(),i=Wr({name:"graphics",bits:[vf,Sf(t),Pf,$r]});this.shader=new ht({glProgram:i,resources:{localUniforms:e,batchSamplers:wf(t)}})}execute(e,t){let i=t.context,r=i.customShader||this.shader,s=e.renderer,o=s.graphicsContext,{batcher:d,instructions:h}=o.getContextRenderData(i);r.groups[0]=s.globalUniforms.bindGroup,s.state.set(e.state),s.shader.bind(r),s.geometry.bind(d.geometry,r.glProgram);let f=h.instructions;for(let u=0;u<h.instructionSize;u++){let p=f[u];if(p.size){for(let y=0;y<p.textures.count;y++)s.texture.bind(p.textures.textures[y],y);s.geometry.draw(p.topology,p.size,p.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}};so.extension={type:[B.WebGLPipesAdaptor],name:"graphics"};var no=class{init(){let e=Wr({name:"mesh",bits:[Pf,By,$r]});this._shader=new ht({glProgram:e,resources:{uTexture:K.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ie}}}})}execute(e,t){let i=e.renderer,r=t._shader;if(r){if(!r.glProgram)return}else{r=this._shader;let s=t.texture,o=s.source;r.resources.uTexture=o,r.resources.uSampler=o.style,r.resources.textureUniforms.uniforms.uTextureMatrix=s.textureMatrix.mapCoord}r.groups[100]=i.globalUniforms.bindGroup,r.groups[101]=e.localUniformsBindGroup,i.encoder.draw({geometry:t._geometry,shader:r,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}};no.extension={type:[B.WebGLPipesAdaptor],name:"mesh"};var oo=class{constructor(e){this._renderer=e}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}execute(e){e.isRenderable&&e.render(this._renderer)}destroy(){this._renderer=null}};oo.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"customRender"};function qh(a,e){let t=a.instructionSet,i=t.instructions;for(let r=0;r<t.instructionSize;r++){let s=i[r];e[s.renderPipeId].execute(s)}}var Jx=new ie,co=class{constructor(e){this._renderer=e}addRenderGroup(e,t){e.isCachedAsTexture?this._addRenderableCacheAsTexture(e,t):this._addRenderableDirect(e,t)}execute(e){e.isRenderable&&(e.isCachedAsTexture?this._executeCacheAsTexture(e):this._executeDirect(e))}destroy(){this._renderer=null}_addRenderableDirect(e,t){this._renderer.renderPipes.batch.break(t),e._batchableRenderGroup&&(ye.return(e._batchableRenderGroup),e._batchableRenderGroup=null),t.add(e)}_addRenderableCacheAsTexture(e,t){var i;let r=(i=e._batchableRenderGroup)!=null?i:e._batchableRenderGroup=ye.get(Ri);r.renderable=e.root,r.transform=e.root.relativeGroupTransform,r.texture=e.texture,r.bounds=e._textureBounds,t.add(e),this._renderer.renderPipes.batch.addToBatch(r,t)}_executeCacheAsTexture(e){if(e.textureNeedsUpdate){e.textureNeedsUpdate=!1;let t=Jx.identity().translate(-e._textureBounds.x,-e._textureBounds.y);this._renderer.renderTarget.push(e.texture,!0,null,e.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:t,worldColor:4294967295}),qh(e,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}e._batchableRenderGroup._batcher.updateElement(e._batchableRenderGroup),e._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(e){this._renderer.globalUniforms.push({worldTransformMatrix:e.inverseParentTextureTransform,worldColor:e.worldColorAlpha}),qh(e,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}};co.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"renderGroup"};function Zh(a,e){e||(e=0);for(let t=e;t<a.length&&a[t];t++)a[t]=null}var ev=new fe,x1=vr|Ws|_f;function F3(a,e=!1){tv(a);let t=a.childrenToUpdate,i=a.updateTick++;for(let r in t){let s=Number(r),o=t[r],d=o.list,h=o.index;for(let f=0;f<h;f++){let u=d[f];u.parentRenderGroup===a&&u.relativeRenderGroupDepth===s&&D3(u,i,0)}Zh(d,h),o.index=0}if(e)for(let r=0;r<a.renderGroupChildren.length;r++)F3(a.renderGroupChildren[r],e)}function tv(a){let e=a.root,t;if(a.renderGroupParent){let i=a.renderGroupParent;a.worldTransform.appendFrom(e.relativeGroupTransform,i.worldTransform),a.worldColor=Hs(e.groupColor,i.worldColor),t=e.groupAlpha*i.worldAlpha}else a.worldTransform.copyFrom(e.localTransform),a.worldColor=e.localColor,t=e.localAlpha;t=t<0?0:t>1?1:t,a.worldAlpha=t,a.worldColorAlpha=a.worldColor+((t*255|0)<<24)}function D3(a,e,t){if(e===a.updateTick)return;a.updateTick=e,a.didChange=!1;let i=a.localTransform;a.updateLocalTransform();let r=a.parent;if(r&&!r.renderGroup?(t|=a._updateFlags,a.relativeGroupTransform.appendFrom(i,r.relativeGroupTransform),t&x1&&v1(a,r,t)):(t=a._updateFlags,a.relativeGroupTransform.copyFrom(i),t&x1&&v1(a,ev,t)),!a.renderGroup){let s=a.children,o=s.length;for(let f=0;f<o;f++)D3(s[f],e,t);let d=a.parentRenderGroup,h=a;h.renderPipeId&&!d.structureDidChange&&d.updateRenderable(h)}}function v1(a,e,t){if(t&Ws){a.groupColor=Hs(a.localColor,e.groupColor);let i=a.localAlpha*e.groupAlpha;i=i<0?0:i>1?1:i,a.groupAlpha=i,a.groupColorAlpha=a.groupColor+((i*255|0)<<24)}t&_f&&(a.groupBlendMode=a.localBlendMode==="inherit"?e.groupBlendMode:a.localBlendMode),t&vr&&(a.globalDisplayStatus=a.localDisplayStatus&e.globalDisplayStatus),a._updateFlags=0}function av(a,e){let{list:t,index:i}=a.childrenRenderablesToUpdate,r=!1;for(let s=0;s<i;s++){let o=t[s];if(r=e[o.renderPipeId].validateRenderable(o),r)break}return a.structureDidChange=r,r}var iv=new ie,ho=class{constructor(e){this._renderer=e}render({container:e,transform:t}){let i=e.parent,r=e.renderGroup.renderGroupParent;e.parent=null,e.renderGroup.renderGroupParent=null;let s=this._renderer,o=iv;t&&(o=o.copyFrom(e.renderGroup.localTransform),e.renderGroup.localTransform.copyFrom(t));let d=s.renderPipes;this._updateCachedRenderGroups(e.renderGroup,null),this._updateRenderGroups(e.renderGroup),s.globalUniforms.start({worldTransformMatrix:t?e.renderGroup.localTransform:e.renderGroup.worldTransform,worldColor:e.renderGroup.worldColorAlpha}),qh(e.renderGroup,d),d.uniformBatch&&d.uniformBatch.renderEnd(),t&&e.renderGroup.localTransform.copyFrom(o),e.parent=i,e.renderGroup.renderGroupParent=r}destroy(){this._renderer=null}_updateCachedRenderGroups(e,t){var i;if(e.isCachedAsTexture){if(!e.updateCacheTexture)return;t=e}e._parentCacheAsTextureRenderGroup=t;for(let r=e.renderGroupChildren.length-1;r>=0;r--)this._updateCachedRenderGroups(e.renderGroupChildren[r],t);if(e.invalidateMatrices(),e.isCachedAsTexture){if(e.textureNeedsUpdate){let r=e.root.getLocalBounds();r.ceil();let s=e.texture;e.texture&&ze.returnTexture(e.texture);let o=this._renderer,d=e.textureOptions.resolution||o.view.resolution,h=(i=e.textureOptions.antialias)!=null?i:o.view.antialias;e.texture=ze.getOptimalTexture(r.width,r.height,d,h),e._textureBounds||(e._textureBounds=new qe),e._textureBounds.copyFrom(r),s!==e.texture&&e.renderGroupParent&&(e.renderGroupParent.structureDidChange=!0)}}else e.texture&&(ze.returnTexture(e.texture),e.texture=null)}_updateRenderGroups(e){let t=this._renderer,i=t.renderPipes;if(e.runOnRender(t),e.instructionSet.renderPipes=i,e.structureDidChange?Zh(e.childrenRenderablesToUpdate.list,0):av(e,i),F3(e),e.structureDidChange?(e.structureDidChange=!1,this._buildInstructions(e,t)):this._updateRenderables(e),e.childrenRenderablesToUpdate.index=0,t.renderPipes.batch.upload(e.instructionSet),!(e.isCachedAsTexture&&!e.textureNeedsUpdate))for(let r=0;r<e.renderGroupChildren.length;r++)this._updateRenderGroups(e.renderGroupChildren[r])}_updateRenderables(e){let{list:t,index:i}=e.childrenRenderablesToUpdate;for(let r=0;r<i;r++){let s=t[r];s.didViewUpdate&&e.updateRenderable(s)}Zh(t,i)}_buildInstructions(e,t){let i=e.root,r=e.instructionSet;r.reset();let s=t.renderPipes?t:t.batch.renderer,o=s.renderPipes;o.batch.buildStart(r),o.blendMode.buildStart(),o.colorMask.buildStart(),i.sortableChildren&&i.sortChildren(),i.collectRenderablesWithEffects(r,s,null),o.batch.buildEnd(r),o.blendMode.buildEnd(r)}};ho.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"renderGroup"};var fo=class{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,t){let i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){let t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}destroyRenderable(e){let t=this._gpuSpriteHash[e.uid];ye.return(t),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,t){t.bounds=e.visualBounds,t.texture=e._texture}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){let t=ye.get(Ri);return t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.bounds=e.visualBounds,t.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=t,e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuSpriteHash)ye.return(this._gpuSpriteHash[e]);this._gpuSpriteHash=null,this._renderer=null}};fo.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"sprite"};var rv=Object.defineProperty,T1=Object.getOwnPropertySymbols,sv=Object.prototype.hasOwnProperty,nv=Object.prototype.propertyIsEnumerable,S1=(a,e,t)=>e in a?rv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,w1=(a,e)=>{for(var t in e||(e={}))sv.call(e,t)&&S1(a,t,e[t]);if(T1)for(var t of T1(e))nv.call(e,t)&&S1(a,t,e[t]);return a},Qh=class k3{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ee(0),this.color=this._backgroundColor,this.alpha=1}init(e){e=w1(w1({},k3.defaultOptions),e),this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};Qh.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"background",priority:0},Qh.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};var ov=Qh,Pr={};pe.handle(B.BlendMode,a=>{if(!a.name)throw new Error("BlendMode extension must have a name property");Pr[a.name]=a.ref},a=>{delete Pr[a.name]});var lo=class{constructor(e){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=e,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(e,t,i){if(this._activeBlendMode===t){this._isAdvanced&&this._renderableList.push(e);return}this._activeBlendMode=t,this._isAdvanced&&this._endAdvancedBlendMode(i),this._isAdvanced=!!Pr[t],this._isAdvanced&&(this._beginAdvancedBlendMode(i),this._renderableList.push(e))}_beginAdvancedBlendMode(e){this._renderer.renderPipes.batch.break(e);let t=this._activeBlendMode;if(!Pr[t])return;let i=this._filterHash[t];i||(i=this._filterHash[t]=new Ai,i.filters=[new Pr[t]]);let r={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:i,canBundle:!1};this._renderableList=r.renderables,e.add(r)}_endAdvancedBlendMode(e){this._renderableList=null,this._renderer.renderPipes.batch.break(e),e.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(e){this._isAdvanced&&this._endAdvancedBlendMode(e)}destroy(){this._renderer=null,this._renderableList=null;for(let e in this._filterHash)this._filterHash[e].destroy();this._filterHash=null}};lo.extension={type:[B.WebGLPipes,B.WebGPUPipes,B.CanvasPipes],name:"blendMode"};var cv=Object.defineProperty,A1=Object.getOwnPropertySymbols,dv=Object.prototype.hasOwnProperty,hv=Object.prototype.propertyIsEnumerable,E1=(a,e,t)=>e in a?cv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,xd=(a,e)=>{for(var t in e||(e={}))dv.call(e,t)&&E1(a,t,e[t]);if(A1)for(var t of A1(e))hv.call(e,t)&&E1(a,t,e[t]);return a},vd={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},Jh=class U3{constructor(e){this._renderer=e}_normalizeOptions(e,t={}){return e instanceof fe||e instanceof K?xd({target:e},t):xd(xd({},t),e)}async image(e){let t=new Image;return t.src=await this.base64(e),t}async base64(e){e=this._normalizeOptions(e,U3.defaultImageOptions);let{format:t,quality:i}=e,r=this.canvas(e);if(r.toBlob!==void 0)return new Promise((s,o)=>{r.toBlob(d=>{if(!d){o(new Error("ICanvas.toBlob failed!"));return}let h=new FileReader;h.onload=()=>s(h.result),h.onerror=o,h.readAsDataURL(d)},vd[t],i)});if(r.toDataURL!==void 0)return r.toDataURL(vd[t],i);if(r.convertToBlob!==void 0){let s=await r.convertToBlob({type:vd[t],quality:i});return new Promise((o,d)=>{let h=new FileReader;h.onload=()=>o(h.result),h.onerror=d,h.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);let t=e.target,i=this._renderer;if(t instanceof K)return i.texture.generateCanvas(t);let r=i.textureGenerator.generateTexture(e),s=i.texture.generateCanvas(r);return r.destroy(!0),s}pixels(e){e=this._normalizeOptions(e);let t=e.target,i=this._renderer,r=t instanceof K?t:i.textureGenerator.generateTexture(e),s=i.texture.getPixels(r);return t instanceof fe&&r.destroy(!0),s}texture(e){return e=this._normalizeOptions(e),e.target instanceof K?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){var t;e=this._normalizeOptions(e);let i=this.canvas(e),r=document.createElement("a");r.download=(t=e.filename)!=null?t:"image.png",r.href=i.toDataURL("image/png"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}log(e){var t;let i=(t=e.width)!=null?t:200;e=this._normalizeOptions(e);let r=this.canvas(e),s=r.toDataURL(),o=["font-size: 1px;",`padding: ${i}px 300px;`,`background: url(${s}) no-repeat;`,"background-size: contain;"].join(" ")}destroy(){this._renderer=null}};Jh.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"extract"},Jh.defaultImageOptions={format:"png",quality:1};var fv=Jh,ef=class a extends K{static create(e){return new a({source:new Fe(e)})}resize(e,t,i){return this.source.resize(e,t,i),this}},lv=Object.defineProperty,uv=Object.defineProperties,bv=Object.getOwnPropertyDescriptors,P1=Object.getOwnPropertySymbols,pv=Object.prototype.hasOwnProperty,gv=Object.prototype.propertyIsEnumerable,R1=(a,e,t)=>e in a?lv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,mv=(a,e)=>{for(var t in e||(e={}))pv.call(e,t)&&R1(a,t,e[t]);if(P1)for(var t of P1(e))gv.call(e,t)&&R1(a,t,e[t]);return a},_v=(a,e)=>uv(a,bv(e)),yv=new Pe,xv=new qe,vv=[0,0,0,0],uo=class{constructor(e){this._renderer=e}generateTexture(e){var t;e instanceof fe&&(e={target:e,frame:void 0,textureSourceOptions:{},resolution:void 0});let i=e.resolution||this._renderer.resolution,r=e.antialias||this._renderer.view.antialias,s=e.target,o=e.clearColor;o?o=Array.isArray(o)&&o.length===4?o:Ee.shared.setValue(o).toArray():o=vv;let d=((t=e.frame)==null?void 0:t.copyTo(yv))||mf(s,xv).rectangle;d.width=Math.max(d.width,1/i)|0,d.height=Math.max(d.height,1/i)|0;let h=ef.create(_v(mv({},e.textureSourceOptions),{width:d.width,height:d.height,resolution:i,antialias:r})),f=ie.shared.translate(-d.x,-d.y);return this._renderer.render({container:s,transform:f,target:h,clearColor:o}),h.source.updateMipmaps(),h}destroy(){this._renderer=null}};uo.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"textureGenerator"};var bo=class{constructor(e){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=e}reset(){this._stackIndex=0;for(let e=0;e<this._activeUniforms.length;e++)this._uniformsPool.push(this._activeUniforms[e]);for(let e=0;e<this._activeBindGroups.length;e++)this._bindGroupPool.push(this._activeBindGroups[e]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(e){this.reset(),this.push(e)}bind({size:e,projectionMatrix:t,worldTransformMatrix:i,worldColor:r,offset:s}){let o=this._renderer.renderTarget.renderTarget,d=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:o,worldTransformMatrix:new ie,worldColor:4294967295,offset:new Ce},h={projectionMatrix:t||this._renderer.renderTarget.projectionMatrix,resolution:e||o.size,worldTransformMatrix:i||d.worldTransformMatrix,worldColor:r||d.worldColor,offset:s||d.offset,bindGroup:null},f=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(f);let u=f.uniforms;u.uProjectionMatrix=h.projectionMatrix,u.uResolution=h.resolution,u.uWorldTransformMatrix.copyFrom(h.worldTransformMatrix),u.uWorldTransformMatrix.tx-=h.offset.x,u.uWorldTransformMatrix.ty-=h.offset.y,Kr(h.worldColor,u.uWorldColorAlpha,0),f.update();let p;this._renderer.renderPipes.uniformBatch?p=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(f,!1):(p=this._bindGroupPool.pop()||new Ht,this._activeBindGroups.push(p),p.setResource(f,0)),h.bindGroup=p,this._currentGlobalUniformData=h}push(e){this.bind(e),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===yt.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new Je({uProjectionMatrix:{value:new ie,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}};bo.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"globalUniforms"};var Tv=1,po=class{constructor(){this._tasks=[],this._offset=0}init(){tt.system.add(this._update,this)}repeat(e,t,i=!0){let r=Tv++,s=0;return i&&(this._offset+=1e3,s=this._offset),this._tasks.push({func:e,duration:t,start:performance.now(),offset:s,last:performance.now(),repeat:!0,id:r}),r}cancel(e){for(let t=0;t<this._tasks.length;t++)if(this._tasks[t].id===e){this._tasks.splice(t,1);return}}_update(){let e=performance.now();for(let t=0;t<this._tasks.length;t++){let i=this._tasks[t];if(e-i.offset-i.last>=i.duration){let r=e-i.start;i.func(r),i.last=e}}}destroy(){tt.system.remove(this._update,this),this._tasks.length=0}};po.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"scheduler",priority:0};var M1=!1;function Sv(a){if(!M1){if(xe.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){let e=[`%c  %c  %c  %c  %c PixiJS %c v${Pn} (${a}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${Pn} - ${a} - http://www.pixijs.com/`);M1=!0}}var Hr=class{constructor(e){this._renderer=e}init(e){if(e.hello){let t=this._renderer.name;this._renderer.type===yt.WEBGL&&(t+=` ${this._renderer.context.webGLVersion}`),Sv(t)}}};Hr.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"hello",priority:-2},Hr.defaultOptions={hello:!1};function wv(a){let e=!1;for(let i in a)if(a[i]==null){e=!0;break}if(!e)return a;let t=Object.create(null);for(let i in a){let r=a[i];r&&(t[i]=r)}return t}function Av(a){let e=0;for(let t=0;t<a.length;t++)a[t]==null?e++:a[t-e]=a[t];return a.length-=e,a}var Ev=Object.defineProperty,C1=Object.getOwnPropertySymbols,Pv=Object.prototype.hasOwnProperty,Rv=Object.prototype.propertyIsEnumerable,O1=(a,e,t)=>e in a?Ev(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,I1=(a,e)=>{for(var t in e||(e={}))Pv.call(e,t)&&O1(a,t,e[t]);if(C1)for(var t of C1(e))Rv.call(e,t)&&O1(a,t,e[t]);return a},Mv=0,tf=class L3{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(e){e=I1(I1({},L3.defaultOptions),e),this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(let t of this._managedHashes)t.context[t.hash]=wv(t.context[t.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(let t of this._managedArrays)Av(t.context[t.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,t){this._managedHashes.push({context:e,hash:t})}addManagedArray(e,t){this._managedArrays.push({context:e,hash:t})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=Mv++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once("destroyed",this._removeRenderable,this)),e._lastUsed=this._now)}run(){var e,t,i,r;let s=this._now,o=this._managedRenderables,d=this._renderer.renderPipes,h=0;for(let f=0;f<o.length;f++){let u=o[f];if(u===null){h++;continue}let p=(e=u.renderGroup)!=null?e:u.parentRenderGroup,y=(i=(t=p?.instructionSet)==null?void 0:t.gcTick)!=null?i:-1;if(((r=p?.gcTick)!=null?r:0)===y&&(u._lastUsed=s),s-u._lastUsed>this.maxUnusedTime){if(!u.destroyed){let _=d;p&&(p.structureDidChange=!0),_[u.renderPipeId].destroyRenderable(u)}u._lastUsed=-1,h++,u.off("destroyed",this._removeRenderable,this)}else o[f-h]=u}o.length-=h}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){let t=this._managedRenderables.indexOf(e);t>=0&&(e.off("destroyed",this._removeRenderable,this),this._managedRenderables[t]=null)}_updateInstructionGCTick(e,t){e.instructionSet.gcTick=t;for(let i of e.renderGroupChildren)this._updateInstructionGCTick(i,t)}};tf.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"renderableGC",priority:0},tf.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};var Cv=tf,Ov=Object.defineProperty,G1=Object.getOwnPropertySymbols,Iv=Object.prototype.hasOwnProperty,Gv=Object.prototype.propertyIsEnumerable,B1=(a,e,t)=>e in a?Ov(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,F1=(a,e)=>{for(var t in e||(e={}))Iv.call(e,t)&&B1(a,t,e[t]);if(G1)for(var t of G1(e))Gv.call(e,t)&&B1(a,t,e[t]);return a},af=class N3{constructor(e){this._renderer=e,this.count=0,this.checkCount=0}init(e){var t;e=F1(F1({},N3.defaultOptions),e),this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=(t=e.textureGCAMaxIdle)!=null?t:e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let e=this._renderer.texture.managedTextures;for(let t=0;t<e.length;t++){let i=e[t];i.autoGarbageCollect&&i.resource&&i._touched>-1&&this.count-i._touched>this.maxIdle&&(i._touched=-1,i.unload())}}destroy(){this._renderer=null}};af.extension={type:[B.WebGLSystem,B.WebGPUSystem],name:"textureGC"},af.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600};var Bv=af,Fv=Object.defineProperty,D1=Object.getOwnPropertySymbols,Dv=Object.prototype.hasOwnProperty,kv=Object.prototype.propertyIsEnumerable,k1=(a,e,t)=>e in a?Fv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,U1=(a,e)=>{for(var t in e||(e={}))Dv.call(e,t)&&k1(a,t,e[t]);if(D1)for(var t of D1(e))kv.call(e,t)&&k1(a,t,e[t]);return a},rf=class j3{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e=U1(U1({},j3.defaultOptions),e),e.view&&(e.canvas=e.view),this.screen=new Pe(0,0,e.width,e.height),this.canvas=e.canvas||xe.get().createCanvas(),this.antialias=!!e.antialias,this.texture=R3(this.canvas,e),this.renderTarget=new Wh({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,t,i){this.texture.source.resize(e,t,i),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:e!=null&&e.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};rf.extension={type:[B.WebGLSystem,B.WebGPUSystem,B.CanvasSystem],name:"view",priority:0},rf.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};var Uv=rf,X3=[ov,bo,Hr,Uv,ho,Bv,uo,fv,Mn,Cv,po],H3=[lo,x3,fo,co,zn,Wn,Vn,oo],Lv=[...X3,Jn,Zy,Xy,Yn,ro,to,$n,io,ao,qn,Dx,Zn,Kn],Nv=[...H3],jv=[Xn,no,so],z3=[],V3=[],W3=[];pe.handleByNamedList(B.WebGLSystem,z3),pe.handleByNamedList(B.WebGLPipes,V3),pe.handleByNamedList(B.WebGLPipesAdaptor,W3),pe.add(...Lv,...Nv,...jv);var sf=class extends Lo{constructor(){let e={name:"webgl",type:yt.WEBGL,systems:z3,renderPipes:V3,renderPipeAdaptors:W3};super(e)}},Xv={__proto__:null,WebGLRenderer:sf},go=class{constructor(e){this._hash=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(e){this._gpu=e}getBindGroup(e,t,i){return e._updateKey(),this._hash[e._key]||this._createBindGroup(e,t,i)}_createBindGroup(e,t,i){var r;let s=this._gpu.device,o=t.layout[i],d=[],h=this._renderer;for(let p in o){let y=(r=e.resources[p])!=null?r:e.resources[o[p]],_;if(y._resourceType==="uniformGroup"){let v=y;h.ubo.updateUniformGroup(v);let T=v.buffer;_={buffer:h.buffer.getGPUBuffer(T),offset:0,size:T.descriptor.size}}else if(y._resourceType==="buffer"){let v=y;_={buffer:h.buffer.getGPUBuffer(v),offset:0,size:v.descriptor.size}}else if(y._resourceType==="bufferResource"){let v=y;_={buffer:h.buffer.getGPUBuffer(v.buffer),offset:v.offset,size:v.size}}else if(y._resourceType==="textureSampler"){let v=y;_=h.texture.getGpuSampler(v)}else if(y._resourceType==="textureSource"){let v=y;_=h.texture.getGpuSource(v).createView({})}d.push({binding:o[p],resource:_})}let f=h.shader.getProgramData(t).bindGroups[i],u=s.createBindGroup({layout:f,entries:d});return this._hash[e._key]=u,u}destroy(){for(let e of Object.keys(this._hash))this._hash[e]=null;this._hash=null,this._renderer=null}};go.extension={type:[B.WebGPUSystem],name:"bindGroup"};var mo=class{constructor(e){this._gpuBuffers=Object.create(null),this._managedBuffers=[],e.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(e){this._gpu=e}getGPUBuffer(e){return this._gpuBuffers[e.uid]||this.createGPUBuffer(e)}updateBuffer(e){let t=this._gpuBuffers[e.uid]||this.createGPUBuffer(e),i=e.data;return e._updateID&&i&&(e._updateID=0,this._gpu.device.queue.writeBuffer(t,0,i.buffer,0,(e._updateSize||i.byteLength)+3&-4)),t}destroyAll(){for(let e in this._gpuBuffers)this._gpuBuffers[e].destroy();this._gpuBuffers={}}createGPUBuffer(e){this._gpuBuffers[e.uid]||(e.on("update",this.updateBuffer,this),e.on("change",this.onBufferChange,this),e.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(e));let t=this._gpu.device.createBuffer(e.descriptor);return e._updateID=0,e.data&&(jd(e.data.buffer,t.getMappedRange()),t.unmap()),this._gpuBuffers[e.uid]=t,t}onBufferChange(e){this._gpuBuffers[e.uid].destroy(),e._updateID=0,this._gpuBuffers[e.uid]=this.createGPUBuffer(e)}onBufferDestroy(e){this._managedBuffers.splice(this._managedBuffers.indexOf(e),1),this._destroyBuffer(e)}destroy(){this._managedBuffers.forEach(e=>this._destroyBuffer(e)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(e){this._gpuBuffers[e.uid].destroy(),e.off("update",this.updateBuffer,this),e.off("change",this.onBufferChange,this),e.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[e.uid]=null}};mo.extension={type:[B.WebGPUSystem],name:"buffer"};var nf=class{constructor({minUniformOffsetAlignment:e}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=e,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(e){if(e>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${e*4}`);let t=this.byteIndex,i=t+e*4;if(i=Math.ceil(i/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,i>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=i,t}addGroup(e){let t=this.addEmptyGroup(e.length);for(let i=0;i<e.length;i++)this.data[t/4+i]=e[i];return t}destroy(){this.data=null}},_o=class{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.pipeline.setColorMask(e))}destroy(){this._renderer=null,this._colorMaskCache=null}};_o.extension={type:[B.WebGPUSystem],name:"colorMask"};var zr=class{constructor(e){this._renderer=e}async init(e){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(e).then(t=>{this.gpu=t,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(e){this._renderer.gpu=e}async _createDeviceAndAdaptor(e){let t=await xe.get().getNavigator().gpu.requestAdapter({powerPreference:e.powerPreference,forceFallbackAdapter:e.forceFallbackAdapter}),i=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(s=>t.features.has(s)),r=await t.requestDevice({requiredFeatures:i});return{adapter:t,device:r}}destroy(){this.gpu=null,this._renderer=null}};zr.extension={type:[B.WebGPUSystem],name:"device"},zr.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};var Hv=Object.defineProperty,L1=Object.getOwnPropertySymbols,zv=Object.prototype.hasOwnProperty,Vv=Object.prototype.propertyIsEnumerable,N1=(a,e,t)=>e in a?Hv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,j1=(a,e)=>{for(var t in e||(e={}))zv.call(e,t)&&N1(a,t,e[t]);if(L1)for(var t of L1(e))Vv.call(e,t)&&N1(a,t,e[t]);return a},yo=class{constructor(e){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=e}renderStart(){this.commandFinished=new Promise(e=>{this._resolveCommandFinished=e}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(e){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(e.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(e){this.renderPassEncoder.setViewport(e.x,e.y,e.width,e.height,0,1)}setPipelineFromGeometryProgramAndState(e,t,i,r){let s=this._renderer.pipeline.getPipeline(e,t,i,r);this.setPipeline(s)}setPipeline(e){this._boundPipeline!==e&&(this._boundPipeline=e,this.renderPassEncoder.setPipeline(e))}_setVertexBuffer(e,t){this._boundVertexBuffer[e]!==t&&(this._boundVertexBuffer[e]=t,this.renderPassEncoder.setVertexBuffer(e,this._renderer.buffer.updateBuffer(t)))}_setIndexBuffer(e){if(this._boundIndexBuffer===e)return;this._boundIndexBuffer=e;let t=e.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(e),t)}resetBindGroup(e){this._boundBindGroup[e]=null}setBindGroup(e,t,i){if(this._boundBindGroup[e]===t)return;this._boundBindGroup[e]=t,t._touch(this._renderer.textureGC.count);let r=this._renderer.bindGroup.getBindGroup(t,i,e);this.renderPassEncoder.setBindGroup(e,r)}setGeometry(e,t){let i=this._renderer.pipeline.getBufferNamesToBind(e,t);for(let r in i)this._setVertexBuffer(r,e.attributes[i[r]].buffer);e.indexBuffer&&this._setIndexBuffer(e.indexBuffer)}_setShaderBindGroups(e,t){for(let i in e.groups){let r=e.groups[i];t||this._syncBindGroup(r),this.setBindGroup(i,r,e.gpuProgram)}}_syncBindGroup(e){for(let t in e.resources){let i=e.resources[t];i.isUniformGroup&&this._renderer.ubo.updateUniformGroup(i)}}draw(e){let{geometry:t,shader:i,state:r,topology:s,size:o,start:d,instanceCount:h,skipSync:f}=e;this.setPipelineFromGeometryProgramAndState(t,i.gpuProgram,r,s),this.setGeometry(t,i.gpuProgram),this._setShaderBindGroups(i,f),t.indexBuffer?this.renderPassEncoder.drawIndexed(o||t.indexBuffer.data.length,h??t.instanceCount,d||0):this.renderPassEncoder.draw(o||t.getSize(),h??t.instanceCount,d||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){let e=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(e);let t=this._boundPipeline,i=j1({},this._boundVertexBuffer),r=this._boundIndexBuffer,s=j1({},this._boundBindGroup);this._clearCache();let o=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(o.x,o.y,o.width,o.height,0,1),this.setPipeline(t);for(let d in i)this._setVertexBuffer(d,i[d]);for(let d in s)this.setBindGroup(d,s[d],null);this._setIndexBuffer(r)}_clearCache(){for(let e=0;e<16;e++)this._boundBindGroup[e]=null,this._boundVertexBuffer[e]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(e){this._gpu=e}};yo.extension={type:[B.WebGPUSystem],name:"encoder",priority:1};var xo=class{constructor(e){this._renderTargetStencilState=Object.create(null),this._renderer=e,e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:Ne.DISABLED,stencilReference:0}),this._activeRenderTarget=e,this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){let i=this._renderTargetStencilState[this._activeRenderTarget.uid];i.stencilMode=e,i.stencilReference=t;let r=this._renderer;r.pipeline.setStencilMode(e),r.encoder.renderPassEncoder.setStencilReference(t)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}};xo.extension={type:[B.WebGPUSystem],name:"stencil"};var Xs={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function Wv(a){let e=a.map(i=>({data:i,offset:0,size:0})),t=0;for(let i=0;i<e.length;i++){let r=e[i],s=Xs[r.data.type].size,o=Xs[r.data.type].align;if(!Xs[r.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${r.data.type}`);r.data.size>1&&(s=Math.max(s,o)*r.data.size),t=Math.ceil(t/o)*o,r.size=s,r.offset=t,t+=s}return t=Math.ceil(t/16)*16,{uboElements:e,size:t}}function Yv(a,e){let{size:t,align:i}=Xs[a.data.type],r=(i-t)/4,s=a.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
v = uv.${a.data.name};
${e!==0?`offset += ${e};`:""}

arrayOffset = offset;

t = 0;

for(var i=0; i < ${a.data.size*(t/4)}; i++)
{
for(var j = 0; j < ${t/4}; j++)
{
${s}[arrayOffset++] = v[t++];
}
${r!==0?`arrayOffset += ${r};`:""}
}
`}function $v(a){return E3(a,"uboWgsl",Yv,nx)}var vo=class extends Qn{constructor(){super({createUboElements:Wv,generateUboSync:$v})}};vo.extension={type:[B.WebGPUSystem],name:"ubo"};var Aa=128,To=class{constructor(e){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new nf({minUniformOffsetAlignment:Aa});let t=256/Aa;for(let i=0;i<t;i++){let r=ve.UNIFORM|ve.COPY_DST;i===0&&(r|=ve.COPY_SRC),this._buffers.push(new rt({data:this._batchBuffer.data,usage:r}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(let e in this._bindGroupHash)this._bindGroupHash[e]=null;this._batchBuffer.clear()}getUniformBindGroup(e,t){if(!t&&this._bindGroupHash[e.uid])return this._bindGroupHash[e.uid];this._renderer.ubo.ensureUniformGroup(e);let i=e.buffer.data,r=this._batchBuffer.addEmptyGroup(i.length);return this._renderer.ubo.syncUniformGroup(e,this._batchBuffer.data,r/4),this._bindGroupHash[e.uid]=this._getBindGroup(r/Aa),this._bindGroupHash[e.uid]}getUboResource(e){this._renderer.ubo.updateUniformGroup(e);let t=e.buffer.data,i=this._batchBuffer.addGroup(t);return this._getBufferResource(i/Aa)}getArrayBindGroup(e){let t=this._batchBuffer.addGroup(e);return this._getBindGroup(t/Aa)}getArrayBufferResource(e){let t=this._batchBuffer.addGroup(e)/Aa;return this._getBufferResource(t)}_getBufferResource(e){if(!this._bufferResources[e]){let t=this._buffers[e%2];this._bufferResources[e]=new Xr({buffer:t,offset:(e/2|0)*256,size:Aa})}return this._bufferResources[e]}_getBindGroup(e){if(!this._bindGroups[e]){let t=new Ht({0:this._getBufferResource(e)});this._bindGroups[e]=t}return this._bindGroups[e]}_uploadBindGroups(){let e=this._renderer.buffer,t=this._buffers[0];t.update(this._batchBuffer.byteIndex),e.updateBuffer(t);let i=this._renderer.gpu.device.createCommandEncoder();for(let r=1;r<this._buffers.length;r++){let s=this._buffers[r];i.copyBufferToBuffer(e.getGPUBuffer(t),Aa,e.getGPUBuffer(s),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([i.finish()])}destroy(){for(let e=0;e<this._bindGroups.length;e++)this._bindGroups[e].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers=null;for(let e=0;e<this._bufferResources.length;e++)this._bufferResources[e].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}};To.extension={type:[B.WebGPUPipes],name:"uniformBatch"};var Kv=Object.defineProperty,qv=Object.defineProperties,Zv=Object.getOwnPropertyDescriptors,X1=Object.getOwnPropertySymbols,Qv=Object.prototype.hasOwnProperty,Jv=Object.prototype.propertyIsEnumerable,H1=(a,e,t)=>e in a?Kv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,eT=(a,e)=>{for(var t in e||(e={}))Qv.call(e,t)&&H1(a,t,e[t]);if(X1)for(var t of X1(e))Jv.call(e,t)&&H1(a,t,e[t]);return a},tT=(a,e)=>qv(a,Zv(e)),aT={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function iT(a,e,t,i,r){return a<<24|e<<16|t<<10|i<<5|r}function rT(a,e,t,i){return t<<6|a<<3|i<<1|e}var So=class{constructor(e){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=e}contextChange(e){this._gpu=e,this.setStencilMode(Ne.DISABLED),this._updatePipeHash()}setMultisampleCount(e){this._multisampleCount!==e&&(this._multisampleCount=e,this._updatePipeHash())}setRenderTarget(e){this._multisampleCount=e.msaaSamples,this._depthStencilAttachment=e.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(e){this._colorMask!==e&&(this._colorMask=e,this._updatePipeHash())}setStencilMode(e){this._stencilMode!==e&&(this._stencilMode=e,this._stencilState=Ea[e],this._updatePipeHash())}setPipeline(e,t,i,r){let s=this.getPipeline(e,t,i);r.setPipeline(s)}getPipeline(e,t,i,r){e._layoutKey||(T3(e,t.attributeData),this._generateBufferKey(e)),r||(r=e.topology);let s=iT(e._layoutKey,t._layoutKey,i.data,i._blendModeId,aT[r]);return this._pipeCache[s]?this._pipeCache[s]:(this._pipeCache[s]=this._createPipeline(e,t,i,r),this._pipeCache[s])}_createPipeline(e,t,i,r){let s=this._gpu.device,o=this._createVertexBufferLayouts(e,t),d=this._renderer.state.getColorTargets(i);d[0].writeMask=this._stencilMode===Ne.RENDERING_MASK_ADD?0:this._colorMask;let h=this._renderer.shader.getProgramData(t).pipeline,f={vertex:{module:this._getModule(t.vertex.source),entryPoint:t.vertex.entryPoint,buffers:o},fragment:{module:this._getModule(t.fragment.source),entryPoint:t.fragment.entryPoint,targets:d},primitive:{topology:r,cullMode:i.cullMode},layout:h,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(f.depthStencil=tT(eT({},this._stencilState),{format:"depth24plus-stencil8",depthWriteEnabled:i.depthTest,depthCompare:i.depthTest?"less":"always"})),s.createRenderPipeline(f)}_getModule(e){return this._moduleCache[e]||this._createModule(e)}_createModule(e){let t=this._gpu.device;return this._moduleCache[e]=t.createShaderModule({code:e}),this._moduleCache[e]}_generateBufferKey(e){let t=[],i=0,r=Object.keys(e.attributes).sort();for(let o=0;o<r.length;o++){let d=e.attributes[r[o]];t[i++]=d.offset,t[i++]=d.format,t[i++]=d.stride,t[i++]=d.instance}let s=t.join("|");return e._layoutKey=Gr(s,"geometry"),e._layoutKey}_generateAttributeLocationsKey(e){let t=[],i=0,r=Object.keys(e.attributeData).sort();for(let o=0;o<r.length;o++){let d=e.attributeData[r[o]];t[i++]=d.location}let s=t.join("|");return e._attributeLocationsKey=Gr(s,"programAttributes"),e._attributeLocationsKey}getBufferNamesToBind(e,t){let i=e._layoutKey<<16|t._attributeLocationsKey;if(this._bindingNamesCache[i])return this._bindingNamesCache[i];let r=this._createVertexBufferLayouts(e,t),s=Object.create(null),o=t.attributeData;for(let d=0;d<r.length;d++){let h=Object.values(r[d].attributes)[0].shaderLocation;for(let f in o)if(o[f].location===h){s[d]=f;break}}return this._bindingNamesCache[i]=s,s}_createVertexBufferLayouts(e,t){t._attributeLocationsKey||this._generateAttributeLocationsKey(t);let i=e._layoutKey<<16|t._attributeLocationsKey;if(this._bufferLayoutsCache[i])return this._bufferLayoutsCache[i];let r=[];return e.buffers.forEach(s=>{var o;let d={arrayStride:0,stepMode:"vertex",attributes:[]},h=d.attributes;for(let f in t.attributeData){let u=e.attributes[f];((o=u.divisor)!=null?o:1)!==1&&Jt(`Attribute ${f} has an invalid divisor value of '${u.divisor}'. WebGPU only supports a divisor value of 1`),u.buffer===s&&(d.arrayStride=u.stride,d.stepMode=u.instance?"instance":"vertex",h.push({shaderLocation:t.attributeData[f].location,offset:u.offset,format:u.format}))}h.length&&r.push(d)}),this._bufferLayoutsCache[i]=r,r}_updatePipeHash(){let e=rT(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[e]||(this._pipeStateCaches[e]=Object.create(null)),this._pipeCache=this._pipeStateCaches[e]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}};So.extension={type:[B.WebGPUSystem],name:"pipeline"};var of=class{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}},cf=class{init(e,t){this._renderer=e,this._renderTargetSystem=t}copyToTexture(e,t,i,r,s){let o=this._renderer,d=this._getGpuColorTexture(e),h=o.texture.getGpuSource(t.source);return o.encoder.commandEncoder.copyTextureToTexture({texture:d,origin:i},{texture:h,origin:s},r),t}startRenderPass(e,t=!0,i,r){let s=this._renderTargetSystem.getGpuRenderTarget(e),o=this.getDescriptor(e,t,i);s.descriptor=o,this._renderer.pipeline.setRenderTarget(s),this._renderer.encoder.beginRenderPass(s),this._renderer.encoder.setViewport(r)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);return t.contexts[0]?t.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(e.colorTextures[0].source)}getDescriptor(e,t,i){typeof t=="boolean"&&(t=t?mt.ALL:mt.NONE);let r=this._renderTargetSystem,s=r.getGpuRenderTarget(e),o=e.colorTextures.map((h,f)=>{let u=s.contexts[f],p,y;u?p=u.getCurrentTexture().createView():p=this._renderer.texture.getGpuSource(h).createView({mipLevelCount:1}),s.msaaTextures[f]&&(y=p,p=this._renderer.texture.getTextureView(s.msaaTextures[f]));let _=t&mt.COLOR?"clear":"load";return i!=null||(i=r.defaultClearColor),{view:p,resolveTarget:y,clearValue:i,storeOp:"store",loadOp:_}}),d;if((e.stencil||e.depth)&&!e.depthStencilTexture&&(e.ensureDepthStencilTexture(),e.depthStencilTexture.source.sampleCount=s.msaa?4:1),e.depthStencilTexture){let h=t&mt.STENCIL?"clear":"load",f=t&mt.DEPTH?"clear":"load";d={view:this._renderer.texture.getGpuSource(e.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:h,depthClearValue:1,depthLoadOp:f,depthStoreOp:"store"}}return{colorAttachments:o,depthStencilAttachment:d}}clear(e,t=!0,i,r){if(!t)return;let{gpu:s,encoder:o}=this._renderer,d=s.device;if(o.commandEncoder===null){let h=d.createCommandEncoder(),f=this.getDescriptor(e,t,i),u=h.beginRenderPass(f);u.setViewport(r.x,r.y,r.width,r.height,0,1),u.end();let p=h.finish();d.queue.submit([p])}else this.startRenderPass(e,t,i,r)}initGpuRenderTarget(e){e.isRoot=!0;let t=new of;return e.colorTextures.forEach((i,r)=>{if(qt.test(i.resource)){let s=i.resource.getContext("webgpu"),o=i.transparent?"premultiplied":"opaque";try{s.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:o})}catch{}t.contexts[r]=s}if(t.msaa=i.source.antialias,i.source.antialias){let s=new Fe({width:0,height:0,sampleCount:4});t.msaaTextures[r]=s}}),t.msaa&&(t.msaaSamples=4,e.depthStencilTexture&&(e.depthStencilTexture.source.sampleCount=4)),t}destroyGpuRenderTarget(e){e.contexts.forEach(t=>{t.unconfigure()}),e.msaaTextures.forEach(t=>{t.destroy()}),e.msaaTextures.length=0,e.contexts.length=0}ensureDepthStencilTexture(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);e.depthStencilTexture&&t.msaa&&(e.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);t.width=e.width,t.height=e.height,t.msaa&&e.colorTextures.forEach((i,r)=>{let s=t.msaaTextures[r];s?.resize(i.source.width,i.source.height,i.source._resolution)})}},wo=class extends eo{constructor(e){super(e),this.adaptor=new cf,this.adaptor.init(e,this)}};wo.extension={type:[B.WebGPUSystem],name:"renderTarget"};var Ao=class{constructor(){this._gpuProgramData=Object.create(null)}contextChange(e){this._gpu=e,this.maxTextures=e.device.limits.maxSampledTexturesPerShaderStage}getProgramData(e){return this._gpuProgramData[e._layoutKey]||this._createGPUProgramData(e)}_createGPUProgramData(e){let t=this._gpu.device,i=e.gpuLayout.map(s=>t.createBindGroupLayout({entries:s})),r={bindGroupLayouts:i};return this._gpuProgramData[e._layoutKey]={bindGroups:i,pipeline:t.createPipelineLayout(r)},this._gpuProgramData[e._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}};Ao.extension={type:[B.WebGPUSystem],name:"shader"};var ct={};ct.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}},ct.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}},ct.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}},ct.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},ct.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},ct.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}},ct["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}},ct["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}},ct["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}},ct.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}},ct.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}},ct.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};var Eo=class{constructor(){this.defaultState=new Et,this.defaultState.blend=!0}contextChange(e){this.gpu=e}getColorTargets(e){return[{format:"bgra8unorm",writeMask:0,blend:ct[e.blendMode]||ct.normal}]}destroy(){this.gpu=null}};Eo.extension={type:[B.WebGPUSystem],name:"state"};var sT={type:"image",upload(a,e,t){let i=a.resource,r=(a.pixelWidth|0)*(a.pixelHeight|0),s=i.byteLength/r;t.device.queue.writeTexture({texture:e},i,{offset:0,rowsPerImage:a.pixelHeight,bytesPerRow:a.pixelHeight*s},{width:a.pixelWidth,height:a.pixelHeight,depthOrArrayLayers:1})}},Y3={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},nT={blockBytes:4,blockWidth:1,blockHeight:1},oT={type:"compressed",upload(a,e,t){let i=a.pixelWidth,r=a.pixelHeight,s=Y3[a.format]||nT;for(let o=0;o<a.resource.length;o++){let d=a.resource[o],h=Math.ceil(i/s.blockWidth)*s.blockBytes;t.device.queue.writeTexture({texture:e,mipLevel:o},d,{offset:0,bytesPerRow:h},{width:Math.ceil(i/s.blockWidth)*s.blockWidth,height:Math.ceil(r/s.blockHeight)*s.blockHeight,depthOrArrayLayers:1}),i=Math.max(i>>1,1),r=Math.max(r>>1,1)}}},$3={type:"image",upload(a,e,t){let i=a.resource;if(!i)return;let r=Math.min(e.width,a.resourceWidth||a.pixelWidth),s=Math.min(e.height,a.resourceHeight||a.pixelHeight),o=a.alphaMode==="premultiply-alpha-on-upload";t.device.queue.copyExternalImageToTexture({source:i},{texture:e,premultipliedAlpha:o},{width:r,height:s})}},cT={type:"video",upload(a,e,t){$3.upload(a,e,t)}},df=class{constructor(e){this.device=e,this.sampler=e.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(e){let t=this.pipelines[e];return t||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
    var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
    vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

    struct VertexOutput {
    @builtin(position) position : vec4<f32>,
    @location(0) texCoord : vec2<f32>,
    };

    @vertex
    fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
    var output : VertexOutput;
    output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
    output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
    return output;
    }

    @group(0) @binding(0) var imgSampler : sampler;
    @group(0) @binding(1) var img : texture_2d<f32>;

    @fragment
    fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
    return textureSample(img, imgSampler, texCoord);
    }
`})),t=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:e}]}}),this.pipelines[e]=t),t}generateMipmap(e){let t=this._getMipmapPipeline(e.format);if(e.dimension==="3d"||e.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let i=e,r=e.depthOrArrayLayers||1,s=e.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!s){let h={size:{width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:r},format:e.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:e.mipLevelCount-1};i=this.device.createTexture(h)}let o=this.device.createCommandEncoder({}),d=t.getBindGroupLayout(0);for(let h=0;h<r;++h){let f=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:h,arrayLayerCount:1}),u=s?1:0;for(let p=1;p<e.mipLevelCount;++p){let y=i.createView({baseMipLevel:u++,mipLevelCount:1,dimension:"2d",baseArrayLayer:h,arrayLayerCount:1}),_=o.beginRenderPass({colorAttachments:[{view:y,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),v=this.device.createBindGroup({layout:d,entries:[{binding:0,resource:this.sampler},{binding:1,resource:f}]});_.setPipeline(t),_.setBindGroup(0,v),_.draw(3,1,0,0),_.end(),f=y}}if(!s){let h={width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:r};for(let f=1;f<e.mipLevelCount;++f)o.copyTextureToTexture({texture:i,mipLevel:f-1},{texture:e,mipLevel:f},h),h.width=Math.ceil(h.width/2),h.height=Math.ceil(h.height/2)}return this.device.queue.submit([o.finish()]),s||i.destroy(),e}},Po=class{constructor(e){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:$3,buffer:sT,video:cT,compressed:oT},this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuSources"),e.renderableGC.addManagedHash(this,"_gpuSamplers"),e.renderableGC.addManagedHash(this,"_bindGroupHash"),e.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(e){this._gpu=e}initSource(e){if(e.autoGenerateMipmaps){let h=Math.max(e.pixelWidth,e.pixelHeight);e.mipLevelCount=Math.floor(Math.log2(h))+1}let t=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;e.uploadMethodId!=="compressed"&&(t|=GPUTextureUsage.RENDER_ATTACHMENT,t|=GPUTextureUsage.COPY_SRC);let i=Y3[e.format]||{blockBytes:4,blockWidth:1,blockHeight:1},r=Math.ceil(e.pixelWidth/i.blockWidth)*i.blockWidth,s=Math.ceil(e.pixelHeight/i.blockHeight)*i.blockHeight,o={label:e.label,size:{width:r,height:s},format:e.format,sampleCount:e.sampleCount,mipLevelCount:e.mipLevelCount,dimension:e.dimension,usage:t},d=this._gpu.device.createTexture(o);return this._gpuSources[e.uid]=d,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceResize,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),d}onSourceUpdate(e){let t=this.getGpuSource(e);t&&(this._uploads[e.uploadMethodId]&&this._uploads[e.uploadMethodId].upload(e,t,this._gpu),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e))}onSourceUnload(e){let t=this._gpuSources[e.uid];t&&(this._gpuSources[e.uid]=null,t.destroy())}onUpdateMipmaps(e){this._mipmapGenerator||(this._mipmapGenerator=new df(this._gpu.device));let t=this.getGpuSource(e);this._mipmapGenerator.generateMipmap(t)}onSourceDestroy(e){e.off("update",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("destroy",this.onSourceDestroy,this),e.off("resize",this.onSourceResize,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}onSourceResize(e){let t=this._gpuSources[e.uid];t?(t.width!==e.pixelWidth||t.height!==e.pixelHeight)&&(this._textureViewHash[e.uid]=null,this._bindGroupHash[e.uid]=null,this.onSourceUnload(e),this.initSource(e)):this.initSource(e)}_initSampler(e){return this._gpuSamplers[e._resourceId]=this._gpu.device.createSampler(e),this._gpuSamplers[e._resourceId]}getGpuSampler(e){return this._gpuSamplers[e._resourceId]||this._initSampler(e)}getGpuSource(e){return this._gpuSources[e.uid]||this.initSource(e)}getTextureBindGroup(e){var t;return(t=this._bindGroupHash[e.uid])!=null?t:this._createTextureBindGroup(e)}_createTextureBindGroup(e){let t=e.source;return this._bindGroupHash[e.uid]=new Ht({0:t,1:t.style,2:new Je({uTextureMatrix:{type:"mat3x3<f32>",value:e.textureMatrix.mapCoord}})}),this._bindGroupHash[e.uid]}getTextureView(e){var t;let i=e.source;return(t=this._textureViewHash[i.uid])!=null?t:this._createTextureView(i)}_createTextureView(e){return this._textureViewHash[e.uid]=this.getGpuSource(e).createView(),this._textureViewHash[e.uid]}generateCanvas(e){let t=this._renderer,i=t.gpu.device.createCommandEncoder(),r=xe.get().createCanvas();r.width=e.source.pixelWidth,r.height=e.source.pixelHeight;let s=r.getContext("webgpu");return s.configure({device:t.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:xe.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),i.copyTextureToTexture({texture:t.texture.getGpuSource(e.source),origin:{x:0,y:0}},{texture:s.getCurrentTexture()},{width:r.width,height:r.height}),t.gpu.device.queue.submit([i.finish()]),r}getPixels(e){let t=this.generateCanvas(e),i=da.getOptimalCanvasAndContext(t.width,t.height),r=i.context;r.drawImage(t,0,0);let{width:s,height:o}=t,d=r.getImageData(0,0,s,o),h=new Uint8ClampedArray(d.data.buffer);return da.returnCanvasAndContext(i),{pixels:h,width:s,height:o}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null;for(let e of Object.keys(this._bindGroupHash)){let t=Number(e),i=this._bindGroupHash[t];i?.destroy(),this._bindGroupHash[t]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}};Po.extension={type:[B.WebGPUSystem],name:"texture"};var Ro=class{init(){let e=new Je({uTransformMatrix:{value:new ie,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),t=Vr({name:"graphics",bits:[xf,Tf(Ii()),dg,Yr]});this.shader=new ht({gpuProgram:t,resources:{localUniforms:e}})}execute(e,t){let i=t.context,r=i.customShader||this.shader,s=e.renderer,o=s.graphicsContext,{batcher:d,instructions:h}=o.getContextRenderData(i),f=s.encoder;f.setGeometry(d.geometry,r.gpuProgram);let u=s.globalUniforms.bindGroup;f.setBindGroup(0,u,r.gpuProgram);let p=s.renderPipes.uniformBatch.getUniformBindGroup(r.resources.localUniforms,!0);f.setBindGroup(2,p,r.gpuProgram);let y=h.instructions,_=null;for(let v=0;v<h.instructionSize;v++){let T=y[v];if(T.topology!==_&&(_=T.topology,f.setPipelineFromGeometryProgramAndState(d.geometry,r.gpuProgram,e.state,T.topology)),r.groups[1]=T.bindGroup,!T.gpuBindGroup){let A=T.textures;T.bindGroup=yf(A.textures,A.count),T.gpuBindGroup=s.bindGroup.getBindGroup(T.bindGroup,r.gpuProgram,1)}f.setBindGroup(1,T.bindGroup,r.gpuProgram),f.renderPassEncoder.drawIndexed(T.size,1,T.start)}}destroy(){this.shader.destroy(!0),this.shader=null}};Ro.extension={type:[B.WebGPUPipesAdaptor],name:"graphics"};var Mo=class{init(){let e=Vr({name:"mesh",bits:[Er,Gy,Yr]});this._shader=new ht({gpuProgram:e,resources:{uTexture:K.EMPTY._source,uSampler:K.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ie}}}})}execute(e,t){let i=e.renderer,r=t._shader;if(!r)r=this._shader,r.groups[2]=i.texture.getTextureBindGroup(t.texture);else if(!r.gpuProgram)return;let s=r.gpuProgram;if(s.autoAssignGlobalUniforms&&(r.groups[0]=i.globalUniforms.bindGroup),s.autoAssignLocalUniforms){let o=e.localUniforms;r.groups[1]=i.renderPipes.uniformBatch.getUniformBindGroup(o,!0)}i.encoder.draw({geometry:t._geometry,shader:r,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}};Mo.extension={type:[B.WebGPUPipesAdaptor],name:"mesh"};var dT=[...X3,vo,yo,zr,mo,Po,wo,Ao,Eo,So,_o,xo,go],hT=[...H3,To],fT=[Hn,Mo,Ro],K3=[],q3=[],Z3=[];pe.handleByNamedList(B.WebGPUSystem,K3),pe.handleByNamedList(B.WebGPUPipes,q3),pe.handleByNamedList(B.WebGPUPipesAdaptor,Z3),pe.add(...dT,...hT,...fT);var hf=class extends Lo{constructor(){let e={name:"webgpu",type:yt.WEBGPU,systems:K3,renderPipes:q3,renderPipeAdaptors:Z3};super(e)}},lT={__proto__:null,WebGPURenderer:hf},uT={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},bS=new Proxy(uT,{get(a,e){return a[e]}}),pS=new Pe(0,0,1,1);var bT=(a=>(a[a.NONE=0]="NONE",a[a.LOW=2]="LOW",a[a.MEDIUM=4]="MEDIUM",a[a.HIGH=8]="HIGH",a))(bT||{}),Q3=(a=>(a.CLAMP="clamp-to-edge",a.REPEAT="repeat",a.MIRRORED_REPEAT="mirror-repeat",a))(Q3||{}),gS=new Proxy(Q3,{get(a,e){return a[e]}}),J3=(a=>(a.NEAREST="nearest",a.LINEAR="linear",a))(J3||{}),mS=new Proxy(J3,{get(a,e){return a[e]}});var pT=Object.defineProperty,z1=Object.getOwnPropertySymbols,gT=Object.prototype.hasOwnProperty,mT=Object.prototype.propertyIsEnumerable,V1=(a,e,t)=>e in a?pT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,W1=(a,e)=>{for(var t in e||(e={}))gT.call(e,t)&&V1(a,t,e[t]);if(z1)for(var t of z1(e))mT.call(e,t)&&V1(a,t,e[t]);return a},_T=class e5 extends fe{constructor(e={}){e=W1(W1({},e5.defaultOptions),e),super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let t=0;t<e.length;t++){let i=e[t];if(i.parentRenderLayer){if(i.parentRenderLayer===this)continue;i.parentRenderLayer.detach(i)}this.renderLayerChildren.push(i),i.parentRenderLayer=this;let r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)}return e[0]}detach(...e){for(let t=0;t<e.length;t++){let i=e[t],r=this.renderLayerChildren.indexOf(i);r!==-1&&this.renderLayerChildren.splice(r,1),i.parentRenderLayer=null;let s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return e[0]}detachAll(){let e=this.renderLayerChildren;for(let t=0;t<e.length;t++)e[t].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,t,i){let r=this.renderLayerChildren,s=r.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let o=0;o<s;o++)r[o].parent||Jt("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",r[o]),r[o].collectRenderables(e,t,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,t,i){if(!e)return;let r=this.renderLayerChildren;for(let s=0;s<r.length;s++)r[s]._getGlobalBoundsRecursive(!0,t,this)}};_T.defaultOptions={sortableChildren:!1,sortFunction:(a,e)=>a.zIndex-e.zIndex};function yT(a,e,t,i){let r=t.buffers[0],s=r.data,{verticesX:o,verticesY:d}=t,h=a/(o-1),f=e/(d-1),u=0,p=i[0],y=i[1],_=i[2],v=i[3],T=i[4],A=i[5],P=i[6],I=i[7],F=i[8];for(let D=0;D<s.length;D+=2){let H=u%o*h,N=(u/o|0)*f,j=p*H+y*N+_,re=v*H+T*N+A,ce=P*H+I*N+F;s[D]=j/ce,s[D+1]=re/ce,u++}r.update()}function t5(a,e){let t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],d=e[5],h=e[6],f=e[7],u=e[8];return a[0]=o*u-d*f,a[1]=r*f-i*u,a[2]=i*d-r*o,a[3]=d*h-s*u,a[4]=t*u-r*h,a[5]=r*s-t*d,a[6]=s*f-o*h,a[7]=i*h-t*f,a[8]=t*o-i*s,a}function a5(a,e,t){let i=e[0],r=e[1],s=e[2],o=e[3],d=e[4],h=e[5],f=e[6],u=e[7],p=e[8],y=t[0],_=t[1],v=t[2],T=t[3],A=t[4],P=t[5],I=t[6],F=t[7],D=t[8];return a[0]=y*i+_*o+v*f,a[1]=y*r+_*d+v*u,a[2]=y*s+_*h+v*p,a[3]=T*i+A*o+P*f,a[4]=T*r+A*d+P*u,a[5]=T*s+A*h+P*p,a[6]=I*i+F*o+D*f,a[7]=I*r+F*d+D*u,a[8]=I*s+F*h+D*p,a}function xT(a,e,t){let i=t[0],r=t[1],s=t[2];return a[0]=e[0]*i+e[1]*r+e[2]*s,a[1]=e[3]*i+e[4]*r+e[5]*s,a[2]=e[6]*i+e[7]*r+e[8]*s,a}var vT=[0,0,0,0,0,0,0,0,0],TT=[0,0,0],Ds=[0,0,0];function Y1(a,e,t,i,r,s,o,d,h){let f=vT;f[0]=e,f[1]=i,f[2]=s,f[3]=t,f[4]=r,f[5]=o,f[6]=1,f[7]=1,f[8]=1;let u=t5(a,f);Ds[0]=d,Ds[1]=h,Ds[2]=1;let p=xT(TT,u,Ds),y=a;return a[0]=p[0],a[1]=0,a[2]=0,a[3]=0,a[4]=p[1],a[5]=0,a[6]=0,a[7]=0,a[8]=p[2],a5(a,y,f)}var ST=[0,0,0,0,0,0,0,0,0],wT=[0,0,0,0,0,0,0,0,0];function AT(a,e,t,i,r,s,o,d,h,f,u,p,y,_,v,T,A){let P=Y1(ST,e,t,s,o,f,u,_,v),I=Y1(wT,i,r,d,h,p,y,T,A);return a5(a,t5(P,P),I)}var ff=class extends Ap{constructor(e){super(e),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];let{width:t,height:i}=e;this.corners=[0,0,t,0,t,i,0,i]}setCorners(e,t,i,r,s,o,d,h){let f=this.corners;f[0]=e,f[1]=t,f[2]=i,f[3]=r,f[4]=s,f[5]=o,f[6]=d,f[7]=h,this.updateProjection()}updateProjection(){let{width:e,height:t}=this,i=this.corners,r=AT(this._projectionMatrix,0,0,i[0],i[1],e,0,i[2],i[3],e,t,i[4],i[5],0,t,i[6],i[7]);yT(e,t,this,r)}},ET=Object.defineProperty,PT=Object.defineProperties,RT=Object.getOwnPropertyDescriptors,Co=Object.getOwnPropertySymbols,i5=Object.prototype.hasOwnProperty,r5=Object.prototype.propertyIsEnumerable,$1=(a,e,t)=>e in a?ET(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Td=(a,e)=>{for(var t in e||(e={}))i5.call(e,t)&&$1(a,t,e[t]);if(Co)for(var t of Co(e))r5.call(e,t)&&$1(a,t,e[t]);return a},MT=(a,e)=>PT(a,RT(e)),CT=(a,e)=>{var t={};for(var i in a)i5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Co)for(var i of Co(a))e.indexOf(i)<0&&r5.call(a,i)&&(t[i]=a[i]);return t},OT=class s5 extends Za{constructor(e){e=Td(Td({},s5.defaultOptions),e);let t=e,{texture:i,verticesX:r,verticesY:s}=t,o=CT(t,["texture","verticesX","verticesY"]),d=new ff(Mr({width:i.width,height:i.height,verticesX:r,verticesY:s}));super(Mr(MT(Td({},o),{geometry:d}))),this._texture=i,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){let e=this.geometry;if(!e)return;let{width:t,height:i}=this.texture;(e.width!==t||e.height!==i)&&(e.width=t,e.height=i,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,t,i,r,s,o,d,h){this.geometry.setCorners(e,t,i,r,s,o,d,h)}};OT.defaultOptions={texture:K.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};var IT=Object.defineProperty,K1=Object.getOwnPropertySymbols,GT=Object.prototype.hasOwnProperty,BT=Object.prototype.propertyIsEnumerable,q1=(a,e,t)=>e in a?IT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Z1=(a,e)=>{for(var t in e||(e={}))GT.call(e,t)&&q1(a,t,e[t]);if(K1)for(var t of K1(e))BT.call(e,t)&&q1(a,t,e[t]);return a},n5=class o5 extends qr{constructor(e){let{width:t,points:i,textureScale:r}=Z1(Z1({},o5.defaultOptions),e);super({positions:new Float32Array(i.length*4),uvs:new Float32Array(i.length*4),indices:new Uint32Array((i.length-1)*6)}),this.points=i,this._width=t,this.textureScale=r,this._build()}get width(){return this._width}_build(){let e=this.points;if(!e)return;let t=this.getBuffer("aPosition"),i=this.getBuffer("aUV"),r=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),i.data=new Float32Array(e.length*4),r.data=new Uint16Array((e.length-1)*6));let s=i.data,o=r.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let d=0,h=e[0],f=this._width*this.textureScale,u=e.length;for(let y=0;y<u;y++){let _=y*4;if(this.textureScale>0){let v=h.x-e[y].x,T=h.y-e[y].y,A=Math.sqrt(v*v+T*T);h=e[y],d+=A/f}else d=y/(u-1);s[_]=d,s[_+1]=0,s[_+2]=d,s[_+3]=1}let p=0;for(let y=0;y<u-1;y++){let _=y*2;o[p++]=_,o[p++]=_+1,o[p++]=_+2,o[p++]=_+2,o[p++]=_+1,o[p++]=_+3}i.update(),r.update(),this.updateVertices()}updateVertices(){let e=this.points;if(e.length<1)return;let t=e[0],i,r=0,s=0,o=this.buffers[0].data,d=e.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let f=0;f<d;f++){let u=e[f],p=f*4;f<e.length-1?i=e[f+1]:i=u,s=-(i.x-t.x),r=i.y-t.y;let y=(1-f/(d-1))*10;y>1&&(y=1);let _=Math.sqrt(r*r+s*s);_<1e-6?(r=0,s=0):(r/=_,s/=_,r*=h,s*=h),o[p]=u.x+r,o[p+1]=u.y+s,o[p+2]=u.x-r,o[p+3]=u.y-s,t=u}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};n5.defaultOptions={width:200,points:[],textureScale:0};var FT=n5,DT=Object.defineProperty,kT=Object.defineProperties,UT=Object.getOwnPropertyDescriptors,Oo=Object.getOwnPropertySymbols,c5=Object.prototype.hasOwnProperty,d5=Object.prototype.propertyIsEnumerable,Q1=(a,e,t)=>e in a?DT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Sd=(a,e)=>{for(var t in e||(e={}))c5.call(e,t)&&Q1(a,t,e[t]);if(Oo)for(var t of Oo(e))d5.call(e,t)&&Q1(a,t,e[t]);return a},LT=(a,e)=>kT(a,UT(e)),NT=(a,e)=>{var t={};for(var i in a)c5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Oo)for(var i of Oo(a))e.indexOf(i)<0&&d5.call(a,i)&&(t[i]=a[i]);return t},jT=class h5 extends Za{constructor(e){let t=Sd(Sd({},h5.defaultOptions),e),{texture:i,points:r,textureScale:s}=t,o=NT(t,["texture","points","textureScale"]),d=new FT(Mr({width:i.height,points:r,textureScale:s}));s>0&&(i.source.style.addressMode="repeat"),super(Mr(LT(Sd({},o),{texture:i,geometry:d}))),this.autoUpdate=!0,this.onRender=this._render}_render(){let e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}};jT.defaultOptions={textureScale:0};var XT=Object.defineProperty,J1=Object.getOwnPropertySymbols,HT=Object.prototype.hasOwnProperty,zT=Object.prototype.propertyIsEnumerable,e2=(a,e,t)=>e in a?XT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,t2=(a,e)=>{for(var t in e||(e={}))HT.call(e,t)&&e2(a,t,e[t]);if(J1)for(var t of J1(e))zT.call(e,t)&&e2(a,t,e[t]);return a},VT=class lf{constructor(e){if(e instanceof K)this.texture=e,Gd(this,lf.defaultOptions,{});else{let t=t2(t2({},lf.defaultOptions),e);Gd(this,t,{})}}get alpha(){return this._alpha}set alpha(e){this._alpha=Math.min(Math.max(e,0),1),this._updateColor()}get tint(){return xr(this._tint)}set tint(e){typeof e=="number"?this._tint=e:this._tint=Ee.shared.setValue(e??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};VT.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};var a2={vertex:{attributeName:"aVertex",format:"float32x2",code:`
const texture = p.texture;
const sx = p.scaleX;
const sy = p.scaleY;
const ax = p.anchorX;
const ay = p.anchorY;
const trim = texture.trim;
const orig = texture.orig;

if (trim)
{
w1 = trim.x - (ax * orig.width);
w0 = w1 + trim.width;

h1 = trim.y - (ay * orig.height);
h0 = h1 + trim.height;
}
else
{
w1 = -ax * (orig.width);
w0 = w1 + orig.width;

h1 = -ay * (orig.height);
h0 = h1 + orig.height;
}

f32v[offset] = w1 * sx;
f32v[offset + 1] = h1 * sy;

f32v[offset + stride] = w0 * sx;
f32v[offset + stride + 1] = h1 * sy;

f32v[offset + (stride * 2)] = w0 * sx;
f32v[offset + (stride * 2) + 1] = h0 * sy;

f32v[offset + (stride * 3)] = w1 * sx;
f32v[offset + (stride * 3) + 1] = h0 * sy;
`,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
var x = p.x;
var y = p.y;

f32v[offset] = x;
f32v[offset + 1] = y;

f32v[offset + stride] = x;
f32v[offset + stride + 1] = y;

f32v[offset + (stride * 2)] = x;
f32v[offset + (stride * 2) + 1] = y;

f32v[offset + (stride * 3)] = x;
f32v[offset + (stride * 3) + 1] = y;
`,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
var rotation = p.rotation;

f32v[offset] = rotation;
f32v[offset + stride] = rotation;
f32v[offset + (stride * 2)] = rotation;
f32v[offset + (stride * 3)] = rotation;
`,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
var uvs = p.texture.uvs;

f32v[offset] = uvs.x0;
f32v[offset + 1] = uvs.y0;

f32v[offset + stride] = uvs.x1;
f32v[offset + stride + 1] = uvs.y1;

f32v[offset + (stride * 2)] = uvs.x2;
f32v[offset + (stride * 2) + 1] = uvs.y2;

f32v[offset + (stride * 3)] = uvs.x3;
f32v[offset + (stride * 3) + 1] = uvs.y3;
`,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
const c = p.color;

u32v[offset] = c;
u32v[offset + stride] = c;
u32v[offset + (stride * 2)] = c;
u32v[offset + (stride * 3)] = c;
`,dynamic:!1}},WT=Object.defineProperty,YT=Object.defineProperties,$T=Object.getOwnPropertyDescriptors,Io=Object.getOwnPropertySymbols,f5=Object.prototype.hasOwnProperty,l5=Object.prototype.propertyIsEnumerable,i2=(a,e,t)=>e in a?WT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,mi=(a,e)=>{for(var t in e||(e={}))f5.call(e,t)&&i2(a,t,e[t]);if(Io)for(var t of Io(e))l5.call(e,t)&&i2(a,t,e[t]);return a},r2=(a,e)=>YT(a,$T(e)),KT=(a,e)=>{var t={};for(var i in a)f5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Io)for(var i of Io(a))e.indexOf(i)<0&&l5.call(a,i)&&(t[i]=a[i]);return t},qT=new qe(0,0,0,0),ZT=class uf extends fa{constructor(e={}){e=r2(mi(mi({},uf.defaultOptions),e),{dynamicProperties:mi(mi({},uf.defaultOptions.dynamicProperties),e?.dynamicProperties)});let t=e,{dynamicProperties:i,shader:r,roundPixels:s,texture:o,particles:d}=t,h=KT(t,["dynamicProperties","shader","roundPixels","texture","particles"]);super(mi({label:"ParticleContainer"},h)),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=o||null,this.shader=r,this._properties={};for(let f in a2){let u=a2[f],p=i[f];this._properties[f]=r2(mi({},u),{dynamic:p})}this.allowChildren=!0,this.roundPixels=s??!1,this.particleChildren=d??[]}addParticle(...e){for(let t=0;t<e.length;t++)this.particleChildren.push(e[t]);return this.onViewUpdate(),e[0]}removeParticle(...e){let t=!1;for(let i=0;i<e.length;i++){let r=this.particleChildren.indexOf(e[i]);r>-1&&(this.particleChildren.splice(r,1),t=!0)}return t&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return qT}updateBounds(){}destroy(e=!1){var t,i,r;if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let s=typeof e=="boolean"?e:e?.textureSource,o=(i=this.texture)!=null?i:(t=this.particleChildren[0])==null?void 0:t.texture;o&&o.destroy(s)}this.texture=null,(r=this.shader)==null||r.destroy()}removeParticles(e,t){let i=this.particleChildren.splice(e,t);return this.onViewUpdate(),i}removeParticleAt(e){let t=this.particleChildren.splice(e,1);return this.onViewUpdate(),t[0]}addParticleAt(e,t){return this.particleChildren.splice(t,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,t){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,t){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,t){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,t){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,t){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};ZT.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};var QT=Object.defineProperty,Go=Object.getOwnPropertySymbols,u5=Object.prototype.hasOwnProperty,b5=Object.prototype.propertyIsEnumerable,s2=(a,e,t)=>e in a?QT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,JT=(a,e)=>{for(var t in e||(e={}))u5.call(e,t)&&s2(a,t,e[t]);if(Go)for(var t of Go(e))b5.call(e,t)&&s2(a,t,e[t]);return a},eS=(a,e)=>{var t={};for(var i in a)u5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Go)for(var i of Go(a))e.indexOf(i)<0&&b5.call(a,i)&&(t[i]=a[i]);return t},tS=class p5 extends fa{constructor(e){var t,i,r,s,o,d,h,f,u,p;e instanceof K&&(e={texture:e});let y=e,{width:_,height:v,leftWidth:T,rightWidth:A,topHeight:P,bottomHeight:I,texture:F,roundPixels:D}=y,H=eS(y,["width","height","leftWidth","rightWidth","topHeight","bottomHeight","texture","roundPixels"]);super(JT({label:"NineSliceSprite"},H)),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=(i=T??((t=F?.defaultBorders)==null?void 0:t.left))!=null?i:Wa.defaultOptions.leftWidth,this._topHeight=(s=P??((r=F?.defaultBorders)==null?void 0:r.top))!=null?s:Wa.defaultOptions.topHeight,this._rightWidth=(d=A??((o=F?.defaultBorders)==null?void 0:o.right))!=null?d:Wa.defaultOptions.rightWidth,this._bottomHeight=(f=I??((h=F?.defaultBorders)==null?void 0:h.bottom))!=null?f:Wa.defaultOptions.bottomHeight,this.bounds.maxX=this._width=(u=_??F.width)!=null?u:Wa.defaultOptions.width,this.bounds.maxY=this._height=(p=v??F.height)!=null?p:Wa.defaultOptions.height,this.allowChildren=!1,this.texture=F??p5.defaultOptions.texture,this.roundPixels=D??!1}updateBounds(){}get width(){return this._width}set width(e){this.bounds.maxX=this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this.bounds.maxY=this._height=e,this.onViewUpdate()}setSize(e,t){var i;typeof e=="object"&&(t=(i=e.height)!=null?i:e.width,e=e.width),this.bounds.maxX=this._width=e,this.bounds.maxY=this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=K.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}};tS.defaultOptions={texture:K.EMPTY};function zo(a){return!((1080<a||a<400)&&a!=0)}function Bi(a){a=encodeURIComponent(a);let e=Math.floor(256*Math.random()),t=e.toString(16).padStart(2,"0");for(let i=0;i<a.length;++i)e=3793+4513*e&255,t+=(a.charCodeAt(i)^e).toString(16).padStart(2,"0");return t}function n(a){let e="",t=parseInt(a.substring(0,2),16);for(let r=2;r<a.length;r+=2){var i=parseInt(a.substring(r,r+2),16);t=3793+4513*t&255,e+=String.fromCharCode(i^t)}return decodeURIComponent(e)}function g5(a){return a||""}function Fi(a){return new Function(n("b9585e98485cd1d5f302").concat(a,n("c7ddfa78")))()}function ts(a,e){return a&&typeof a=="object"&&e&&typeof e=="object"?(Object.keys(e).forEach(t=>{var i=a[t],r=e[t];Array.isArray(i)&&Array.isArray(r)?a[t]=i.concat(r):a[t]=i&&typeof i=="object"&&r&&typeof r=="object"?ts(Object.assign({},i),r):r}),a):e}function m5(a){var e=new Uint16Array(a.length);for(let t=0;t<a.length;++t)e[t]=a.charCodeAt(t);return e}function Of(a){return 8<=a.length&&a[a.length-7]===65535?a.slice(-6):null}function Te(){window.localStorage.setItem(n("7afc48ff216c2f7fe4fa23"),JSON.stringify(U))}function ba(a){C.Wh&&(a=Math.max(U["1x"],Math.min(a,50)),C.mc=a,ii.bj((C.mc-.25)/4),C.Ge.text=+a[n("668347bf03034919")](2)+n("f8b1"))}var _5,vt,ea,If,y5,Gf,x5,Qr,Bf,E,v5,R,b,G,T5,C,U,De,Ga,Mt,Vo,S5,Jr,Ff,w5,es,ei,Df,Ct,Wo,Di,ki,A5,ti,ai,ii,pa,z,E5,Ui,Li,et,ga,Ba,Ze,J;T5=class extends fe{constructor(a){super(),this.nf=Object.assign({gq:{x:1,y:1},$p:{x:1,y:1}},a),this.initialize()}initialize(){this.ba=this.nf.ba,this.ga=this.nf.ga,"anchor"in this.ba&&this.ba.anchor.set(.5),"anchor"in this.ga&&this.ga.anchor.set(.5),this.addChild(this.ba),this.addChild(this.ga),this.Tn()}Zf(){this.Wo=this.width/2.5,this.Fo=this.ga.width/2}Tn(){this.Ck=function(){this.nf.fq?.()},this.Uo=function(){this.ga.position.set(0,0),this.nf.cq?.()},this.Vo=function(a){a=(t=this[n("00a52d1f6b3627bb")](a)).x;var e=t.y,t=Math.min(Math.sqrt(a*a+e*e),this.Wo+this.Fo/2);a=Math.atan2(e,a),this.ga.position.set(t*Math.cos(a),t*Math.sin(a)),this.nf.To?.({angle:a,Xj:t})}}},C={k:n("7e673465f2e061a6c7327a5fafa90afcfe6f620fe5cc26c8f7533d5defd937c4e74a4e52cdde"),$l:n("87cffa892e8f4cdbbd86b43055a56576a5e6ee6569a17c7afaa4d46048bd5c7389bbc6770eee6b7fdf8994107593460385ae9c197d8d181dfb"),Qd:null,Ni:0,Hn:!1,Wh:!1,mc:1,cd:[],uh:[],bl:[],cg:0,Ih:0,Se:!1,Je:!1,Ge:0,He:0,eg:0,Ee:!1,Yh:[],$f:!1,Uh:!0,Ra:0,xg:!1,Yd:null,Hj:0,E:{},Gk:0,$:0,rj:0,Yi:0,of:!1,Sd:{},$h:()=>{}},U={"1a":0,"1b":0,"1c":0,"1d":10,"1e":0,"1f":0,"1g":0,"1h":!0,"1i":.25,"1j":0,"1k":!0,"1l":!0,"1m":!0,"1n":!1,"1o":0,"1p":1,"1q":1,"1r":238,"1s":!0,"1t":0,"1u":0,"1v":0,"1w":24,"1x":.25,"1y":0,"1z":1,"1aa":0,"1ab":0,"1ac":0,"1ad":0,"1ae":0,"1af":0},De={},Ga={[n("4d7aaa66b0373f70")]:n("53216700be65b82d3e7f787c9972867f13751122826a87771b731a6cc261a3273d655b16994f"),[n("dd9d2ff102b7")]:C.k+n("d0842065a45074cbb1ca3f199a4473c8c5836451836a179998d74d"),[n("8ac83cfced7a7513a291")]:C.k+n("31878122c5d3550450c99e5efbc7521764808516a2e9755639d4ac"),[n("ec7f42ca95")]:C.k+n("fb89cfa80fc5e39e6ad720c4c1d1e49d2e8e4b9ce89fa22c63aa72"),[n("6d0e864e9a")]:C.k+n("82b676d3f6622a75e3f869afc8763d46b79112c7f1786c07eac53b"),[n("11c0ff25f6ed")]:C.k+n("94c0e421e81cb887f58efb5de6188f9481c7a0049c26c48bc29a"),[n("3ccf392a7221b3")]:C.k+n("1d2bad96d16741b84c7582eaef7346bb082ce993ee0c438a52"),[n("9caf994a9241d0")]:C.k+n("984ce8adec98bc03c912c7c1e29c8b108d4bac889da2c00fdee6"),[n("d8eb7d0eee1d2d")]:C.k+n("ebb9df981fd5138e9ac7d0d431c1148dde9ebb9d4defaf826dd3"),[n("4d5c8825e37267")]:C.k+n("f381c7a007dd1b8692cfd8dc39d9ec9526864385b2e7a78a65db"),[n("56a55fcc685b29")]:C.k+n("67bd5b9c9be98fb206c354d0b5cd9881529a3f99cdf3d39e11d7"),[n("7ff2c6d7318433")]:C.k+n("00f47015742024bb61ba6f694a3423b835d31410233a7897768e"),[n("cb3e8a9b7db066")]:C.k+n("c8bc385dbc686cf3b9c23711924c7bc0fd9b5c58e47230df8ed6"),[n("2396623395e891")]:C.k+n("fc680c8970a4203f6d3663e54eb0273c296f08ac29be7c137a02"),[n("f12034014756ce")]:C.k+n("6c989c790034d0af1da693753e20d7ac59fff82de733a5feb4e7e827e63e"),[n("addc684503928254")]:C.k+n("34a04441487c18e755ee5b3d0678eff461a7c0752f7bedb67caea06f3e46"),[n("c17004d17706f6c9")]:C.k+n("acd8dc39c0f4906fdd66d3b5fee0976c993fb8eda7f3653ef42128e7a6fe"),[n("a15064f1172696ea")]:C.k+n("89df39fa7d8bedacf86136f6536ffaafbc385dae7a6cf8fd91270da44b71"),[n("0938cc19bf4e3e73")]:C.k+n("44b0b451386ce8f725feab2d1648ffc47197d0453f4bfd866d9eb05f0e56"),[n("28bb2d5e1e4d5fcb")]:C.k+n("f226864386f2dae59368993fb8e6adf62721827761f5afb43b2fe26d60f8"),[n("c9780cd97f0efe35")]:C.k+n("66d21abf1a0e4e11079c153334ea59e253357e6b1de95ba04f396e61ecf4"),[n("3d6cf8d5f30272c2")]:C.k+n("31878122c5d3550450c99e5efbc7521764808516a2d420557b88e50ca3d9"),[n("cc5f49bae2912314")]:C.k+n("b7cd8b6c4b995f42d693e400059d2851e2ca8f582c9e2a13fd33ff323d63"),[n("26f5af9c180bdd05")]:C.k+n("f460048188bc5827952e1bfd46b82f34216700b56fbb2d763e6960af7e86"),[n("72c173a044370930")]:C.k+n("8311b730774d6b16e25fa84c49297ce5b676d3e4702a7ea7a97ab3fe7137"),[n("7b6e3a4bcd003342")]:C.k+n("b6624a0fcabe1ea1d72ca56384bae9b2e365ce3badb9ebf0fc68be11bc84"),[n("473a0e9ff94cff8f")]:C.k+n("bb498fe84f0523deaa17e084011124ddee4e8bca22ae3bb2b4"),[n("8b7eca5b3d7023b0")]:C.k+n("8e3a6267e2d636c9ff447d1bdcc231cabb1d2645cf814adfd650"),[n("96651f0ca89b6e9e")]:C.k+n("5246262326927a853308395f18864d964741621701ce11d71a154b"),[n("4bbe0a1bfd30e376")]:C.k+n("29bf991addeb4d0c58c19656f3cf5a0f1c98fd0eda9f0f406fc2ad13")},Mt={[n("81b666d26483ebcc")]:n("cd9b7dc621b7b1e8bca572ba1fabaee8b4a17aa227ba90ba88a654"),[n("64e5cf421e")]:n("499ff93abdcb2dec38a1f6b693a722ec30a5febe9bbe36e517fc8ee4d6"),[n("86562f75ebf62db8bc2f3840f6ca7197a6482147fb")]:n("ce7aa227a296f689bf04bd5b9c8ae989b7008543a492c399871ac954829ac894c310c9ef932dd975c5"),[n("e0f54d54c10716c487cc445f")]:n("0157b172f50365546019ae0ecb1f7a2478edb676d3ed78387ce1b521edbd"),[n("8d3f682c70fbf225fef576263cb8ab03e4ef713d40ebc238ccfb")]:n("1e8ad2f7524686594fd4cd8b6c5a995947d0d5f37422932957be99aa5b208f2c50e16fb625"),[n("18a23b0d7d037bac14d420424f5025c30dbb5b09093e5ada72300ba677b1534509641eea19bf4e482f63")]:n("34a04441487c18e755ee5b3d0670f7f72dfaa3250e72ebfd2df3ab5c6404d0923f80d5137d6babd979eeaa0a2200db9627818375595484d61c8e"),[n("6ceaef73350a97f1448df70b37")]:n("b10701a24553d584d0491ede7b4fca94a85d66c60341a6a7a8562a972250aa2ebc3260"),[n("e3d6ac852ebd5beab2d3a6")]:n("86327a5ffaee2ef1e77c7513d4c221c1ff487d1bdcc935def7560f5a8cde1486"),[n("76466d5c2fde")]:n("33c10760c79ddb46528f181cf991b4562a9b60048199bc4f65913d0d"),[n("cf4494041c487074e74f901e")]:n("e0941075944044db81da0f09aa5c5bdb99ae1771b22353a197a55d22886353bf33"),[n("752dbe65dc584b6d312fbd794d27d6")]:n("3266c60346b29aa55328d97f78ae75b52b3c216700bc61b42b376d3f27b379937c0e6456"),[n("9e622968e3e532")]:n("9dab2d1651e7c138ccf5026a6ffbde38c4f10a5277cfda1dd4d019054999"),[n("77e536a5b4")]:n("483cb8dd3ce8ec733942b79112c4e3433146bf991ac0f1404e5cd280"),[n("0406039b49941f15296f7e9e55ad0b284128")]:n("74e08401083cd8a715ae9b7dc630b7b7edbae365ce2aafb7edb0bb3efc04ab88e188f80ae85a"),[n("1eeeaef06f72c10716f2bc9c180ba1780b8dc08d770dd17706efb98f6304b2016be6")]:n("1e8ad2f7524686594fd4cd8b6c5a995947d0d5f374229a245ba6d6a44a78"),[n("6f8535dbd69cc4c333915cd2ba89cfde5af4b9d7418720b2bf9dc8c22ef834dbb781b4462ae12d32b2faa92f5ff4384fa8f5e52b06ec1133e3e18c221ff969278ad8860701d410628ecd81191ea8040b87b1e4767ad17d07e2caf91f0fc4687f8b25957a764562639331fc726f291977fa28d277272c406fa131")]:n("0a3efe5b7eeab2cd7b40f11750c6adcd7344f91f58c2849f4f43d7"),[n("c8ca435085535ad6f593227a9b6e")]:n("4197f132b5c3251420d9ee4e8bdf3ae438adf6b693b572cb6def99bdb6eb1ca44490d2fa91f324ac4c98dae582b541cd01d1"),[n("23966c4ceefd9b2a6095603b9dd0f06e72a67c6afeba")]:n("79cfc9ea8d9b1ddce89126864397f2dce0952e8e4b95aa83a52751f57867fba9fb2f58f8384caebc845117f16727d5f6c46a18"),[n("6220613b43c518b22535792e23be153342d07bcb3355")]:n("a5b3151e59efc930c4fd0a5277c3c600dcc9125a7fd9d003d3db4c1d209cae04f6"),[n("ff71493fc660a04437774f3cca19bf4e4d0142")]:n("66d21abf1a0e4e11079c153334e241e11f681d3b3cea54e01b7b6e7cf2a0"),[n("5d069a51a5012b5b2a73d528ba16244b")]:n("6d7bdd66811711481c05d21abf0b0e481401da02471af006ab1b770b"),[n("45738ab786796ece7d7796499c0b004d1b")]:n("44b0b451386ce8f725feab2d1640e7c73dcab3151e4cf7c43f83f35f53"),[n("0931c271de3b2a7221c0da1ed1c3596d2bbad80dd1cf52117b")]:n("6f8543a483d1978a1ecb5cd8bdcd888a16dfa4c045df6c9bf4dda7977b8f"),[n("2c352fbb755221")]:n("69ffd9da9dab0dcc1881d696b38702cc1085de9ebb861ed4e4812dd975c5"),[n("b7affc6f73c90f1ef2b1987f16ba6004f7b59c606ece7d688a5292071e216776904d91")]:n("81d731f27583e5d4e0992e8e4b9ffaa4f86d36f6536bf6b1f47f75e2707eac"),[n("764c704836c270a84c3f1354d1")]:n("afc583644391574ade8b9c187d8d484ad69fe400059f2d57abd6a44a78"),[n("9dab5b6804d39471e1ae02196dbfef6588a61945759a9625828305581cee8349fc991a347897fb40e0f27f5d08f9ee38f49b77c17486eba197f272ba69ef9fb4f88f68b525ebc6acd1f323a04c9bafb9a9e64ae240")]:n("1be92f48efa5c37e4ab70024e1b9dc7e42b3082ce981c74e5a8f1b4bc7db"),[n("d3a191fe72c918ef9fb5f8f667b525eac6d5a1f323a04c9badb9dfee4ae449c7b293d0a24e8d41dedee8c4cb4784a4b63a913dc1")]:n("2c585cb9407410ef5de653357e680fef55e25b3d0670f6fa2fbbeb677b"),[n("142e239d7d9f334e2e5d7bdd62c05a")]:n("9cc8ec29d004809fcd96c345ee189f9fc592cb4df6ea8779d1739fa9d5f9c9"),[n("7484e0112e6c88fb3d9be819")]:n("a37197d0572d4bf6c23f88ac690144c6da0b909471094fcbcd42d0de0c"),[n("cc5254d395e55b6df11726ea918c281b976255faade4")]:n("1e8ad2f7524686594fd4cd8b6c5a995947d0d5f3742c8e2953a391a75722d2204efc")},Vo={[n("7c8ecb3df33eb0f6b6e5f7")]:n("ea93d8899e0c95b2b3268643d3b5feed9f67c86c88bbeef66b67a87464b9a1f62f298a6b39bae2e77350a74062d4fd9b5c48a95f6dc092c20701a25653c59bd65864dc0c00dc85b3"),[n("94a6a315eb06a8ceaeddec")]:n("4eb764952210315617c22aaf7f595a093b83549014470a120f834498085545124bcd767745a606c317744b6c0ef819bf386c3563f1fc36e6a3250e7affe93ff2fc406019bcc021d7")},S5=new Audio(C.k+n("2bf91f58df95d34e5a871014f189cc4e5283181cf99ca047249c6b5bb7cb")),Jr=new Audio(C.k+n("039137b0f7cdeb9662df28ccc9a1e4667aab3034d1a0fc666be2707eac")),Ff=[11164,11165,11166,11167,11168,11169,11170,11171,11172,11173,11174,11175,11176,11177,11178,11179,11180,11183,11184,11185,11186,11187,11188,11189,11190,11191,11192,1,3,14,21,20,22,19,15,16],w5=[32,33,34,35,313,314,202],es={},U["1g"]=16711680,U["1v"]=16711680,U["1ae"]=65280,(ki=window.localStorage.getItem(n("73530114a84b96041d451a")))&&(ki=JSON.parse(ki))["1r"]===238&&Object.assign(U,ki),U["1t"]&&(Ga[n("6d1d9a53850d1e")]=U["1t"]),Mt[U["1c"]]||(U["1c"]=Object.keys(Mt)[0],Te()),Ga[U["1b"]]||(U["1b"]=Object.keys(Mt)[0],Te()),Ct=ei=null,Wo=Df=-1,Di=class extends fe{constructor(a){super(a),this[n("685cdcde02c9e3501424")]="static",this.on("pointerdown",this.ql)}ql(a){(a.shiftKey||C.xg)&&(Df=a.pointerId,ei=this)}},ki=class extends Di{constructor(a){super(a),a=new We().rect(0,0,4,200).fill({color:16777215}),this.Dc=new We().circle(0,0,8).fill({color:16777215}),this.Dc[n("6054d4d60ac1eb580c5c")]="static",this.Dc[n("471b3cc8b813bf")]="pointer",this.Dc[n("44e5e964216de3f422")][n("5b74")]=2,this.Dc.on("pointerdown",this.Bl),this.addChild(a),this.addChild(this.Dc),this[n("36af91bd7b39992c")]=new Pe(0,0,10,200)}Bl(a){Ct=this,Wo=a.pointerId}bj(a,e){e&&ba(.25+3.75*a),this.Dc.y=Math.max(this.Dc.height/2,Math.min((1-a)*this.height,this.height-this.Dc.height/2))}},(ti=new(A5=class extends Di{constructor(a){super(a),(a=new je({[n("ec494bc784")]:a.hg,[n("5cdeea560c54")]:{[n("0f267eece702f4eb7e2460")]:n("e90a3f4f0c309c"),[n("51a4bceaa1953ef23c")]:12,[n("8cbba733fc")]:16777215}})).position.y=5,a.position.x=100,a.anchor.x=.5,this.hg=a,this.addChild(a)}Zf(a){for(;this.children[1];)this.removeChild(this.children[1]);let e=this.hg.height+15;for(var[t,i]of a.entries())(a=new je({[n("4eab759926")]:(t+1).toString()+". "+i[n("5528be6bb2")].substring(0,20),[n("0d8dfbb9fd67")]:{[n("dbeab2a02bd600bf8af89c")]:n("7819ee981da3cd"),[n("653088769d09026608")]:12,[n("386f13e750")]:16777215}})).position.y=e,a.position.x=5,t=new je({[n("cc696be7a4")]:i[n("71819cd19b92")],[n("f111075d1903")]:{[n("c47369f9bcdf6b76a57177")]:n("23847145c6b6da"),[n("669147971e2845070b")]:12,[n("8d18662c7d")]:16777215}}),t.position.x=195,t.position.y=e,t.anchor.x=1,e=e+a.height+5+5,this.addChild(a),this.addChild(t);this[n("043d2fa349ab2f3a")]=new Pe(0,0,this.width,this.height)}})({hg:n("cdf61c")})).position.x=50,ti.position.y=150,(ai=new A5({hg:n("f89b7f08b31f7a")})).position.x=50,ai.position.y=350,ii=new ki,Qa&&(ti.scale.set(.8,.8),ai.scale.set(.8,.8)),pa=Fi(n("d93d32623921a8")),z=Fi(n("f1061c47000b92468d")),E5=Fi(n("c5d8260e20ddaa08a2cc")),z[n("f0b04726863c65a294ac593f933f")](n("19e2ef21f1"))[n("ae4c1535f3b700b7df250d3ddf")](n("8340f717694b651bff59"),n("5ffe0e")),z.head.insertAdjacentHTML(n("2574c2bec6684eb9437a"),g5('<link rel="stylesheet" href="'+C.k+'/public/css/new.css" />')),Ui=null,Li=[],z.getElementById("social-buttons").remove(),et=new We,new Pt({fontFamily:n("7fe0d5a162da76"),fontSize:12,fill:16777215}),ga=new Di,Ba=new we,Ze=new we,J=null,G={},(b={}).ic=Fi(n("62044d1b02985f")),b.d=b.ic[n("41d6ac17b0db22163d")],G.e=function(){var a=U["1n"]?1:b.ic[n("0592e2cee0996eec6486eaacc36367ad7a")];return(a=U["1ac"]?.5:a)||1},b.ic.addEventListener(n("51aebce5b1"),async function(){var a,e,t,i,r,s,o,d,h,f,u,p,y,_,v,T,A,P,I,F,D,H,N,j,re,ce,Z,q,se,te,Ie,Tt,ne,de,Ni,Ae,Ot,ma,ta,_a,ji,Vt,ya,xa,Fa,va,Ta,Da,It,Gt,Bt,Ft,Xi,ri,si,Yo,$o,Ko,qo,kf,Uf,Zo,Qo,Xe;function Hi(c){this.zd=c,this.ta=0}function Jo(c){this.zd=c,this.ta=0}function ka(c,l,g,m,x,w,S,M,O,k){this.Cb=c,this.Bj=l,this[n("d47173dfacdc684e")]=null,this.Ej=!1,this.nb=g,this.ob=m,this.ih=x,this.kh=w,this.ll=S||(O||x)/2,this.In=M||(k||w)/2,this.Mj=O||x,this.Qj=k||w,this.Yn=.5-(this.ll-.5*this.Mj)/this.ih,this.db=.5-(this.In-.5*this.Qj)/this.kh,this.ko=this.ih/this.Mj,this.qo=this.kh/this.Qj}function ae(c,l,g,m,x,w,S,M,O,k,L,X,W,Y,V,be,oe,Re){this.ng=c,this.Lh=l,this.vk=g,this.Qo=m,this.Dk=x,this.$o=w,this.Ik=S,this.gp=M,this.Qk=O,this.op=k,this.Xk=L,this.yp=X,this.cl=W,this.Ep=Y,this.jl=V,this.rl=be,this.ti=oe,this.Fl=Re}function aa(){}function ni(c){this.yf=c}function ec(){this.dd=[]}function Lf(c,l){this.cj=c,this.Hf=l,this.Yg=this.Wg=0}function Sa(){this.ma=new fe,this.ma.sortableChildren=!0,this.P=new h,this.P.zIndex=1.6,this.Y=0,this.o=Array(797),this.o[0]=this.Ij(0,new b.nc,new b.nc);for(var c=1;c<797;c++)this.o[c]=this.Ij(c,new b.nc,new b.nc);this.Nj=this.Lj=this.pi=0}function zi(c,l){this.O=c,this.O.Qa(!1),this.id=l,this.id.Qa(!1)}function as(c){this.ua=c,this.Aa=!1,this.Pf=1}function tc(c,l){this.hb=c,this.Jn=l}function _e(c){++_e.Zn,this.Vj=c,this.ik=this.gk=this.ek=this.ck=this.ak=null,this.Tb=this.mk=this.rd=!1}function Nf(){}function St(){}function ac(){this.sd=b.Oc.hk,this.sb=0,this.Sc=500,this.og=4e3,this.Qh=7e3}function Ge(c){this.l=c,this.Cg=[],this.kl=0}function Vi(c){this.zi=c}function oi(c,l){this.S=c,this.Pi=80<=c.oa,this.Hd=this.Gd=this.Lg=this.Jg=0,this.ne=this.Pi?1:c.yd,this.ai=1,this.fi=!1,this.Qg=this.Ef=0,this.Wa=1,this.Zm=6.283185307179586*Math.random(),this.Ke=new b.dn,this.Ke.$d(E.l.K.sd,this.S.qi===b.ee.hf?null:E.B.V().Gf(this.S.qi),E.B.V().kn(this.S.oa)),l.nl(c.T,this.Ke)}function ic(){this.Xa=new y(new b.nc,new b.nc),this.Xa.id.L.Vp="add",this.Xa.id.L.zIndex=100,this.Xa.O.L.zIndex=500}function rc(c,l){this.O=c,this.id=l}function wt(){this.Pb=this.wb=this.Mb=this.Ib=this.Ja=0,this.nh=[]}function sc(c,l){for(var g=0;g<c.length;g++)if(parseInt(c[g][n("338d51")])===l)return g;return-1}function ci(){}function nc(){}function Dt(){}function oc(){this.Ac=[],this.bf=[]}function le(){this.gi=[],this.ji=[],this.v=!1,this.$c=_,this.M={}}function ia(){}function Wi(c,l,g){for(this.Fc=g,this.Aa=!1,this.ma=new fe,this.ma.visible=!1,this.Cd=Array(c),c=0;c<this.Cd.length;c++)(g=new b.Hi(new Float32Array(3*l))).Ii(l),this.Cd[c]=g,this.ma[n("11e3f720d6ee7e247d")](g.ld());this.Hc=this.Gc=1,this.na()}function st(){}function Yi(c,l,g,m,x,w,S){(S===1&&C.cd.includes(w)||S===2&&C.uh.includes(w)||S===3&&C.bl.includes(w))&&(g=!1),this.cf=c,this.Lo=l,this.ef=g,this.yk=m}function is(){var c=new Zt({[n("916367b0676ff5bded6f68")]:{[n("241430925a8d0f037c121d9644681ded")]:[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5],[n("f262e0608ec4d7e6886f")]:[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5]}}),l=new K;this.Zd=ht.from({[n("f1051f")]:{[n("d295f197a202e0")]:n("6ccddc5a1328c1aa1bab93754821d3ac14bd9b7db037aebce5a1e364ca7cfa9aeda9ba2df903a797f1c0e457ee0cb9d9b9dfee0ef6149087c18db618db109e92c393cb4cf2a4c242d57182f5d1eb8f7fd928ccbfb6f46121e12736f69cfc7258a3727cfbf5925006e46463c9b1cf7559b1082c9f8dd05600c10716c2b8cb4551895e5ad69faf7f2280375fbfddfa786ecc0c4ba169b72d21697074e765b83e68296f7eaa478e200f70312486769a3c046e00138e54830b0b014624d218b81f15451b018d5d2440b359e402341d3b4afe68ff1f613377ede129d8e7633a70f2be7fdfab2f1157f3d12dccf8407d1baadd39ceac0a5201d4e701cde558074bce9e5fff8b0f3137ddaa10e084771528d3a554e49b7db074f591a1e58772ba69efe9bcf8fc6fb553e295c080ae24f706a88fb9dfee4a9335c7c19494b212d03a8594de99cb4cf2a4c0339137c6a28ab9df398c28cecee5a33236f62523a5f8bc382bba786dacf5932255b15762c2a0f97558b55977c08e941003c1066292da895c5e8f0e06dea6a44037913d66a88ba04e2293231bfd43f47063357b76fe2dea087e3c1c6bed20c46053315766c22ad9370a685e7bdd109c1403014756d21bbd4f491c083e8d5f6b17e040ec196975680ef955f55b3d703ba7a174e0d1783a75eecf3efce06c364ee0ce19c4e2553151bf996c87bb1d5044f6c105dbd551074bc7f60dc9dc560864818151f5f7624a799ff94ce88c7fa563f2b4e88a9638fb30beb2e3b3eb6da044e1a7b1d7e611fd0aeec3b480a81f8543d2d981c7d601cd0b9e9ed4ad810cd9f59b6cda2cd8ffc1acc848993fcebfeea12721873034a7f9b73a32e92e4cbae0e0371490"),[n("4550b599ae572e9239")]:n("7d1e8d55621bf05dea18220a3912e25be50e2a7221e4ff2bf4f2327b5bafab0db8be5e2640e0da3dcbf1026a19ecce3f9fbb1d5047f6d61cf6c9581a5d8f882e989e7e052fdba51bb7db624a79ccae1ff99b7db02481bce8bab418fe3cb8b7eda4eb6cd244e2a2e18bbf01f71bb7ceaeddad0ecd018e96d6c7a2529a499fafc9859a0ac2e4d730f620c6c6cde7936dd37f93aaf2a17476a72723a5f8ec5e7eb4697bedb5f27142b84033949a8c2a6aa94377c98fc34f16d60550d28b8b0f09dc487ada88b54731910a50a18bac4e6ecf0f1bff41f47212723a2fb32deb7a366d3420f739c46053315214c228a87f592c486cdf05c35256164510924bcd4f491c090b87447400e677ea1a684a2c48bb19be3a2a7221f6f63ce1f3652d2bceb339c9eb672454e0c67197d5026a19ecff39d5dd400f43c69656858c125a09dfef09c5da4a0224e1a015a9d3624a799ff93ee88c7ff505a7abf0a0b432c73faca8e9a9e77aa323f7d1a4c0e457bd5beaceaeddfb5fe154d0c381c7d6529a49cfc99c8b8b1c84a4c033d5619cf2cbfd9f6fff6292e0b2b43023e12642b2faa97e7eb4697bedb5e27d4fbb573395e8833f19ec1d309cc5826016d6050385d89c180bc90f1e9ac0801771c46004f7ddfb0a6ece7d48aa63e56761343a30b27ab52b224f3222b062c46053315612c22ad92c0e7f59769a639e0e1c563a10925a950b02020f099d153331a606b5462908205fb90ca75b3d7064c1fc28faf4583e7cf8f72de4a07e7512d0866695b315680ca89b799fae0a50708781549094074d0b9a9e5e8dc9532f07c0a21386d92b173b9ff94ce88d0ba563f2b2e0bfb324fc3cae98e3b1a12db553e2c6a6a7f355a806ac8eee81bf16e31e8e9cd6d0d5358d49abde9bb9")},[n("b94d4b99")]:{[n("73521014834d81")]:{[n("46b266ad38225c3227b164")]:"vertmain",[n("6d2d8055830116")]:n("e0c2564191565292da896d57835f4fd3a5af5b259b375bb4ddfb0a6ecb0f1bff41f47063216776f23ae96f693c281ead7f8b3700600c398955882e1975157bdc619c0307170d55d21bba0c481e585dba153331a604c45335082c48bb19bf4e2a7221f7c42be7ea731c6bebf53ffbe16d3d6cf3d726ccee026b68f7ca289ee61c4502e1d5578783042d1c98f8498def1a427197f144e084775d7b8abe2ba2cc23e412adbfeba7873bf831abfebf9ceb6da017b780a0c0e524fe5ae8ceafa8fb5de354d2b281c7d6529a49cfc99cd8dc4fc5d39770db6983f3d1e6942e8f4cdbbdf0e76770f63035d4aeaa383eff582bad93842262f1125282e8e83f1b9d5e6add95d25616d6056ad88bd8466e825448d082ac4166c67513f0baec0a0ad97f0eea32e16761347074e77d8d383a622e28b0628c1f0260173f9f3dda1b067d196d9713d45130424654d21bbc4f496f585ebe153342a606b55335082c48bb49ce11632f63a7a005e3e3747c3cb9d82aaebc3a6364b7911780a6667d1baa8e6e9dbb1d5014908311e7c942065d8f882ddb9d0d5573f1e6448493703c6c8a8a59fdff6ab010e7e7b4b2b438fd29e2eba5f8fc6fb555e281fd8bb20ef60ef2dbb5c8ec5fd61090d697b69319c11f8589c1d8dd3a95b3c264d86a94e6d4dc9462da628ce2b3b43023e12647b2faa94d77a37f6ff385cf7b45bb577bd4fd9a580eec6c3b9bd0d6505c91450e86c19c180bc9091edd99af562a9a221ef7d1ec087b8a2c4cea3392373d6d3329a565fc791e296f7eb37f82330f410b3f81779b3718395f6eca13b047411439099449953f15451b018d5d7257b076a046461d393bf848ff0b6c3434b0a312f0f4632d61c5ee38edfb6b7513a28663e7b317190ca89b799fae0a52018781549092070a4cc3d718d4c017002ec1aa00acd929516c88fb0ca2cd26f438adbda1e68772ba69bcbeefe9eb6cd307e1d1b1d69342aa2affdbddc8ec5f8543d2d696c5c345985cdecbc0928d1ec4e89d6d9c35dfa28ab98c5fd975bde0afe36636f75423a5f8ef6f78fe383ddcb6922006e76033959b8c2a6af91a5a8ad3f30703a51016f6cd896b1ed80d58da82b5573bd17577a196ec087b8a284cbb6db02b3d2c7076962deb7a7e3e6d6bed20c460533151668b778a3b1f750230c710d84741141430925a8d0f037c121d9644681ded11b746220b485fb90cfb1b6c7234b1d022a6b4327b5cafa90fb8be5e7513a2866695b315680ca89b7999ae430f52c3c70ddac81f59108f895cdcfa5a0802ddac06a19375486c898a59ff8e39e532f0f6b796a064ba7cf99ea9ef8d7aa020fbc6a6d5fb42ab2cffd9acbbbb1dd4149abcd1819602dc5cd8cb89caac5a82b1d7318420c4b79dbbca2e8e3ddbbf81b43023e12736b2faa92f29fc6b6fedf593224ea2553395e88c296ff91f2ec88cde4052886048de8ed658569f135bef82ae582697315fa896845b3f8e2446ea32e16763457074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c477bdd10960e1c46140aa246900c145e101dd145561df158e12275596709ed53ff13422165f0fa3cb0b4276d29cbbe7eadab2d6004a0937197a6026a19bf996c88ac1f450392994187965b075acbd739d3c7591f33dfb05ab0e2351927c9ad13bfd302e125b0bafcf0f515ad698bfebeedeb6da044e0d3b1d7e642a828ffd9acc8ec5f8543d2d696c59016da5cd8cbc3889a0fc5f5d730f520c4b7eeec887fd975b1fab4e17767e12644b2f8d82f2b8d383caff5932206e6153395e8c66f5fac586a8190de515a905c49d9cd8b1a1edf790b8dc0b75720c06005849efa086ecf0816a276a16761347f63e538af2f383f787d9c76d2604627207e864e8c281f79150e805398161a4b1b43c56bdc584b1d535ed6153331a606b5472908205fb87ea84e4e6523b2b676a5a325783cb8ab23e8fa6f2555bcd500c0ee643746e8cf799fae0a5375878154d4f252107ac5d41ed98b0c3264828251f5f7624a799ff94ce88c7fa563f2a1e1a1b325e67cf8ebe3a8ba2fe515f7d0d6c0e457bd599bceaba9fb5ce254d2b281c5a704dc0b9f98d8d8dc4fe5ef9b65db779bf49dbbca2e8b4fdbbf81b43023e12736b2faa92f29fc684df0bcce606ca24064cbb9d03f189d082c9f96d44107c10665d1db8b0f08a9181cfcd5f17366c67513f5c8ec087bd97f0eba54b43a27712723846bb8263e296e0ffa22d12406775773d45b8f6959395e1bca12b24743655054c70dcb5a5e1e4d4bcd007426e64cf103755d461ced4fe80a2a7350a7a174e3e3747a3cb9d82aaebc3a6364b7911780a6667d1ede8e6cecbb1f2114968303c7c94218119892498f9e1a4471d0aa1aa1df291f618ae259ff8e39e123e7e1b4a09232f02dbfa9e9f8fc6fb55293c6a6d5a202e01daf99f9b2ec0b8542a19597c7c344ed5cd9b989cdaf5a84b19571db7086af8aa0df398c28cabfa2f86c77ad7b61bff9b02f29fc6b6fedf593225687447bd7b4cc680eee1d3b9ca194100397544bc784dc581edf7f0b8fb1e40673933759b288e10862d97f0eea34e1203a6a312fb96ff17872296f7ea9719377505710388e7e862806395e1bca12c1171d4d130985458a4f491c585dbe153342d65aec10684a6409ae0fcf5b3f0134b2d261a1b6713a78edf629f3fa3a6060f4cd7197a6412a48fdc63dc4f0074501e39656858305581c988b498f9e1a4471deac17a4c22e172792fb55e88c7ff605a7abc7baa925ec7cf99aa9effe29f502e0c6a7a6b054aa4ce9aeb9df9d4a9030cbd696c5cb529b3ccfc99cd8da4fdcee9162c06c99e990b9d32e8e3d88eaa3a52720877335a5edaa4f3efe2d2ba892842262f1172682ea993f19ec082c9f8cd45616d60552d290cd5f49897e41d39fb31770b56004f78eac597fd97e7da933e36760417074e72dea0e7e3e6d3aba689527117136378a68853f4369393b9754841016014725d21ac91f284d101e93557357b177a044374e5d1ff37fe2117d2434b0a36eb0b4273d77e3fd23efe36c7e54c6c62cd1e3553d7af9ca30c8bb1d501490f1418796420650ccd41ed0dd110515d7bb00b0c422372fdcb819b9976ab313e7e3c5f0f467ad6bfafebeedeb6da00db797b1d7e606fc03af98e888ba2ccf1d8d8181c6a7529a499c9ecfc9cb4cf3e7c1319136b3a28ab9df38f828ccbfb4f47a67b16763d4a7f56569e92f3eb5f5932213fa1633949a8c2a6af91f2e8ad2810701d410148784dc5e1ede0d41c995b35e228d0659ab97bb1f78bd680cff76b42167216605b13beb6f6849787cef35d21646265520827bdd7f585f0b6ddd05c2275b511b0f91478b070802082d905c6e00cc42e0046b597054f95bef5b3d0334b0a374bbb63e6d2bbab169afbe6a3e48f4cc26c8e5092d6af5c733dfd1590543ced21d9bc7125b7b8f8b2d989c0f557382e646f59375483bdfbf09bfd06ab261a3b7eea0b523ed3d89b4e0b2bc7aa251f7d1d6c0e457f71fbf99f08ca72ccf1d8d8181c6a4529838cfcce8d8dd3d")},[n("9007a082f388b309ec")]:{[n("3ce8107b3268d2fc2dfbf2")]:"fragmain",[n("16d4b7dc6848b9")]:n("e0c2564191565292da896d57835f4fd3a5af5b259b375bb4ddfb0a6ecb0f1bff41f47063216776f23ae96f693c281ead7f8b3700600c398955882e1975157bdc619c0307170d55d21bba0c481e585dba153331a604c45335082c48bb19bf4e2a7221f7c42be7ea731c6bebf53ffbe16d3d6cf3d726ccee026b68f7ca289ee61c4502e1d5578783042d1c98f8498def1a427197f144e084775d7b8abe2ba2cc23e412adbfeba7873bf831abfebf9ceb6da017b780a0c0e524fe5ae8ceafa8fb5de354d2b281c7d6529a49cfc99cd8dc4fc5d39770db6983f3d1e6942e8f4cdbbdf0e76770f63035d4aeaa383eff582bad93842262f1125282e8e83f1b9d5e6add95d25616d6056ad88bd8466e825448d082ac4166c67513f0baec0a0ad97f0eea32e16761347074e77d8d383a622e28b0628c1f0260173f9f3dda1b067d196d9713d45130424654d21bbc4f496f585ebe153342a606b55335082c48bb49ce11632f63a7a005e3e3747c3cb9d82aaebc3a6364b7911780a6667d1baa8e6e9dbb1d5014908311e7c942065d8f882ddb9d0d5573f1e6448493703c6c8a8a59fdff6ab010e7e7b4b2b438fd29e2eba5f8fc6fb555e281fd8bb20ef60ef2dbb5c8ec5fd61090d697b69319c11f8589c1d8dd3a95b3c264d86a94e6d4dc9462da628ce2b3b43023e12647b2faa94d77a37f6ff385cf7b45bb577bd4fd9a580eec6c3b9bd0d6505c91450e86c19c180bc9091edd99af562a9a221ef7d1ec087b8a2c4cea3392373d6d3329a565fc791e296f7eb37f82330f410b3f81779b3718395f6eca13b047411439099449953f15451b018d5d7257b076a046461d393bf848ff0b6c3434b0a312f0f4632d61c5ee38edfb6b7513a28663e7b317190ca89b799fae0a52018781549092070a4cc3d718d4c017002ec1aa00acd929516c88fb0ca2cd26f438adbda1e68772ba69bcbeefe9eb6cd307e1d1b1d69342aa2affdbddc8ec5f8543d2d696c5c345985cdecbc0928d1ec4e89d6d9c35dfa28ab98c5fd975bde0afe36636f75423a5f8ef6f78fe383ddcb6922006e76033959b8c2a6af91a5a8ad3f30703a51016f6cd896b1ed80d58da82b5573bd17577a196ec087b8a284cbb6db02b3d2c7076962deb7a7e3e6d6bed20c460533151668b778a3b1f750230c710d84741141430925a8d0f037c121d9644681ded11b746220b485fb90cfb1b6c7234b1d022a6b4327b5cafa90fb8be5e7513a2866695b315680ca89b7999ae430f52c3c70ddac81f59108f895cdcfa5a0802ddac06a19375486c898a59ff8e39e532f0f6b796a064ba7cf99ea9ef8d7aa020fbc6a6d5fb42ab2cffd9acbbbb1dd4149abcd1819602dc5cd8cb89caac5a82b1d7318420c4b79dbbca2e8e3ddbbf81b43023e12736b2faa92f29fc6b6fedf593224ea2553395e88c296ff91f2ec88cde4052886048de8ed658569f135bef82ae582697315fa896845b3f8e2446ea32e16763457074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c477bdd10960e1c46140aa246900c145e101dd145561df158e12275596709ed53ff13422165f0fa3cb0b4276d29cbbe7eadab2d6004a0937197a6026a19bf996c88ac1f450392994187965b075acbd739d3c7591f33dfb05ab0e2351927c9ad13bfd302e125b0bafcf0f515ad698bfebeedeb6da044e0d3b1d7e642a828ffd9acc8ec5f8543d2d696c59016da5cd8cbc3889a0fc5f5d730f520c4b7eeec887fd975b1fab4e17767e12644b2f8d82f2b8d383caff5932206e6153395e8c66f5fac586a8190de515a905c49d9cd8b1a1edf790b8dc0b75720c06005849efa086ecf0816a276a16761347f63e538af2f383f787d9c76d2604627207e864e8c281f79150e805398161a4b1b43c56bdc584b1d535ed6153331a606b5472908205fb87ea84e4e6523b2b676a5a325783cb8ab23e8fa6f2555bcd500c0ee643746e8cf799fae0a5375878154d4f252107ac5d41ed98b0c3264828251f5f7624a799ff94ce88c7fa563f2a1e1a1b325e67cf8ebe3a8ba2fe515f7d0d6c0e457bd599bceaba9fb5ce254d2b281c5a704dc0b9f98d8d8dc4fe5ef9b65db779bf49dbbca2e8b4fdbbf81b43023e12736b2faa92f29fc684df0bcce606ca24064cbb9d03f189d082c9f96d44107c10665d1db8b0f08a9181cfcd5f17366c67513f5c8ec087bd97f0eba54b43a27712723846bb8263e296e0ffa22d12406775773d45b8f6959395e1bca12b24743655054c70dcb5a5e1e4d4bcd007426e64cf103755d461ced4fe80a2a7350a7a174e3e3747a3cb9d82aaebc3a6364b7911780a6667d1ede8e6cecbb1f2114968303c7c94218119892498f9e1a4471d0aa1aa1df291f618ae259ff8e39e123e7e1b4a09232f02dbfa9e9f8fc6fb55293c6a6d5a202e01daf99f9b2ec0b8542a19597c7c344ed5cd9b989cdaf5a84b19571db7086af8aa0df398c28cabfa2f86c77ad7b61bff9b02f29fc6b6fedf593225687447bd7b4cc680eee1d3b9ca194100397544bc784dc581edf7f0b8fb1e40673933759b288e10862d97f0eea34e1203a6a312fb96ff17872296f7ea9719377505710388e7e862806395e1bca12c1171d4d130985458a4f491c585dbe153342d65aec10684a6409ae0fcf5b3f0134b2d261a1b6713a78edf629f3fa3a6060f4cd7197a6412a48fdc63dc4f0074501e39656858305581c988b498f9e1a4471deac17a4c22e172792fb55e88c7ff605a7abc7baa925ec7cf99aa9effe29f502e0c6a7a6b054aa4ce9aeb9df9d4a9030cbd696c5cb529b3ccfc99cd8da4fdcee9162c06c99e990b9d32e8e3d88eaa3a52720877335a5edaa4f3efe2d2ba892842262f1172682ea993f19ec082c9f8cd45616d60552d290cd5f49897e41d39fb31770b56004f78eac597fd97e7da933e36760417074e72dea0e7e3e6d3aba689527117136378a68853f4369393b9754841016014725d21ac91f284d101e93557357b177a044374e5d1ff37fe2117d2434b0a36eb0b4273d77e3fd23efe36c7e54c6c62cd1e3553d7af9ca30c8bb1d501490f1418796420650ccd41ed0dd110515d7bb00b0c422372fdcb819b9976ab313e7e3c5f0f467ad6bfafebeedeb6da00db797b1d7e606fc03af98e888ba2ccf1d8d8181c6a7529a499c9ecfc9cb4cf3e7c1319136b3a28ab9df38f828ccbfb4f47a67b16763d4a7f56569e92f3eb5f5932213fa1633949a8c2a6af91f2e8ad2810701d410148784dc5e1ede0d41c995b35e228d0659ab97bb1f78bd680cff76b42167216605b13beb6f6849787cef35d21646265520827bdd7f585f0b6ddd05c2275b511b0f91478b070802082d905c6e00cc42e0046b597054f95bef5b3d0334b0a374bbb63e6d2bbab169afbe6a3e48f4cc26c8e5092d6af5c733dfd1590543ced21d9bc7125b7b8f8b2d989c0f557382e646f59375483bdfbf09bfd06ab261a3b7eea0b523ed3d89b4e0b2bc7aa251f7d1d6c0e457f71fbf99f08ca72ccf1d8d8181c6a4529838cfcce8d8dd3d")}},[n("1574f2bbf67f69af787d")]:{[n("7d1bab557906f646e0")]:l.source,[n("585cc9ca31ddf24a12")]:l.source.style,[n("22468a5c40d89ad459")]:{[n("917750ab7969e587ef6f69a07c77")]:{value:[1,.5,.25,.5],type:"vec4<f32>"},[n("84a09232f02dbfa9e98ead3efc04")]:{value:[0,0],type:"vec2<f32>"},[n("76726c6c02ff49ff1b402677f1f630")]:{value:[0,0],type:"vec2<f32>"}}}}),this.Vd=new Za({[n("637300398a7d9d2812")]:c,[n("c0e26a72a07074")]:this.Zd})}function Wt(){this.L=new we,this.Uk=this.Sk=0}function Qe(c){this.K=c,this.S=new b.Wf.Uf,this.rb=!1,this.od=!0,this.uf=!1,this.bi=this.xb=0,this.Wa=1,this.Ub=this.Ig=0,this.qa={},this.$a=0,this.Vb=new Float32Array(400),this.Za=new Float32Array(400),this.ia=new Float32Array(400),this.aa=this.ka=this.Ha=this.hl=null,this.vi()}function kt(c,l,g,m,x){this.Ja=c,this.Ib=l,this.Mb=g,this.wb=m,this.Pb=x}function Ut(c){this.H=new b.bh,this.H.ma[n("26d68cdd695385514a")](this.H.P),this.Pg=this.ed=null,this.fd=c,this.Y=0,this.dh=this.$g=this.Zg=this.Xg=this.Ug=this.Sg=this.yd=1,this.Em(n("3eea32e22435623320b1"))}function He(c){this.ua=c}b.d[n("a81e8f8fe9918b12d5ef8641cd4c92")](n("996d7aa17823e8a2c062"))[n("9dfd6b294df7")][n("685dc3c81cd1cf46")]=n("3221982a55ac"),R={A:function(c,l,g){c[n("173b6de5eb")](),c[n("26d189dd4f7282")](l,g)},g:function(c,l,g){c[n("5cdeea4010")](),c[n("d12432603009a27c")](l,g)}},G.Ta=function(c){var l=c.parent;l?.removeChild(c)},n("c625fd37beb2e1b8863ee309"),ea=n("be27f425b2a0a1e68772ba1fefe9cabaaf2bf516b39aba92b915f508ae8eb284b1"),If=n("734c0112875bdc593a094f28da024700e647ea03755b6c09a54be20c622165e7bd2dfa"),y5=n("18cc682d75003f884582474162190f994d95051c43501d8a5d6c17f106b54433167914ec"),Gf=n("f0e400059d2857a09dba1f79ba2a4baa73a56f32723432b67af4392e61302bad22d160573a153880"),n("4513f5bea0572a9b284dea3297213c6a3323a37cb06728793023ba62d36251204b26897f"),x5=n("bd8b0d3628dfa213a0c5624a0fd8ac51a8c82aee25efa3e5a1b232fa37e7a8f9b0a33ae253e2d1a0cba609ff"),Qr=void 0,Q=b.ic[n("9e665109ecec28f4e870")],Qr=Q||=n("782cd4"),Bf=(()=>{switch(Qr){case n("adeb44"):var c=n("1094393c4124");break;case n("750292"):c=n("718696fbb1a3");break;case n("172e6b"):c=n("c95c39a30b6c");break;case n("64d0d5"):c=n("8034b18cc186");break;default:c=n("8d1b611f44d1")}return c})(),window.moment.locale(Bf),E=null,a=b.ic[n("56ae29d1143451280dbc61b62720")],G.N=function(c){return a[c]},G.ue=function(c){return c[Qr]||(c[n("7aee52")]?c[n("2eda9e")]:c[n("8982")])},G.Qp=function(c){return encodeURIComponent(c)},G.ha=function(c,l){return setTimeout(c,l)},G.fm=function(c){clearTimeout(c)},G.Mi=function(c){var l=(Math.floor(c)%60).toString(),g=(Math.floor(c/60)%60).toString(),m=(Math.floor(c/3600)%24).toString(),x=(c=Math.floor(c/86400).toString(),G.N(n("aace18d4c2110428dfa65aa1d73e0b"))),w=G.N(n("0f3565ebff6ae1ef7a2d37e2f439effd")),S=G.N(n("981cae82f0c3aa06cd14cc9ecd9b")),M=G.N(n("898f7fd561d0fba9fc673db77065"));return 0<c?c+n("e2d696c5")+x+n("245054c7")+m+n("1a0eee1d")+w+n("10c46053")+g+n("d1676134")+S+n("ce7aa251")+l+n("a6125a09")+M:0<m?m+n("ef05c352")+w+n("ce7aa251")+g+n("c91f79cc")+S+n("9a8e6e9d")+l+n("9dab2d60")+M:0<g?g+n("ee5a82b1")+S+n("ef05c352")+l+n("51e7e1b4")+M:l+n("0ddbbdf0")+M},G.xm=function(c){return c.includes(n("7821c8ae1a"))?c.replaceAll(n("b94249895b"),'target="_black" href'):c},G.Xi=function(c,l=null,g=null){var m=b.d[n("d44664c2b9dd7f6eb04873ca8ec5")](n("d77bba38327c29"));n("32369a2153a191a75f2f")!==typeof l&&l!==null&&(n("8ca8a03bf507bb8df181")!==typeof l[n("ec544a")]&&(m[n("bdc75b")]=l[n("e8d04e")]),n("7e7a2e75e7f52dfbe373")!==typeof l[n("87d9fa8365df")]&&l[n("ae5e0338dca0")]&&(m[n("1567e4b1f769")]=n("d282e79cb804")),n("fa7ed2699be9a9ff6777")!==typeof l[n("c95e2e9a284c")]&&l[n("baaf19abdb3d")]&&(m[n("289d0f1d490f")]=n("36a39daf5f39")),n("6682469d0f1d45130b9b")!==typeof l[n("39c9c903cedd500228d5aa1a")])&&(m[n("c634fa36b9a8e3afa738f90f")]=l[n("d44664c8abda7559b54a77c1")]),m[n("43803c46a2")]=n("8340e00e731d3b3ce15dfb1f7c2363ebe330"),m[n("981aa888")]=c,g&&(m[n("5a047201318e44")]=m[n("7ae452ff1b6e2468f1e725e1e3742078e4fc29")]=function(){try{g()}catch{}m[n("e3fb8bba08f90d")]=m[n("b5c9591a5ccbdf15ceda5e0424d1ab15abd122")]=null}),(b.d[n("851e62596d")]||b.d[n("92c431d1d34b3d44ffc528dedc563450c5fd05d8c3")](n("e5be02f90d"))[0])[n("9000a293f18bb224f000b68f")](m)},G.fa=function(c,l){return l.prototype=Object.create(c.prototype),(l.prototype.constructor=l).parent=c,l},G.Jm=function(c){return(c%=6.283185307179586)<0?c+6.283185307179586:c},G.Sp=function(c,l,g){return G.Id(g,c,l)},G.Id=function(c,l,g){return g<c?g:c<l?l:Number.isFinite(c)?c:.5*(l+g)},G.Q=function(c,l,g,m){return c<l?Math.min(l,c+g*m):Math.max(l,c-g*m)},G.zj=function(c,l,g){return l+(c-l)*Math.pow(.5,g/33.333)},G.Of=function(c,l,g){return c-(c-l)*g},G.eh=function(c,l){return Math.sqrt(c*c+l*l)},G.Tj=function(c,l,g,m){var x=l+m;if(c==null)throw new TypeError;for(m=c.length>>>0,g=(g>>=0)<0?Math.max(m+g,0):Math.min(g,m),l=(l>>=0)<0?Math.max(m+l,0):Math.min(l,m),x=x===void 0?m:x>>0,m=Math.min((x<0?Math.max(m+x,0):Math.min(x,m))-l,m-g),x=1,l<g&&g<l+m&&(x=-1,l+=m-1,g+=m-1);0<m;)l in c?c[g]=c[l]:delete c[g],l+=x,g+=x,m--},G.Wp=function(c,l,g,m){var x=6.283185307179586*Math.random();return[c+(g=Math.sqrt(g*g+Math.random()*(m-g)*(m+g)))*Math.cos(x),l+g*Math.sin(x)]},G.jo=function(){return 2147483647*Math.random()},G.po=function(){var c=[32,33,34,35];return c[parseInt(Math.random()*c.length)]},G.Yp=(e=[n("4eef"),n("fc7c"),n("b675"),n("3191"),n("9a9f"),n("18dc"),n("fdd8"),n("985e"),n("ce67"),n("0b85"),n("feee"),n("41d0"),n("8515"),n("ae5b"),n("e8dc"),n("2ed9"),n("8670"),n("c2bb"),n("69b3"),n("5d24"),n("cb17"),n("9805"),n("cf6d"),n("d28d"),n("9806"),n("d3f4"),n("21e3"),n("d291"),n("fd9d"),n("2401"),n("3074"),n("a483"),n("4b8b"),n("bf88"),n("c943"),n("2ba6")].map(function(c){return c.charCodeAt(0)}),function(c){n("ce2afe05b785fd8bb303")==typeof c&&(c=16);for(var l="",g=0;g<c;g++)l+=String.fromCharCode(e[Math.floor(Math.random()*e.length)]);return l}),G.Zp=function(c,l,g,m){l=g*(1-.5*l);var x=Math.min(l,1-l);return G.zh(c,x?(g-l)/x:0,l,m)},G.zh=function(c,l,g,m){var x=(l*=1-Math.abs(2*g-1))*(1-Math.abs(c/60%2-1));return g-=l/2,0<=c&&c<60?[g+l,g+x,g,m]:60<=c&&c<120?[g+x,g+l,g,m]:120<=c&&c<180?[g,g+l,g+x,m]:180<=c&&c<240?[g,g+x,g+l,m]:240<=c&&c<300?[g+x,g,g+l,m]:[g+l,g,g+x,m]},G.vc=function(c,l,g){$[n("f90d1e58")](c)[n("d124326d39")](l)[n("2bb84270ca")](g)},G.aq=function(c,l,g,m){var x={};x[n("470c30caae")]=n("79adbef8"),x[n("2eca82ad")]=c,(c={})[n("b15056974549d99bdc7e429c58")]=n("dbedafbc3ee903a785f280a4"),c[n("d925357c2f21b862842110")]=function(w){w[n("8af729f3e96b3862fdce24d0e2463a45ff")]&&m(w[n("e774863b0f7909")]/w[n("2c09018b516d")]*100)},x[n("9fa8c96065bd407ac3ab")]=c,$[n("bc6c94eeb8")](x)[n("075e6813e7")](l)[n("9c89b101c5")](g)},G.Sb=function(){return Date.now()},G.xc=function(c,l){for(var g in c)c.hasOwnProperty(g)&&l(g,c[g])},G.bq=function(c){for(var l=c.length-1;0<l;l--){var g=Math.floor(Math.random()*(l+1)),m=c[l];c[l]=c[g],c[g]=m}return c},b.Sh=Fi(n("7d2f8d42600bc141e310624a")),b.tg=Fi(n("d10632703410be6dae")),b.Zo=(t=n("e77f8c2e22721966"),Hi.prototype.G=function(){var c=this.zd[t](this.ta);return this.ta+=1,c},i=n("4076e7e70dfbf2267e"),Hi.prototype.ya=function(){var c=this.zd[i](this.ta);return this.ta+=2,c},r=n("b94d5e987440cbc3f3"),Hi.prototype.zg=function(){var c=this.zd[r](this.ta);return this.ta+=4,c},s=n("d1253670132ab869ad7969"),Hi.prototype.Bc=function(){var c=this.zd[s](this.ta);return this.ta+=4,c},Hi),b.ei=(o=n("da98f9999701d449"),Jo.prototype.pe=function(c){this.zd[o](this.ta,c),this.ta+=1},d=n("f6f4ddfdb365c83cc8"),Jo.prototype.qe=function(c){this.zd[d](this.ta,c),this.ta+=2},Jo),b.Pp=function(){},b.dc=(ka.th=function(){return new ka("",null,0,0,0,0,0,0,0,0)},ka.yo=function(c,l,g){return new ka(c,l,g[n("1f28")],g[n("bdd7")],g[n("13b3")],g[n("ac95")],g[n("52136c")],g[n("2bac54")],g[n("51b2a4")],g[n("e76881")])},ka.prototype.ig=function(){return this.Ej||(this.Bj!=null&&(this.Texture=new K({source:this.Bj,frame:new Pe(this.nb,this.ob,this.ih,this.kh)})),this.Ej=!0),this.Texture},ka.prototype.Ze=function(){this.Texture!=null&&this.Texture.eo()},ka),b.Gh=(ae.prototype.Ze=function(){for(var c=0;c<this.ng.length;c++)this.ng[c].Xp(),this.ng[c].eo();for(this.ng=[],c=0;c<this.Lh.length;c++)this.Lh[c].Ze();this.Lh=[]},ae.th=function(){var c=new ae.ve(b.La.Oa,b.La.Oa),l=new ae.we(n("a37197a5413e4ffccd3a"),[b.La.Oa],[b.La.Oa]);return new ae([],[],{},c,{},new ae.xf(b.La.Oa),{},l,{},new ae.zf("",l,c),{},new ae.Ia([b.La.Oa]),{},new ae.Ia([b.La.Oa]),{},new ae.Ia([b.La.Oa]),{},new ae.Ia([b.La.Oa]))},ae.zm=function(c,l,g,m){var x=new ae.ve(b.La.Oa,b.La.Oa);return c=new ae.we(n("1e8ad2824455825340d1"),[c],[l]),new ae([],[],{},x,{},new ae.xf(b.La.Oa),{},c,{},new ae.zf("",c,x),{},new ae.Ia([g]),{},new ae.Ia([m]),{},new ae.Ia([b.La.Oa]),{},new ae.Ia([b.La.Oa]))},ae.Cm=function(c,l,g,m){var x={};G.xc(c[n("c2b0ebb9a925cc30a9af")],function(me,he){x[me]=n("a5b3156b")+he});for(var w={},M=0;M<c[n("77db128395ed8f9c1ec9c59b60c0")].length;M++){var S=c[n("d614f300b4aaee9fbf16e4188187")][M];w[S[n("5b6539")]]=new ae.we(x[S[n("818271dd6893")]],S[n("043727a46d")].map(function(he){return l[he]}),S[n("00b62e3c73")].map(function(he){return l[he]}))}M=c[n("307219ea5ad0186c56660de5")];var M=new ae.we(x[M[n("e92a1975003b")]],M[n("6b7e0c2d8a")].map(function(me){return l[me]}),M[n("9acc30c2e9")].map(function(me){return l[me]})),O={},k=(G.xc(c[n("a1775ab15652cebbdd")],function(me,he){O[parseInt(me)]=new ae.Ia(he[n("cc7f6fecb5")].map(function(Me){return l[Me[n("7d1c9a57681ded")]]}))}),S=new ae.Ia(c[n("1a4ea5486dfa8eda4c5c935b")][n("9326f4f572")].map(function(me){return l[me[n("aac909dac7501e")]]})),{}),L=(G.xc(c[n("5e824f84161b601c0583")],function(me,he){k[parseInt(me)]=new ae.Ia(he[n("a655094acf")].map(function(Me){return l[Me[n("1251b1427fc8b6")]]}))}),new ae.Ia(c[n("f42859b28ca16f25972351b86e")][n("1f3240e1c6")].map(function(me){return l[me[n("470a2cdda213a3")]]}))),X={},W=(G.xc(c[n("a0198387e09c8503")],function(me,he){X[parseInt(me)]=new ae.Ia(he[n("3cef1f7c25")].map(function(Me){return l[Me[n("5534b26fb02535")]]}))}),new ae.Ia(c[n("e29bc581b319c317858cc2")][n("1241b55673")].map(function(me){return l[me[n("1bbe7869f6bfcf")]]}))),Y={},V=(G.xc(c[n("b94d578d4e5dda83855b2080")],function(me,he){Y[parseInt(me)]=new ae.Ia(he[n("0d9ceeb3f4")].map(function(Me){return l[Me[n("be3de536abbcea")]]}))}),new ae.Ia(c[n("4eb87c802110711603897387351c72")][n("9645395aff")].map(function(me){return l[me[n("a80b8f9cc59280")]]}))),be={},oe=(G.xc(c[n("1f204ee0d73dcaf863314aee")],function(me,he){me=parseInt(me),be[me]=new ae.ve(l[he[n("075a6809ee")]],l[he[n("f4225aa88f")]])}),c[n("e3e48aa413f106b4bef286b000d71f")]),oe=new ae.ve(l[oe[n("e5b406eb0c")]],l[oe[n("54c2fa482f")]]),Re={},Lt=(G.xc(c[n("3eae62b82e3a702c02be6bad")],function(me,he){me=parseInt(me),Re[me]=new ae.xf(l[he[n("6376042582")]])}),c[n("f7499b0317450917aa5e6a1cec43eb")]),Lt=new ae.xf(l[Lt[n("57ea38b9be")]]),ot={};return G.xc(c[n("1f2444f3ce10ccf553")],function(me,he){me=parseInt(me),ot[me]=new ae.zf(he[n("2c09078b5c64")],new ae.we(x[he[n("2ecc9ba85c")][n("1f2053fbce31")]],null,he[n("a96940b543")][n("a1754fbb52")].map(function(Me){return l[Me]})),new ae.ve(null,l[he[n("33945a54c381d644")][n("30661eec43")]]))}),c=new ae.zf({},M,oe),new ae(g,m,be,oe,Re,Lt,w,M,ot,c,O,S,k,L,X,W,Y,V)},ae.prototype.Fe=function(c){return this.Ik.hasOwnProperty(c)?this.Ik[c]:this.gp},ae.prototype.Gf=function(c){return this.Qk.hasOwnProperty(c)?this.Qk[c]:this.op},ae.prototype.qj=function(c){return this.Xk.hasOwnProperty(c)?this.Xk[c]:this.yp},ae.prototype.sj=function(c){return this.cl.hasOwnProperty(c)?this.cl[c]:this.Ep},ae.prototype.xj=function(c){return this.ti.hasOwnProperty(c)?this.ti[c]:this.Fl},ae.prototype.ah=function(c){return this.jl.hasOwnProperty(c)?this.jl[c]:this.rl},ae.prototype.kn=function(c){return this.vk.hasOwnProperty(c)?this.vk[c]:this.Qo},ae.prototype.fh=function(c){return this.Dk.hasOwnProperty(c)?this.Dk[c]:this.$o},ae.zf=function(c,l,g){this.un=c,this.gh=l,this.Bn=g},ae.we=function(c,l,g){this.lh=c,this.Na=l,this.Xd=g},ae.Ia=function(c){this.Na=c},ae.ve=function(c,l){this.Na=c,this.Xd=l},ae.xf=function(c){this.Na=c},ae),b.La=(aa.prototype.sa=async function(){var c=(await ge.load(n("0c787c99798c3304711673d55e9e3f0a6e403f8d499d0b075d5b16994f"))).source,m=(this.Nn=new b.dc(n("73491401994d8d351a4e1402964478"),c,158,86,67,124,148,63.5,128,128),this.Rn=new b.dc(n("9b3af8e2703348e6da0bc4f44e3440eed2"),c,158,4,87,74,203,63.5,128,128),new b.dc(n("6fc61d878bfb94841ec4109e82"),c,4,4,146,146,63.5,63.5,128,128),(await ge.load(n("2a1ede7b47d291a65730d17770a39daf1727932255e170bf25"))).source),c=new b.dc(n("29fece3af2fb560542"),m,0,0,42,80,75,64,128,128),l=new b.dc(n("df7484343c790a239370"),m,46,0,20,48,109,63,128,128),g=new b.dc(n("76635d6f25f857e41050277dede4"),m,70,0,32,32,0,0,0,0),m=new b.dc(n("7ca9db29df22a9baea8aa436fb3c"),m,46,52,64,64,0,0,0,0);c=b.Gh.zm(m,g,c,l),this.Ma=new b.$j({},c),this.gc=this.qh=-1e4,(c=b.ic.document.createElement(n("0a78ad7378fea3"))).width=80,c.height=80,this.vh={pd:c,kk:c.getContext(n("3efd64"),{willReadFrequently:!0}),af:new K({source:Fe.from(c)})},this.tb=null,this.Mh=[]},aa.Oa=b.dc.th(),aa.prototype.C=function(){},aa.prototype.Ph=function(c,l,g){var m=this,x=this.Ma.zk();if(0<x&&G.Sb()-this.qh<12e5)c?.();else{if(this.tb!=null&&!this.tb.Tb){if(G.Sb()-this.qh<3e5)return void(c!=null&&c());this.tb.ap(),this.tb=null}var w=new b.ep(x);w.hp(function(S,M){w===m.tb&&g!=null&&g(S,M)}),w.kp(function(S){w===m.tb&&l!=null&&l(S)}),w.pp(function(){w===m.tb&&l!=null&&l(Error())}),w.up(function(){w===m.tb&&c!=null&&c()}),w.zp(function(S){if(w===m.tb)m.gc=G.Sb(),m.tb=null,m.Ma.V().Ze(),m.Ma=S,c?.(),m.Lp();else try{S.V().Ze()}catch{}}),w.sl(),this.qh=G.Sb(),this.tb=w}},aa.prototype.se=function(){return 0<this.Ma.zk()},aa.prototype.Hg=function(c){this.Mh.push(c)},aa.prototype.Lp=function(){for(var c=0;c<this.Mh.length;c++)this.Mh[c]()},aa.prototype.V=function(){return this.Ma.V()},aa),b.am=(ni.prototype.Zb=function(c){return this.yf[c]},ni.sm=(ec.prototype.Ce=function(c,l){for(var g=0;g<this.dd.length;g++)if(this.dd[g].cj===c)throw Error();return this.dd.push(new ni.Lm(c,l)),this},ec.prototype.Pm=function(){for(var c=0,l=0;l<this.dd.length;l++)c+=this.dd[l].Hf;for(var l={},g=0,m=0;m<this.dd.length;m++){var x=this.dd[m];x.Hf/=c,x.Wg=g,x.Yg=g+x.Hf,g=x.Yg,l[x.cj]=x}return new ni(l)},ec),ni.Lm=(Lf.prototype.Jf=function(c){return this.Wg+(this.Yg-this.Wg)*c},Lf),ni),b.bh=(Sa.Sn=797,Sa.prototype.Ij=function(c,l,g){var m=new f(l,g);return l.L.zIndex=.001*(2*(797-c)+4),g.L.zIndex=.001*(2*(797-c)-2+3),m},Sa.prototype.$d=function(c,l,g,m,x,w,S,M){var O=g.Na;if(c=(c===b.Oc.be?l.gh:g).Xd,0<O.length&&0<c.length)for(l=0;l<this.o.length;l++)this.o[l].O.uc(O[l%O.length]),this.o[l].id.uc(c[l%c.length]),this.o[l].O.$e(M),this.o[l].id.$e(M);this.P.$d(m,x,w,S)},Sa.prototype.wj=function(c){E.l.U.S.oa=c;var l=E.B.V().Fe(c);if(c=l.Na,l=l.Xd,c.length&&l.length)for(let g=0;g<this.o.length;++g)this.o[g].O.uc(c[g%c.length]),this.o[g].id.uc(l[g%l.length])},Sa.prototype.Nl=function(c){E.l.U.S.eb=c,c=E.B.V().ah(c),this.P.sf(.004,this.P.Tc,c.Na)},h=(()=>{class c extends fe{constructor(){super(),this.sortableChildren=!0,this.td=[],this.vd=[],this.wd=[],this.Tc=[],this.gf=new fe,this.kf=[];for(var g=0;g<4;g++){var m=new b.nc;m.uc(E.B.Nn),this.gf.addChild(m.L),this.kf.push(m)}this.gf.zIndex=.0011,this.addChild(this.gf),this.Jk(),this.Yc=new b.nc,this.Yc.uc(E.B.Rn),this.Yc.L.zIndex=.001,this.addChild(this.Yc.L),this.Rk()}}return c.prototype.$d=function(l,g,m,x){this.sf(.002,this.td,l.Na),this.sf(.003,this.vd,g.Na),this.sf(.004,this.Tc,x.Na),this.sf(.005,this.wd,m.Na)},c.prototype.sf=function(l,g,m){for(;m.length>g.length;){var x=new b.nc;g.push(x),this.addChild(x.L)}for(;m.length<g.length;)g.pop().Bd();for(x=0;x<m.length;x++){l+=1e-4;var w=g[x];w.uc(m[x]),w.L.zIndex=l}},c.prototype.ja=function(l,g,m,x){for(this.visible=!0,this.position.set(l,g),this.rotation=x,l=0;l<this.td.length;l++)this.td[l].Wb(m);for(l=0;l<this.vd.length;l++)this.vd[l].Wb(m);for(l=0;l<this.wd.length;l++)this.wd[l].Wb(m);for(l=0;l<this.Tc.length;l++)this.Tc[l].Wb(m)},c.prototype.za=function(){this.visible=!1},c.prototype.tl=function(l,g){this.gf.visible=!0,g/=1e3;for(var m=1/this.kf.length,x=0;x<this.kf.length;x++){var w=1-(g+m*x)%1;this.kf[x].L.alpha=1-w,this.kf[x].Wb(l*(.5+4.5*w))}},c.prototype.Jk=function(){this.gf.visible=!1},c.prototype.Cl=function(l,g,m){this.Yc.L.visible=!0,this.Yc.L.alpha=G.Q(this.Yc.L.alpha,l.uf?.9:.2,m,.0025),this.Yc.Wb(g)},c.prototype.Rk=function(){this.Yc.L.visible=!1},c})(),Sa.prototype.Va=function(c){return this.Lj+this.Nj*Math.sin(.3141592653589793*c-this.pi)},Sa.prototype.Ol=function(c,l,g,m){var x=2*c.xb,w=c.ia,S=c.$a,M=4*S-3,O=(this.pi=l/400*3.141592653589793,this.Lj=1.5*x,this.Nj=.15*x*c.Ig,w[0]),k=w[1];m(O,k)?(W=w[2],Y=w[3],V=w[4],be=w[5],L=Math.atan2(be+2*k-3*Y,V+2*O-3*W),this.P.ja(O,k,x,L),this.o[0].ja(O,k,x,this.Va(0),L),this.o[1].ja(.64453125*O+.45703125*W+-.1015625*V,.64453125*k+.45703125*Y+-.1015625*be,x,this.Va(1),f.ab(this.o[0],this.o[2])),this.o[2].ja(.375*O+.75*W+-.125*V,.375*k+.75*Y+-.125*be,x,this.Va(2),f.ab(this.o[1],this.o[3])),this.o[3].ja(.15234375*O+.94921875*W+-.1015625*V,.15234375*k+.94921875*Y+-.1015625*be,x,this.Va(3),f.ab(this.o[2],this.o[4]))):(this.P.za(),this.o[0].za(),this.o[1].za(),this.o[2].za(),this.o[3].za());for(var L,X,W,Y,V,be,oe=4,Re=2,Lt=2*S-4;Re<Lt;Re+=2)m(O=w[Re],k=w[Re+1])?(L=w[Re-2],X=w[Re-1],W=w[Re+2],Y=w[Re+3],V=w[Re+4],be=w[Re+5],this.o[oe].ja(O,k,x,this.Va(oe),f.ab(this.o[oe-1],this.o[oe+1])),oe++,this.o[oe].ja(-.06640625*L+.84375*O+.2578125*W+-.03515625*V,-.06640625*X+.84375*k+.2578125*Y+-.03515625*be,x,this.Va(oe),f.ab(this.o[oe-1],this.o[oe+1])),oe++,this.o[oe].ja(-.0625*L+.5625*O+.5625*W+-.0625*V,-.0625*X+.5625*k+.5625*Y+-.0625*be,x,this.Va(oe),f.ab(this.o[oe-1],this.o[oe+1])),oe++,this.o[oe].ja(-.03515625*L+.2578125*O+.84375*W+-.06640625*V,-.03515625*X+.2578125*k+.84375*Y+-.06640625*be,x,this.Va(oe),f.ab(this.o[oe-1],this.o[oe+1]))):(this.o[oe].za(),oe++,this.o[oe].za(),oe++,this.o[oe].za(),oe++,this.o[oe].za()),oe++;for(m(O=w[2*S-4],k=w[2*S-3])?(L=w[2*S-6],X=w[2*S-5],W=w[2*S-2],Y=w[2*S-1],this.o[M-5].ja(O,k,x,this.Va(M-5),f.ab(this.o[M-6],this.o[M-4])),this.o[M-4].ja(-.1015625*L+.94921875*O+.15234375*W,-.1015625*X+.94921875*k+.15234375*Y,x,this.Va(M-4),f.ab(this.o[M-5],this.o[M-3])),this.o[M-3].ja(-.125*L+.75*O+.375*W,-.125*X+.75*k+.375*Y,x,this.Va(M-3),f.ab(this.o[M-4],this.o[M-2])),this.o[M-2].ja(-.1015625*L+.45703125*O+.64453125*W,-.1015625*X+.45703125*k+.64453125*Y,x,this.Va(M-2),f.ab(this.o[M-3],this.o[M-1])),this.o[M-1].ja(W,Y,x,this.Va(M-1),f.ab(this.o[M-2],this.o[M-1]))):(this.o[M-5].za(),this.o[M-4].za(),this.o[M-3].za(),this.o[M-2].za(),this.o[M-1].za()),this.Y===0&&0<M&&this.ma.addChild(this.P),0<this.Y&&M==0&&G.Ta(this.P);this.Y<M;)this.ma.addChild(this.o[this.Y].O.L),this.ma.addChild(this.o[this.Y].id.L),this.Y+=1;for(;this.Y>M;)--this.Y,this.o[this.Y].id.Bd(),this.o[this.Y].O.Bd();m=c.qa[b.De.Dm],this.o[0].Df()&&m!=null&&m.Aa?this.P.tl(x,l):this.P.Jk(),l=c.qa[b.De.Um],this.o[0].Df()&&l!=null&&l.Aa?this.P.Cl(c,x,g):this.P.Rk()},zi.prototype.ja=function(c,l,g,m,x){this.O.Qa(!0),this.O.If(c,l),this.O.Wb(g),this.O.yj(x),this.id.Qa(!0),this.id.If(c,l),this.id.Wb(m),this.id.yj(x)},zi.prototype.za=function(){this.O.Qa(!1),this.id.Qa(!1)},zi.prototype.Df=function(){return this.O.Df()},zi.ab=function(c,l){return Math.atan2(c.O.L.position.y-l.O.L.position.y,c.O.L.position.x-l.O.L.position.x)},f=zi,Sa),b.De=(as.Um=0,as.Dm=2,as.vn=6,as),b.$j=(b.Gh.th(),tc.prototype.zk=function(){return this.hb[n("92d131d3ff543146f4")]},tc.prototype.V=function(){return this.Jn},tc),b.ep=(_e.yc={wk:n("30310ab3"),Ak:n("4506bfc9"),Xo:n("498ab34e"),Hk:n("2687908a"),Kk:n("5d7ea724")},_e.Zn=1e5,_e.vg=new b.am.sm().Ce(_e.yc.wk,1).Ce(_e.yc.Ak,10).Ce(_e.yc.Xo,50).Ce(_e.yc.Hk,15).Ce(_e.yc.Kk,5).Pm(),_e.prototype.zp=function(c){this.ak=c},_e.prototype.up=function(c){this.ck=c},_e.prototype.kp=function(c){this.ek=c},_e.prototype.pp=function(c){this.gk=c},_e.prototype.hp=function(c){this.ik=c},_e.prototype.ap=function(){this.rd=!0},_e.prototype.sl=function(){this.mk||(this.mk=!0,this.rd?this.qf():this.qp())},_e.prototype.qp=function(){var c=this;this.rd?this.qf():$.ajax({type:n("e8fe6f6f"),url:If+n("928666e3f25e3648f7c23f88ac690142d1d610c683052e4bcfcd05cec7501e6fd8b01bab"),[n("767f507b3ce259e11a7c")]:{onprogress:function(l){var g;l.lengthComputable&&(g=_e.yc.wk,c.Ag(g,_e.vg.Zb(g).Jf(l.loaded/l.total)))}}}).fail(function(){c.di()}).done(function(l){l<=c.Vj?c.dl():c.Fp()})},_e.prototype.Fp=function(){var c=this;this.rd?this.qf():$.ajax({type:n("80168787"),url:C.k+n("fdcb4df6e0826a9137b0a28bcf8b2e8f498ceaa7f87167b66c"),[n("ef589910354d100a935b")]:{onprogress:function(l){var g;l.lengthComputable&&(g=_e.yc.Ak,c.Ag(g,_e.vg.Zb(g).Jf(l.loaded/l.total)))}}}).fail(function(){c.di()}).done(async function(l){if(l[n("1bbe7878f6a3c87d4d")]<=c.Vj)c.dl();else if((m=await fetch(C.k+n("8074f095e5a5af72ba1fefe8caaceb6cd40fb794e680b10eeb1da892"))).ok){if(ts(l,m=JSON.parse(n(await m.text()))),C.$){if(U["1ad"]&&(m=await fetch(n("72eb40f106741d3a3bae0ecb5b3d0670f2e36ae2e9652578fefe27f4e0787e42fdce7197d0462840bf991a88ad69111491f70ad0d1450d5ec3c818cfd7"))).ok){var g,m=JSON.parse(n(await m.text())),x={};for(g of[n("9642214ce9ef35ceea"),n("6e985c6001f051f6326e5b7d"),n("9b24fcfa5b3942e6"),n("899764c97996cba9f276")])x[g]=Object.entries(m[g]).reduce((O,[k,L])=>(L[n("51abb7")]+=2e4,L[n("9fb2c06146")]=L[n("5e8d418207")].map(X=>(X[n("2c0f0b98596e1c")]=n("c2b2db")+X[n("e44743d081d644")],X)),O[parseInt(k)+2e4]=L,O),{});x[n("7032d9aa1a84c4351930fea21fb9")]=m[n("1d7df4b9cf5351a6446fe3b1ca6e")].map(O=>(O[n("2a5288")]+=3e4,O[n("306313f051")]=O[n("2c1f0f8c55")].map(k=>n("7fd1de")+k),O)),x[n("8d0a6a3865f7e121d1ef743c")]=Object.entries(m[n("1d7afaa8d56751b1617fc4ac")]).reduce((O,[k,L])=>(O["a_"+k]=L,O),{}),x[n("92d131c2ff48366df3c828")]=Object.entries(m[n("4cefeb78394efce73dc6e2")]).reduce((O,[k,L])=>(L[n("1f2444ead721d7f3")]=n("92c20b")+L[n("652282609d2f1979")],O["a_"+k]=L,O),{}),ts(l,x)}if(U["1aa"]&&(g=await fetch(n("87d0fd8e7bcf28cdcee5a34436f65371f8baf47d74be716ab1b9ce371192406ed3bdc76942b3433b9da6d55b5d85584fd4cd8b6c5a9f4e4bcb83e40005862051ae8bbd4832"),{method:"POST"})).ok){for(var w in m=await g.json(),(g={})[n("9ace25c8ed6b0952d6")]=m[n("0117fa51f6326e5b7d")],g[n("dda933f112a186e7a1bf04ec")]=m[n("5b6b312fac638421277d0622")],g[n("b30cd4d273015ade")]=m[n("9c85bf1be4188187")],g[n("1f3d4ee7d73ce1ff442c")]=m[n("c795a64f3f940957ac74")],g[n("a2c101d2cf58067dc3d818")]=m[n("c5c4221f20d5a538a4dd3b")],g[n("21e1c83dcbd7552a48e3ef35ceea")]=m[n("96543340f4ea2edfff562458c1c7")],g[n("ea88c7948032d1f1")]=m[n("a6440350c4f60dcd")],g[n("97bcfc726fb96f6bdbb9c266")]=m[n("3552d290cd5f49897947dc84")],g[n("2d69ca81c36f5294")]=m[n("5e984590103e4505")],m=g[n("7b5818168b457317c75de602")],n("2a48875440fe82b3533ab02c55b3"),m)x=m[w],x[n("7d0d8a43751dee")]&&(x[n("6e96434207f040ea1b")]=!0,x[n("e8cb4f578d4947c9959153379c")]=x[n("1251b11477d3b1df7f7bbd5976")]);ts(l,C.Sd=g)}if(U["1ab"]&&(w=await fetch("https://timmapwormate.com/store",{body:'{"country":"gb","v":"v2"}',method:"POST"})).ok){for(var S in g=await w.json(),(w={})[n("7e6a3974f1d72df6f2")]=g[n("f8ac432e8f0957ac74")],w[n("bf97ad53308720458391aa4e")]=g[n("e93d077d1e2d8a53b50b1050")],w[n("cc756feb94c87157")]=g[n("0a73ad694af6b3d5")],w[n("669a478c1e1368140d8b")]=g[n("c795a64f3f940957ac74")],w[n("bb1ed8c9561f2ff6aa17b1")]=g[n("59b8beebb4a131d408b197")],w[n("074b6213e57dff0c6e3955ebf030")]=g[n("d8da7142b26c6cdd81c8665a8741")],w[n("0101e85deb3b6648")]=g[n("719198cd9bab16d8")],w[n("882dafa3f8a8bc3ad408b197")]=g[n("77dc1c928fd98f8b3bd9e286")],w[n("a5e142395bd7ca2c")]=g[n("272f4cfbd911ccee")],m=w[n("d93e3e74293bad75a53b0060")],g=w[n("a002899acab49405c900ae92cf89")],m)x=m[S],x[n("685adfc818d2c3")]&&(x[n("8e762362e7d020cafb")]=!0,x[n("2a4989514fcb99b7571395315e")]=n("16cfacdd6a58f91e5f8ad2f70701a2414fda85d85a4c834f43de84a41c209b28")+x[n("0c2f2bb371953b157135379370")]);for(var M in g)S=g[M],S[n("059fe3")]=S[n("d44c72")]+3e4;ts(l,w)}}c.Mp(l)}else c.di()})},_e.prototype.Mp=function(c){if(U["1e"])try{var l=JSON.parse(U["1e"]);if(l&&l[n("1245bd4973")]){c[n("aacf09c5da4a0224f6aa17b1")][n("92d420d7c9442d5aeec431f2ec40")]={[n("baa20f8ecb3cf43eaf")]:!0,[n("0261a17967e3a1ef6f4bad6966")]:l[n("6fc6188e96")]};for(var g=[],m=0;m<9;m++)g.push(n("86603c6bd5f839eefa703d7ee1c83dcbc9")+(8-m)),c[n("43862051ae97a77e229f39")][n("5fe715a0bcf790a513f7048598f784b030")+m]={[n("f277d17d82f2caec")]:n("b6300c3be5a809beca20ed0eb0bc"),[n("ae47")]:175*m,[n("e8c0")]:0,[n("51b5")]:170,[n("9009")]:170};c[n("e121087d0b17956a88232f750e2a")].push({[n("ce36f4")]:19999,[n("71968ad490")]:1,[n("a17556b15662")]:!1,[n("f3ca9a8815dd008b99c098")]:!1,[n("2a4b9e544dda")]:0,[n("af90c34b50817743d187cb4f")]:0,[n("042534be65bc")]:"c_blood",[n("57ea38b9be")]:g,[n("a81e8694db")]:l[n("798d97c38a")]}),c[n("b317decf592f4bc5ce1cfcdc4d1138f6aa17b1")].push({[n("ea92c8")]:n("fdad0ac3f59d6e"),[n("f42b57aa9d")]:{[n("7fd5ef")]:n("26f49dca5e5481")},[n("9b20f4fd6b")]:[19999]})}}catch{}if(U["1j"])try{var x,w=JSON.parse(U["1j"])[n("3f1420c6a2")][0];w&&w[n("7e69297de7")]&&(c[n("46a36da13e2e7e380ab67395")][n("21e5d726faf5522b5df5c603dafb4e12")]={[n("948ca524ed1aae84f1")]:!0,[n("da99f981bf1bc90787a3c5818e")]:w[n("b2a51da9d3")]},c[n("d13036633c29b94cb0292f")][n("29eddf2ef2fd5a1345cdde3bc2c3561a669a")]={[n("ec494bc784b44026")]:n("a96d5fae727dda93c54d5ebb4243d69a"),[n("818a")]:w[n("9ad3")],[n("4ce4")]:w[n("9ad2")],[n("dbfb")]:w[n("41c5")],[n("2c15")]:w[n("2891")],[n("21e2db")]:w[n("97b8e1")],[n("d293ed")]:w[n("1a5ba5")],[n("0f3079")]:130,[n("a00195")]:130},x=w[n("569361993f")].toLowerCase(),c[x+n("b7acd0494f")][n("7ab205b4")]={[n("9b3cefe77c35")]:0,[n("997a69a57e6bddb5c77d51b1")]:0,[n("4ebd719237")]:[{[n("a7aacc7d42b343")]:n("a2c410c7f9541d4aded401e2d95a1133edf3")}]},c[x+n("0245a5676ff6a6ed4b69be7c77")].push([999]))}catch{}var S=this;if(this.rd)this.qf();else{var M,O=[],l=[],g=[];for(M in c[n("8aef29e5fa6a2244d6ca37d1")])c[n("3cf91b773464f0f600fce563")].hasOwnProperty(M)&&(m=c[n("0a6fa9657aeaa2c4564ab751")][M],w=m[n("c95338bf384dbb6fbc")],x=m[n("64c7c35b094dc3cd09edcf4b18")],w=w?x:If+x,x=m[n("fd8816dce4a16ace60")],m=m[n("fefca8f03026f2")],m=new _e.ul(M,w,x,m),O.push(m),l.push(m),g.push(w),ge.add({[n("2577cbb1c869")]:w,[n("4eac6282")]:w}));ge.load(g,function(X){var W=_e.yc.Hk;S.Ag(W,_e.vg.Zb(W).Jf(+X))}).then(X=>{O.forEach(function(W){W.texture=X[W.Tl]}),S.Pl(c,O)})}},_e.prototype.Pl=function(c,l){var g,m,x,w=this;this.rd?this.qf():(m={},x=0,function S(){x<l.length?(g=l[x++],m[g.T]=new b.gm(g.texture,g.texture.source),S()):G.ha(function(){return w.lm(c,m)},0)}())},_e.prototype.lm=function(c,l){var g=this,m={},x=0,w=Object.values(c[n("a7aacc7d42b3435ac683c5")]).length,S=(G.xc(c[n("ff426415ea5beb326e5b7d")],function(k,L){L=b.dc.yo(L[n("ddba3ae815a791f1")]+n("67bd5a9b")+k,l[L[n("b6331d31cebe0ea8")]].af,L),m[k]=L,++x%10==0&&(k=_e.yc.Kk,g.Ag(k,_e.vg.Zb(k).Jf(x/w)))}),Object.values(l).map(function(k){return k.af})),M=Object.values(m),O=new b.$j(c,b.Gh.Cm(c,m,S,M));G.ha(function(){return g.tm(O)},0)},_e.ul=function(c,l){this.T=c,this.Tl=l},_e.prototype.tm=function(c){var l;this.Tb?c.V().Ze():(this.Tb=!0,l=this,G.ha(function(){return l.ak(c)},0))},_e.prototype.dl=function(){var c;this.Tb||(this.Tb=!0,c=this,G.ha(function(){return c.ck()},0))},_e.prototype.di=function(){var c,l=Error();this.Tb||(this.Tb=!0,c=this,G.ha(function(){return c.ek(l)},0))},_e.prototype.qf=function(){var c;this.Tb||(this.Tb=!0,c=this,G.ha(function(){return c.gk()},0))},_e.prototype.Ag=function(c,l){var g;this.Tb||this.rd||(g=this,G.ha(function(){return g.ik(c,l)},0))},_e),b.Rp={},b.Fm=(Nf.prototype.C=function(){},Nf),b.I=(St.Oi=n("f91d16731e019143641cf76bf602664c6c"),St.Ri=n("33935879c480d65d649c514fc695b36d2d952853b4"),St.Ui=n("a7afc44546a95e77ccbfd44c52865943d3"),St.Zi=n("d294f9baa501e036bf85fd8fb20ac4"),St.Ng=n("a80e87a4cd9e8d10c5ef865cc07c86e2"),St.fj=n("0d89e29ff6637ea14a6bf8acfc"),St.jj=n("e3e3888909f10ab185fd80bb"),St.mj=n("e8ce47649f5647d1"),n("9b29c4df7b267bfbc923f6ce120f47ca9a37e0f1595540f7e612c6e1070377c08b58d19a654108fef636f2fa0c172ecdfc1fa4ce16eb33ae90c586950ebf3ffd9d"),St.tj=n("0f377cdde02cf4f4722c"),St.Ab=function(c,l){try{window.localStorage.setItem(c,l)}catch{}},St.ec=function(c){try{return window.localStorage.getItem(c)}catch{return""}},St),u=[[-28.06744,64.95936],[-10.59082,72.91964],[14.11773,81.39558],[36.51855,81.51827],[32.82715,71.01696],[31.64063,69.41897],[29.41419,68.43628],[30.64379,67.47302],[29.88281,66.76592],[30.73975,65.50385],[30.73975,64.47279],[31.48682,63.49957],[32.18994,62.83509],[28.47726,60.25122],[28.76221,59.26588],[28.03711,58.60833],[28.38867,57.53942],[28.83955,56.2377],[31.24512,55.87531],[31.61865,55.34164],[31.92627,54.3037],[33.50497,53.26758],[32.73926,52.85586],[32.23389,52.4694],[34.05762,52.44262],[34.98047,51.79503],[35.99121,50.88917],[36.67236,50.38751],[37.74902,50.51343],[40.78125,49.62495],[40.47363,47.70976],[38.62799,46.92028],[37.53193,46.55915],[36.72182,44.46428],[39.68218,43.19733],[40.1521,43.74422],[43.52783,43.03678],[45.30762,42.73087],[46.99951,41.98399],[47.26318,40.73061],[44.20009,40.86309],[45.35156,39.57182],[45.43945,36.73888],[35.64789,35.26481],[33.13477,33.65121],[21.47977,33.92486],[12.16268,34.32477],[11.82301,37.34239],[6.09112,38.28597],[-1.96037,35.62069],[-4.82156,35.60443],[-7.6498,35.26589],[-16.45237,37.44851],[-28.06744,64.95936]],v5={pn:function(c,l){for(var g=!1,m=u.length,x=0,w=m-1;x<m;w=x++)u[x][1]>c!=u[w][1]>c&&l<(u[w][0]-u[x][0])*(c-u[x][1])/(u[w][1]-u[x][1])+u[x][0]&&(g=!g);return g}},b.wn=(()=>{function c(x,w){var S=w?(w=1.3,15554111):(w=1.1,16044288);return new m(x,S,!0,.5,w,.5,.7)}function l(x,w,S){return((255*x&255)<<16)+((255*w&255)<<8)+(255*S&255)}class g extends fe{constructor(){super(),this.R=[],this.Wd=0}}g.prototype.En=function(x){var w,S;this.Wd+=x,1<=this.Wd&&(S=Math.floor(this.Wd),this.Wd-=S,x=0<S?"+"+Math.floor(S):S<0?"-"+Math.floor(S):"0",w=Math.min(1.5,.5+S/600),S=S<1?"0xFFFFFF":S<30?l(1-(S=(S-1)/29)+.96*S,1-S+.82*S,1-S+0*S):S<300?l(.96*(1-(S=(S-30)/270))+.93*S,.82*(1-S)+.34*S,0*(1-S)+.25*S):S<700?l(.93*(1-(S=(S-300)/400))+.98*S,.34*(1-S)+0*S,.25*(1-S)+.98*S):16318713,x=new m(x,S,!0,.5,w,Math.random(),1+.5*Math.random()),this.addChild(x),this.R.push(x))},g.prototype.ml=function(x){x?(C.oi(C.cg+1),C.Ra&&C.Ra.send(Bi(JSON.stringify({[n("baaa")]:0}))),x=c(G.N("index.game.floating.headshot"),!0),this.addChild(x),this.R.push(x),(C.cg%10?(Mt[U["1c"]].pause(),Mt[U["1c"]]):S5).play()):(C.lj(C.Ih+1),x=c(G.N("index.game.floating.wellDone"),!1),this.addChild(x),this.R.push(x))},g.prototype.Ga=function(x,w){x=(S=E.h.D.F).la.width;for(var S=S.la.height,M=0;M<this.R.length;){var O=this.R[M];O.ph+=w/2e3*O.ch,O.ae+=w/2e3*O.lo,O.alpha=.5*Math.sin(3.141592653589793*O.ae),O.scale.set(O.ph),O.position.x=x*(.25+.5*O.ro),O.position.y=O.uo?S*(1-.5*(1+O.ae)):S*(1-.5*(0+O.ae)),1<O.ae&&(G.Ta(O),this.R.splice(M,1),M--),M++}};var m=class extends je{constructor(x,w,S,M,O,k,L){super({text:x,style:{fill:w,fontFamily:"PTSans",fontSize:36}}),this.anchor.set(.5),this.uo=S,this.ph=M,this.ch=O,this.ro=k,this.ae=0,this.lo=L}};return g})(),b.gm=function(c,l){this.af=l},b.Oc={hk:0,be:16},b.ee=(ac.hf=0,ac.prototype.Ek=function(){return 1.02*this.Sc},ac),b.bp=(()=>{function c(){}c.prototype.sa=async function(w){var S=this;this.Fc=w,this.pd=w.get()[0],this.la=(w={[n("c2b0e5bbb036fb")]:S.pd,[n("1bae7c6df4b7d37d56ba4155c8b4c668")]:0,[n("ea9ac289871edce89370")]:!0,[n("1576e5adff6f69a9736dfa")]:n(U["1a"]===1?"13b37064f0b8ec":"59bdbeeebaa2")},await Xo(w)),this.mb=new fe,this.mb[n("bddd500235d3a118a0f52f1125deb919a3")]=!0,this.Wc=Math.floor(Math.random()),this.Ad=this.Ok=0,this.yg=15,this.Yk=.5,this.Bg=0,this.oe=new b.Gp,this.ki=new We,this.tf=new fe,this.te=new fe,this.te[n("997974be696ffdbcc4514bbd4972d5bdc7")]=!0,this.vf=new fe,this.ea=new fe,this.ea[n("6b6f022c9b41930e16671d0f9b4c8b0f15")]=!0,this.jb=new fe,this.W=new g,this.W.position.x=60,this.W.position.y=60,this.Dd=new m,this.Ba=new x,this.Ae=new b.wn,this.bc=new we,this.Pa={x:0,y:0},this.Fi=this.Aj=this.wi=0,this.C()},c.prototype.C=function(){this.la.background.color=0,this.oe.Vd[n("bc77b7e1a4f47a")]=10,this.mb[n("ef419506304c1c0a93")](this.oe.Vd),this.ki[n("4ce7c7713444ea")]=20,this.mb[n("23b54172e4b0c0764f")](this.ki),this.tf[n("d5bc1ee63dafa3")]=5e3,this.mb[n("241402936b91031748")](this.tf),this.te[n("c0eb4b7da0707e")]=5100,this.mb[n("07596d1ec854e4126b")](this.te),this.vf[n("7198baca91830f")]=1e4,this.mb[n("49dbaf188ed626ec35")](this.vf),this.bc[n("a2c701cdd2421a5c")]=E.Te.$i,this.bc[n("471927d9a313bf")][n("7032d7b7")](.5),this.bc[n("a2c92ddbc25210")]=1,this.ea[n("3cec1a6b0379ebff20")](this.bc),this.jb[n("2c1c028f5860")]=.6,this.jb[n("8ca78731f404aa")]=2,this.ea[n("1ece84d5615b8d5942")](this.jb),this.Ae[n("2c07279154640a")]=3,this.ea[n("996b7fa85e66f6bcc5")](this.Ae),this.W[n("5527bb78b12b")]=.8,this.W[n("51b89aeab1a32f")]=4,this.ea[n("c5d7231c0ad2a210a9")](this.W),this.Dd[n("52195d0b328260")]=5,this.ea[n("f58713cc3a8292c099")](this.Dd),this.Ba[n("735e3c08934d81")]=6,this.ea[n("8cbcaa3bd309bb8ff0")](this.Ba),C.Ge=new je({[n("39dede14c9")]:n("c7c9b1"),[n("173b6df3f729")]:{[n("1a4db3436ae981dc4b5f9d")]:n("28a93e284d131d"),[n("2a5d83535aec99bb57")]:12,[n("bc6b97e3ac")]:16777215}}),C.Ge.position.x=100,C.Ge.position.y=90,this.Ve=new je({[n("b151479d5943")]:{[n("7cabd121f417a3beedb9bf")]:n("6cedfa6c112fc1"),[n("386f15e548de177525")]:12,[n("c5d02e1425")]:16777215}}),this.Ve.anchor=1,this.ea.addChild(this.Ve),this.ea.addChild(C.Ge),this.Xe=new We,this.ea.addChild(this.Xe),this.Nd=new we,this.Nd.x=10,this.pg=new je({[n("818177cd6993")]:{[n("2d78c08ec56452895c4ace")]:n("77f82db99ac28e"),[n("2c1b019144521bf951")]:12,[n("9b2af4e273")]:14599547}}),this.pg.x=60,this.gd=new fe,this.gd.x=10,this.ea.addChild(this.gd),this.ea.addChild(this.pg),this.ea.addChild(ti),this.ea.addChild(ai),(async()=>{function w(){J.ug=!1,J.Kh=!1,J.sg=!1,J.cb=-1,J.visible=!1,Ze.visible=!1,U["1f"]===1?(J.ba.texture=O[2].ba,J.ga.texture=O[2].ga,J.ba.alpha=O[2].Nc):U["1f"]===2?(J.ba.texture=O[2].ba,J.ga.texture=O[2].ga,J.ba.alpha=O[2].Nc,J.Kh=!0,J.sg=!0,J.position.x=100,J.position.y=M.offsetHeight-100,J.visible=!0,Ze.visible=!0,Ze.position.x=M.offsetWidth-100,Ze.position.y=M.offsetHeight-100):U["1f"]===3?(J.ba.texture=O[2].ba,J.ga.texture=O[2].ga,J.ba.alpha=O[2].Nc,J.Kh=!0,J.sg=!0,J.position.x=M.offsetWidth-100,J.position.y=M.offsetHeight-100,J.visible=!0,Ze.visible=!0,Ze.position.x=100,Ze.position.y=M.offsetHeight-100):U["1f"]===4?(J.ba.texture=O[0].ba,J.ga.texture=O[0].ga,J.ba.alpha=O[0].Nc):U["1f"]===5?(J.ba.texture=O[1].ba,J.ga.texture=O[1].ga,J.ba.alpha=O[1].Nc):(J.ug=!0,J.visible=!1,J.cb=-1),J.Zf()}if(this.Nd.texture=await ge.load(C.k+n("1523a58ee97f79a0746dbae2e77b4eb30024e1b6cc7b59af437fc4859f525d83")),this.Nd.scale.set(.2,.2),this.Nd.anchor.y=1,this.ea.addChild(this.Nd),Qa.any){this.ea.addChild(ii);var S,M=document.querySelector(n("16cfacc476")),O=[{ba:await ge.load(C.k+n("31878122c5d3550450c99e5efbc7521764808519aad42e142ce5fa4ce3ce21e7")),ga:await ge.load(C.k+n("a37197d0572d4bf6c23f88ac69095cc59656f3cb580a50c6de338c9f11002fd5")),Nc:1},{ba:await ge.load(C.k+n("a4d0d431d80c8897c59ecb4df6e89f649137b0ead7eb9367d952cfbdeee16c74")),ga:await ge.load(C.k+n("5246262326927a853308395f18864d9647416218099541950f241d4e408f5e66")),Nc:1},{ba:this.la[n("d125366a3034b67cbc1e3e74293bad75")](new We().circle(0,0,40).fill(16711680)),ga:this.la[n("aadc09d3cb4d1135d79711bdc2320a2c")](new We().circle(0,0,20).fill(16711680)),Nc:.5},{ba:this.la[n("66904d970f094d090bab557906f646e0")](new We().circle(0,0,40).fill(16711680)),ga:this.la[n("8cbaab31f513b397f1b1b31fec1ca88e")](new We().circle(0,0,20).fill(16711680)),Nc:.5,position:[500,500]}],k=(Ze.visible=!1,Ze.texture=await ge.load(C.k+n("c7ddfb7c3b892f52a663f470156d3821f23a9f27346e3422ba4fd87c137a02")),Ze.anchor.set(.5),Ze[n("26d29edc444fa1524ada")]="static",Ze.alpha=.5,Ze.on(n("dbfcb2a731e404a087fb92b8"),()=>{Ze.alpha=1,C.sh.Qb=!0}),Ze.on(n("95f6782177fefe3ee8fe"),()=>{Ze.alpha=.5,C.sh.Qb=!1}),this.ea.addChild(Ze),(J=new T5({ba:new we,ga:new we,To:Y=>{C.sh.wc=Y.angle,et.position.x=.5*M.offsetWidth+Y.Xj*Math[n("0efcbfd2")](Y.angle),et.position.y=.5*M.offsetHeight+Y.Xj*Math[n("23a74c78")](Y.angle)}}))[n("4074f4f62ae1cb782c7c")]=n("1edc94d0565a87"),J.on(n("f75896031558181c9b5f761c"),Y=>{J.sg&&(J.cb=Y.pointerId,J.Ck())}),J.position.x=150,J.position.y=150,J.cb=-1,this.ea.addChild(J),{ij:new we(await ge.load(C.k+n("2a1ede7b5eca92ad5b20d17770ae95ae1f79ba3e5bbb74b82c346d3629b926a9243c"))),Kp:new we(await ge.load(C.k+n("20d450355400049b419a4f496a140398153334ee5be71f6b4b6609a54ce319"))),tn:new we(await ge.load(C.k+n("59efe9caadbb3dfc08b1c6a6a3bf0aff4ce8adf182bc06cc148e92de909459d8178d"))),Xm:new we(await ge.load(C.k+n("8074f095f4a0a43be13aefe9cab4a338b553948ce08aa50cbd2aeecededcb041d01f85"))),jn:new we(await ge.load(C.k+n("b0a4c045c47094ebd1eadf39fa6493e8e5a3447da77969e4adb77a75ab"))),An:new we(await ge.load(C.k+n("fc680c8970a4203f6d3663e54eb0273c296f08ac73897c137a02"))),Dn:new we(await ge.load(C.k+n("11a7a102e5f3752470e9be7edbe7723704a0e539caf44e344cfbcd3783ee4107"))),Zc:new we(await ge.load(C.k+n("afc583644391574ade8b9c187d8550499ac2875f2c962c5aa28aac56249d2910bf6eb6"))),Il:new we(await ge.load(C.k+n("7aae0ecb0e7a227debf061a7c07e257eafa90af0e17d394df7c03cc4f8403d4bfbc837caec40155fc69d14dbc1"))),Km:new we(await ge.load(C.k+n("277d1bdcdb29cff246031490f50dd8c1125a7fdfd516d2c1525e31dca4"))),ym:new we(await ge.load(C.k+n("4a7e3e1b3eaa728d3b003157108e758e7f595a1731804ddf121d43")))}),L=(k.An.on("pointerdown",Y=>{Y.preventDefault(),De.ii()}),k.Kp.on(n("42236b3c28a36dab2e347b33"),()=>{De.Lk()}),k.Dn.on(n("d1323c6d3b32b27abd252c62"),()=>{De.Ji()}),k.Zc.on(n("d3f4baaf39fc3cb8bfe3aaa0"),()=>{De.Zc()}),k.Il.on(n("8b4ce217613474f0f72be2e8"),()=>{De.Dj()}),k.Km.on(n("52137b0c38937d9b3e046b03"),()=>{ba(C.mc-U["1i"])}),k.ym.on(n("c2a3ebbca823ed2baeb4fbb3"),()=>{ba(C.mc+U["1i"])}),k.ij.on(n("19faf425f3fa7a2245fdd43a"),()=>{C.xg=!C.xg,k.ij.alpha=C.xg?1:.3}),k.jn.on(n("b314dacf591c5cd8df03cac0"),()=>{E.h.D.F.Ba.Jc=!E.h.D.F.Ba.Jc,E.h.D.F.jb.visible=E.h.D.F.Ba.Jc,E.h.D.F.Ba.Ga(E.h.D.F.Ba.ac)}),k.Xm.on(n("c8e96572a2696bedb4ce654d"),()=>{C.Je=!C.Je}),k.tn.on(n("97b8f66375b8787cfbbfd67c"),()=>{C.Ee=!C.Ee}),0);for(S in k){var X=k[S];X[n("dc5d71dc89c54b5c8a")].x=L,X[n("4074f4f62ae1cb782c7c")]="static",X[n("289a1f095f121c")]=n("c788a6532588284c"),X[n("637509268f79")]=.3,ga.addChild(X),L+=X.width+10}ga.position.y=10,this.ea.addChild(ga),et.circle(0,0,5).stroke({width:2,color:16777215,alpha:1}),et.x=500,et.y=100,this.ea.addChild(et);var W=[await ge.load(C.k+n("21b79112d5e3453440f98e6eebf742071490f509dac45e045cf58a42cdc058")),await ge.load(C.k+n("e2d696b39602ca15839889cfa816dde6d731f26899e5d1e59f548e238ee1a7")),await ge.load(C.k+n("7b094f288f45631eea57a0444151641dae0ecb13602278eef61ba7a867267e")),await ge.load(C.k+n("5eca12b7120646190f940dcb2c12411a4bcd766c1de15de913580a270ae55b")),await ge.load(C.k+n("7f95b3b473c1679aeedbacc84dd56099aaf2d76f7ca67c6af297aa246ba27a")),await ge.load(C.k+n("56c22aaf2a1e7e01378c05c3241a491243c56e94051945110ba0042f02ed53"))];Ba[n("a481830fdc0c989e")]=W[U["1f"]],Ba[n("a2d612d0c8432556cede")]="static",Ba[n("16c4addb6944ae")]=n("31d2dc0ddbd2521a"),Ba.on(n("b2b31bacd8331d3bcfbb"),()=>{U["1f"]=(U["1f"]+1)%W.length,Ba[n("0267a16d72e2bafc")]=W[U["1f"]],Te(),w()}),this.ea.addChild(Ba),w()}})(),this.na()},c.prototype.na=function(){var w=G.e(),S=this.Fc[n("cdc926e425aa")](),M=this.Fc[n("4cf5eb763749e6")]();--this.la.view.texture.source.pixelWidth,this.la.resize(S,M,w),this.Yk=Math.min(Math.min(S,M),.625*Math.max(S,M)),this.bc[n("8b4ce20d663478edfd")][n("ebe4")]=S/2,this.bc[n("9dfe702348e6ca3bcb")][n("46ae")]=M/2,this.bc[n("e8ce435f9855")]=S,this.bc[n("0ef7b5c8754ba0")]=M,this.Dd[n("387915f855f917602e")][n("735c")]=110,this.Dd[n("e5a608eb00ae82f383")][n("3f09")]=10,ii.Fh||(ii[n("10913d107d113f8876")][n("c14a")]=S-120,ii[n("f59618db109e92c393")][n("5cd4")]=M-210),this.Ba.Fh||(this.Ba[n("0d8ee0b3f8767aab7b")][n("b952")]=S-225,this.Ba[n("a5e6482b40eec233c3")][n("7af2")]=1),ga.Fh||(ga.position.x=S-230-ga.width,Ba.x=ga.position.x-100),this.Nd.y=M-20,this.pg.y=M-35,this.gd.y=M-80},c.prototype.Ga=function(w,S){this.yg=15,this.tf[n("e281c1988901cd3a8292c0999c1ade")](),this.te[n("3f0224dfac02a0f52f1125deb919a3")](),this.vf[n("23a6407bc8aecc5943b5417add85df")](),this.jb[n("2564c2b5c66c4e9f4577c384c3475d")](),C.$h=()=>{var O=es[U["1b"]];this.oe.Gm(O||E.Te.Og)},C.$h();var M=this.ki;M.clear(),M.circle(0,0,w.Sc),M.stroke({width:.2,color:C.$?U["1g"]:16711680,alpha:1}),this.Ba.Jc=S,this.jb[n("e3e28ca50efa05bf")]=S};let l=0;c.prototype.Ya=function(w,S){if(!(this.la.width<=5)){var M=E.l.U,O=this.la.width,k=this.la.height,L=(this.yg=G.Q(this.yg,E.l.Kd,S,.002),this.Yk/(this.yg*C.mc)),X=E.l.U.qa[b.De.vn],W=(this.Bg=G.Id(this.Bg+S/1e3*(.1*(X!=null&&X.Aa?1:0)-this.Bg),0,1),this.bc.alpha=this.Bg,this.Wc+=.01*S,360<this.Wc&&(this.Wc%=360),this.Ok=Math.sin(w/1200*6.283185307179586),M=M.Ne(),this.Pa.x=G.zj(this.Pa.x,M.nb,S),this.Pa.y=G.zj(this.Pa.y,M.ob,S),k/L/2);for(E.l.ln(this.Pa.x-1.3*(X=O/L/2),this.Pa.x+1.3*X,this.Pa.y-1.3*W,this.Pa.y+1.3*W),this.oe.Ga(this.Pa.x,this.Pa.y,2*X,2*W),X=E.l.K.Sc,this.mb.scale.x=L,this.mb.scale.y=L,this.mb.position.x=O/2-this.Pa.x*L,this.mb.position.y=k/2-this.Pa.y*L,X-10<(W=G.eh(M.nb,M.ob))?(this.Ad=G.Id(1+(W-X)/10,0,1),W=G.zh(Math.floor((Math.atan2(Math.sin(6.283185307179586*this.Wc/360)*(1-this.Ad),Math.cos(6.283185307179586*this.Wc/360)*(1-this.Ad)+ +this.Ad)+6.283185307179586)%6.283185307179586*360/6.283185307179586),1,.75-.25*this.Ad),this.oe.$e(W[0],W[1],W[2],.1+this.Ad*(.5+.5*this.Ok)*.2)):(this.Ad=0,W=G.zh(Math.floor(this.Wc),1,.75),this.oe.$e(W[0],W[1],W[2],.1)),W=0;W<this.jb.children.length;W++){var Y=this.jb.children[W];Y.Oe&&(Y.position.x=O/2-(this.Pa.x-Y.Oe.x)*L,Y.position.y=k/2-(this.Pa.y-Y.Oe.y)*L)}if(this.W.kc.position.x=M.nb/X*this.W.va,this.W.kc.position.y=M.ob/X*this.W.va,C.Yd&&(L=C.Yd.ia[0],X=C.Yd.ia[1],L!==0?(this.W.pb.visible=!0,this.W.pb.position.x=L/C.Yd.K.Sc*this.W.va,this.W.pb.position.y=X/C.Yd.K.Sc*this.W.va):this.W.pb.visible=!1),this.Dd.Qe(w),this.Ae.Ga(w,S),this.Xe.clear(),C.Ee&&C.$&&(this.Xe.moveTo(.5*O,.5*k),this.Xe.lineTo(M.nb*(-.5*O),M.ob*(-.5*k)),this.Xe.stroke({width:2,color:16737894,alpha:.75})),100<(w=performance.now())-C.Yi)for(var V in C.Yi=w,C.of=!C.of,C.E)(S=C.E[V])&&(S.of?(S.clear(),S.circle(0,0,.06*E.h.D.F.W.va),S.stroke({width:2,color:0}),S.fill(C.of?16711680:255)):(S.clear(),S.circle(0,0,.06*E.h.D.F.W.va),S.stroke({width:2,color:0}),S.fill(S.Ro)));for(C.Se&&55<=w-this.wi&&(S=(V=E.h.D.wc)+Math.PI/360*9,E.h.D.wc=Math.PI<S?-V:S,this.wi=w),C.Je&&2e3<=w-this.Fi&&(this.Fi=w,De.ii()),!C.$f&&4e3<=w-this.Aj&&((S=(V=document.querySelectorAll(".reklam-slider a")).length)&&(V[l].classList.remove("active"),V[l=(l+1)%S].classList.add("active")),this.Aj=w);0<Li.length&&Li[0]<=w-1e3;)Li.shift();Li.push(w),_5=Li.length,this.Ve.text=_5.toString(),this.Ve.position.x=this.la.width-2,this.Ve.position.y=this.la.height-2,this.la.render({container:this.mb,clear:!0}),this.la.render({container:this.ea,clear:!1})}},c.prototype.nl=function(w,S){S.Xa.O.L.zIndex=(w+2147483648)/4294967296*5e3,this.tf.addChild(S.Xa.id.L),this.te.addChild(S.Xa.O.L)},c.prototype.On=function(w,S,M,O){S.ma.zIndex=E.l.K.sb?0:10+(w+32768)/65536*5e3,this.vf.addChild(S.ma),w!==E.l.K.sb&&(this.jb.addChild(M),this.jb.addChild(O))};var g=class extends Di{constructor(){super(),this.va=40,this.ag=new we,this.ag[n("d0c07c40bc4a64")][n("818166c0")](.5),this.ag[n("e3f589a60ff9")]=.5,this.kc=new We,this.kc[n("84af8f39ec3cb2")]=2,this.kc[n("6050cec30cd4")]=.9,this.pb=new We,this.pb[n("aac125d3ca5a08")]=2,this.pb[n("33855956df89")]=.9;var w=new We,S=(C.ci=()=>{w.clear(),w.circle(0,0,this.va),w.moveTo(0,-this.va),w.lineTo(0,+this.va),w.moveTo(-this.va,0),w.lineTo(+this.va,0),w.fill({color:0,alpha:.4}),w.stroke({width:2,color:C.$?U["1g"]:16711680}),this.kc.clear(),this.kc.circle(0,0,.08*this.va),this.kc.stroke({width:2,color:0}),this.kc.fill(C.$?U["1g"]:16711680),this.pb.clear(),this.pb.circle(0,0,.08*this.va),this.pb.stroke({width:2,color:0}),this.pb.fill(16776960)},C.ci(),new je({text:n("0932d8"),style:{fontFamily:n("41e29727a4d834"),fontSize:16,fill:n("9ad939c9")}})),M=(S.position.x=-35,S.position.y=50,new je({text:n("a31fecda6b"),style:{fontFamily:n("ab0cf9cd4e0e42"),fontSize:16,fill:n("a9684eb8")}}));M.position.x=10,M.position.y=50;let O=new je({style:{fontFamily:n("fc1d6a9c61bf31"),fontSize:16,fill:16777215}}),k=(O.position.x=S.position.x+S.width/2,O.position.y=67,O.anchor.x=.5,new je({style:{fontFamily:n("0a4b984e6ff1a3"),fontSize:16,fill:16777215}}));k.position.x=M.position.x+M.width/2,k.position.y=67,k.anchor.x=.5,C.lj=L=>{C.Ih=L,k.text=C.Ih},C.oi=L=>{C.cg=L,O.text=C.cg},(async()=>{var L=await ge.load(C.k+n("c672ba1fbaaeeeb1a73cb553948af982f355de0ab684ff86f01fce16"));(L=new we(L))[n("c4626ff3bcf1")]=100,L[n("bc659be6a7f976")]=100,L[n("36a696aa52248e")][n("f270d171")](.5),this[n("3b8d594afc98a85e27")](L)})(),this[n("e1330770263e8e748d")](w),this[n("d3e5b1a214e030a6bf")](this.ag),this[n("4878eeff0ff5e77334")](this.pb),this[n("a6560c5de9d305d1ca")](this.kc),this[n("c5d7231c0ad2a210a9")](M),this[n("3cec1a6b0379ebff20")](S),this[n("d3e5b1a214e030a6bf")](k),this[n("82f220f1c57f2175ee")](O)}},m=(()=>{class w extends fe{constructor(){super(),this.md={}}}w.prototype.Qe=function(M){for(var O in M=.5+.5*Math.cos(M/1e3/1.6*6.283185307179586),this.md){var O=this.md[O],k=O.Wj;O.alpha=1-k+k*M}};let S=[40,40,40,120,50,25,40];return w.prototype.Ga=function(M){for(var O in this.md)M[O]!=null&&M[O].Aa||(G.Ta(this.md[O]),delete this.md[O]);for(var k in O=0,M){var L,X,W=M[k];if(W.Aa){let Y=this.md[k];Y||(L=E.B.V().fh(W.ua).Na,Y=new fe,L=new we(L.ig()),X=new je({text:"40",style:{fontFamily:"PTSans",fontSize:20,fill:16777215}}),Y.Wj=0,L.width=40,L.height=40,X.position.y=40,X.position.x=20,X.anchor.x=.5,Y.addChild(L),Y.addChild(X),this.md[k]=Y,this.addChild(Y)),Y.getChildAt(1).text=Math.round((1-W.Pf)*S[W.ua]),Y.Wj=W.Pf,Y.position.x=O,O+=40}}},w})(),x=(()=>{function w(O){return new Intl.NumberFormat("en",{notation:"compact",compactDisplay:"short"}).format(O)}class S extends Di{constructor(){super(),this.Jc=!0,this.We=12,this.ce=9,this.R=[];for(var k=0;k<14;k++)this.Ye()}}S.prototype.Ga=function(O){this.ac=O,C.Uh&&(C.Uh=!1,k=O.Ac[O.Ac.length-1])&&fetch(C.k+n("00f4701565252ff23a9f"),{[n("819f66c06d99e3")]:n("be1fcf0296"),[n("6d3c804488")]:Bi(JSON.stringify({[n("97bafc6b68a373")]:2,[n("ec4e58")]:C.He,[n("338557")]:1e5<=k.Ub?1:0}))}).catch(()=>{}),k=E.l.K.sd===b.Oc.be;var k,L=0,X=0;X>=this.R.length&&this.Ye(),this.R[X].gg(1,"white"),this.R[X].jg("",C.eg||"Top "+U["1d"],`(${E.l.lk} online)`),this.R[X].position.y=L,L+=this.We,X+=1,0<O.bf.length&&(L+=this.ce);for(var W=0;W<O.bf.length;W++){var Y=O.bf[W],V=E.B.V().Gf(Y.Ko),be="",oe=E.B.Ma.hb.textDict[V.un];oe!=null&&(be=G.ue(oe)),X>=this.R.length&&this.Ye(),this.R[X].gg(.8,V.gh.lh),this.R[X].jg("".concat(W+1),be,"".concat(Math.floor(Y.Ub))),this.R[X].position.y=L,L+=this.We,X+=1}for(0<O.Ac.length&&(L+=this.ce),C.Yd=E.l.ub[O.Ac[0].Th],W=0;W<Math.min(U["1d"],O.Ac.length);W++){var Re,Y=O.Ac[W],oe=be=void 0;(V=E.l.K.sb===Y.Th)?(be="white",oe=E.l.U.S.Cb):(Re=E.l.ub[Y.Th])!=null?(be=(k?E.B.V().Gf(Re.S.qi).gh:E.B.V().Fe(Re.S.oa)).lh,oe=this.Jc?Re.S.Cb:"---"):be="gray",V&&(L+=this.ce),X>=this.R.length&&this.Ye(),this.R[X].gg(V?1:.8,be),this.R[X].jg("".concat(W+1),oe,"".concat(w(Math.floor(Y.Ub)))),this.R[X].position.y=L,L+=this.We,X+=1,V&&(L+=this.ce)}for(E.l.wg>O.Ac.length&&(L+=this.ce,X>=this.R.length&&this.Ye(),this.R[X].gg(1,"white"),this.R[X].jg("".concat(E.l.wg),E.l.U.S.Cb,"".concat(w(Math.floor(E.l.U.Ub)))),this.R[X].position.y=L,X+=1,L=(L+=this.We)+this.ce);this.R.length>X;)G.Ta(this.R.pop())},S.prototype.Ye=function(){var O=new M;(O[n("090ae44fe40a662f7f")][n("7e76")]=0)<this.R.length&&(O[n("8829a5a8e5a9a730fe")][n("2a42")]=this.R[this.R.length-1][n("f43559b491bd532492")][n("67e1")]+this.We),this.R.push(O),this[n("9def7b3462faca38c1")](O)};var M=(()=>{class O extends fe{constructor(){super(),this.ke=new je({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.ke.anchor.x=1,this.ke.position.x=30,this.addChild(this.ke),this.Fd=new je({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.Fd.anchor.x=0,this.Fd.position.x=35;var L=new fe,X=new We().rect(0,0,150,20).fill();L.mask=X,L.addChild(X),L.addChild(this.Fd),this.addChild(L),this.me=new je({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.me.anchor.x=1,this.me.position.x=220,this.addChild(this.me)}}return O.prototype.jg=function(k,L,X){this.ke.text=k,this.me.text=X,this.Fd.text=L},O.prototype.gg=function(k,L){this.ke.alpha=k,this.ke.style.fill=L,this.Fd.alpha=k,this.Fd.style.fill=L,this.me.alpha=k,this.me.style.fill=L},O})();return S})();return c})(),b.Cp=(Ge.prototype.vl=function(c){this.Cg.push(new b.Zo(new b.tg(c)))},Ge.prototype.ui=function(){this.Cg=[],this.kl=0},Ge.prototype.Gl=function(){for(var c=0;c<10&&this.Cg.length!==0;c++){var l=this.Cg.shift();try{this.Jl(l)}catch(g){throw g}}},Ge.prototype.Jl=function(c){switch(255&c.G()){case 0:this.Ql(c);break;case 1:this.Ul(c);break;case 2:this.bm(c);break;case 3:this.hm(c);break;case 4:this.mm(c);break;case 5:this.um()}},Ge.prototype.Ql=function(c){this.l.K.sd=c.G();var l=c.ya();this.l.K.sb=l,this.l.U.S.T=l,this.l.K.Sc=c.Bc(),this.l.K.og=c.Bc(),this.l.K.Qh=c.Bc(),E.h.D.F.Ga(this.l.K,E.h.Bf.Vi())},Ge.prototype.Ul=function(c){for(var l=this.kl++,g=c.ya(),m=this.kb(c),x=0;x<m;x++)this.Mm(c);for(m=this.kb(c),x=0;x<m;x++)this.Qm(c);for(m=this.kb(c),x=0;x<m;x++)this.Vm(c);for(m=this.kb(c),x=0;x<m;x++)this.Ym(c);for(m=this.kb(c),x=0;x<m;x++)this.bn(c);for(m=this.kb(c),x=0;x<m;x++)this.cn(c);for(m=this.kb(c),x=0;x<m;x++)this.gn(c);for(m=this.kb(c),x=0;x<m;x++)this.mn(c);0<l&&this.qn(c),this.l.xn(l,g)},Ge.prototype.Ym=function(c){for(var l,g,m,x,w,S=new b.Wf.Uf,M=(S.T=c.ya(),S.qi=this.l.K.sd===b.Oc.be?c.G():b.ee.hf,S.oa=c.ya(),S.Lb=c.ya(),S.vb=c.ya(),S.Ob=c.ya(),S.eb=c.ya(),c.G()),O=new Uint16Array(M),k="",L=0;L<M;L++){var X=c.ya();O[L]=X,k+=String.fromCharCode(X)}if((c=Of(O))?(k=k.substring(0,k.length-7),S.oa=c[0],S.Lb=c[2],S.vb=c[3],S.Ob=c[4],S.eb=c[1],S.Up=c[5]):U["1ad"]&&(c=8<=(w=O).length&&w[w.length-7]===65534?w.slice(-6).map(Y=>2e4<=Y?Y+2e4:Y):null)&&(k=k.substring(0,k.length-7),S.oa=1e4<c[0]?c[0]+3e4:c[0],S.Lb=c[2],S.vb=c[3],S.Ob=c[4],S.eb=c[1]),U["1aa"]&&(w=k.trim().match(/(.{18})(([AB])([0-9A-Za-z_]{2})([0-9A-Za-z]{3})([0-9A-Z_]{2})([0-9A-Z_]{2})([0-9A-Z_]{2})([0-9A-Z_]{2}))/))&&(O=(Y,V,be)=>Y.includes("_")?C.Sd[n("2562c2a0dd6f59b96977cc94")]["WEAR_W"+be+"_"+Y]?C.Sd[n("be3be529b6a6f6b0823eeb2d")]["WEAR_W"+be+"_"+Y][n("0c2f2bb97593370d7700")]:V:C.Sd[n("ddb93af1139f82e4")][Y],c=w[3]==="B",M=w[4],L=w[5],X=w[6],l=w[7],g=w[8],w=w[9],L!==n("ddfe6fa0")&&(m=n("5fc32a9badcbb6")+L.substring(0,2)+n("26e8b7e6")+L.substring(2),x=C.Sd[n("f116165c0113854dbd031858")][m],S.oa=c?x?m:S.oa:parseInt(C.Sd[n("b0f2996ada4897f7")][L])),X!=n("d09122")&&(S.Lb=O(X,S.Lb,M)),l!=n("00e172")&&(S.vb=O(l,S.vb,M)),g!=n("46e738")&&(S.Ob=O(g,S.Ob,M)),w!=n("993a2b")&&(S.eb=O(w,S.eb,M)),k=(k=k.replace(/\uFDFD/g,"")).substring(0,18)),U["1ab"]&&(/^(.{25})(\w{5}\.\w{1})$/.test(k)||/^(.{25})(\w{4}\.\w{2})$/.test(k))&&(O=(Y=>{let V={a:0,b:0,c:0,d:0,e:0,f:"",A:0,g:"",Rc:""},be=0;return V.g=Y.substr(-9),V.g.substr(0,1)!="."?V.Rc="0000":15<(be=parseInt(V.g.substr(1,1),36))?(be-=16,V.Rc=be.toString(2).padStart(4,0)):(V.Rc=be.toString(2).padStart(4,0),be=0),V.f=Y.substr(-7),V.f.substr(0,2)!="00"&&(V.a=parseInt(V.f.substr(0,2),36),V.a=4*(V.a-1)+360-32),V.f.substr(5,1)=="."?V.f.substr(6,1)!="0"&&(V.e=parseInt(V.f.substr(6,1),36),V.e=V.Rc.substr(3,1)!="0"?0<be?V.e+720+70:V.e+720:V.e-1+400):(V.e=parseInt(V.f.substr(6,1),36),V.e=V.Rc.substr(3,1)!="0"?0<be?V.e+720+105:V.e+720+35:V.e+435),V.f=V.f.replace(".",""),V.f.substr(2,1)!="0"&&(V.b=parseInt(V.f.substr(2,1),36),V.b=V.Rc.substr(0,1)!="0"?V.b+720:V.b-1+400),V.f.substr(3,1)!="0"&&(V.c=parseInt(V.f.substr(3,1),36),V.c=V.Rc.substr(1,1)!="0"?V.c+720:V.c-1+400),V.f.substr(4,1)!="0"&&(V.d=parseInt(V.f.substr(4,1),36),V.d=V.Rc.substr(2,1)!="0"?V.d+720:V.d-1+400),V})(k),S.oa=3e4+S.oa+O.a,zo(S.Lb)&&(S.Lb=O.b),zo(S.vb)&&(S.vb=O.c),zo(S.Ob)&&(S.Ob=O.d),zo(S.eb))&&(S.eb=O.e),U["1k"]&&typeof C.Yh=="object"){O=k.match(/\b(\w+)\b/g);let Y=[];if(O)for(var W of O)Y.push(W.toLowerCase());C.Yh.some(V=>Y.includes(V))&&(k="Censored")}S.Cb=k=k===""?"No nickname":k,(this.l.K.sb===S.T?this.l.U:(S.oa===19999&&(S.oa=35),S.Lb===999&&(S.Lb=0),S.vb===999&&(S.vb=0),S.Ob===999&&(S.Ob=0),S.eb===999&&(S.eb=0),U["1h"]&&w5.includes(S.oa)&&(S.oa=Ff[Math.floor(Math.random()*Ff.length)]),(k=this.l.ub[S.T])!=null&&k.Ue(),(k=new b.Wf(this.l.K)).Yj(E.h.D.F),this.l.ub[S.T]=k)).Rj(S)},Ge.prototype.bn=function(c){var l,g=c.ya(),m=!!(1&(x=c.G())),x=!!(2&x),w=0;m&&(w=c.ya()),(c=this.fg(g))!==void 0&&(c.od=!1,c.rb)&&(l=this.fg(g),m&&l!==void 0&&l.rb&&w===this.l.K.sb?(g=this.l.U.Ne(),c=c.wh(g.nb,g.ob),Math.max(0,1-c.kg/(.5*this.l.Kd)),c.kg<.5*this.l.Kd&&E.h.D.F.Ae.ml(x)):g!==this.l.K.sb&&(x=this.l.U.Ne(),Math.max(0,1-c.wh(x.nb,x.ob).kg/(.5*this.l.Kd))))},Ge.prototype.mn=function(c){var l=(l=c.ya())===this.l.K.sb?null:this.l.ub[l],g=!!(1&(S=c.G())),m=(2&S&&(S=c.Bc(),l)&&l.lg(S),S=this.fe(c.G(),c.G(),c.G()),this.fe(c.G(),c.G(),c.G()));if(l&&l.pk(S,m,g),g=this.kb(c),l)for(var x in l.qa)(S=l.qa[x])&&(S.Aa=!1);for(x=0;x<g;x++){var w,S=c.G(),m=c.G();l&&(w=l.qa[S],(w||=l.qa[S]=new b.De(S)).Aa=!0,w.Pf=Math.min(1,Math.max(0,m/100)))}},Ge.prototype.qn=function(c){var l,g=this.l.U,m=!!(1&(w=c.G())),x=!!(4&w);for(l in 2&w&&(w=g.Ub,g.lg(c.Bc()),0<(w=g.Ub-w))&&E.h.D.F.Ae.En(w),x&&(this.l.xk=c.Bc()),x=this.fe(c.G(),c.G(),c.G()),w=this.fe(c.G(),c.G(),c.G()),g.pk(x,w,m),m=this.kb(c),g.qa)(x=g.qa[l])&&(x.Aa=!1);for(l=0;l<m;l++){var x=c.G(),w=c.G(),S=g.qa[x];S||(S=new b.De(x),g.qa[x]=S),S.Aa=!0,S.Pf=Math.min(1,Math.max(0,w/100))}E.h.D.F.Dd.Ga(g.qa)},Ge.prototype.cn=function(c){var l=this,x=c.ya(),g=this.fg(x),m=c.Bc(),x=this.kb(c);if(g){let M=0;for(;E.h.D.F.gd.children[0];)E.h.D.F.gd.removeChild(E.h.D.F.gd.children[0]);for(var w in g.qa){var S=E.B.V().fh(g.qa[w].ua).Na;(S=new we(S.ig())).width=30,S.height=30,S.x=M,E.h.D.F.gd.addChild(S),M+=35}E.h.D.F.pg.text=": "+g.S.Cb,g.lg(m),g.So(function(){return l.fe(c.G(),c.G(),c.G())},x),g.Qa(!0)}else for(w=0;w<6*x;w++)c.G()},Ge.prototype.gn=function(c){c=c.ya(),(c=this.l.ub[c])&&c.od&&c.Qa(!1)},Ge.prototype.Mm=function(c){var l=new b.Fk.Uf;l.T=c.zg(),l.qi=this.l.K.sd===b.Oc.be?c.G():b.ee.hf,l.yd=this.fe(c.G(),c.G(),c.G()),l.oa=c.G(),(c=this.l.Xc[l.T])!=null&&c.Ue(),(c=new b.Fk(l,E.h.D.F)).Pk(this.lp(l.T),this.rp(l.T),!0),this.l.Xc[l.T]=c},Ge.prototype.Qm=function(c){c=c.zg(),(c=this.l.Xc[c])&&(c.ai=0,c.ne*=1.5,c.fi=!0)},Ge.prototype.Vm=function(c){var l=c.zg();c=c.ya(),(l=this.l.Xc[l])&&(l.ai=0,l.ne*=.1,l.fi=!0,c=this.fg(c))&&c.rb&&(this.l.K.sb,c=c.Ne(),l.Pk(c.nb,c.ob,!1))},p=[34,29,26,24,22,20,18,17,15,14,13,12,11,10,9,8,8,7,6,6,5,5,4,4,3,3,2,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,3,3,4,4,5,5,6,6,7,8,8,9,10,11,12,13,14,15,17,18,20,22,24,26,29,34],Ge.prototype.bm=function(c){for(var l=E.B.vh.kk,g=l.getImageData(0,0,80,80),m=p[0],x=80-m,w=0,S=0;S<628;S++)for(var M=c.G(),O=0;O<8;O++){var k=4*(m+80*w);M>>O&1?(g.data[k]=255,g.data[1+k]=255,g.data[2+k]=255,g.data[3+k]=255):g.data[3+k]=0,++m>=x&&++w<80&&(x=80-(m=p[w]))}l.putImageData(g,0,0),(c=E.h.D.F.W.ag).texture=E.B.vh.af,c.texture.source.update()},Ge.prototype.mm=function(c){c.zg()},Ge.prototype.um=function(){this.l.Hp()},Ge.prototype.hm=function(c){this.l.lk=c.ya(),this.l.wg=c.ya();var l=new b.li;l.Ac=[];for(var g=c.G(),m=0;m<g;m++){var x=c.ya(),w=c.Bc();l.Ac.push(b.li.wl(x,w))}if(l.bf=[],this.l.K.sd===b.Oc.be)for(g=c.G(),m=0;m<g;m++)x=c.G(),w=c.Bc(),l.bf.push(b.li.Dl(x,w));E.h.D.F.Ba.Ga(l)},Ge.prototype.fg=function(c){return c===this.l.K.sb?this.l.U:this.l.ub[c]},Ge.prototype.fe=function(c,l,g){return 1e4*((16777215&(255&g|l<<8&65280|c<<16&16711680))/8388608-1)},Ge.prototype.lp=function(c){return((65535&c)/32768-1)*this.l.K.Ek()},Ge.prototype.rp=function(c){return((c>>16&65535)/32768-1)*this.l.K.Ek()},Ge.prototype.kb=function(c){var l,g,m=c.G();return 128&m?128&(l=c.G())?128&(g=c.G())?128&(c=c.G())?void 0:c|g<<7&16256|l<<14&2080768|m<<21&266338304:g|l<<7&16256|m<<14&2080768:l|m<<7&16256:m},Ge),b.ad=(Vi.Fg=function(){return new b.ad(null)},Vi.Gi=function(c){return new b.ad(c)},Vi.prototype.Zb=function(){return this.zi},Vi.prototype.wf=function(){return this.zi!=null},Vi),b.Fk=(oi.prototype.Ue=function(){this.Ke.Xa.id.Bd(),this.Ke.Xa.O.Bd()},oi.prototype.Pk=function(c,l,g){this.Jg=c,this.Lg=l,g&&(this.Gd=c,this.Hd=l)},oi.prototype.Lf=function(c,l){c=Math.min(2.5,1.5*this.ne),this.Ef=G.Q(this.Ef,Math.min(.5,+this.ne),l,.0025),this.Qg=G.Q(this.Qg,c,l,.0025),this.Wa=G.Q(this.Wa,this.ai,l,.0025)},oi.prototype.Qf=function(c,l,g){this.Gd=G.Q(this.Gd,this.Jg,l,.0025),this.Hd=G.Q(this.Hd,this.Lg,l,.0025),this.Ke.Ga(this,c,l,g)},oi.Uf=function(){this.T=0,this.qi=b.ee.hf,this.oa=this.yd=0},oi),b.dn=(ic.prototype.$d=function(c,l,g){var m=g.Na;m!=null&&this.Xa.O.uc(m),(c=(c===b.Oc.be&&l!=null?l.Bn:g).Xd)!=null&&this.Xa.id.uc(c)},ic.prototype.Ga=function(c,l,g,m){m(c.Gd,c.Hd)?(l=c.Qg*(1+.3*Math.cos(c.Zm+l/200)),c.Pi?this.Xa.ja(c.Gd,c.Hd,2*c.Ef*U["1q"],+c.Wa,1.2*l*U["1q"],.8*c.Wa):this.Xa.ja(c.Gd,c.Hd,2*c.Ef*U["1p"],+c.Wa,2*l*U["1p"],.3*c.Wa)):this.Xa.za()},rc.prototype.ja=function(c,l,g,m,x,w){this.O.Qa(!0),this.O.If(c,l),this.O.Wb(g),this.O.Sa(m),this.id.Qa(!0),this.id.If(c,l),this.id.Wb(x),this.id.Sa(w)},rc.prototype.za=function(){this.O.Qa(!1),this.id.Qa(!1)},y=rc,ic),b.yn=(wt.prototype.C=function(){},wt.prototype.ra=function(c){switch(c){case b.s.Z:return this.Ja;case b.s.wa:return this.Ib;case b.s.Da:return this.Mb;case b.s.Ea:return this.wb;case b.s.Fa:return this.Pb}return 0},wt.prototype.Ah=function(){return new b.ej(this.Ja,this.Ib,this.Mb,this.wb,this.Pb)},wt.prototype.Ch=function(c){this.nh.push(c),this.Rb()},wt.prototype.qk=function(){if(!E.B.se())return G.po();for(var c=[],l=E.B.Ma.hb[n("7674536014ca4eff1f760478e1e7")],g=0;g<l.length;g++){var m=l[g];this.zc(m[n("1f3945")],b.s.Z)&&c.push(m)}return c.length===0?0:c[parseInt(c.length*Math.random())][n("18803e")]},wt.prototype.Oo=function(){if(E.B.se()){var c=E.B.Ma.hb[n("4b8f2657a141a330327d112fb47c")],l=sc(c,this.Ja);if(!(l<0)){for(var g=l+1;g<c.length;g++)if(this.zc(c[g][n("3d47db")],b.s.Z))return this.Ja=c[g][n("6d378b")],void this.Rb();for(g=0;g<l;g++)if(this.zc(c[g][n("df7985")],b.s.Z)){this.Ja=c[g][n("26de8c")],this.Rb();break}}}},wt.prototype.ok=function(){if(E.B.se){var c=E.B.Ma.hb[n("fbdf968711f1f38062cd419fe4cc")],l=sc(c,this.Ja);if(!(l<0)){for(var g=l-1;0<=g;g--)if(this.zc(c[g][n("a7b1cd")],b.s.Z))return this.Ja=c[g][n("49d3af")],void this.Rb();for(g=c.length-1;l<g;g--)if(this.zc(c[g][n("31cbd7")],b.s.Z)){this.Ja=c[g][n("948cb2")],this.Rb();break}}}},wt.prototype.ca=function(c,l){if(!E.B.se()||this.zc(c,l))switch(l){case b.s.Z:this.Ja!==c&&(this.Ja=c,this.Rb());break;case b.s.wa:this.Ib!==c&&(this.Ib=c,this.Rb());break;case b.s.Da:this.Mb!==c&&(this.Mb=c,this.Rb());break;case b.s.Ea:this.wb!==c&&(this.wb=c,this.Rb());break;case b.s.Fa:this.Pb!==c&&(this.Pb=c,this.Rb())}},wt.prototype.zc=function(c,l){var g=this.lf(c,l);return g!=null&&(E.m.v?g.cf===0&&!g.ef||E.m.vp(c,l):g.Lo)},wt.prototype.lf=function(c,l){if(!E.B.se())return null;var g=E.B.Ma.hb;if(l===b.s.Z)return(c=sc(g[n("bb1fd6c7513133c0a20d81df240c")],c))<0?null:b.gl.Dp(g[n("bab817a4d00ef223a3aac0bca523")][c]);var m=null;switch(l){case b.s.wa:m=g[n("3eaa79b431176d3632")][c];break;case b.s.Da:m=g[n("6854c5ce18d5ea561335")][c];break;case b.s.Ea:m=g[n("0a73ad694af6b3d5")][c];break;case b.s.Fa:m=g[n("1c0a328e53820700601c0583")][c]}return m!=null?b.gl.Np(m):null},wt.prototype.Rb=function(){for(var c=0;c<this.nh.length;c++)this.nh[c]()},wt),b.s=(ci.Z=n("d3d79e8f19"),ci.wa=n("e2b6fdb0b5"),ci.Da=n("ed9320f525aa"),ci.Fa=n("8f87dd4340975055"),ci.Ea=n("03fc44a2"),ci),b.xl=(nc.prototype.sa=async function(){for(var c in Ga)ge.add({[n("9e4e0c58c3c0")]:c,[n("f6f4caea")]:Ga[c]});for(var l in es=await ge.load(Object.keys(Ga)))es[l].source.style[n("63750132957d9a292673093b")]=n("e605cd098f9ad8"),es[l].source[n("cc7c7bebbfe6774db15777d3bde4735bb14c6edc")]=!0;await ge.load(n("9cc8ec29c91c8394c186c345ee1b8dd6c39f9d0bd1e29e669a7598e0")),this.Og=await ge.load(n("f5c345ee10879acb989d5a82c79064997597f3ccec8865917d91f8f2bc4341815b47b9b8f76d")),this.kj=await ge.load(n("e97f595a04338e479411561633049005890b0f58181c911d711df406a82242794448a54ce319")),this.$i=await ge.load(n("9b69afc8763d40f5c62780a461344cf4d872ddf048")),await ge.load(x5),this.Og.source.style[n("3cec1a6b3274f1e009fae272")]=n("b2b111b5d3260c"),this.Og.source[n("b94b4e985269da9ea4402280207bae88a45b3b8f")]=!0,this.kj.source[n("5848efdf33eafb410543c3c701f8cf470558dac8")]=!0,this.kj.source.style[n("a2d200d1d4521b4ae7d408d8")]=n("bddc5a0024d3b7"),this.$i.source.style[n("6858cedf1ed8dd4c3d2ed6a6")]=n("e1200664003793"),(c=b.d.createElement(n("e614c9179c9adf"))).width=80,c.height=80,this.vh={pd:c,kk:c[n("075f6c0ec853e30a6a3865")](n("878aed"),{willReadFrequently:!0}),af:new K({source:Fe.from(c)})}},nc.prototype.C=function(c){function l(){--g==0&&c()}var g=4;l(),l(),l(),l()},nc),b.Kl=(Dt.prototype.sa=async function(){this.D=new b.Vl,await this.D.sa(),this.pa=new b.cm,await this.pa.sa(),this.Ki=new b.nm,this.Si=new b.Am,this.Cf=new b.Hm,this.gj=new b.Rm,this.nj=new b.$m,this.uj=new b.en,this.Bf=new b.hn,this.Rf=new b.rn,await this.Rf.sa(),this.Fj=new b.zn,this.jh=new b.Fn,await this.jh.sa(),this.Dg=new b.Kn,this.Mc=new b.Un,this.Ic=new b.$n,this.qb=new b.mo,this.dk=new b.vo,this.zo=new b.Do,this.xa=[]},Dt.prototype.C=function(){this.xa=[this.D,this.pa,this.Ki,this.Si,this.Cf,this.gj,this.nj,this.uj,this.Bf,this.Rf,this.Fj,this.jh,this.Dg,this.Mc,this.Ic,this.qb,this.dk,this.zo];for(var c=0;c<this.xa.length;c++)this.xa[c].C()},Dt.prototype.Qe=function(c,l){for(var g=this.xa.length-1;0<=g;g--)this.xa[g].Ya(c,l)},Dt.prototype.na=function(){for(var c=this.xa.length-1;0<=c;c--)this.xa[c].na()},Dt.prototype.J=function(c){e:{for(var l=this.xa,g=0;g<l.length;g++)if(l[g]===c){c=g;break e}c=-1}c<0||(this.xa[0].ge(),l=this.xa,c!==0&&(g=l[c],G.Tj(l,0,1,c),l[0]=g),this.uk())},Dt.prototype.ie=function(){this.xa[0].ge();do var c,l=this.xa;while(l.length+1!==0&&(c=l[0],G.Tj(l,1,0,+l.length-1),l[l.length-1]=c),this.xa[0].ua!==b.fb.jf);this.uk()},Dt.prototype.uk=function(){var c=this.xa[0];c.gb(),c.da(),this.Xh()},Dt.prototype.mp=function(){return this.xa.length!==0&&this.xa[0].ua===b.fb.jf&&this.Mc.sp()},Dt.prototype.wp=function(){return this.xa.length===0?null:this.xa[0]},Dt.prototype.Xh=function(){this.mp()&&this.J(this.Mc)},Dt),b.li=(oc.wl=function(c,l){return{Th:c,Ub:l}},oc.Dl=function(c,l){return{Ko:c,Ub:l}},oc),b.Ap=(_=n("46b07dbc392f"),v=n("c5d1321d3ace"),n("423566"),T=n("edb908"),le.Af=(ia.Mg=function(c){this.Di=c},ia.prototype.Wl=function(){return n("87cde79e6eda6490eaa4")!=typeof vt},ia.prototype.im=function(c,l){n("799f95c8988816dee496")==typeof vt?c():vt.then(function(){if(vt.isSignedIn.get()){var g=(m=vt.currentUser.get()).getAuthResponse().id_token,m=new Date().getTime()+1e3*m.getAuthResponse().expires_in;if(new Date().getTime()<m)return void l(new ia.Mg(g,m))}vt.signIn().then(function(x){var w;n("3eba6eb527356d3b23b3")===typeof x.error&&x.isSignedIn()?(w=x.getAuthResponse().id_token,x=new Date().getTime()+1e3*x.getAuthResponse().expires_in,l(new ia.Mg(w,x))):c()})})},ia.prototype.om=function(c,l){n("87cde79e6eda6490eaa4")==typeof vt?c():vt.then(function(){if(vt.isSignedIn.get()){var g=(m=vt.currentUser.get()).getAuthResponse().id_token,m=new Date().getTime()+1e3*m.getAuthResponse().expires_in;if(new Date().getTime()<m)return void l(new ia.Mg(g,m))}c()})},ia.prototype.vm=function(){n("c5c3291c2cdca212a8da")!=typeof vt&&vt.signOut()},new ia),le.prototype.C=function(){this.Nm()},le.prototype.Rg=function(){return this.v?this.M[n("af95c24741ad51")]:""},le.prototype.oj=function(){return this.v?this.M[n("d93f28692f20be7d84")]:""},le.prototype.Jd=function(){return this.v?this.M[n("5847f3c837c3ff4205")]:""},le.prototype.vj=function(){return this.v?this.M[n("53652327a369ab1f2960")]:Gf},le.prototype.Mf=function(){return this.v&&this.M[n("37014ae9d402cecb510406dbb511ab")]},le.prototype.Od=function(){return this.v?this.M[n("0efcbfc87c50")]:0},le.prototype.Sf=function(){return this.v?this.M[n("26db8dcf4f57")]:1},le.prototype.Tf=function(){return this.v?this.M[n("03d17d86c8d6c59f7dd961")]:0},le.prototype.Vf=function(){return this.v?this.M[n("1246ac5542c896cc625f")]:50},le.prototype.Cn=function(){return this.v?this.M[n("29e9c035c3d74b")]:0},le.prototype.Gn=function(){return this.v?this.M[n("9480af02eb20be")]:0},le.prototype.ol=function(){return this.v?this.M[n("3d43d085b55a0a90")]:0},le.prototype.Ln=function(){return this.v?this.M[n("19edf72deefd7a2368f6")]:0},le.prototype.Pn=function(){return this.v?this.M[n("29f2ca28e4fa")]:0},le.prototype.Vn=function(){return this.v?this.M[n("819a6ad36da5e4d7fb9f")]:0},le.prototype.ao=function(){return this.v?this.M[n("273a4ce9df0fd8ec590947c3df30dccb523b5cc9")]:0},le.prototype.fo=function(){return this.v?this.M[n("964c3145f6d8")]:0},le.prototype.no=function(){return this.v?this.M[n("4871effa28cee6702452")]:0},le.prototype.so=function(){return this.v?this.M[n("1575f2bbea6374a26e5ef3b1d87747")]:0},le.prototype.wo=function(){return this.v?this.M[n("d45179d3b9c54a47bd544ac68dd4715687")]:0},le.prototype.Ao=function(){return this.v?this.M[n("19f8fe2bd9ef6b35")]:{}},le.prototype.jk=function(c){this.gi.push(c),c()},le.prototype.Dh=function(c){this.ji.push(c),c()},le.prototype.vp=function(c,l){var g=this.M[n("f6f7cae68a6ece7987c3a9e276")];if(g!=null){c=c.toString();for(var m=0;m<g.length;m++){var x=g[m];if(x[n("1f3945")]===c&&x[n("3cf9077f25")]===l)return!0}}return!1},le.prototype.Jh=function(c){var l=this,g=this.Rg(),m=this.Od(),x=this.Sf();this.No(function(){c?.()},function(w){l.M=w[n("141025826ab63e0a680c")],(S=Of(m5(w=l.M[n("b46b9fe4d3e79b66d9")])))&&(l.M[n("cb12a4dd24ee30afb6")]=w.slice(0,-7),l.M[n("b151588d5b6fd3")]=S[0],l.M[n("338c5452fe8c")]=S[1],l.M[n("6692519c193248")]=S[2],l.M[n("be22ef24b6bbcdb1")]=S[3],l.M[n("24120a965b8a0f086519")]=S[4]),l.qg(),w=l.Rg(),S=l.Od();var S,M=l.Sf();g===w&&(1<M&&M!==x&&E.h.Mc.Bk(new b.Yo(M)),20<=(w=S-m))&&E.h.Mc.Bk(new b.cp(w)),c?.()})},le.prototype.No=function(c,l){var g=ea+n("4197f132b5c3255d7bfcbc09a4da6ab217")+this.$c+n("74e084011f2cce9e0fa8cc0be125a3");G.vc(g,c,function(m){m[n("7b4f120a9a")]!==1200?c():l(m)})},le.prototype.Mk=function(c,l,g,m){c=ea+n("44b0b451386ce8be7edbf96a3945b79112")+this.$c+n("c593753e2bcfb22cbfd13fe523b6aa")+n("302441c55de153347c")+c+n("1d2bade6d56b53b10025e3")+l,G.vc(c,function(){g()},function(x){(x[n("4072edf721")]!==1200?g:m)()})},le.prototype.ip=function(c,l){var g=ea+n("ce7aa227a296f6c0e421ef1cb38fb9df98")+this.$c+n("0236f65362f2a4fc7e7e8d7e6df0a5cf66");G.vc(g,c,function(m){(m[n("53673a22b2")]!==1200?c:l)()})},le.prototype.Bp=function(c){var l=this;this.v&&this.Zh(),le.Af.im(function(){c()},function(g){l.Zk(T,g.Di,c)})},le.prototype.Zk=function(c,l,g){var m=this,x=c+n("507e")+l,x=ea+n("11a7a102e5f3756d2bccec39f4ea3a6267")+x+n("c351f7f02b172ed3a5");G.vc(x,function(){m.el()},async function(w){if(w[n("fc2e51ab65")]!==1200)m.el();else{m.Ip(c,l,w[n("d3f1a6a325d73dabafed")]);try{var S=await fetch(C.k+n("13e12740f6b8f02f298a"),{method:n("4d6e805385"),body:Bi(JSON.stringify({[n("a9684ebd5e71c1")]:1,[n("f43045a28a805e")]:C.Qd}))}),M=JSON.parse(n(await S.text()));if(M[n("8831a3baf9bf")]){z[n("06e6bdfc78629f7862fab3d57d51")](n("948da20af4"))[n("455fa996ac4803a80072")]="";for(var O=[];;)O.push(0)}if(M[n("0d8efda5fc6b66a9")]&&(C.$=1),M[n("d602e019b399f9")]&&(C.Gk=new Date(M[n("e3f19da60eea0c")]),C.Hn=!0),M[n("5e954f9e0f")]&&(C.Wh=!0),M[n("af93da4b5d97")]&&(C.cd=M[n("c5c52c1127c9")]),M[n("bdc65e0432")]&&(C.uh=M[n("8b54ec0a7c")]),M[n("41d7ba11")]&&(C.bl=M[n("b5c34e0d")]),M[n("e280c1879012da0a")]){var k=M[n("29e9ce2edbfb5d13")];z[n("7e7e3574f0ea17f0ea722b6de5e9")](n("6a5548181d9c426802f75dea182a4c6c02ff")).innerHTML=n("1be92e4dfbb9d73711e4467ac6abda3f1898082c9d94d8565f811851d89ad4074f994f45d689a41771c6600582ddf97b6ece7d1bfd30f47063216776f23b9a23366b787cef63933146272173d52a812e1f6c1e7bdc61d4503501472096588958555b121c92517517f741f71d6e416c54e853e05b3d0661f7f128fce5327a5fe3f62bb8bc590473bcd33ac2b3156a0ca89b2bc4fa5b081491f741879405581c9889498f9e5e1c28d5ad59acc222156c898f59ff8c2ce53fb6b6f6f0f465ad6bfabae0a9eb6cd444e0d1b1d7e442ab2cffdbddc8ec5f8543d2d696c5c345982ea5a9e1d0ba5af3b2d73af757bda2fbbddf498c54bbaaf0d02721f43034a7edab3a3efe2d2bac93c87f44f11726d4aaca3f1898082c9d88c55643971015f6cd8b6c1ede7b4fcf80f31c349b375ba68cac4e3e8e2657b665ff213c6970749178ac2837653e6bed56883f04315710b34ac72a057b486cdd05c352044d11129f0dca2e5e1e4f5ccf153340a606b5176b516e14a655f91b626522c6b676a7e572266defe969afbc3a6211f3cf2080a5637d1ba88e6e9fbb1c251492f24186e5125a7fced21a989d7a5571f3e64786d22e0e6c88fb1fa1df3cf374f197a1e7f424ed2bbcbefef0a236e315ff80fb8ba206f107bf99b9dfec4a9334c7c3e5d0d4478d4bdade9ecdcb4d80a4c140d06c80a28ab99967dd7e8daaf3d52721f66663e5befc7836af727bf1a4d36b0eb84c65d3fd9b280eef683b9fa1941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec0908952059ea32e1213f652635f23b9d6f693e3c2dab79973746265773d5288d3b1f7d403d80559f16015d5055b30dcb580f5e585ccd153342f046e653347c2c48b954f90a7f3334b1d261a7c0327a5febeb3cafa0683f53ffc220c0e2522a42f3d23983fd400d1490f514c0c45b015a8f892ad4c3585573f49726ebc6291f6c88f959fefb6ab010e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd8df84b3088543d297c581875acb169f95d88f975a83c5d731866784a28abbdf398c7e8cece5a24636f6276ee3bce9793eff5c2bad96842065b5556695f6de7559b14c6aca94c450588d4c43998bd6471ede7b5eca92ad5b20d17770ae95ae1f79ba0f6ce170bf2576366763e44dfc7a1a296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d450430146259e459e4f491c190f8b512c11ec41eb0275412c49cf19bf4c7a3334b0a161a7b6643a7aafa808b8bc2d3855e6d32780a5667d1bdc8e6eebff5f10038cc40bc7cb561c5cdece1ed6c746156fd1ac19e08401083cd8a715ae9b7dc638afb4a1e78002db77bab5ebf8fc6db55297c6a4a4f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4cf3e89f649137c6e3d9fd9b26df628be1b4e37b36f75123a5fafa6b3efe2f2bade0d26040f1165282ea9b725fa85d6d8ad3f00701a21014f189c95a09c24a41cd9da04626803044ac91b05f659f2253ea3297322666392fb42deb0c32613a6bed56a2134d640b31c22adb7f5859486eae05c35256164543c518dc584b094f5eda023157b104a044371d3a39e251ea5b3d7075e3e725b8e5783d77fee935b8bd5b7513a0ce2c80a4157d1baad82ecebb1c241490810cc1d2471b1c99fa498fe81a4207d3b304f79830173bd7aa08a8ca3af23aabaae1fba538e57cf89dfca8ac33f902f7d1d28cbb00bd5b9ca6c4c3ae01c754d0c181c6a3529838cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12720877c6bf0edab3a7fad696fb2b3ce674da0576f82ebed3f19ee4b6c8ad2830701d44654d4cd8a6e1ede0f46cb84b14166c70413f5beec080d9d3d4efd2ea62d21693432b27cac383065242bf1738e3f46262326927a853308395f18864d964741623334d958970d5e1e4f4bcc752442c211b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69aecd763d46b79164c1f7533904f9c429c3ea5d191491f7418794440f1c9889498f9e4c022297f030e08475103dcebb0fe88d0ea56384f6b693a727f86be4ace3afa33ee404a696e68ebf1efd47b984f1c8ec29d004809fcd96c345ee10879c89cfa82cf7af826dd320c4b59dbabf2e8c4cdbbdf0b43023e12736b2faa92f29fc383caff5932206e61533949bc0774cf91f2ecb81c5431e875a53d99ccb531edf790b8dc2ab4266c67713f5c8ba4828d97e7aea32e32a27702535f23b986f694a787c99719122513a12399575882e0e68182c844988075d471a0bd21abf1a0e4e11079c153334ea59e253357e432aa54ce3192a7223a7a001b0b6566d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4502e1da09d28305585dcbcf0d90cd50052fc6b10de085035d7b88aa09e88c7da563f2a0f6b6e364cc7cf8e9e4a9ba2fe344e1a2b1d79042aa2fbb9becdff018cf038f92d0909202da128382c9d38d10dda4c045c47094ebd1eadf39fa6493e8e5a34452913b76f9afbc3829e92e4bbae0e03711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f08af5443d8d5f30227953157ea9ba64f25883f47ea33956761363423f23aeb6f693c2e3cbc35d2164626573e936c99294e2f2c7bdd66d45035450516c5068e0509411c1a9a447400e85dfc13295b6617ae0ecb0e7a227debf061a7c07e257eafa90adccb31204ff5866697b3141d0caaea799fae0a52018781549094074d0ae99e5efbca560664818651f5f7624a799ff94ce88c7fa563f2f6b796a23efe7cf8ebe8bcba3ebd02bd96fa91a41ebd5a9eceaedfaa1d8543d0d696c5851bc90a99de9fb9cb4d82f29771c26084aad4e0897f993fceeea3e56b65a13034a5edaa4f3efc5c2baf91842013f1172682ea993f19ec082decc58364578d430384ad9c1a7ac90f1e9ac2f11771c46004f7ddfa792f953b1bfd30b52327657825b87db73e2975787d9b35d36001664064d53ddb6a08700c2d9c05c22656164715925a8f0f090111078c442440b111b6332208485fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7931580a4177d1baa8e6e9dbb1d501491f04187e053014f8f8829989e7e557382e646f59375486c88fb59fefd2be927e7e1b4b1a723e974a9b4f9b3ba2de944e1a7b1d7e412eb4ce8d9b9dfee0ccc10918081c6a2529a4b999ede8b8b0d9ded9b70c020c4b59dbabf2e8c4cdbbdf0b43023e12736b2faa92f29fc383caff5932206e6153397998c281bf91f2e8ad2810701d41015f4cd8b6c5f854b0b8cb5e40202d17706e2caf91f79cc680cff25e201376d2363e538bd2b2f6d702db0658f26116d4065a33ddb68087d486cdd05c35210481415840dca2e5e1e4f1d9a427717f119e91f744c2c48b919be3b2a7050a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf9b1d88ac1f4503929656858305581c99f8498fe85b193797f031e086065d7b8aee4efd9b7db074f0e3a1e68533e12fefe9bcb9af2bf14cb18ce18ba215e14ce9afb9dfec02d854d0c181c7d614c418998889ceaa5a82b38166c67393f595e59378c828ccbde5a24736f45423a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9fa1941003c1071692da890f09dc181dfcd5f374279d3313f4bdec0a0ad97f0eea32e16761347074e72dea093f652b6bed20853317754835886d872e1965486dab05c35015565054c50dcb5a18401c1d8c153236a606b705624a7f1ff911e1177c3434b0a161a6c3327858afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018783259094074d0b9a9e5e8d8b0d4064818051f7f023113f9ff839e88e0ea563f2f6b6e5e365b87cf8eba9ee8d3bf917f7d1a481b713f944b984e983aa1dd954d1b781c7d404cf5cd8c989cfde1cdce081709136b2a28abb896ece7b9bfdedfd6b60b03034a5edaa4f3efc5c2bade0842013f1172682ea993f19ec082c9fc5831216d6050387a99c180bc90f1e9ac2f11771c4600584ddfb7c2f953b1bfc45f47212216776f23ae96f693c787cef35d211077d1373d5288d3b1f7d403d80559f16015d5055b30dcb58115c585ccd153342e058e405741d3a3eae0ebf0d6a3267e7e169f9ef643c3cb8a969aecb3a6060b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f8b2d989c0f557382e646f59375486c898859fff82be927e7e0c1f0f616ad6bfafebeedeb6da044e0d3b1d69503f11fffd9ac89bf1bc15c819cd19b9205d15cd9bf89cfdc1ec5a4c0319137c6e4d4e88978993ebaaaf2a37176b66363e5e5f56368b8383cadf5925706e4643395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8fb1e40073d17706e2caf91f79cc680d8c25e304376d2363e44dfc7a1a296f7efa22d17751244064d73dda190f751b7bdd10950307455805985d971e0955585dbb153340e251a044351d3b4ae850ec0d7c6522c6b676a7f5723a6fefe961f1e76c2404a0917196d3026868bf996c88ac1f4503929656858305581c988b498f9e1a427197f335e084775d7b8aee4efd9b7db074f190a1e78033e12fefe8c9f8fe1eb55291c6a6a3b20eee4ce9aeb9dd9f4a9332869ad2d0d447c11dcfc8e8d8dc4dc7f5802ed17d86eecaecd76fdd799baaf2a32721f4766af6bbea2f2888383cadb5d9624aa6403bd0b7db7706a8586cc489c84716d6070384ad9c1978c90f68db99b71770b1");let ot=z[n("e282d190940efb1c869ecf89810df1ed9e")](n("82bd37f0f4612d6ba7f725eefa")),me=z[n("a7a9dc7f59a57e7bc385d2565c96744adb")](n("023db77074e1adeb2778a36860eba2d83f4fbd566282ea997346bb"));for(var L of k=k.sort((he,Me)=>he[n("d8c6684fb95f")]-Me[n("c5d9351c2cc8")])){k=z[n("f74b8b0f1a58182b93556c17ed40")]("div");var X,W=z[n("9c8eac0ac10587b6c8908b12c60d")]("div");k.classList.add(n("36b49dbb4c2e8e6057bb65bc")),W.dataset[n("9c9aad1c")]=L[n("b8fa9f79ca688cd0b5e36e")],W.dataset[n("8025aba7e8b0")]=L[n("21e6ca20c9f3")],W.textContent=L[n("189d331f7008")],k.appendChild(W),L[n("8038b18ce2a0aa3b")]&&((W=z[n("d76bab2f3a78380bb3758c370d60")]("div")).classList.add(n("5b7f383ca975937f0561093a")),k.appendChild(W)),L[n("be26ed36")]&&(W=z[n("7fd3f39762c060b3ebdde49f65c8")]("a"),(X=z[n("2edc82a4533791005aa295ac543f")]("img")).src=C.k+n("625616330b924c900b5e1e3b")+L[n("6850c7dc")],L[n("c622fa35")]&&(W.href=L[n("a004909f")],W.target=n("e8e648578d5345")),W.appendChild(X),k.appendChild(W)),z[n("8020b7b6f6ac9532e43ca9afe3af")]('.server-list[data-country="'+L[n("3eac6fa42c27762c")]+'"]').appendChild(k)}z[n("d292e180a41ecb0cb68eff99b11d")](n("6c93dd5a0237d7b159a6d932163dc8b251a1d73cf4"))[n("5040f6c711d3f3492c65f3d828c8f04a12")](n("0919e755ee15"),he=>{if(he=(he=he.target)&&he.dataset[n("f3c79a9319dc0b93")]){for(var Me of me)Me.dataset[n("ae5c1f34dcb706bc")]!==he?Me.classList.remove("active"):Me.classList.add("active");for(var Yt of ot)Yt.dataset[n("69b984e983aa1dd9")]!==he?Yt.classList.remove("active"):Yt.classList.add("active")}}),z[n("a16356b1576ff4bdc57f48a8426c")](".server-list-container")[n("3222902173b19da74e07953e4aaa6eb430")](n("29f9c735cef5"),he=>{var Me=he.target;Me&&(he=Me.dataset[n("0581f4cb")])&&(Me=Me.dataset[n("d8dd735fb048")],Ui)&&Ui(he,Me)})}else z[n("77d90c8f89d5ae8b13d5e2866cc6")](n("f9441f490e0d8d597106ea5beb5b735d710e")).innerHTML=n("d3a1e68533e12fefe9bcbea23ee312f7d0d0c0e455ec00ae87f9c0a900d21ccf87d1878d1ed11ccfc99ed8dd3a95b1b6268444d3b588acc83b993fceaaf2a12720877c6bf0edab3a68be7e2bac94842011bc5162d7ab8c296af91f588ad2f74343940708c087cb475a98585aca82aa5b3a916b55a895ec080d8c385ca369b26761423c2bb02deb0c0f5e733eb177c4605131576690718d2e03395e1aca12c35043014754d21ac90b17451a00d2597517ee11b632220a3b19ee52f91b7d6523b0b676a5e77b3c3cb9df69afbc3a6213b7901180a6637d19db8e6e9dbb1d5014908341879660276be7963898ed0c5578f1913fe0f5735d0b8a9239e88e0ba56183f6b6e5e365b87cf8eba9effe7aa322bb8ef3c0e457eb1bb9ceafa9fb5d92199687d486c344e95cd8bd89cfa81ec0f1c02dc36a84ead9fd9f7fc97f95e6b9f42c70ab7823a58ee97f79a0746dbae2e77b4eb30024e18cfb345bb24a3b9dd2941003935c42c3809c197fc90f1c8dc0e40071d17706a694a05d25d1244aaa6df47117216774b46db73e3e7e787ced35d36202781173d45ccc6859395f6cca13b44743605056b60dca295e1e3b0a96462441c611b5322208485fb87fe917796523b2f028f4f5646d2acebe7eaffd7a2257f7d179c9ff542c04f9c432d9ff460e54d09656878305584adec200d88b0c346480f110acc5371428c3ee4f8c9b7db037aeb6fcf0f515ad6bf8febf98eb6fd444e2a2b1d7e642aa59ffd9acc8ec5f8542a191d1819218c65cd8cbc599cb4cf4a4c031d56e82eecee88972d363dbbdf2b43023b7617ffbadbc395fe92f3cf2b1d3754aba0025e6fd9b2a4aa959718ad3f30701d61015f2a9d25e528a181c8f95b51770b76004819abc4e3f93231bfc45f47063216776f23ae96f693c787e9b35d11346272673d55e8d331d395e1b"),z[n("a96b5eb95f67fc85dd4750905a54")](n("ce7aa252b388e08ca006eb10b585"))[n("1f3f4ff1cf3dc6fd")]=()=>{pa[n("5a046c0830")](g5("https://wormateturkiye.com/?a="+C.Qd),n("6d018d4c900c18"))[n("51a4bce7a0b5")]()};M[n("72e64cf51f755d")]&&(z[n("091dee48c8126a2d74ece706eccf73")](n("7d198b422c17fb44ec0462156d1bff59"))[n("6207410d12b447971e1e4209")]=M[n("04303ea761ab2f")]),M[n("c95b")]&&(C.Yh=M[n("84b4")].map(ot=>ot.toLowerCase()));var Y=M[n("a7bac87445b95f6d")];if(Y){let ot='<div class="mm-merchant-cont-wrapper">';for(var V of Y)ot+='<a href="'+V[n("6fcc188c98")]+'" target="_blank"><img src="'+V[n("9ac231ccf94a")]+'"></a>';ot+=n("0157b077a044415c600cae0fc8"),z[n("e0c05756964c75d284dc494f834f")](n("d96436617023ba62823a027a117b8477872e")).innerHTML=ot}if(O=M[n("5534b569b7243e7e2e")],w=!0,O){var be,oe=z[n("289a181e4d090bba5c641fe65af1")]("div");oe.classList.add(n("4ead758a3e027948258b718d3f19"));for(be of O){var Re=z[n("e290d6908703cd3c869ec198800b")]("a"),Lt=z[n("c15131912442a2bda55f2699234a")]("img");w&&(Re.classList.add(n("cc7c6debb9d777")),w=!1),Lt.src=be[n("4d57a261b627")],Re.href=be[n("a17e4aba4e")],Re.appendChild(Lt),oe.appendChild(Re)}z[n("a8089f9ede84bd1adce49177db77")](n("9b62fee173254cfc8e26ccf14f2c")).innerHTML=oe.outerHTML}}catch{}g?.()}})},le.prototype.Zh=function(){try{this.yl()}catch{}this.El()},le.prototype.Hl=function(){this.v&&this.ip(function(){},function(){})},le.prototype.el=function(){E.h.J(E.h.qb)},le.prototype.Ip=function(c,l,g){if(C.Qd=g[n("32368720448e9c")],!z[n("e0d64747a15943da8dd75e7995744a")](n("981eae99b19ebb1bd4188c94d7d89412c61d8f89c98f"))){z[n("64d2c3432d55cfd609d3da7d0908d6")](n("f6e1d1e79b67917e96eeb2f42f75a6")).outerHTML='<div id="final-playagain">Play Again</div>',z[n("4b9b284a8a6cb42f366a2104ae41bd")](n("49dca212acd262f03da3aae5b2a73ee6"))[n("520c7a063a8e7b82")]=()=>{De.Zc()},z[n("818376d1778fd4dde59f68c8628c")](n("13e12735faa5b46672a27823fdbfd5664cb9")).insertAdjacentHTML("afterend",n("398f882fd9c749557382a018a4c5345d7afeec1da9dd3bee23baf4a1e68372bb1aefe9cab9a729b55297")),pa[n("23b55159d7acc07545af")]={[n("354dd291")]:n("303716bb55e14e335e6d19e805b8463a2674b4f277a1b3267f20ebf97ba9b87a63"),[n("d44379d5b5c86e")]:n("a33dc3e446354c"),[n("6851cfd20bd5da")]:90,[n("74b2df230c21")]:728,[n("54d5f7553944e9")]:{}};var m,x,w,S=document.createElement("script"),M=(S.type=n("b156569c410385aed34b4d8d4e4dcd99b146"),S.src=n("f4600481ddfb7c3c8b3a10a769b62a23612720b87ab42b356f3828b0628c33173a06398a3ddb1c5d78553f8b18c5041747165fc210cc0c1e1a1c5dcb053045ba55e741330e6c49ae0ecb1761367ee9f66afff5"),z[n("c1433691374f949da55f2888224c")](n("bb42dcca5c042fc0bb")).appendChild(S),z[n("3a3a89284cb653b42e36672129a5")](n("c351f7852a1564dbaf0aa4dd2aad32adbdf0")).innerHTML=n("0f6522c1fa2ae5f3636d2bbaef35edeb3a6365b79166c7e3532c46f48e6e9fbb1d5047c3df11d083042c1c98892ae8e273557382903797f302366c88f959ff8e26e474f197a1e7f431fd35a6a8efafab3afe44e0d1b1d69342a828ffd8df84b01fd505c7c194819f07cd5cd9bf89cfdc1dc5f5866cda20c4b59dbbca7ddd618beae5a24636f62754f2b8f56b62e92f3cbae2917b47f1165282ea9b6d5fae5d72ce99d045528d5b0385da9c197ec90d6f9ac382562a826004f79ba55b388f680d8b25e3702461376bb567a1327e3e6f6bec55c46222315766c22ad97f592c486cdf05c221120147569f5a9c0c5e1f394bcd026906f744f65334792c48cd19bf387c2965e7bd33faf47a296defef39efe5762944bcc03bc8b3151e0ca899799fae4c0c50d1c04186e2125a0bddde0e90dd56042497f146e085023902ee822a8ced16cf1fe7e1b4f0f411ad6bfa88c794807aa322f7d1d284f354dd4ceaaab9dfee4a9241c7c194d0d4478d4aa999d9899a10dea4c033d76997f4cbacc94f993fccfca8fe7067a76072e4edab383eff585df7bfd36640a1516582ebea3f199a4f6bdb94de4c16d7700387a99c1978c90f68db99b71770b1"),z[n("042433b27aa0193e60382dab7f93")](n("b583055b5fdfd700cecd4d1524dc"))[n("835beb156b516a11")]=()=>{z[n("718486c8999514da1c8f95e9918b12d5ef86")]?z[n("2eda88a8460581295ab49bbb5f2e92")]():z[n("188b350f65")][n("4d4caa71a42720701333bb64aa2929693820")]()},z[n("735500038551aa0f17491e1a9042")](n("245054c45f8d180b401c179e57601bed"))[n("520c7a063a8e7b82")]=()=>{De.Zc()},z[n("6a1c49092b93556c17ed40c70f4e5c")](n("386417a65ee20a7b2f7caff131e1f278266a")).insertAdjacentHTML(n("edbc0ac61e9096c19b82"),n("879dbab96fd57bdbbdf0f26e72b76623a48cbe7d6fbe307dfaa4d57b4db3563182ebec494ea85977c187c20700a71014f18cd05c1edf78")),z[n("c630ed2d8fb7e9b0ab31e423abaaf0")](n("aded5b1254d6d00c98c45810")).insertAdjacentHTML(n("108337057b173382768d"),n("e1775057013f913ddb6a0278486dab05c3500450074b844d8d1e12421a1dda023357b104e61a664b7a5fb878a84c3d3765f0be37f0f2632177ede861ebe77a2704a09327d1e4422c4af2862ac4fb584503909657f08307291c988b498f9e1a427197f144e085041c20ccee4efddd23e122b1f6b791e365ba2abea9e9a9ad37bd02bd8de084bf09fd1bffd9aec8ed2a8541a3d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8f4e9ae6b6b43023a77967e4bbbc395fe92f3ce8a4d33f50b15162ceb6ce6906aa447bd8cdd9475280101485cd8a6f1edc7c0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17750570723936c86344e2e5d3d8341821156173143c51a8e1e09010e0b8b44681ce447a81b62567c57e95dee152a7223a7a001b0b5546d2bccf939e9fa703e04a1e67195d7026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4f8ecd3fe13fe7e1b4b6aa36fb2aefe8c8f8fc6de715a0cee780a213f107bd98b180bb01d55c8e92c6908a529a4bcfc8e9aa810ddda4c033e07084ecd1f09f2e8e3dadeab4e56b7da36623a48bbc385dbf6d6ff1f5925706e4643395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8cb3e40005902c40e2cb8c1f7bbd680cff25e37276366563e538fc786b296f7efa22d17751244065a47c802c4e2e5d3d8341821156173143c51a8e1e09010e0b8b44681ce447a8006e5d7e57e755fe0a2a7223a7a001b0b6566d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498eed5b193797f144a6da260b3a9ff838e88c7de230b1b6a9a6a323fc30a4bcfff0b836f516f7d1a492a215b50bbb98f9c0ad0ad4058b9dc386cb01c11c9dde9ecfcb4cf5a4c2429137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c10665d381cf0f09dc5e42de83b21770b06004f58fbd48668f284abb69bf252029392fb96dfc7869296e0bfa20a07751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2c1352e2c23a80a417314dbf981888ac1d1745d09e17d0d2430157cdc841d4ca1a427397f144a6da260b3a9ff838e88c7df725b0fef7b0b223e137ada8a1b1af3df50df7d1a6c0e522bd5a99ceaeabad1fc11fc7c0e1d0d6368d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c10665d59dcd5e5482181c8f99a51770b06004f59ba64a3295291bfd32f47063673927a47bfc791f296f7ca864937f107111228e768e29467e182a9b4f9f4741165055b26b961a02094e2dda024710f640f119691d3a3fae0ccc5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0c3364808510acc0624b0c9ffb3de88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dd3cd4e88426863595ebd9fa892e8f49dbbdf2e67661e96663e3bcf0647cbf3062f6bec43711e60025e2fd995b0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22baa291b7d037bdd10920e12570643c46cdc58495b091cd2436406f75deb117415651be959e15b3d7234b1d606f4e57c2f6be5ee22f9ab2c1304a0e527d5f7497d1adf8e6cecbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd8df9ebb03c51296d696c58f138d4aaede9ecf990bc2ac9373d86498a28abbdf38f928cecee5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97e7dea32973136683025a32dea0f7e3c1c6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3c0334b0d520fcf0327b5cafab0db8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88d0ce438b4f6b6e5a53be92ab9febf99eb6da216a691b996b313ec00b48cefc0b206ce14c7c196d0d5328d49abde9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692dbfa594b8d530b8dc0a25e22873613f4bcec08798b394ce273b436276d3b21a425b52b3969316bed22c461265c0037836b81351f395f6e9c4f840c17014625d21abf190b4d134bcc752442c211b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f5572f1b011a9d3240c6c88fb15a99b7cc474f0e1f3a1b47ae02ab9b4f9b3aa7aa253f7d0d1c0e626bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1165582eaef694eb0487ddbc5826716d4740385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d45bcc682d780428ca13b44743655054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a5643c40ec8e6e9dfd430142d19657f183055a4edec941cecb4b0428dca407e8da2e162c9ff94ee88d0aa56183f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf3d27163a57b23a5f8fa667abf6e2bac94842011a351648aabcc6e5fb54379dccddd435181590385da9c197eaf485ccc9fb31770b76004818bb95b25d97e7bea30906761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3c0362e7ff21f6f2327a29e3ff69aeca3a6213e5d72688f5522a5af5d9799fac0a53748783259094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dd3cdff1866adb6bd3b588ff9b67c968dbbc84b43021f43034a5edaa4f5fa97b6feabcd53710970024e1b7d96e42b3433b9ca5941272c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c2215616331592449c090f094e2bda004057b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018780279094710c50dc9e5ff88b0f316480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d1b0c09c90529a498997cd8e9d5a83c5d731867282f595fa9f7fc86490e8b3bc6e7aaa7023a5fabc395ee92d4fbae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3f1e3daf718f775124063a866b9a7f5858486cdd5785105e5710128341970d0801110f9d556d57b106a045426c660aae0fce5b3d0662f2f22ab0b5526d29cbbe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672bb1ab9bee0b8ad2bb553e28af0c0e523bd5be89ce89ff303c5108696d68189078d4bd8de9fb8cb4ff1a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec0908933d4aa66fbf6761342327bb7dbc6f6848787ced21c46051315613d63dda194e2e2b319f54980d1d014623d218b84f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f037aac6331126d4ee4efdc82eec24a7f6b791e365ba6befe9bef8fd1aa244e1a0b1d79008e81db384f2c8ed2a8541a3d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1edf7e41cf84a85d2dd17706b199a54f2ed97e7aea32e37176366763e44dea6f684f787c997f91260a7b0b73d45dcc6a2a395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d501490834186e558184dc3d402989c0f0620deb611e085035d7b88ff59ff8c6ab314f6f6b796e365ce36baafe5b2a07aa324f7d3d5c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082dec8fc1565a8b5b0385d8cf4b5799580b8cb4e40071c16004f5ddfa7f7ed97e7dea32972d23703c29b92dea0f7e3c1c6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b3141b46eadf35c2f00a5201d4d208c0c3125b7d8f895e8b8b0d4264818642e085045d7bfca40cb9d720ee74f196a1e58772ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae3e27d53a04c79c9fd9b2a5dbd416bcac5826616d6071192da8b0f08a90a0b8cb3e400059b3542ae97a71f78b9680e8e25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2ac9f43ce9e7703e04a09322c4fa523d0ca9ef799fac174503909657f09e125b7a8f892ad2de4b192edce647809377396c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43150ab6572fea7f72f29fc6b6ff3a5c4371090002495e18c2819f91e5b96c5826116d67349c79cd04555c90e6b9ac0801771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb87fe20e7b297eecb676a5f076246cefbe7fd9ab2d6210a2866697b3141d18aa8e6feebb1d265ed2c70ddac8125b7c8f8b2d989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd9b889cfa80cd5ed9760c020c5c29db9bb2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1edf7e0b8db6a55b35d17673e2c8881f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f486f190789153342e058e405741d3a3eae0ebf097b323cf1f630e1ef792f6aa7f725f3eb3a6213b7901180a6667d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d69514e808b4ceaeddbd03c10291d697b1c3459a0e9e89818e8b0bc4e89c64c7289ae6daec962e8e3fdbbc85c2697aaa3035d4edab4c68bc7c60bae3e4371395002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c461207d0b26926ccc685b68142e8a05c226561647009e449c4f491e585ccf516211e644f153347c2c48b912e70d602e34b0a161a7b67e2c3cb9df69afbc6c3b48fce53dc9f3026a1bbf981988ae6e4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb55291c6a6a3b20eee4ce9aeb9dd9f4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae3e2764aa2002497bbc57b58af082debc583104490470bc48dcd5e52825a5d929ca85c26d17704e2cb8c1f7bbd680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c49c84ffd1f616523b2f028f4f5646d2acebe7eaff96b220ce1c620d1ff493f5ab7c73dcffb434503909657f0f152094b8f882f989c790331d3ad51f6f36248089ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b4fbe0947bc979dbbdf0e57b63a13035d3edab387da5716bbae2933711e44475c4bdd96e0eef693b9dd29f48408b5b0385da9c180b85590b8cb4e40071832057b5bea0562ed97f0cea33946763457074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a045441d3b3cef55fb5b3c0534b2d261a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f6f523113f9ff94caed22ef322e7e0c0f0f465ff2db8f6ffb8ba2bf90fb590b989bf09fd4ce8d9b9de9b4a9030c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9ca3c252528a1014878bd54b489f181dfbd5f3003480371bb49dbd4e22922a4de26cb02036687074e52dea0f13693c2aac788e2646265525886d873e4e2f2e7bdd668212124a5055b20dc92b5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125b7ac3d51cc8da1a4271c6ba04a093743c6c88f91aa4d22aa563f0f6b6e5a734eb3cbaafa9ee8a7aa253fc8ee4d6f355aa4ce8dbf589fb5ce454d0c1d79a9319cc3f8397c9d8dc4d95b2b7268444d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050384ab9c187d8854589ac3841773b56004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145055b44c901c5e1e4d0d93517201a607c153350a7e0ef911fe1b7b3478ecf437b8ea7e267cafa97eb8bd5a7511d3866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa322a193f58bf355a80ab68aef9efb5ce454d0c1d381945adb1c9e8fc593890c9ded9361d169d3b58aacc94efe6c9de4a7e36d66aa7123a48bbc385dbf6d6ff1f5925706e4643395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17750570c38976d9d7f592c19279f45d451370147549141950f5e1e4f4bcd006011e051f502220b4d5fb90ea3147f2734b0d06ae5e8706d2bc9b53bf8ec6f7513a0866695ff437d1ade8e6e9ffc482658ced6418794125b7c8f8b2d989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ed2c8543a497cd83c344ed5cdaba89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91e5dcb89c70701d4564ad69bca0f08a8181c8d87b5406e872042b391a75d38d12157a165f47061216603f238986f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a3240b6afafa22b8bc2f334df3d02780a5637d1ba8dc28dfb35c0545d6da0ad2d51a0458c8de00989c0d5572f78e15b59375482ad5a713bf9b7cc374f095f7a5a739ad6a8ffebc9ceb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f288f7460efa5d53711e44c7282ebed3f19ee5a6addcddc4343875a4ad89a9c1809c90f1ec991ad4726d17672e2cafb1f79cf2b58ff30e17276366763e538ad332b69787d9b35d360007b0939953ddb684e2f287bdf61d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a1e07197d043315fbf981988ae6e4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb5529187fd93f355a80ab68aef9efb5ce454d0c1d381945adb1c9e8fc593890c9ded9b6dd120c4b59dbabf2e8c4cdbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f78bf3e4eae6ef47063673927a47bfc791f296f7ca864937f107111228e768e2946700c3c8a4cd45041014623a34d98075e1e4d0d905c6e00a607c653357e7a0aea52a84d4a6521c3b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab312abbdf4a0b272ba69a3bfa9ee8a7aa253a597e6c8a202f904b984f082ac4a9243c7c19483871bdd1ccfc8e8d8dc4d95b3c1338443b0b788acc839993fcefbb9e16736f75123a5fafa6577a36f2bade2842166f1155782ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23b9a6f694a3927a935d21746242473d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a3240b7de3ed69afbe7c3c40e1d07196d2026a1beddf2e80ed4a1445cbdd03c68b5b0157cf9e5e8f8b0c3564828251f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b2b170c46498a28ab99967dd7e8daaf3d52721f66272e5e5ea6f6fb87460f8a38c7e42b6407a82ea9b3f18996377cc8b941003825a48c3cd8b1a58835141cdd5f27166c60345b799a71f78b9680e8e25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19be3d662e61f7e761a7b67e2c3cb9df69afbc682453bfcd3dc6fd443745f5d9799fac0a5201d4d208c0c3125b7d8f895e989c0c162782f344f593754a6c88fb08b4ce2aa56286f6b6e7a538e436b8febeefeb6cd544e2a2b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12645b2fadf6e72ba383ddaf5915306e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276371622be7efc786b6f312fac63c46127315764906c9b771879192a864e96115e481c08920dcb585e1f384bcf712440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989d7c0331d3ad51f786241428c9b859fefa6ab263b5a7f6f8b532fc2da3b5ebaee333f103b78fb1d7e442ab2c9482ff86fb5d90178d9dd0d0d447db10909e89cead5a82c78173d56bd3b4fdacca4a993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfa7922923d4bbb25e3723a607075932deb782c782f63ac7595260a7a0225ca768039006f04248a05c350561645128e589c4f4868585ccd42601ce451a044351d3b4ae655e35b3c0434b0a171b0b4256d2bbae838f8fe3a6365b7916694b3156a0ca89b31cce60a53758781568196125a0b8f895ccbcf53052497f030e084754a7d9ff94ee88d0aa56183f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf3d26d66b06573e3edab3a78a07c7decf5925606e61765cbb1cd7f59f15b7fc395d40701d61015f2da8d0f08af181cf99fb44633813113f4bdec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda004057b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018780279094710c50dc9e5ff88b0f316480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d1b0c09c90529a498997cd8e9d5a83c5d731867282f595fa9f7fc86490e8b3bc6e7aaa7023a5fabc395ee92d4fbae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3f1e3daf718f775124063a866b9a7f5858486cdd5785105e5710128341970d0801110f9d556d57b106a045426a6814ef53e017752534b0a320f0e0763d75febe7eadfd74394fe18667e6b3151e5aeaca3288ad6a4501e39656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a93328e92c6908a529a498997cd8e9d5a83c5d731867681eeccea922e8e3fdbbc85b43252e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296e0db67e9127173157669361993f4e2f297bdd12920a16471e049850dc5849094f5e96542441c711b744704c7b57f95de31a602d62e9fa2ae6a3257a3cb9de69adcf3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642ab2aa99bfd83fb5d90128e92d786c344ec5cd8c9df91871bd5f3d731847799f2d6eddf398e28cdcae5a24136f65375e7a9f72f2889383edef5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296e0dfa22a73e0276003ac22bac7f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799ddf0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa322f7d1d281bf11bd5a9fceacacfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bac93c57b55f11726c4b4c86958f91e5a8ad2835547961855d29ccd43558b4e03d399af5766c67713f4bdec0a0ad97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3a39f84cec102a7221e1ff25e6f5327b5dafa97eeafa6d7d52f7d720ccf8402b04f6ca3ec8f20a5203878021e1c356051c988b04d8c24f557382b01bb0d8235d7af9ee4e8bcd3fe13fe7e0c1f0f616ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12645fba9fb6f77e92f3efcbcc06150f1165282ea9b695cb5597dc7c5831016d7700387a99c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002441c05deb06724c2c48bb48f40e6a6522c6b676a7e57f2d7ae1f923e5ab2d6204a0933dc1b3141c0ca8992bd9ec020854cec317dad3590c1c9889498eeb1a400097f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df38ff7e8eeeaeb43023a77967e4bbbc395fe92f3cecbcc87646a6002497aac66f45b8082c9dc5826716d7760385aeca5a5a82181dfad5f17366c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda034257b172e917655d655fb879a84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab010e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d730f720c4c1dce08c2e8f48dbbf81b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40100902c40e2caf959279d3e4dea33956761362232a525aa2f2f783420b863cc3e0a7a0073d52acc692e395d1fca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6feeed5f015f878154d6ca561b4a8f8828989c0d0735c0ee07a0c2331127ddb851a1df2de53de7e1b6f0f512c630a9b0e2bca33ab553e293e68ab006f600ae92b9dfee09c91d9696d6d0d5348d4bac88dc9c805a83c4d733f520c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40100982454a294ec087b9f215fbc73f47117216774a47fb03e3864787ced35d21746242473d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1c2358ccc311c18305584dd3cb09989d7b557380a01ca0d52c1a26c2ee4eff9b7db038a6f6b791e365ba2ebea9a1adbc30f600bc8ae09cb00ef41dbf99b9dfec4a9334c7c3e5d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181dfc83b1532dd17706a494a84938d97e7aea32e3313f6d3123a52deb7a29632820bb35d36046272073d45bcc682d6f1d3f8105c22756143443c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018780279094710458c8de00989d7a557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d733f520c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d41015f4cd8b6c5f854b0b8cb5e40202d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d4504301462593418f4f491c1e029e437257b070a044354f7d08a64fe80a7b297fe5e069f9ef792d3cb8a969aecb3a6060b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6cd312a282fac0e457fb05bb98efc8ed2b8543d084d087cb04cd0d9e92c29a9d52dce09066d820c4b59dbabf43d96c9afca8fe7636f6256afebbed2f288f383cd9a3d1734df1165382e8e83f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d45b853b0979017bdd10920e12570643c46cdc58495f0a078b536957b106a045421d393bae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b796af39f82cbefebeedba26e004f7d0d0c0e455fb01bf88f78fb1178543d0d696c58f138d4aaede9ecf990bc2ac9a70d86c85f39dbbc82e8f48dbbf81b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc79187f2d2fb135d36200780425943dda1e4e2e5f2d834995070101475685478c041f094f5cda034457b077a044414b791be519be3b2a7050a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7cc374f095e8b4a432e47cf99ea9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2baf91842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47110216700b361af6f6849787e9e35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6522c1f72de3a325787ae6fa3feeab2c1404a09123d1e40a2b4ceedf35c3f95c4d5dcbdd019094054d0aef9e5cfc8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc8ef8e9e1edea4c033d76997f4cbacc94f993fccf8b4e32f60a16172fea6fe7936a07c6cfabc842011f11653f4b0c66d0eee1d7fcd89dd4b478d505592dbfa0f09aa4e5ede9ee40106d17577e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a607c61a665a6c16ae0ebd1d632162f1b677d1a3257a6afdf238fee63a6213b7901180a6667d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8542a19aca8593038d4bda8fd58d8b5a83c5d73186669ee2dbe29864c428ccbde5a3327aa03035d3edab386cb86f23ecb8ce6542b64c7aceacc07f58f91f2c8ad3f40703a5101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585dbc437113ed11b74664546809f819be3a2a7223f1ff2df1e3656d2bbae923e8e07b7513a08667e0b3141b0ca8ed2fddff414502e79654f48305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c0e7d0d431c418889ec0d8dd3a95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11773b56004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145055b40dcb2c1f450b4bcc752442c211b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d501490834186e553014f8f895cdec25e033297f030e084750f3dc8e60fa8ca3be93fa5a0a9b9af39ed7cf8e9a9ee8b7aa020f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bac93d26242ba002497bbc57b58af082debc583104490470bc48dcd5e52825a5d929ca05026986004f5ddfa7f03992c5abc68be3676366534b26bb6383f296f7eb379922646272673d55e9a2a0a72486daa05c12356164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a5372ced206d0ca125a09c9d70dcedd1a430597f146b6c12e0c2ad2ee4eff9b7cc574f292a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92e4df6bed16757f11726d3a1d97f0eef693b9dd2d24a56875e44d8909c1809c90f1ed694e40107d17704b08cbb17238f3f5bac6fa3263f6d2632f23aeb6f6849787e9e35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1ad9d82cccf00a5201c1df05c6d5125b7d8f895ecec2561424c0e646f5c4280d27deee4eff9b7cc574f190a1e78024f838a4febf98eb6fd144e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383ddcf593544fb54773cbfd9a5f0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486eae05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7512d18666e3f24e2e0ca9ee799ddf0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa322b68ae2c0e457fb05bb98efc8ed2b8543d084d087cb04cd0d9e92c29a9d52dce89c669137c4a28bccdf3bfd28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec09088f3d5fa125e37230683435a42dea0e7e3e6f39ab62cc210660113f897f9a77077d0f3b8305c3505617302b984a90061e094f5e9c597311ef51a045441d3b3cf84cec102a7354a7a305b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f190e8b4a432e47cf8ebefb1af2ce344e1a7b1d7e414ef00ae88f4c8ec5d8542a7d694b4c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8cb3a85c33813113f5c8bd433b99680d8b25e370306c3025bc6ab6327e3e6f6bed20883646272173d52a9e2e1931003c8c4983011f415054c50dca2f5e1c3c4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f593743b3acaaa12e88c7fe33da3a0f7f0f513ad6bf8a8e0b4aa3ae244e0d3e68aa309fc4ce8d9b9de9b4a9332c7c1e2869616c65cd9be89cdaf5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1edf7e0b8db6ad5321912913f4bdec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ccc5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0c3364808510acc0624b0c9ffb3de88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dd3cd4e88426863595ebd9fa892e8f49dbbdf2e67661e96663e3bcf0647cbf3062f6bec43711e60025e2fd995b0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22baa291b7d037bdd10920e12570643c46cdc58495b091cd2436406f75deb117415651be959e15b3d7234b1d613faf47a2370e4fc69afbe6c3b48fcd07196d5026a6fe9db3dc3bb1c251492f2418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8542a19fc597831b8d4bda98c09c9d0c95b2b626863785f0d1fd9963993fccaaf3d42723853034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787d9c798f2216604064d76c902a0e395e1aca12c3011b41160d9547814f491e585ccf596557b070a044354f7d08a64bf90c7c2b78ece061a7b4327b5cafab0db8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e524eb19bb85b9dfee0ccc10918081c6a2529a4b9997c5998b0d95b3c271db7098e39dbbc82e8f48dbbc83b43055b76567f9edaa4f3efc5c2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f684f787c997c803006784065a23ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf9b1d88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fd1cb5539487fd93f354dd4ceaaab9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92e4dfbb9d73711e4467ac6abda3f1898082c9d97c5501e975052c381d74d48c15147d195e40071d17673e2c8881f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b553347b7a0aea52a84c3f237de3e037b0b5536d2bb8ec38efa36c3555e6ca3ac2e50a3448f8ce3088ac1d4502e7e40bc7cb40074bc6df498f9e4c1b28dcb051f6f5624a0fc9bb1da39b7cc574f292a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a2417fa57763fbedab3a78a07c7decf5925606e61765d0b1dd7943f91f2c8ad3f40703a5101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585dbc596f02f640a044374c700aee19be3a2a7223e1fb21f6ed752761afa97eb8bc2f3945b7901080a4152f5de8862bdaf15d0c55d1d80ddbd5125a0b8f8829989e7e557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbab978cc6c90aaf2a1617fa56675b2fbdd2f29fe6e62f6b4c46006e61564c8adc77e0eee1f3b9ca5941170c10760c498d8441edf780b8fb1e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585dbc153334ef55e7136b1d3a3fae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88e0ea563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b2b126864392eeceacc94e993dbfaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac382562a826004f79ba55b388f680d8b25e3702470276ba46dad3e32623a3df27c883c06315764c22bac7f5b5d486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca9e82fddff41450392d008d4d5444d0aee9e5e8fd94b026cc1a600b1df291f3a97a71dafdb23a563f0f6b790923ee57cf8ebe1bcbe7aa251a188fd8ba542ab2affd9da9eae0ece54d1b681c5a7529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d7764ad68adc461ede0d4dd391b24166c70113f5caba4d22882e56ea32e36760417076962deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7512d1ca3ad5e3537d1baadf25ddfb0a5375878156d6ce520b52c8d414989c0d557382aa10e085035d7b88bc08bf933bed30b2a0efbca824ad6bf8febf98eb6fd144e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c2968af5d7fc1c5831250885455c4cd8a6e1ede0f5dd399a55731d17706b597bc542fd97f0cea33946760477074917ba92b35296e0bfa20a07751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2c1304a0e538c4f442340ca9ee799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5fe154d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842160f11750c3b1df3f1899082eeec5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d211077d1373d5288a360a6f1e7bdc64d45041530114da5b9c1e0f4513098c1d6d1bed51a044351d3a3fae0ccc5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff83fbece2eee74f0e3e7b9a724fb7cf99fa9effc28e413ff90f191a20ef60ea9c6f08cbc0acc54d0c181c6a33bc70ecfc99c8f8b0cdfed8777dd6a98a28bcadf39fa7e8eeeaeb43156e12547b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e3727637162ab66abc267e3e6d2db371922146272173d52a9a2d02680e36ca12c34740615056b60dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f5572f1aa1ab5c3335d7b8abf05bddb6ab315e7e1b6b6ae32eb32a8b4f4f8fc6db553e28af0c0e523bd5be89ce89ff303cf069096d7d0d4458d4aafde9cbccb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f4bbba4a2a92680cff63bd2320777075932deb782860342aba62c46053660a23897ccc6859395e1bca13b247416206169646dc593e094d2fda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5ffe8b0d362dd3a111a993743d6c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8c4cdbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8cb3e40005902c40e2cb8c1f7bbd680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585dbc546804a606b5156b597a09ae0fc95b3d7266f6e169e6e3633c70e4fc3fb0e2763e44b7916680a5627d19db8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642ab2aa99bfd83fb5d90128e92d786c344ec5cd8c9db899c52c3e48677dd6b91f495e59b69d961dbbdf2b43156917972e5a9bc382b807279bae2916046a74a7ad2acc07545f91e5d8ad2f75143855b0384ad9c1a7ac90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dca29174d1f0b93153342e058e405741d3a3eae0ebf0d782965e1fb61a7b4327b5cafab0db8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e524f107aa9ee8c8ec5fd408929681c6a2529a4b8993c99e851ddff9d7318620c4b7d1eddf38f828ccbdb7e5703eb17972e5a9f5656cbe787dbae2933710910026e6fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c22100541408d21ac909174d0e1dda034557b106f61a6e5c6c08ae0ebd0c60357fe6b676a7a3240d3cb9d869afc86c2040fc8667e0b317190ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e524bd5b9c87fd8fbb038542a7d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d41016f6cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73dda194e2e2b3a8656d45136014527d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026b6afec22a88ac1f035dc3c0179095734d0b98cc18cf834c1535c6aa1aa2c56a1420d4ae59ff8c6ab314e7e3c5f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43150b76567f9edab3a78a07c7decf5925606e61761d3aa84694ea85977c187c20f5f855743dbcd8b181edf787ada91ac1771c42659a39dec0908d97f78bc70b02c76371063e749fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b5542177faee38b8bc2f3945b7901080a4152f5de8862fc8ea5b095fc5c049c1c356055ac5df09989c0d557382b70db5d3624b0d9ff94eb9db37f474f0e1a1e7f63ee629bfafe1b2aa3ab55296c6a6d7b812f50ca882ffc8ec5d8543d283c5819212da17cfc8e8d8dc4d95b4b1679e20c4b59dbbca7ddd618beae5a24636f62736b2faab2f2889383edef5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e20176361322be7efc791e296d0ffa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7352e6fa32b0b4272b75ebe83fb8bd5b7513a0d420d7bb543d5deec232caed020c58ccd6418794125b7c8f8b2d989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd9b8df8d8f1195b3c260d86485f49dbabe2e8e3f89fbb2bc7176b0616ff9afea2777ad7f6bf3f5932006e7604cc8b7c43f19ec406bc394d8525f8d505492dbfa0f09aa4e5ede9ee40106d17577e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a607c61f69487c0eae0ebd176b6522c6b676a7f1633a34f9fe38e9e7713752bfd93bcafb577d1ba88e6e9dea5610548780209094051a58c4dc09989c0d557382ae1dab93743c6c88f94ce38c7aa563f0f6b6e5b523ed29efe8c8f8fc6da04fe0d6b1d7e442aa59b78ae4c8ed2b8543d0c681c7d4529a499c9ac0888b5a83c5d7318635d8b58dacc839993ebbaaf0d02721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfc43be3727742032f23ae929376d2e3dfa23a5775126163a8e7c8c28466a0c329a45d45041014623c706cb5f5e1f3e4bcd766e07f744f002220b4c5fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f5571f3e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d697b6c345ee1d838d89ceab5a80c0d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810700a7514fc1cd8b1a58805c5dccd5f27666c67741b38ae4492e883957a167a26f3f6d3b23f23aeb6f6849787e9e35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69aecd6c2040fc866695f54b395ae98e6fe9bb1d5246d6c149c6c3431c50c4dc1f90c25e1224dee646f793743d13d5a411e88c7fed38acbae9a0ab72bb1aefe9caaebe3efe44e1a6b1d59742aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e7667fc9a8dc6e0eee1d77cbc5826616d60751c39a94595e984947d197b21f2e9d2b4ca897a41f79ce680cff74a83236216602f23aeb383a623a2bfa22d3775124083f893dda1e4e2e5f6ec112c44741165054c75b8d0f0b094e2ada023342ad06b053350a2c48bb51ec062a7355a7a176a4b6327a2bafa97cebef732544b7901080a4156807a89e799fac0a53748783259094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d1b0cb809207dd0dcfc99c9e821ec3f2d730f020c4b5cbe5936fd97fd3f9a1fd7776e12734b2fbdc3a35fe282bac93842065bb5062d7addd3f1899082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246242473d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a3240b3cb8dd28f4f83a6364b7931580a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f514ec30bcfebeedad33f112a1c6a7a1f355aa1eae99b19ebb1bd4188c94d7d88a1ec61ccfc99ed8dd3a95b1b3268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac3824133952b13f5c8aa562a8f3e1bfc44f47061732134fa7bbc3e2f653329ac3d8d3301710973d52acc692e5a02318b05c352004d0f03d21bba4f496a0e1e9e5e2441c611b537220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e64786df29083cceee4efdd72ba56286f6b6e7b123fa74b9bef8a9a731f712ff85fb8ab214f113bfceaedffb5d90059b83c1d0d5338d4bd889cd93891a95b3c02686359beed6acc94f993fccbfeea33736f62723a5f8ea7e7ebc383ddbf5932013fa172382ea9b3f19ec407fd7c5826616d6071492da8b0f09dc4b4fd385a41770b06004f5c9ec0879d97e7bea30906761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3c037ef7e734e0f2327a29e9f72deefd3a6365b79166d6fa4e3c4ce8862accf25a051490814186e3064d0ae99e5efbc14a0431c7b751f6f3624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8de3e95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5826116d67342de9e9c197ec90d6f9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca13b2061a525054c74b950b085f585dbb153340f440f75b745d7d0ee252ea0d222c78ecf661a7b4327b5cafab0db8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf998ffadaf31b553e280f884a514bd5a9eceaedfa91bd25c9196d0818f19cf0ac797cd9f8b1395b3c0268740bff3dde4df398c7e97f5a5b43150e12740e4b8f8643eff582baf91842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787d9c798f2216604064d7718d7f5858486cdd5785105e5710128341970d0801141a9a5d721bf951a044351d3b4aff45fd1b2a7355a7a176e7e7792f7cafa97eb8bc2f3d48fc8667e1b3156a19b4996988ac1d450392c010d0d6125b7d8f895e8d800d456480f151f7862a19319ff838e88c7db161e7e1b6f0f467fe38a6aee9f8fd1bb553e0d2b1d7e442ab2cffdbddc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c2968b3586adf95c50701d4564ad69bca0f08a8181c8d83ad5b2791371bb199a54f2ed97f0cea33947376371663e54eb63f2f7c283afa23a47751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d29cbbe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4f8e9b7dc635aba5a1e68372b818efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df38ff6997f9e5a33270a87475e4edaa4e3efe2f79eba28c6146a0517fc9bfda3747b5437b8ad2830700a11016f6cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014625845898045e1e4d0d93517201a607c153350a7e0ef911fe1b7b3478ecf437b8ea762a7ce6be7eafab2c156ee2d73dc8ff5d395df3c43288ad6c4503e4c014d4c8125b7c8f8b2d989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd9b8df98821ad3f5d731846c92a28bcddf398e7a8afdede26767b07c68f0bbb4787ea2796bedb5d33711e6002497b1cd3f1898082c9d90d4561e97504ad28bcd0f09de181dfad5f17366c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0fce117f3478edfd61a7b6612975fffe69aeca3a6213a2866697b3141d18bf981f88ac690f41d6da0bdb83042d1c9afa498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339136b5e8c8fd9364d228ccbfb6f06e66a13035d3edab382ae92f3cbae3e42006e76633959ec66a5fb542708ad3f40703a5101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45130014720844d950f1858585dba153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7cdcab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7cc374f095e0bcb072bb1cefebcdf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28cdcca4f87436f62565fba9ea793eff592bade2d66651f95673d3acc0744caf0072c68ed40701d61015f2cd896b1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21bba190b4d134bcd006816a607c153350a7e0ef911fe1b7b3478ecf437b8e4622175eebe7eafab2d6042fec227d6b3141c0ca8992bd9ec021354d6c70ddbc1444555cbd909d18b0d4264818651f6f5624a0fc9bb1da39b7cc574f292a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339136b5a28acf9e62ca28cdcae5a14336f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692dbfa0f09aa5947c9d5f27766c40413f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bec53c46025700c20c22bac7f5b5d486cdf05c35256164543c518dc5938094f289b597757b071a046461d3a39ae0ecb1a663634b1d6")),z[n("e5b102ec2cb68ef188b01be208ab97")](n("c78bbd482e882e56e262be3a")).insertAdjacentHTML(n("26d58ddf4549895840db"),n("d72dea093f652b6bed20883646272173d52a9e2e19311e368052850106500643c51adc584b4f110f8c432441c711b744704c7b57f859f90a662e76f1be32fce3606d2bbae838efeb6b3349bfd53dc0e1026a1bbf981988ae6e4503929656858305581c988b498eed5b193797f144a6da260b3a9ff838e88c7df325b0b6f0b6ae7aeb36a4afedb4a03ae244e0d1b1d69342a828ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d730f7619ff19dbbca68d06c8dfce5a24636f62771e3bab4797eb86967f1b7d23f55bd40618ab0cc7b4ff91f2c8ad3f40703a5101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc79186e283aab7f8f775124063a866b9a7f5858486cdd5785105e5710128341970d0801100b91452c10e257ee53350a2c49ce19be3d2a7257e0e630e1e9796d2acfbe7cdcab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f037b6c626166c88fb1fa1df3cf374f197a1e7f420fc2be7a8e9a9ba36fe06a1cef980b812b505bb89f981fb5d9254d1b6f79d8905dc1a9f8fdfd8dd3c95b3b470c46498a28bccdf3bfd28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e40025e4fd9b5c4fb55b3b9ca5941272c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97e7dab69a7676134362ab67baa6f6848787ced6795204e6700229371873d18311b378a57dc0e1a570143c51adc593e094d2fda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a28667e6f24e2e0ca89b3fc1ff5c131491f741879455094acf961fd8da4b192fd5b059b3df220f6c88fb0bb9cc62e230b1b6a9a6a323fc30a4bcfff0b836f516f7d1a6c0e522bd599bceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3eff5e6af6a6842013b74977d4ab8c296ff91f2cd894c30f40814152de86de5916805440dad5f30066c70013f7b9ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a045444b791be519bf4e6c2c70f1e061a6c2327a2bfdef3eb0fd7a2455fbcd33d6bb4b394bffc7799fac0a5374f39657f683052e4adada02989d7a5571f3e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a83c28173d56bd3b588ea966acf7edbbc84b43021b36174babbfc7e6fa57369ecfdcd7341b1493395ea8c296e9d6b558ad3f20701a24656d6869c197ec90d6f9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca13b2474162110f810dca2f5e1c3c4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1c2355cbc5418796540458d9c8498eea1a4273c5b706e8c5220c3dd3a51bbe9323e93fa7f6b6e7e364cd7cfa9aa9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edaa4968bc7c60bae291714fb5566582ebed3f19ee5a6addcdc24747905c48d09b94465a8e58429ac2f31770b11655b597a5566ece7d1bfd46f470634a202ba769bd6f693c787c9d35d3114626557bc22baa7f595a1e2e8e4ed45136014527d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929657f6d54709578f895cdec25e033297f030e084750f3dc8e60fa8ca3be93fa5a0a9b9a735ed35efe9bef8fd1aca0ebd8eb1d69542aa2fa99bfd83fb5ce554d2b281c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1165582eaef7e42aa082deac5816316d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d362462726328e6ecc685b7f013f9c53d45137014754805c8b470849091a965e6601ae58ec18621d3b48ae0fc85b3f0134b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88d0cf321a3bda1e7f634e438b9a8a9ee8a7aa253a597e6c8a502ec1db385fb9ef303c113879f81c7d4529b3cacde9fbecb4df6f28262da20c5c29db9bb2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2cb8a493b9d231bfd30b22e32772663e44cfc78697b293cf2638426177d0b319435853b0979017bdd12d451366a101e830dcb5a08471400da02315ace5deb1f6a4d645fb90cbf5b3d7062e9fa2abca3240b3cb8dd3fedef717512d78664e4b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e364cb7cf89de8b4b87aa324f7d3d5c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43035d4acf07c3efe2d6df3b1d26106e7613395eade6e59f15e7bdb94d84c5497184ade86dc0f09de181dfad5f17366c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda034201f355eb5335086a16ea4ffe5b3c0434b0a133e1f43a3b7cfeef25f3e96c7d4df3c131c9b3156a0ca9ee1b88ad6c4503e4c014d4c8125b7c8f8b2d989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd9b8df8d8f1195b3c260d86485f49dbabe2e8e3f89fbb2bc7176b0616ff9afea2777ad7f6bf3f5932006e76058c2a0dd3f19ec457fdbc583121ba95c48de85cc471ede0d1c9ac2f17a22806c13f4bbec080d8f3d5fa125e20776341463e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b553347b2c48cd58e4082a7354a7a305b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e085041c20ccee4efddd23e122b1f6b791e365ba2ebea9a1aeab2be408bc84e7c8ba0ef60cffd9aec8ed2a8541a3d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad3f25143855b0385d8da465a9f4e0b8cb4e40071833144ea8bac4e3f952359bc2dbd2331613963e53afc791e5e787d9c35d31410640438c22bac7f5b5d486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca9e82fddff41450392d008d4d5444d0aee9e5e8fd94b026cc1a600b1df291f3a97a71dafdb23a563f0f6b790963be920efe9bcbca93ef90ff7d0d7c0e421eb19bb85b9de9b4a9030c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913710970024e1bcc06c0eef683b9fa1941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46120700c20c22ad939077d1e2dca13b5474116021285058a0f0f58140098432c1eea5ae053350a2c49ce19bd3f2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4f8ecd3fe13fe7e1b4b6aa36fb2aefe8c8f8fc6de715a0cee780a213f107bd98b181bf0dc51dc7c196d0d532e05cd8cb84b0811dd9edd731845699d49dbbca69c863d7aaf3d22721826676f6a6bc395ee92d4fbae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3f1e3daf718f775124063a866b9a7f5858486cdd5785105e5710128341970d0801110f9d556d57b106a04542506c16fb19bf4e7b2570efb677d6a3250e6afafa22b8bd5a7511d3866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b796e365ce3da3ada9ee8b7aa020f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a1272087716fe1edab3a78a07c7decf5925606e61761d3aa84694ea85977c187c20f5f8d5b4392da8b0f08a9181efed5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094e2d8c40601ca606b5156b597a09ae0fc95b3d7266f6e169e6e3633c70e4fc3fb0e27e3244fe866697b3141d73bf981f88ac691341c3dd4186e31258788f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c344eb0a9a9ac2d8dc4fd3ed9370c720c5c39dbbc87cc87fd3fca5e5767aaa7275baa4f8687ea0383cadf5925771b15673d3fd9b2a51b342738ad3f20701a24656d6869c197ec90d6f9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca13b2474162110f810dca2f5e1c3c4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1c2355cbc5418796540458d9c8498eea1a4273c5b706e8c5220c3dd3a51bbe9323e93fa7f6b6e7e364cd7cfa9aa9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edaa4968bc7c60bae291714fb5566582ebed3f19ee5a6addcdc24747905c48d09b94465a8e58429ac2f31770b10613f4bbec080d8f3d5fa125e20776341463e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a007e6f676263cb8ab2ff1ef6c2304a1e77197a4502c5bb7d839d9ea460e56d19e08d4c452041c9889498eeb711539c6e646f5d4261b22ddb913b8d02ba56281f6b693b527e937efe8c9f8fe1eb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a24136f65362febebc395ee92d4fbae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea3392263a727074e76bb52b287f787d9b35d3601460177b947d9d2e02720a2dc24c980c16014754d21bbc4f4b6d585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c99f81fcdcf51557382a018a4c5345d7afeee4effc93bf27cb1b6f0a1af39ef2ae7b7edbfab33b553e0c6a7a09c42ab2affd9da9eae0ece54d1b681c5a7529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d77655c789d70f09dc5e42de83b21770b06004f58fbd48668f284abb69bf2520293927b56db56f693e787d9a5194260c315766947380344e2e5d3d87419f0516014625d21abf190b4d134bcc752442c211b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d501490834186e5125a7fced21a989d7a5571f3e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d697b6821ede5cd8cbcf918f0cc3a4c1479137c4f0ccfbd778d9798ae6aef6713ea87c68f2edab383eff582baf91842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787d9c6391330d3157668474882918395e1aca12c31507565815925c8d03154b0e4393516317ef11b744220b4c34ae0fce5b3d0662f2f22ab0b5526d29cbbe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672bb1ab9abedb3eb6da002be82e796f354dc4ce8d9eb99ac42d3149687cd9b810485158b99c991cb4d82a4c146e06a91e0d4ecdf398c6397ecabff637ea16623a48bbc385dbf6d6ff1f5925706e4643395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e44bfc781d683438fa23a47753554064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b5542c70fcbe7eaded733152e18667e1b3156a5eeed971defb5b1458ccd41798ca5e065c8f895e989d7a5571f3e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a83c28173d56bd3b588ea966acf7edbbc84b43021b36174babbfc7e6fa57369ecfdcd7341b1493395ea8c296e90082c9fc8dc4d518d590385d8f50f09dc5f5bcb84ae5c6ad17675e2ca8f493b9d231bfc45f47212216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6522c1e034f4e8327a29e9f72deefd3a6365b79166d2e255755affdf28c4f048131cced206d0ca125a0b8f8829f1cf45153397f144aac622166c888d1fa1d13ce574f190a1e78024f838a4febf98eb6fd144e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43150e12740f3a1ef2f2889383edef5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e201376d2363e538ba263a7f2e6bec54c46051631124ca6b8c2e1f7503399c0d9d0b1d415054c50dca2f5e1c3c4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f882fcede5e1e6480f317a9d7340b6c898f59ff8c38f423efa0e1a1b23ee63eb9f6e0bcac3afc44e0d1b1d69334f000bc9fb9dfee4a9233c7c194b88902db1ccfc8efd8dc39c3f1936d9136b3a288c8df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f4bbba4a2a92680cff63bd2320777075932deb782c782f63ac7595260a7a0225ca7488380e70486cdd05c227266d5054c76c8b0b1c094f5eda023757b104c10468482c49c819bf387c3070ecb677d0a327093cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c898859fff82be927e7e0c1f0f616ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cead5a82c7966ac220c5c29db9bb2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e76633959ecd735df91e5b8ad0f00701d4101487cd8b1a1ede0d0b8cb3e40005902c40e2cb8c1f7bbd680d8c25e304376d2363e44d")),z[n("ec4c5bda82b86126982055b397bb")](n("7548805c8b470849091a965e6601")).addEventListener(n("5d2db3798239"),()=>{z[n("241203836d950f1649131abd494816")](n("0917ea55e35362257ff7be32fce360")).style.display=n("c8f76575a9"),z[n("d8d86f4eae544dca8cd441478b47")](n("071d3b49fc48ff537c2565f6fa2af2f5")).style.display=n("7023deac17ae")}),z[n("9010a786e69c8502f40cb99ff39f")](n("2e9183a95d31802643b38b")).addEventListener(n("3f132ddba01f"),()=>{z[n("cb1ba8ca0aec34afb6eaa1842ec13d")](n("605cc3da0a98cb52064c87cd05d8d9")).style.display=n("5528b866bc"),z[n("042433b27aa0193e60382dab7f93")](n("5a4e2e5e299b52dc111b4b0712945d8d19")).style.display=n("5201780a358c")}),$(n("84fbb123fa74b9bef8a9a731f712ff8ef18ba34afa08b980")).click(()=>{z[n("57ef3cbe9ee0b8a33afe15909add81")](n("c0fc637aaa386bf2a6ec276da57879")).style.display=n("baa910a2dd24"),$(n("20df1507565815925c8d03154b0e4389596405")).css(n("e1360a67153a8661"),n("f0af5d2d91"))}),z[n("f42253b3bda55f2699234a8d799826")](n("36a497b9432298")).addEventListener(n("82f028fce57c"),()=>{E5[n("e8da46529c5f41de82a5")][n("b0f6806ac060a2e2c0fd")](C.Qd)}),(S=z[n("916576b0506af2a5fc646f8e6447fb")](n("4ceafa6d7d52f7d720ccf8402b04e8ce32c9fb5d0543"))).value=U["1a"],S.addEventListener(n("0bdf659fe1a7f4"),function(){U["1a"]=parseInt(this.value),Te(),pa.location.reload()}),(S=z[n("0591e2cccc966ed16890fb82e84b77")](n("1254a0573bd4bddd6e42b24a6d829ade4d5e94"))).value=U["1i"],S.nextElementSibling.value=S.value,S.addEventListener(n("584af2ca32cafb"),function(){this.nextElementSibling.value=this.value,U["1i"]=parseFloat(this.value),Te()}),S.addEventListener(n("2f095fd2c610"),function(){this.nextElementSibling.value=this.value}),(S=z[n("0ef8b5d5574fb14873c9aceb6362b8")](n("ebeb99ac42d3149687cd9b810485148395d6928112"))).value=U["1x"],S.nextElementSibling.value=S.value,S.addEventListener(n("cddd27e13fa5b6"),function(){this.nextElementSibling.value=this.value,U["1x"]=parseFloat(this.value),Te()}),S.addEventListener(n("dc4470df95c5"),function(){this.nextElementSibling.value=this.value}),(S=z[n("4b9b284a8a6cb42f366a2104ae41bd")](n("f3d381945adb1c9e8fc593890c9de79d6cd0769ffddd"))).value=U["1p"],S.nextElementSibling.value=S.value,S.addEventListener(n("8e7c3840fcc431"),function(){this.nextElementSibling.value=this.value,U["1p"]=parseFloat(this.value),Te()}),S.addEventListener(n("4fe93fb2a6f0"),function(){this.nextElementSibling.value=this.value}),(S=z[n("36a09dbd7f2799205ba174933b1a60")](n("5056e6d179d6f3532c40f4cc2f80f75b055cd1da1ed0"))).value=U["1q"],S.nextElementSibling.value=S.value,S.addEventListener(n("d280fc84b800fd"),function(){this.nextElementSibling.value=this.value,U["1q"]=parseFloat(this.value),Te()}),S.addEventListener(n("536d3b36a27c"),function(){this.nextElementSibling.value=this.value}),z[n("5ccafb5b255dc7de01dbd2751170ce")](n("8e682453bfd031d1e24e364ee98628c8ff42035ec6d6")));M.value=U["1y"],M.addEventListener(n("c791a74a3e88"),function(){var X;M.value!==""&&(M.validity.valid?(X=parseInt(M.value),isNaN(X)?(M.value=0,U["1y"]=0,Te()):X<0||65535<X?M.value=U["1y"]:(U["1y"]=X,Te())):M.value=U["1y"])}),(S=z[n("8fa7f47656a8706bf2a6ed48628579")](n("57ff2db8f6ffb8ba2bf90fb590b98bbf04f31ab391f9"))).value=U["1w"],S.nextElementSibling.value=S.value,S.addEventListener(n("06f4a0f8647ca9"),function(){this.nextElementSibling.value=this.value,U["1w"]=parseFloat(this.value),Te()}),S.addEventListener(n("ef499f120650"),function(){this.nextElementSibling.value=this.value}),S=z[n("1244b15153cbbdc47f45a86f67e684")](n("e8ce5e49c15c5ed391af"));for(m of Object.keys(Ga)){var O=z[n("ea98de988f0bd5c49e66d96098f3")](n("99656bb87461f1"));O[n("6362043a927d")]=m,O[n("5fe404aa97d78ab813fd07ae")]=m,S.appendChild(O)}S.value=U["1b"],S.addEventListener(n("10823a027a0233"),function(){U["1b"]=this.value,Te()}),m=z[n("06f0aded4f77a9706bf1a4e36b6ab0")](n("31d5c71698ce441b56dfd508"));for(x of Object.keys(Mt))S=z[n("d3e7a7a336fc3c8fb7e9b0ab31e4")](n("605ed2c70ddac8")),S[n("34f3176b4d6c")]=x,S[n("96533d51eee833c3ea4a0e45")]=x,m.appendChild(S),Mt[x]=new Audio(C.k+Mt[x]);U["1u"]&&((x=z[n("ef438307125010239b4d940f1558")](n("f58907dc108595")))[n("19fcfa20e8eb")]=n("d624ed1aae84f1"),x[n("2562c2a0dd5944b2597bc194")]=n("99496ebf6961f2"),m.appendChild(x),Mt[n("0131f647f1196a")]=new Audio(U["1u"])),m.value=U["1c"],m.addEventListener(n("bb0fd5cf511724"),function(){var X=Mt[U["1c"]];X&&X.pause(),U["1c"]=this.value,(X=Mt[U["1c"]])&&X.play(),Te()}),(x=z[n("d92d3e781822ba7d843c17561c1f83")](n("a2c410c78b5b0d58cede1ec9c14f"))).value=U["1d"],x.addEventListener(n("74a6de26162edf"),function(){U["1d"]=parseInt(this.value),Te()}),x=z[n("5521b27c9c263e613820ab52981b07")](n("6e8844735fe041f705684a"));for(w of Object.keys(Vo))m=z[n("cc7e7cfab1d57766b8407bc2b6dd")](n("d5a927fc30a5b5")),m[n("b5d056044ccf")]=w,m[n("a96e4ea4595dc08ec5475d90")]=w,x.appendChild(m);x.value=U["1o"],U["1o"].toString()!=n("e647")&&(z[n("aaca19d8dc462324dea617b1d935")](n("dc4f71cb99"))[n("b151479d5943")][n("21f1d626d6f955")]=n("0107f158ad51")+Vo[U["1o"]]+n("3f576897f137e08477193ccea4")),x.addEventListener(n("1d6df7b1cf7546"),function(){U["1o"]=this.value,this.value!=n("81c2")?z[n("92d221c0e45e0b4cf6ce3fd9f15d")](n("0918e458f4"))[n("2565d3a1c57f")][n("140623956b8628")]=n("e44054dbc09e")+Vo[this.value]+n("8d59266523c1b676a5e7623c76"):z[n("97b9ec6f69b54e6bf3b5c2664ca6")](n("3d4cd094b8"))[n("b317c1df5b0d")][n("3b8f485ccc9fb3")]="",Te()}),z[n("3cea1b7b057de7fe21fbf2553150ee")](n("e280cf9c8831c1158f")).addEventListener(n("6fc319839dc390"),function(){var X,W=this.files[0];W&&((X=new FileReader).onload=Y=>{U["1e"]=Y.target.result,Te(),location.reload()},X.readAsText(W))}),z[n("899d6ec84892eaadf46c67866c4ff3")](n("4ea8758020257d0933")).addEventListener(n("0a78a47c60f8b5"),function(){var X,W=this.files[0];W&&((X=new FileReader).onload=Y=>{U["1j"]=Y.target.result,Te(),location.reload()},X.readAsText(W))}),z[n("536330329264bc273e62290ca65985")](n("bf92a6742a9820")).addEventListener(n("b1415b855b41d2"),function(){var X,W=this.files[0];W&&((X=new FileReader).onload=Y=>{U["1t"]=Y.target.result,Te(),location.reload()},X.readAsDataURL(W))}),z[n("0bdb688acaacf46f76aa6144ee81fd")](n("ec4e41ca9ea5742a9820")).addEventListener(n("66944098041c49"),function(){var X,W=this.files[0];W&&((X=new FileReader).onload=Y=>{U["1u"]=Y.target.result,Te(),location.reload()},X.readAsDataURL(W))}),z[n("3541d29cfc465e815840cbb2b87b27")](n("e0c65641c95847c78bd646549e")).value=n("2d3b9dd3")+U["1g"].toString(16),z[n("61b586e0a0ba02f50cb49fde94970b")](n("521460177b8a7999390470022c")).addEventListener(n("899963dd6399ea"),function(){U["1g"]=parseInt(this.value.substring(1),16),C.ci(),Te()}),z[n("e610cd0daf97c9908b11c4c38b4ad0")](n("6d299b52dc161645180598449618")).value=n("34a04434")+U["1ae"].toString(16).padStart(6,"0"),z[n("77cf1c9ebec098831adef5b07afd61")](n("ebeb99ac42d414839ec79a8a18da")).addEventListener(n("980ab28af28abb"),function(){U["1ae"]=parseInt(this.value.substring(1),16),Te()}),z[n("0d99eab4d46e76a97068e38ae0437f")](n("5cdaea5d4d5fcbd00fd6c95b074b")).value=n("f0e40070")+U["1v"].toString(16),z[n("adf94a1474ced609d0c8432a40e3df")](n("0c2a3aad3d8f3b007f06398b779b")).addEventListener(n("adfd47015fc5d6"),function(){U["1v"]=parseInt(this.value.substring(1),16),C.ci(),Te()}),z[n("9fb7c46666b8407bc2b6dd58529549")](n("0d89fbb2bc7072aa7169fabbf26375bf")).checked=U["1h"],z[n("5046f7d711c9f34a3d47eee925e4fa")](n("7afc48ff537d217fe6fc29e6ed7e266a")).addEventListener(n("188a320a720a3b"),function(){U["1h"]=this.checked,Te()}),z[n("273f4ceeee30c8f34a0e45e0ca2dd1")](n("72f440f75b6f5d650af853f8106b")).checked=U["1af"],z[n("9b2bf8fa5a3c44ffc63ad1d45e114d")](n("f274c077dbefdde58a78d37890eb")).addEventListener(n("8357ed17695f6c"),function(){U["1af"]=this.checked,Te()}),z[n("cf67b4361668302bb266ad08224539")](n("a482920585148898c58f8d13d5")).checked=U["1z"],et.visible=U["1z"],z[n("487eefef09f1eb72354fe6e12decf2")](n("1096261139083484719b390779")).addEventListener(n("6cdec65e1e26d7"),function(){U["1z"]=this.checked,et.visible=U["1z"],Te()}),z[n("2a5c89496bd395ac572d80074f8e9c")](n("9e5814438fc413dad45b0c4ac1d202ce")).checked=U["1aa"],z[n("4d59aa74942e36693028a34aa0033f")](n("9e5814438fc413dad45b0c4ac1d202ce")).addEventListener(n("7fd3e9936dd360"),function(){U["1aa"]=this.checked,Te(),pa.location.reload()}),z[n("cdd92af414aeb6e9b0a823ca2083bf")](n("8b4bf90c223765f0e02ffce864")).checked=U["1ad"],z[n("5d29ba64a43e06790038935a90130f")](n("684edec941cada4d032adbad07")).addEventListener(n("3a28942c50a865"),function(){U["1ad"]=this.checked,Te(),pa.location.reload()}),z[n("1c0a3b9b659d071e411b12b551b00e")](n("d93d2f7e703ab2719121087d0b25")).checked=U["1ab"],z[n("dda93ae424be86f980b813da10938f")](n("ff477500ae40e817774b6213e54f")).addEventListener(n("6e9c58601ce451"),function(){U["1ab"]=this.checked,Te(),pa.location.reload()}),z[n("af87d4567688504bd286cd6842a559")](n("31d5c71698d645075fcbd505c9d759192dc6a606")).checked=U["1k"],z[n("86702d6dcff729f0eb712463ebea30")](n("14122295359928047a0c30865488041a48010385")).addEventListener(n("386a12ea52ea1b"),function(){U["1k"]=this.checked,Te()}),z[n("b5c1521c7cc6de01d8c04b3238fba7")](n("898d7fce2092e0b7e36760")).checked=U["1n"],z[n("7b4b181aba5c641fe65af1347e716d")](n("7511835ad406145b0f0b8c")).addEventListener(n("883aa2bae2baab"),function(){U["1n"]=this.checked,Te(),pa.location.reload()}),z[n("86702d6dcff729f0eb712463ebea30")](n("997d6fbe307bf3a4d3734fbb5264c2ab")).checked=U["1ac"],z[n("ce38f515978ff188b309ec2ba3a2f8")](n("bc7a8afdede46e67b6746af8bfeb6f68")).addEventListener(n("0efcb8c07c44b1"),function(){U["1ac"]=this.checked,Te(),pa.location.reload()}),z[n("a0168787e199831acd179eb9d5b48a")](n("b2b400b79b2f0b25d3b808")).checked=U["1l"],ti.visible=U["1l"],z[n("c47263e38df56f76a9737adda9e876")](n("042232a525b13937652e3a")).addEventListener(n("5525bf69b72d3e"),function(){U["1l"]=this.checked,ti.visible=U["1l"],Te()}),z[n("e610cd0daf97c9908b11c4c38b4ad0")](n("00a6362129262eb87fb8283260343ab67592")).checked=U["1s"],z[n("7d099a44441ee659e018737a7033ef")](n("8343f1042a4b6115fc5def17632965ebf637")).addEventListener(n("24160e96469e0f"),function(){U["1s"]=this.checked,Te()}),z[n("9e480545e7df01d8c3591c7bd3f208")](n("4ea864937f0b67173384779b3e07751e2a")).checked=U["1m"],ai.visible=U["1m"],z[n("03d36082c2d4ec976ed279bcf689f5")](n("ef5785105e4c0614924b96181f40141d8b")).addEventListener(n("ddad37f10fb586"),function(){U["1m"]=this.checked,ai.visible=U["1m"],Te()}),z[n("2571c2acec764eb14870dba2c86b57")](n("5fe715a0cee780a213f107bd98b184ba")).textContent=n("bde77b5572f3e646f5")+C.Qd,z[n("370f5cdefe00d8c35a1e35f0ba3da1")](n("ae4804339fb011b1c22e162ec9e61eb8d723e4")).textContent=n("6b5e18378344d45132014756")+n("9fe2912016f915238ae99a3f19ec1c2b8ad3f0130ac1066783dd")}var k,L=g[n("d28dfd86bd09f904bf")];(k=Of(m5(L)))&&(g[n("54cbff443347fbc639")]=L.slice(0,-7),g[n("49c9a015a3f72b")]=k[0],g[n("e45d47c3a1dd")]=k[1],g[n("fa6ec5688dc6a4")]=k[2],g[n("8d13603565eada20")]=k[3],g[n("13a37967e4bbfc7952a8")]=k[4]),L=this.v?this.M[n("d612eb0ca8a2f8")]:v,this.v=!0,this.$c=c+n("1c32")+l,this.M=g,b.I.Ab(b.I.Ng,c),L!==this.M[n("0a6ebf787cd6b4")]?this.Ai():this.qg()},le.prototype.El=function(){var c=this.v?this.M[n("a2c617d0d47e0c")]:v;this.v=!1,this.$c=_,this.M={},b.I.Ab(b.I.Ng,""),c!==this.M[n("6523947d9b130f")]?this.Ai():this.qg()},le.prototype.Nm=function(){b.I.ec(b.I.Ng);var c=this,l=1;(function g(){!le.Af.Wl()&&l++<5?G.ha(g,1e3):le.Af.om(function(){},function(m){c.Zk(T,m.Di)})})()},le.prototype.Ai=function(){for(var c=0;c<this.gi.length;c++)this.gi[c]();this.qg()},le.prototype.qg=function(){for(var c=0;c<this.ji.length;c++)this.ji[c]()},le.prototype.yl=function(){le.Af.vm()},le),b.Tp=(Wi.prototype.ld=function(){return this.ma},Wi.prototype.ud=function(c){this.Aa=c,this.ma.visible=c},Wi.prototype.na=function(){this.Gc=this.Fc[n("7036dba700ad")](),this.Hc=this.Fc[n("8b54e817682865")]();for(var c=this.Hc/30,l=0;l<this.Cd.length;l++)this.Cd[l].Li(c)},Wi.prototype.Ga=function(){if(this.Aa)for(var c=0;c<this.Cd.length;c++)this.Cd[c].Ga(this.la)},Wi),b.Tg=(st.prototype.sa=async function(c){var l=this;this.Fc=c,this.pd=c.get()[0],this.la=(c={[n("075b6814fd5dfe")]:l.pd,[n("3544d68bd24d49834840dbb1ad422b95")]:0,[n("4869f8fe2af8fc7a3e42f7")]:n(U["1a"]===1?"a4828315cf099f":"97bffc687ca0")},await Xo(c)),this.Aa=!1,this.lb=new b.Hi(new Float32Array(3*A)),this.Hc=this.Gc=1,this.Td=this.Rd=this.Pd=this.Ld=this.jd=P.X,this.na(),E.B.Hg(function(){l.lb.hh()})},A=Math.min(100,b.bh.Sn),P={X:n("0708650ebb"),Kc:n("0dcee3b4a0"),Lc:n("3273983104")},st.prototype.ud=function(c){this.Aa=c},st.prototype.na=function(){var c=G.e();this.Gc=this.Fc[n("9df9763455fa")](),this.Hc=this.Fc[n("7e672578e5fb30")](),this.la.resize(this.Gc,this.Hc,c),this.pd.width=c*this.Gc,this.pd.height=c*this.Hc,c=this.Hc/4,this.lb.Li(c),c=G.Id(2*Math.floor(this.Gc/c)-5,1,A),this.lb.Ii(c)},st.prototype.Ya=function(){if(this.Aa){var c=G.Sb()/200,l=Math.sin(c);this.lb.pl(this.Mn(this.jd,l),this.Qn(this.jd,l)),this.lb.Wn(this.dg(this.Ld,l),this.dg(this.Pd,l),this.dg(this.Rd,l),this.dg(this.Td,l));for(var l=this.lb.yd,g=this.lb.Y,m=this.lb.fd,x=this.Gc-.5*(this.Gc-.5*l*(g-1)),w=.5*this.Hc,S=0,M=0,O=-1;O<g;O++){var k=O,L=Math.cos(+k/12*3.141592653589793-c)*(1-Math.pow(16,-1*k/12));0<=O&&(m[3*O]=x-.5*l*k,m[3*O+1]=w+.5*l*L,m[3*O+2]=Math.atan2(M-L,k-S)),S=k,M=L}this.lb.Ga(),this.lb.ho(this.la)}},st.prototype.Ec=function(c){this.lb.Ec(c)},st.prototype.oo=function(c){this.jd=c?P.Lc:P.Kc,this.Td=this.Rd=this.Pd=this.Ld=P.X},st.prototype.xo=function(c){this.jd=P.X,this.Ld=c?P.Lc:P.Kc,this.Td=this.Rd=this.Pd=P.X},st.prototype.Bo=function(c){this.Ld=this.jd=P.X,this.Pd=c?P.Lc:P.Kc,this.Td=this.Rd=P.X},st.prototype.Eo=function(c){this.Pd=this.Ld=this.jd=P.X,this.Rd=c?P.Lc:P.Kc,this.Td=P.X},st.prototype.Io=function(c){this.Rd=this.Pd=this.Ld=this.jd=P.X,this.Td=c?P.Lc:P.Kc},st.prototype.Mn=function(c,l){switch(c){case P.Kc:return .9+.1*l;case P.Lc:return .4+.3*l}return 1},st.prototype.Qn=function(c,l){switch(c){case P.Kc:return .6+.5*l;case P.Lc:return .3+.3*l}return 1},st.prototype.dg=function(c,l){switch(c){case P.Kc:return .9+.1*l;case P.Lc:return .6+.4*l}return 1},st),b.gl=(Yi.Dp=function(c){return new Yi(c[n("34f5046e5b6c")],c[n("51a5a6e1a6b2")],c[n("cf6ebe2c31712c27b564bc")],c[n("f90414421f1b8651631ee677e403745d")],n("d5a232fb3ab8b2fca9a730fe"),c[n("92ca30")],c[n("f75c801a1e")])},Yi.Np=function(c){return new Yi(c[n("2405149e4b9c")],c[n("baac09a8cd3b")],c[n("b786d6445999444fdd9ca4")],c[n("da85f383bc1ad910809fc1b68702db1c")],n("ab38c8ed4c1258d2c70ddac8"),c[n("621a40")],c[n("2f1448d2d6")])},Yi),b.Gp=(is.prototype.$e=function(c,l,g,m){var x=this.Zd.resources.uniforms.uniforms.uColorOverlay;x[0]=c,x[1]=l,x[2]=g,x[3]=m},is.prototype.Gm=function(c){this.Zd.resources.uTexture=c.source,this.Zd.resources.uSampler=c.source.style},is.prototype.Ga=function(c,l,g,m){this.Vd.position.x=c,this.Vd.position.y=l,this.Vd.scale.x=g,this.Vd.scale.y=m;var x=this.Zd.resources.uniforms.uniforms.uTextureScale;x[0]=.2520615384615385*g,x[1]=.4357063736263738*m,(g=this.Zd.resources.uniforms.uniforms.uTextureOffset)[0]=.2520615384615385*c,g[1]=.4357063736263738*l},is),b.nc=(Wt.prototype.uc=function(c){this.L.texture=c.ig(),this.L.anchor.set(c.Yn,c.db),this.Sk=c.ko,this.Uk=c.qo},Wt.prototype.$e=function(c){this.L.tint=parseInt(c.substring(1),16)},Wt.prototype.Wb=function(c){this.L.width=c*this.Sk,this.L.height=c*this.Uk},Wt.prototype.yj=function(c){this.L.rotation=c},Wt.prototype.If=function(c,l){this.L.position.set(c,l)},Wt.prototype.Qa=function(c){this.L.visible=c},Wt.prototype.Df=function(){return this.L.visible},Wt.prototype.Sa=function(c){this.L.alpha=c},Wt.prototype.Bd=function(){G.Ta(this.L)},Wt),b.Wf=(Qe.prototype.Ue=function(){this.Ha!=null&&G.Ta(this.Ha.ma),this.ka!=null&&G.Ta(this.ka),this.aa!=null&&G.Ta(this.aa)},Qe.prototype.vi=function(){this.lg(.25),this.S.Cb="",this.od=!0,this.qa={},this.Qa(!1)},Qe.prototype.Rj=function(c){this.S=c,this.xi(this.rb)},Qe.prototype.Qa=function(c){var l=this.rb;this.rb=c,this.xi(l)},Qe.prototype.lg=function(c){this.Ub=50*c;var l=c,g=(c>this.K.og&&(l=Math.atan((c-this.K.og)/this.K.Qh)*this.K.Qh+this.K.og),l=Math.sqrt(4*Math.pow(5*l,.707106781186548)+25),Math.min(200,Math.max(3,5*(l-5)+1)));if(c=this.$a,this.xb=.025*(5+.9*l),this.$a=Math.floor(g),this.bi=g-this.$a,0<c&&c<this.$a)for(var l=this.Vb[2*c-2],g=this.Vb[2*c-1],m=this.Za[2*c-2],x=this.Za[2*c-1],w=this.ia[2*c-2],S=this.ia[2*c-1];c<this.$a;c++)this.Vb[2*c]=l,this.Vb[2*c+1]=g,this.Za[2*c]=m,this.Za[2*c+1]=x,this.ia[2*c]=w,this.ia[2*c+1]=S},Qe.prototype.So=function(c,l){for(this.$a=l,l=0;l<this.$a;l++)this.Vb[2*l]=this.Za[2*l]=this.ia[2*l]=c(),this.Vb[2*l+1]=this.Za[2*l+1]=this.ia[2*l+1]=c()},Qe.prototype.pk=function(c,l,g){for(this.uf=g,g=0;g<this.$a;g++)this.Vb[2*g]=this.Za[2*g],this.Vb[2*g+1]=this.Za[2*g+1];this.Ll(c-this.Za[0],l-this.Za[1],this.$a,this.Za)},Qe.prototype.Ll=function(c,l,g,m){var x=G.eh(c,l);if(!(x<=0)){var w=m[0];m[0]+=c,c=m[1],m[1]+=l;for(var S=1-2*(l=this.xb/(this.xb+x)),M=1,O=g-1;M<O;M++){var k=m[2*M];m[2*M]=m[2*M-2]*S+(k+w)*l,w=k,m[2*M+1]=m[2*M-1]*S+((k=m[2*M+1])+c)*l,c=k}l=this.bi*this.xb/(this.bi*this.xb+x),m[2*g-2]=m[2*g-4]*(S=1-2*l)+(m[2*g-2]+w)*l,m[2*g-1]=m[2*g-3]*S+(m[2*g-1]+c)*l}},Qe.prototype.Ne=function(){return{nb:this.ia[0],ob:this.ia[1]}},Qe.prototype.wh=function(c,l){for(var g=1e6,m=c,x=l,w=0;w<this.$a;w++){var S=this.ia[2*w],M=this.ia[2*w+1],O=G.eh(c-S,l-M);O<g&&(g=O,m=S,x=M)}return{nb:m,ob:x,kg:g}},Qe.prototype.Yj=function(c){this.hl=c},Qe.prototype.Lf=function(c,l){this.Wa=G.Q(this.Wa,this.od?this.uf?.9+.1*Math.cos(c/400*3.141592653589793):1:0,l,.00125),this.Ig=G.Q(this.Ig,!this.od||this.uf?1:0,l,.0025),this.Ha!=null&&(this.Ha.ma.alpha=this.Wa),this.ka!=null&&(this.ka.alpha=this.Wa)},Qe.prototype.Qf=function(c,l,g,m){if(this.rb&&this.od)for(var x=Math.pow(.11112,l/95),w=0;w<this.$a;w++){var S=G.Of(this.Vb[2*w+1],this.Za[2*w+1],g);this.ia[2*w]=G.Of(G.Of(this.Vb[2*w],this.Za[2*w],g),this.ia[2*w],x),this.ia[2*w+1]=G.Of(S,this.ia[2*w+1],x)}if(this.Ha!=null&&this.rb&&this.Ha.Ol(this,c,l,m),this.ka!=null&&(this.ka.Oe.x=this.ia[0],this.ka.Oe.y=this.ia[1]-3*this.xb),this.aa!=null&&U["1s"]){for(var M in this.aa.x=this.ka.position.x,this.aa.y=this.ka.position.y+1,this.aa.ac)this.qa[M]!=null&&this.qa[M].Aa||(this.aa.removeChild(this.aa.ac[M]),delete this.aa.ac[M]);for(var O in c=0,this.qa)(l=this.qa[O])&&l.Aa&&(g=this.aa.ac[O],g||(l=E.B.V().fh(l.ua).Na,this.aa.ac[O]=new we(l.ig()),g=this.aa.ac[O],g.width=30,g.height=30,this.aa.addChild(g)),g.x=c,c+=35);this.aa[n("feffa9e76d67")].x=.5*this.aa.width,this.aa[n("a324cce0482c")].y=this.aa.height}},Qe.prototype.xi=function(c){this.rb?c||this.Rl():(this.Ha!=null&&G.Ta(this.Ha.ma),this.ka!=null&&G.Ta(this.ka),this.aa!=null&&G.Ta(this.aa))},Qe.prototype.Rl=function(){this.Ha==null?this.Ha=new b.bh:G.Ta(this.Ha.ma),this.Ha.$d(E.l.K.sd,E.B.V().Gf(this.S.qi),E.B.V().Fe(this.S.oa),E.B.V().qj(this.S.Lb),E.B.V().sj(this.S.vb),E.B.V().xj(this.S.Ob),E.B.V().ah(this.S.eb),"#ffffff"),this.ka==null?(this.ka=new je({text:"",style:{fontFamily:"PTSans"}}),this.ka.Oe={x:0,y:0},this.ka.anchor.set(.5,0)):G.Ta(this.ka),this.aa==null?(this.aa=new fe,this.aa.ac={}):G.Ta(this.aa),this.ka.style.fontSize=U["1w"],E.B.V().Fe(this.S.oa),this.ka.style.fill=U["1v"],this.ka.text=this.S.Cb,this.hl.On(this.S.T,this.Ha,this.ka,this.aa)},Qe.Uf=function(){this.T=0,this.qi=b.ee.hf,this.eb=this.Ob=this.vb=this.Lb=this.oa=0,this.Cb=""},Qe),b.ej=(kt.prototype.dm=function(c){return new kt(c,this.Ib,this.Mb,this.wb,this.Pb)},kt.prototype.jm=function(c){return new kt(this.Ja,c,this.Mb,this.wb,this.Pb)},kt.prototype.pm=function(c){return new kt(this.Ja,this.Ib,c,this.wb,this.Pb)},kt.prototype.wm=function(c){return new kt(this.Ja,this.Ib,this.Mb,c,this.Pb)},kt.prototype.Bm=function(c){return new kt(this.Ja,this.Ib,this.Mb,this.wb,c)},kt),b.Hi=(I=new b.ej(0,0,0,0,0),Ut.prototype.ld=function(){return this.H.ma},Ut.prototype.Ii=function(c){if(this.Y=c,this.H.Y!==c){for(var l=c;l<this.H.o.length;l++)this.H.o[l].za();for(;this.H.Y>c;)--this.H.Y,(l=this.H.o[this.H.Y]).id.Bd(),l.O.Bd();for(;this.H.Y<c;)l=this.H.o[this.H.Y],this.H.Y+=1,this.H.ma[n("cf61b526106c3c2ab3")](l.O.L),this.H.ma[n("edbf0bc4328a9ac891")](l.id.L),l.O.Sa(this.Sg),l.id.Sa(this.Ug);for(c=0;c<this.H.P.td.length;c++)this.H.P.td[c].Sa(this.Xg);for(c=0;c<this.H.P.vd.length;c++)this.H.P.vd[c].Sa(this.Zg);for(c=0;c<this.H.P.Tc.length;c++)this.H.P.Tc[c].Sa(this.$g);for(c=0;c<this.H.P.wd.length;c++)this.H.P.wd[c].Sa(this.dh)}},Ut.prototype.Ec=function(c){this.ed=c,this.Pg=n("483cb8a82afbe8793647"),this.hh()},Ut.prototype.Em=function(c){this.ed=I,this.Pg=c,this.hh()},Ut.prototype.hh=function(){this.H.$d(b.Oc.hk,null,E.B.V().Fe(this.ed.Ja),E.B.V().qj(this.ed.Ib),E.B.V().sj(this.ed.Mb),E.B.V().xj(this.ed.Pb),E.B.V().ah(this.ed.wb),this.Pg)},Ut.prototype.Li=function(c){this.yd=c},Ut.prototype.pl=function(c,l){for(this.Sg=c,this.Ug=l,c=0;c<this.Y;c++)(l=this.H.o[c]).O.Sa(this.Sg),l.id.Sa(this.Ug)},Ut.prototype.Wn=function(c,l,g,m){for(this.Xg=c,this.Zg=l,this.$g=g,this.dh=m,c=0;c<this.H.P.td.length;c++)this.H.P.td[c].Sa(this.Xg);for(c=0;c<this.H.P.vd.length;c++)this.H.P.vd[c].Sa(this.Zg);for(c=0;c<this.H.P.Tc.length;c++)this.H.P.Tc[c].Sa(this.$g);for(c=0;c<this.H.P.wd.length;c++)this.H.P.wd[c].Sa(this.dh)},Ut.prototype.Ga=function(){var c,l,g,m=2*this.yd,x=3*this.yd;for(0<this.Y&&(c=this.fd[0],l=this.fd[1],g=this.fd[2],this.H.o[0].ja(c,l,m,x,g),this.H.P.ja(c,l,m,g)),c=1;c<this.Y;c++)this.H.o[c].ja(this.fd[3*c],this.fd[3*c+1],m,x,this.fd[3*c+2])},Ut.prototype.ho=function(c){c.render({container:this.H.ma})},Ut),b.i=(He.cc=$(n("095fb90fef1f6c2b76f0fc31fbe23a2b78e4ed2dee")),He.fc=$(n("8fe5a33160b06763e3abf12779a365")),He.hc=$(n("adbb1d5342cdd00dd4ca1a0a4cdecf03d3dd")),He.jc=$(n("c43034a4a5f87870b96d23e8a2c062")),He.lc=$(n("e89c18088b5c43daddb75b2683")),He.Jb=$(n("a93f19ef5f7bdc95dd5640c9434fd29f")),He.oc=$(n("8b19bf4d622178ecbe29f0e862656fe3fe3b")),He.Xb=$(n("b3418795470749dfcb41cbc75a07")),He.pc=$(n("b0a4c030c06a97f4ccec8826ca649bf8")),He.qc=$(n("ab799fad430f50c6da0ad28b41015cdd")),He.rc=$(n("382c48b84ee80d7b3278e1e721f1ab61217cfd")),He.sc=$(n("74e084741d3bc8a40ee0d92ef434b5b2fdf8a538e637afb8f8b4a131bd17bb86e3")),He.tc=$(n("5563e53bbc3829632f63b8718c374e770a38897d8a2e0273037399499415")),He.prototype.C=function(){},He.prototype.gb=function(){},He.prototype.da=function(){},He.prototype.ge=function(){},He.prototype.na=function(){},He.prototype.Ya=function(){},He),b.Vl=(F=$(n("2c585ccc56681ce258a81566487d13e452")),D=$(n("0ddbbdf3f76b7da5792bf4a7f77e72a2686b")),H=$(n("adbb1d5352cddd03c7c7431b14c8dc")),N=$(n("2f450391c60ad99040020dc9c108d1960b1f78d0")),j=$(n("5563e53bbf23356d3163b2759221027300")),re=$(n("039137c5e1d1e79b67917e9de0b2f4")),ce=$(n("08fc78686a3420be7ccc220f750633")),Z=$(n("00f47060623c28b664f428346d2f2a")),q=$(n("3d0b8dc3a6532e916855a696bf5b38")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.nd);var c=this,l=q.get()[0];F.text(G.N(n("d761b72e3e747329be7d847c117116238b6cc72e0268013b"))),D.text(G.N(n("d28afa81b31fb60ebb86f9c3ac0ad3048e878a968919dc10848ec9"))),D.click(function(){E.h.J(E.h.pa)}),De.Ji=()=>{C.Se=!C.Se},De.ii=()=>{var m,x,w;C.$&&(m=E.l.U,(x=C.cd).length)&&m.Ha&&(w=x.indexOf(m.S.oa),m.Ha.wj(w===-1?x[0]:x[(w+1)%x.length]))},De.rm=()=>{var m,x,w;C.$&&(m=E.l.U,(x=C.uh).length)&&(w=x.indexOf(m.S.eb),m.Ha.Nl(w===-1?x[0]:x[(w+1)%x.length]))},De.Zc=()=>{C.He&&Ui&&Ui(C.He,C.eg)},De.io=()=>{ba(1)},De.Dj=()=>{var m,x;C.$&&(m=Object.keys(Ga)).length&&(x=m.indexOf(U["1b"]),U["1b"]=x===-1?m[0]:m[(x+1)%m.length],C.$h())},De.Lk=()=>{if(C.$){U["1af"]&&(Jr.pause(),Jr.play());try{C.Ra&&C.Ra.send(Bi(JSON.stringify({[n("1404")]:2})))}catch{}}};let g=[ga,ii];$(n("a33cd1fb4b")).keydown(function(m){m.keyCode===32&&(c.Qb=!0)}).keyup(function(m){var x;m.target.type!==n("e603cd019e")&&((x=m.code)===n("6872cfc23d")?De.Ji():x===n("5189b6fd93")?De.ii():x===n("f8825f32b4")&&C.$?De.Lk():x===n("20ba070a63")?De.rm():x===n("81b966cd57")?De.Zc():x===n("8f8bf47b49")?De.io():x===n("33af505ff4")?De.Dj():x===n("a5dd422163")?C.Je=!C.Je:x===n("2c360b867c")?C.Ee=!C.Ee:x===n("9783fc7355")?(E.h.D.F.Ba.Jc=!E.h.D.F.Ba.Jc,E.h.D.F.jb.visible=E.h.D.F.Ba.Jc,E.h.D.F.Ba.Ga(E.h.D.F.Ba.ac)):x===n("3cc30b623070e6d220f1")?ba(C.mc+U["1i"]):x===n("405ff7fe34f4e2443d7bfee92dfefa")&&ba(C.mc-U["1i"]),m.keyCode===32)&&(c.Qb=!1)}),l.addEventListener(n("34f21e625d65"),m=>{C.Wh&&(m.deltaY<0?ba(C.mc+U["1i"]):ba(C.mc-U["1i"]))},{capture:!0,passive:!0}),l.addEventListener(n("e0c54d46875d4bd89edc"),function(m){var x,w;m&&U["1f"]===0&&!C.Se&&(m=m.touches[0],x=.5*l.offsetWidth,w=.5*l.offsetHeight,n("4d4ba164b4243a6a3022")!=typeof m.clientX?c.wc=Math.atan2(m.clientY-w,m.clientX-x):c.wc=Math.atan2(m.pageY-w,m.pageX-x),m=Math.min(Math.sqrt((x-m.pageX)*(x-m.pageX)+(w-m.pageY)*(w-m.pageY)),110),et.position.x=x+m*Math.cos(c.wc),et.position.y=w+m*Math.sin(c.wc))},{capture:!0,passive:!0}),l.addEventListener(n("ce2bff14b18be791b715ec"),function(m){m.preventDefault(),U["1f"]!==2&&U["1f"]!==3&&m&&(c.Qb=2<=m.touches.length)},!0),l.addEventListener(n("95f2783d7ae2fe22f9"),function(m){U["1f"]!==2&&U["1f"]!==3&&m&&(c.Qb=2<=m.touches.length)},{capture:!0,passive:!0}),l.addEventListener(n("b14f5c914643da87cf4f"),function(m){!m||C.Se||m.shiftKey||(c.wc=Math.atan2(m.clientY-.5*l.offsetHeight,m.clientX-.5*l.offsetWidth))},!0),l.addEventListener(n("00bc2d26773022b87fb7"),function(){c.Qb=!0},!0),l.addEventListener(n("354bd89dca4f4e9c"),function(){c.Qb=!1},!0),l.addEventListener(n("c304aadf290c2cc8a613bbdb"),function(m){var x,w;ei&&m.pointerId===Df?(ei.Fh=!0,ei.parent[n("43802a7aa89ba856")]({x:m.clientX,y:m.clientY},null,ei.position)):Qa.any&&(Ct&&m.pointerId===Wo&&(x=Ct.height/2,w=Math.max(x,Math.min(Ct.parent[n("6a0f4331019c516d")]({x:m.clientX,y:m.clientY}).y,Ct.parent.height-x)),Ct.parent.bj((Ct.parent.height-Ct.height-(w-x))/(Ct.parent.height-Ct.height),1)),J.ug||m.pointerId!==J.cb||J.Vo(m))},{capture:!0,passive:!0}),l.addEventListener(n("a5e6483147eece2ed8ee"),function(m){ei=null,Qa.any&&(Ct=null,Wo=-1,et.cb===m.pointerId&&(et.cb=-1,et.alpha=.25),J.ug||m.pointerId!==J.cb||(J.visible=J.Kh,J.Uo(),J.cb=-1))},{capture:!0,passive:!0}),Qa.any&&(C.sh=c,l.addEventListener(n("0102ec5deb02624a6d15fc52"),function(m){if(et.cb===-1&&(et.cb=m.pointerId,et.alpha=1),!J.ug){for(var x of g)if(m.clientX>=x.x&&m.clientX<=x.x+x.width&&m.clientY>=x.y&&m.clientY<=x.y+x.height)return;J.sg||J.cb!==-1||(J.cb=m.pointerId,J.x=m.clientX,J.y=m.clientY,J.visible=!0,J.Ck())}},{capture:!0,passive:!0}))})).prototype.C=function(){},Q.prototype.gb=function(){R.g(b.i.cc,50),R.g(b.i.fc,1),R.g(b.i.hc,50),R.g(b.i.jc,50),R.A(b.i.lc,500),this.Ka===se.df?R.g(b.i.Jb,1):R.A(b.i.Jb,500),R.g(b.i.oc,50),R.g(b.i.Xb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.df=function(){return this.Ka=se.df,this},Q.prototype.Nh=function(){return R.g(H,1),G.ha(function(){R.A(H,500)},3e3),R.g(N,1),G.ha(function(){R.A(N,500)},500),this.Ka=se.Nh,this},Q.prototype.da=function(){this.Qb=!1,this.F.na()},Q.prototype.na=function(){this.F.na()},Q.prototype.Ya=function(c,l){this.F.Ya(c,l)},Q.prototype.Po=function(c,l,g){var m;1<=l&&l<=10?(l=G.N(n("3ce4106b2569acf425f8e3393a7cf9ee20e9a06f3c40f1c67acc")+l),m=G.N(n("51abbde0b0be79ef38a7bea2afab2ce50da6cde489b704fd20b4a9f38cac0b")),G.N(n("0751671eee44a3196e2d74ace02bf6ef762437f9f32defeb4d3552e7cf208bfb422b5addc433c9")).replace(n("6d7bd862c1474460"),g).replace(n("a7fd9e581af91a5a"),c).replace(n("7064858146e08103"),l)):(l="",m=G.N(n("ebf583ba0ad85f8592c990c805cd0a9f97d8d39a0dc9c99b77")),G.N(n("44fce8732d61a4fc2df0eb31234ef1ca35c9b8543048e8ce0ec8ed5a0c458cde01c6d579074bc7")).replace(n("a4d0d135985cddbf"),g).replace(n("c8bc3d59fd3839db"),c)),j.html(G.N(n("e29aca91830f861e8b96c9d39c1ac3f49e779a7c99f2ca"))),re.html(c),ce.html(l),Z.html(m)},Q.prototype.sa=async function(){this.F=new b.bp,await this.F.sa(q),this.Ka=se.df,this.wc=0,this.Qb=!1},se={df:0,Nh:1},Q),b.$n=(te=$(n("c2f6b6e6aa38e93da3b5ebf0be2dff06a086e796fb04f707ae")),Ie=$(n("786c88f810a2df2be93fa5fef4a7a930fa3cb9a8a1bfaf2d")),Tt=$(n("56c22ada36047d09378147dc12014b1214925b8a470f49051a")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.nd),this.Vh=-1,this.mf=""})).prototype.C=function(){},Q.prototype.gb=function(){R.A(b.i.cc,500),R.A(b.i.fc,1),R.g(b.i.hc,50),R.g(b.i.jc,50),R.g(b.i.lc,50),R.g(b.i.Jb,50),R.g(b.i.oc,50),R.g(b.i.Xb,50),R.g(b.i.pc,50),R.A(b.i.qc,500),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.da=function(){},Q.prototype.ge=function(){},Q.prototype.jp=function(){this.rf("",0),R.A(te,100)},Q.prototype.Vk=function(){R.g(te,100)},Q.prototype.rf=function(c,l){this.mf!==c&&(this.mf=c),c=G.Id(Math.floor(100*l),0,100),this.Vh!==c&&(Ie.css(n("6046cbd710dd"),c+n("59efe9b9")),Tt.html(c+n("92866695b3156d")))},Q),b.cm=(ne=$(n("4a7e3e6e23b23d8d3b0d7148228868")),$(n("8074f0e0e9b8eb3be137aff6efb8a02bf513")),$(n("96026a1af7c671c1f741051cc0dc10c1c95a")),de=$(n("d96f693f3023f2728e26177b087b856d9d2e04721e")),Ni=$(n("cd9b7db33caffee9b0a822a53aa5b5f8")),Ae=$(n("c7ddfb0926916052a061b52b3d63")),Ot=$(n("039137c5ead5a49664dd6997e1a7bc7261ab7274f2bbea2779ad6f")),ma=$(n("d88c2818b14033c38fd0465a8a520bc79ad64d49894e5d9284a44a37")),$(n("23f11725cab5847f5db9436a8294d45a47")),ta=$(n("681c988801d0834c1b28dcee17a4d831")),_a=$(n("f46004f495a41738972450e270a32725")),ji=$(n("bc28ccbcadfc2f60af7c68baa6fc726f")),Vt=$(n("43d17705aa95e44920952313a076b430")),ya=$(n("a13711e7487b8aabc27345f14268ca929c4046904149d9c5d5434898")),xa=$(n("f46004f495a4173b9d3f5fa273fc2c3a673e28b665bc")),Fa=$(n("4efa22d23f0e39153795798429467b0c338a0d9c0d1741")),va=$(n("1be92f3df2bd8c7340a04c79c9f5d9764aa5")),Ta=$(n("94c0e454f504f78aff99b700ce5c8586c18692")),Da=$(n("176d2bb9f621b0ef7c2448fdcd79c9f9403147")),It=$(n("992f29ff7063b2a0cd735ab1573bceb6cf75")),Gt=$(n("08fc7868613063ac648e2006")),Bt=$(n("f1474117180bda449c0b1f490f1d")),Ft=$(n("4efa22d23f0e391633936c80340c6f")),Xi=$(n("18cc68587100738c4f980c000917098f")),ri=$(n("3a6ece7e53a22da12e327d3034fa69af2b2f6d2f")),si=$(n("7b094f5d925d2c02ef55fc1375157c09ee4ee31f6225")),Yo=$(n("f22686369bea95ea9562d27ed3f9a1fd")),$o=$(n("984ce8d8f180f31fcc109b96d6d8830fd854889ade")),Ko=$(n("5eca12c20f1e09050a96519c185649051ed246601e")),qo=$(n("61f7d1a788bb4ae805bb92f99ff303c507879f")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.jf)})).prototype.sa=async function(){this.Vh=-1,this.mf="",this.le=new b.Tg,await this.le.sa(ta),Fa.click(function(){}),ta.click(function(){E.m.v&&E.h.J(E.h.Rf)}),_a.click(function(){E.u.ok()}),ji.click(function(){E.u.Oo()}),xa.keypress(function(l){l.keyCode===13&&E.hi()}),va.click(function(){E.hi()}),Ta.click(function(){E.hi()}),Da.click(function(){E.h.J(E.h.uj)}),Ft.click(function(){E.h.J(E.h.Bf)}),It.click(function(){E.m.v&&E.h.J(E.h.nj)}),Bt.click(function(){E.m.v&&E.h.J(E.h.gj)}),Gt.click(function(){E.m.v&&E.h.J(E.h.Fj)}),Xi.click(function(){E.m.v&&E.h.J(E.h.Cf)}),this.Op();var c=b.I.ec(b.I.fj);c!==n("64f4f4722678")&&c!==n("698eaedda0ec")&&(c=n("76466a4c34ca")),Fa.val(c)},Q.prototype.C=function(){var c=this;E.m.Dh(function(){E.m.v?(E.u.ca(E.m.Cn(),b.s.Z),E.u.ca(E.m.Gn(),b.s.wa),E.u.ca(E.m.ol(),b.s.Da),E.u.ca(E.m.Ln(),b.s.Fa),E.u.ca(E.m.Pn(),b.s.Ea)):(E.u.ca(E.zl(),b.s.Z),E.u.ca(0,b.s.wa),E.u.ca(0,b.s.Da),E.u.ca(0,b.s.Fa),E.u.ca(0,b.s.Ea))}),E.m.Dh(function(){va.toggle(E.m.v),Da.toggle(!E.m.v),Ta.toggle(!E.m.v),Bt.toggle(E.m.v),Gt.toggle(E.m.v),Xi.toggle(E.m.v),It.toggle(!0),Ft.toggle(!0),E.m.v?(Vt.hide(),si.html(E.m.oj()),ri.attr(n("da98ee8e"),E.m.vj()),Yo.html(E.m.Od()),$o.width(100*E.m.Tf()/E.m.Vf()+n("2c585cca")),Ko.html(E.m.Tf()+n("ab799fae0a5277878154")+E.m.Vf()),qo.html(E.m.Sf()),xa.val(E.m.Jd())):(Vt.toggle(!E.Eg()),si.html(si.data(n("370f4ccfc818"))),ri.attr(n("c5c5351b"),Gf),Yo.html(n("4183f3")),$o.width(n("eacb")),Ko.html(""),qo.html(1),xa.val(b.I.ec(b.I.jj)))}),E.u.Ch(function(){c.le.Ec(E.u.Ah())})},Q.prototype.gb=function(){R.A(b.i.cc,500),R.A(b.i.fc,1),R.A(b.i.hc,500),R.A(b.i.jc,500),R.g(b.i.lc,50),R.g(b.i.Jb,50),R.A(b.i.oc,500),R.g(b.i.Xb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.yi=function(){R.A(ne,500),R.A(de,500),R.A(Ni,500),R.g(Ae,100)},Q.prototype.Ml=function(){R.g(ne,100),R.g(de,100),R.g(Ni,100),R.A(Ae,500)},Q.prototype.rf=function(c,l){this.mf!==c&&(this.mf=c),c=G.Id(Math.floor(100*l),0,100),this.Vh!==c&&(Ot.css(n("a0068b97d09d"),c+n("6573d52d")),ma.html(c+n("61f7d1a4c0e452")))},Q.prototype.da=function(){this.le.ud(!0)},Q.prototype.ge=function(){this.le.ud(!1)},Q.prototype.na=function(){this.le.na()},Q.prototype.Ya=function(){this.le.Ya()},Q.prototype.Jd=function(){return xa.val()},Q.prototype.Ei=function(){return Fa.val()},Q.prototype.Op=function(){var c,l;E.Eg()||(Vt.show(),c=G.N(n("dbe5b3aa3ae84fb582f980f80af900b4c5f188b01a8e048c9fcb968d24c3108488828e861ec2e4")),l=encodeURIComponent(G.N(n("8d17612474fabd23f4eb726674ebf222b3e37a3e54bcd63ac9f944337af1c232deb04c0f5cc7f20ad1f65b0940"))),ya.append($('<a class="mm-skin-over-button" id="mm-skin-over-fb" target="_blank" href="https://www.facebook.com/dialog/share?app_id=861926850619051&display=popup&href=https%3A%2F%2Fwormate.io&redirect_uri=https%3A%2F%2Fwormate.io&hashtag=%23wormateio&quote='+l+'"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDQ1NiA0NTYiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGQ9Ik0yNDQuMyA0NTZWMjc5LjdoLTU5LjN2LTcxLjloNTkuM3YtNjAuNGMwLTQzLjkgMzUuNi03OS41IDc5LjUtNzkuNWg2MnY2NC42aC00NC40Yy0xMy45IDAtMjUuMyAxMS4zLTI1LjMgMjUuM3Y1MGg2OC41bC05LjUgNzEuOWgtNTkuMVY0NTZ6IiBmaWxsPSIjZmZmIi8+PC9zdmc+"/>'+n("6b395e1d9c50900c561730")+c+n("e0941170c10760c498d8441edf780b8cb3e4000595600582")).click(function(){E.Xl(),G.ha(function(){Vt.hide()},3e3)})))},Q),b.Do=((Q=G.fa(b.i,function(){b.i.call(this,b.fb.nd)})).prototype.C=function(){},Q.prototype.gb=function(){R.g(b.i.cc,50),R.g(b.i.fc,1),R.g(b.i.hc,50),R.g(b.i.jc,50),R.g(b.i.lc,50),R.g(b.i.Jb,50),R.g(b.i.oc,50),R.g(b.i.Xb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q),b.Kn=((Q=G.fa(b.i,function(){b.i.call(this,b.fb.nd)})).prototype.C=function(){},Q.prototype.gb=function(){R.A(b.i.cc,500),R.A(b.i.fc,1),R.g(b.i.hc,50),R.g(b.i.jc,50),R.g(b.i.lc,50),R.g(b.i.Jb,50),R.g(b.i.oc,50),R.g(b.i.Xb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.A(b.i.rc,500),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.da=function(){},Q),b.Un=(kf=$(n("8b19bf4d7b2f70f1e721e7ab643c78e9f0")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.nd),this.xe=[],this.ze=null})).prototype.C=function(){},Q.prototype.gb=function(){R.A(b.i.cc,500),R.A(b.i.fc,1),R.g(b.i.hc,50),R.A(b.i.jc,500),R.g(b.i.lc,50),R.g(b.i.Jb,50),R.g(b.i.oc,50),R.g(b.i.Xb,50),R.A(b.i.pc,500),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.g(b.i.tc,50)},Q.prototype.da=function(){this.Qi()},Q.prototype.sp=function(){return this.ze!=null||0<this.xe.length},Q.prototype.Kg=function(c){this.xe.unshift(c),G.ha(function(){E.h.Xh()},0)},Q.prototype.Bk=function(c){this.xe.push(c),G.ha(function(){E.h.Xh()},0)},Q.prototype.Qi=function(){var c,l,g=this;this.ze==null&&(this.xe.length===0?E.h.ie():(c=this.xe.shift(),l=(this.ze=c).ld(),R.A(l,300),kf.append(l),c.Be=function(){l.fadeOut(300),G.ha(function(){l.remove()},300),g.ze===c&&(g.ze=null),g.Qi()},c.da()))},Q),b.fb={nd:0,jf:1},b.j=(Uf=$(n("51e7e1b7a5a927fd29e7b6e9b3bb72fc00b086f8")),Zo=$(n("c672ba6abab4fca8be72fd04bc96b986b90ef61af789f395")),Qo=$(n("a5b3156b59f5db29ddb342055fd79e07dacf591b14dcda00")),$(n("ee5a82b2826cc47086aad5ec947e916f9fecab")).click(function(){E.h.ie()}),Zo.click(function(){E.m.v&&E.h.J(E.h.Cf)}),(Xe=G.fa(b.i,function(c,l){b.i.call(this,b.fb.jf),this.Cb=c,this.Im=l,this.Ff=[]})).prototype.C=function(){Xe.parent.prototype.C.call(this),Xe.Sm||(Xe.Sm=!0,E.m.Dh(function(){E.m.v?Qo.html(E.m.Od()):Qo.html(n("e728"))})),R.g(b.j.Vg,100)},Xe.yb=$(n("7543c51b9a0512420e4389596405")),Xe.zb=$(n("302440b058e017635d7b09a64ae41b78")),Xe.Bb=$(n("b8acc838cc7f91e9a9fd673eb27c63e0")),Xe.Db=$(n("72a606b61a685f6014a64ae41b78")),Xe.Eb=$(n("6f8543d180c181921ec61e99d6da948b08")),Xe.Fb=$(n("76220a3a09e055e30d223678e7e4")),Xe.Gb=$(n("d96f693f2e3ab062847f157d0021")),Xe.Hb=$(n("475d7b89bc19accc62f638a7a4")),Xe.Kb=$(n("4513f5cbbe533f94294cae77fc213c6a2623b97cf43c32692a")),Xe.Nb=$(n("2d3b9dd3d5475f8141439a89da495499535a9286a85734")),Xe.Vg=$(n("b420c4b4c8e59f6acf68d3f8a1f8763eb27c63e0")),Xe.prototype.gb=function(){R.A(b.i.cc,1),R.A(b.i.fc,500),R.A(b.i.hc,200),R.A(b.i.jc,200),R.g(b.i.lc,200),R.g(b.i.Jb,200),R.g(b.i.oc,200),R.A(b.i.Xb,200),R.g(b.i.pc,200),R.g(b.i.qc,200),R.g(b.i.rc,200),R.g(b.i.sc,200),R.g(b.i.tc,200),Uf.html(this.Cb),Zo.toggle(this.Im),this.ib()},Xe.prototype.ib=function(){},Xe.prototype.Re=function(c){var l=this,g=2147483647&G.jo();return this.Ff.push(g),R.A(b.j.Vg,100),G.ha(function(){l.Oj(g)},c),new P5(this,g)},Xe.prototype.Oj=function(c){(c=this.Ff.indexOf(c))<0||(this.Ff.splice(c,1),this.Ff.length===0&&R.g(b.j.Vg,100))},Xe),Ol.prototype.dp=function(){this.Xn.Oj(this.bo)};var jf,Xf,Hf,zf,Vf,Wf,$i,cc,dc,hc,fc,lc,uc,bc,di,Yf,Ki,$f,Kf,qf,Zf,Qf,Jf,el,tl,al,il,rl,sl,qi,rs,ss,ns,nl,ol,cl,dl,os,hi,hl,fl,pc,cs,gc,Zi,ll,ds,ul,bl,at,pl,gl,ml,_l,Qi,yl,xl,hs,mc,Ji,vl,_c,yc,xc,vc,er,Tl,Sl,nt,tr,wl,Al,ar,ft,fs,El,Ua,Pl,Rl,Q,Tc,wa,Ml,Cl,P5=Ol;function Ol(c,l){this.Xn=c,this.bo=l}function ir(c,l){this.ye=c,this.bd=0,this.Yb=l}function ra(c,l,g){this.ye=c,this.ua=l,this.qd=g,this.yf={},this.bb=[[]],this.Xf=this.Ud=-10}function Sc(){this.Be=function(){}}function Il(){var w=Tc[n("f3d39c8203c0")](),c=Tc[n("1089370a730d22")](),l=wa[n("e618dd0d8f89fb948a0bd8")](),g=wa[n("7d018a446400cb51ec116f4c")](),m=Ml[n("7826cfbf19bff62ae936aaa7")](),x=Cl[n("e618dd0d8f89e4988718d8f5")](),w=Math.min(1,Math.min((c-x-m)/g,w/l));w=n("53702727b97bb52b2f697563ea20c46056315715c22ad9775e2c486cda09d450435716079b4dd1").concat(w,n("e890")),wa[n("6fc30291")](n("633912338573802e46681f3f8153970d0149"),w),wa[n("6fc30291")](n("374554c5c141c9dc5e1e32d4ac06a8"),w),wa[n("96442b5a")](n("4ef27d927f17660438947e862806"),w),wa[n("6fc30291")](n("419fac59b1c426163adca40ea0"),w),wa[n("adfd5c13")](n("d297e684b814fe06a886"),w),E.na(),b.ic[n("272b4ae8c430c1ca40")](0,1)}b.Hm=(jf=$(n("7b094f5d8c446e00e619e7037e156a15e252fe213e7224b2a374")),Xf=$(n("277d1ba9d828c2ec4a4d53d7ca49d6c95e064af58e5c8d9e0f")),Hf=$(n("a93f19ef5e6ac092d40f51914c0bd487d04448b30c188fc0f1")),zf=$(n("ef05c35100501a1492059b1f02011e01965e722db404b546")),Vf=$(n("475d7b89b808a2cc2aad33b7aaa9b6a93ee62a95e8bee8fe")),Wf=$(n("a6125a0ad9cf03cfcb121234cbee17aadf290b168bf949fd")),($i=G.fa(b.j,function(){b.j.call(this,G.N(n("027aaa7163efe6fe6b76a9337ef0a0d4620db94078d2f6ca7542b25e30db81d3")),!1),jf.click(function(){n("13a77a6ff9bbc63b29f92d3eaf")}),Xf.click(function(){n("4072edfa2ae6d9227829baab")}),Hf.click(function(){n("5d2db0798f213c255366d728")}),zf.click(function(){n("584af5c232dec118500192")}),Vf.click(function(){n("11e1fc2dfbf5487b2bbfab")}),Wf.click(function(){n("26d487d04448b30c1c8ac0")})})).prototype.C=function(){$i.parent.prototype.C.call(this)},$i.prototype.ib=function(){R.A(b.j.yb,200),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Hb,50),R.g(b.j.Kb,50),R.g(b.j.Nb,50)},$i.prototype.da=function(){},$i),b.Rm=(cc=$(n("e73ddb6903750a369c439e101609010795449c")),dc=$(n("0f6523b1ff21f4e2723a6aa7f939e9fa703e0cfec622c0fa")),hc=$(n("56c22ada360e7d093b9d53dc0006500109990591031c440e0d904264")),fc=$(n("4bd97f0da365b0263676266bb57dad3e34627025b67c8d21")),lc=n("996862807878fabc"),uc=n("85147e70601de36fee117d25"),bc=n("3ead799a2b3f682607b96c912f3a680e26b06492"),(di=G.fa(b.j,function(){b.j.call(this,G.N(n("bc6490eba5e92c74a57863b9b8f67a6ebc3363fabed43c4fb14472c2aada345fbd4f")),!0);var c=this;this.rh={},this.Pc={xh:{qd:dc,Eh:lc},Jo:{qd:hc,Eh:uc},Mo:{qd:fc,Eh:bc}},dc.click(function(){c.ff(c.Pc.xh)}),hc.click(function(){c.ff(c.Pc.Jo)}),fc.click(function(){c.ff(c.Pc.Mo)})})).prototype.C=function(){di.parent.prototype.C.call(this)},di.prototype.ib=function(){R.g(b.j.yb,50),R.A(b.j.zb,200),R.g(b.j.Bb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Hb,50),R.g(b.j.Kb,50),R.g(b.j.Nb,50)},di.prototype.da=function(){var c=this,l=this.Re(5e3),g=ea+n("5d6bed569127013157108b7d883e0e6e1e");G.vc(g,function(){c.rh={[lc]:[],[uc]:[],[bc]:[]},c.ff(c.rg??c.Pc.xh),l.dp()},function(m){c.rh=m,c.ff(c.rg??c.Pc.xh),l.dp()})},di.prototype.ff=function(c){for(var l in this.rg=c,this.Pc)this.Pc.hasOwnProperty(l)&&this.Pc[l].qd.removeClass(n("d93a29692e3dba74"));this.rg.qd.addClass(n("818271d17685e2dc")),c=this.rh[this.rg.Eh];for(var l="",g=0;g<c.length;g++){var m=c[g];l+='<div class="table-row"><span>'.concat(g+1,'</span><span><img src="').concat(m[n("1c0c288e549010265619")],'"/></span><span>').concat(m[n("307401e646eb176a5d")],n("7ce88d0ca56384a0f4b4a872bb1cefe8cfaebe3efe44e1a6")).concat(m[n("be23e527a7bf")],n("302441c011b73074486814ae0fc85b3c0362f2f22ab0b552")).concat(m[n("ebf484b907f3128d81c1")],n("feaaf3d22721826676f6a6bc395ee92e4deca0c07c06e760")).concat(m[n("f7409c0b1f7f15018b43")],n("bd8b0d4064808551f786")).concat(m[n("07536016e74f")],n("984ce9a8b9df981cd0108cd697b0c344eb5cd8bdc894985a83c4"))}cc.empty(),cc.append(l)},di),b.en=(Yf=$(n("302440b044ea0672482416e45be410222776")),$(n("89df398f7d91ffb5e12f7fab726ff9e5ff68")).remove(),(Ki=G.fa(b.j,function(){var c=this;b.j.call(this,G.N(n("156ff9acfc7235ab7c63fafed17d53a15538cabdc76f05b04279c68e9f565286")),!1),Yf.click(function(){var l=c.Re(1e4);G.ha(function(){E.m.Bp(function(){l.dp()})},500)})})).prototype.C=function(){Ki.parent.prototype.C.call(this)},Ki.prototype.ib=function(){R.g(b.j.yb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.A(b.j.Db,200),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Hb,50),R.g(b.j.Kb,50),R.g(b.j.Nb,50)},Ki.prototype.da=function(){},Ki),b.$m=($f=$(n("29bf996fddec400658ced649d4d0561c58d8")),Kf=$(n("2f450391c316dac05e045c87ce1fd8dc51112cd7")),qf=$(n("b6624a7acab913abd723e57ca7abf4b0b43eed37a9bea1bfaf2d")),Zf=$(n("ddeb6da311a08cf28cba02b50ca29bf99fb70ace1287ded2948a")),Qf=$(n("de4a92429281cb938f1bcd54869eda9882")),Jf=$(n("7d4bcd037100ec52ec1a62157a0eea48a016662779d1f02be7e3")),el=$(n("1a0eee1e6edd8fd74b5f811855c389cd0759894e5aec85b3442a82245a9391a45f")),tl=$(n("3d0b8dc3b1402c922c5aa2d5ba4e2a886055a66cbd31")),al=$(n("d2c6a6d6a615f70fb387f9c0ad1bc105cf9bc1948204c0169e88")),il=$(n("b3418795471a56ccd200d8834c0420c6ee13a4db220b19d6aa05a8da")),rl=$(n("8553350b7908e45ae4126a6d62f6f230b8f2783c78e6cf25f0eb4c2044fcd7")),sl=$(n("23f11725d7aac67c42b04833dc94d0561e965041de9bcd585a985441d1b4a04626")),(qi=G.fa(b.j,function(){b.j.call(this,G.N(n("172177eefe34b3e97e3d44bcd33bd5e3577644ffc52983ee5d0f57cbdf019bd2560a")),!0)})).prototype.C=function(){qi.parent.prototype.C.call(this)},qi.prototype.ib=function(){R.g(b.j.yb,50),R.g(b.j.zb,50),R.A(b.j.Bb,200),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Hb,50),R.g(b.j.Kb,50),R.g(b.j.Nb,50)},qi.prototype.da=function(){var c=E.m.Ao(),c=window.moment([c.year,c.month-1,c.day]).format(n("aaf720"));Kf.html(E.m.oj()),$f.attr(n("61a191f7"),E.m.vj()),qf.width(100*E.m.Tf()/E.m.Vf()+n("b10701d1")),Zf.html(E.m.Tf()+n("56c22ad97f595a486cdf")+E.m.Vf()),Qf.html(E.m.Sf()),Jf.html(E.m.Vn()),el.html(G.Mi(E.m.ao())),tl.html(E.m.fo()),al.html(E.m.no()),il.html(E.m.so()),rl.html(G.Mi(E.m.wo())),sl.html(c)},qi),b.hn=(rs=$(n("9361a7b5642d6dfef222fafd323d54e1ca3788f349394bf6ce3880ed580945c1db")),ss=$(n("3bc90f1dcc95b5462a9a2245ea8baf426699235fad6cb4267e77222fa36bb1")),ns=$(n("4fa563f1a0e1a1b23ee63eb9f6ffb5a128bd0fb38ef196fb14ef00ae88f4")),nl=$(n("499ff94fbdd13ff521efbfebb2a922fc")),ol=$(n("3bc90f1dcf9fb14733d92959a097bc4e669f2250bb61b82c3676")),cl=$(n("36e2cafa4a248c384ee264b42e3670306bb66bba252e6229")),dl=$(n("4197f147b5d9370d3997af19a1db3be57ca3b0e7bab339fc74a9b4e2a9af36fe04a0")),os=$(n("374d0b99cb03cddb4f5d36dbb71ca1c4260f64d9a412bedb21f4")),(hi=G.fa(b.j,function(){b.j.call(this,G.N(n("0a72a2796be7fec6734eb10b66c8a8dc6a05b14870dacec24747905c48d09b975e5a8e")),!1);var c=this;rs.click(function(){var l=!!rs.prop(n("24160e924b920f1f"));b.I.Ab(b.I.Ui,l)}),ss.click(function(){var l=!!ss.prop(n("f90913491e059a54"));b.I.Ab(b.I.Zi,l)}),ns.click(function(){}),nl.click(function(){c.Re(500),E.m.Zh()}),cl.click(function(){E.m.v&&E.h.J(E.h.Si)}),os.click(function(){E.xd()&&E.h.J(E.h.Ki)})})).prototype.C=function(){var c;hi.parent.prototype.C.call(this),c=b.I.ec(b.I.Ui)!==n("e93c0a701e3b"),rs.prop(n("5684708c39007909"),c),c=b.I.ec(b.I.Zi)!==n("4d58ae6ca227"),ss.prop(n("10823a06770e3383"),c),c=b.I.ec(b.I.Ri)!==n("d12432682623"),ns.prop(n("6694409c09104919"),c),E.m.jk(function(){ol.toggle(E.m.v),dl.toggle(E.m.v)})},hi.prototype.ib=function(){R.g(b.j.yb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Db,50),R.A(b.j.Eb,200),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Hb,50),R.g(b.j.Kb,50),R.g(b.j.Nb,50)},hi.prototype.da=function(){E.xd()?os.show():os.hide()},hi.prototype.Vi=function(){return ns.prop(n("71819bc1968d12cc"))},hi),b.rn=(hl=$(n("d3a1e7f524fc36b8bea1aba73ae74cb182fa93")),fl=$(n("0236f62675fca1f7277fa96e6dedb9d1664abb4b3bd3bdd16e")),pc=$(n("9dab2d6352f9ca3a88f155375cea8638c8ed4c1258d2c70ddac81a1c5cd2cf")),cs=$(n("d88c2818af5971dd859c4e5c875e43d3c5db4b49")),gc=$(n("4cb8bc2c2355fdd13188fa483b42ffcf71cfff5d4d45c7cb10")),Zi=$(n("53216775a47cb6383e213f3ba63d832717600a38")),ll=$(n("1be92f3deca4ce6046f94c62c2b5846a59b54e7b")),ds=$(n("a5b3156b5aeec42ec8b348125ed7c317")),ul=$(n("1a0eee1e6ddb8fc3471e925c43c0c5c9585e9a")),bl=$(n("de4a92429187cb87835ade108f8c81938b07c4")),(at=G.fa(b.j,function(){b.j.call(this,G.N(n("fd8711d4e48a2dd3649be296f9957bc97dd0e2a5ff773db77e6ff9bbb77e7aae")),!0)})).prototype.sa=async function(){var c=this;this.Uc=null,this.Vc=[],this.Nk={},this.Ua=new b.Tg,await this.Ua.sa(hl),Zi.click(function(){c.np()}),ul.click(function(){c.Uc.tp()}),bl.click(function(){c.Uc.xp()})},at.prototype.C=function(){at.parent.prototype.C.call(this);var c=this;E.B.Hg(function(){var l=E.B.Ma.hb;c.Vc=[];for(var g=0;g<l[n("7032d9aa1a82c4280d39fbb90eacc70be932b6")].length;g++)c.Vc.push(new pl(c,l[n("3555dc81d76d4983485efe82b3533ab02c55b3")][g]));for(c.Nk={},g=0;g<l[n("7e7c2b78ecd236e7e76e0c70e9ef")].length;g++){var m=l[n("d77bb223354d2f3cbe69a53b0060")][g];c.Nk[m[n("7ca4da")]]=m}c.al()}),this.Cc(!1),E.u.Ch(function(){c.Cc(!1)})},at.prototype.ib=function(){R.g(b.j.yb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.A(b.j.Fb,200),R.g(b.j.Gb,50),R.g(b.j.Hb,50),R.g(b.j.Kb,50),R.g(b.j.Nb,50)},at.prototype.da=function(){this.al(),this.Ua.ud(!0)},at.prototype.ge=function(){this.Ua.ud(!1)},at.prototype.na=function(){this.Ua.na()},at.prototype.Ya=function(){this.Ua.Ya()},at.prototype.al=function(){var c=this,l=this;ds.empty();for(var g=0;g<this.Vc.length;g++)(M=>{var O=c.Vc[M],k=(M=b.d.createElement(n("ea97c5")),ds.append(M),M=$(M),O.Yb.img);k?M.html('<img src="'+k+'" height="40">'):M.html(O.Jp()),M.click(function(){l.mi(O)}),O.si=M})(g);if(0<this.Vc.length){for(var g=E.u.ra(b.s.Z),m=0;m<this.Vc.length;m++)for(var x=this.Vc[m],w=x.Yb.list,S=0;S<w.length;S++)if(w[S]===g)return x.bd=S,void this.mi(x);this.mi(this.Vc[0])}},at.prototype.mi=function(c){this.Uc!==c&&(this.Uc=c,ds.children().removeClass(n("2ecf82a441309121")),this.Uc.si&&this.Uc.si.addClass(n("b47584e2cbfa9f6f")),pc.html(""),c.Yb!=null&&(c=E.B.Ma.hb[n("c8ed6f63b85967fca4")][c.Yb[n("685dcfc80fcfc74f0428ddad")]])!=null&&pc.html(G.xm(G.ue(c))),this.Cc(!0))},at.prototype.Bi=function(){return this.Uc==null?b.ad.Fg():this.Uc.Gg()},at.prototype.np=function(){var c=this.Bi();c.wf()&&this.Yl(c.Zb())},at.prototype.Yl=function(c){var l,g,m,x,w,S,M=E.u.lf(c,b.s.Z);M==null||(M=M.cf,E.m.Od()<M)||(l=E.u.ra(b.s.Z),g=E.u.ra(b.s.wa),m=E.u.ra(b.s.Da),x=E.u.ra(b.s.Fa),w=E.u.ra(b.s.Ea),S=this.Re(5e3),E.m.Mk(c,b.s.Z,function(){S.dp(),E.h.J(E.h.qb)},function(){E.m.Jh(function(){E.u.ca(l,b.s.Z),E.u.ca(g,b.s.wa),E.u.ca(m,b.s.Da),E.u.ca(x,b.s.Fa),E.u.ca(w,b.s.Ea),E.u.ca(c,b.s.Z),S.dp()})}))},at.prototype.Cc=function(c){var l,g,m=E.u.Ah(),x=this.Bi();x.wf()&&(x=x.Zb(),l=E.u.lf(x,b.s.Z),g=!1,E.u.zc(x,b.s.Z)?(cs.hide(),Zi.hide()):l==null||l.ef?(g=!0,cs.show(),Zi.hide(),gc.text(G.N(n("a17b4db0406e89bfc8774ef25d71df95c10c5e815b53999bcd4549891342d093aa5727"))),l!=null&&l.ef&&(l=E.B.Ma.hb[n("39dede14c9ea561335")][l.yk])!=null&&gc.text(G.ue(l))):(cs.hide(),Zi.show(),ll.html(l.cf)),fl.html(n("f12b37014627d21ac9")+x),this.Ua.Ec(m.dm(x)),this.Ua.oo(g),c)&&E.u.ca(x,b.s.Z)},ir.prototype.tp=function(){--this.bd<0&&(this.bd=this.Yb.list.length-1),this.ye.Cc(!0)},ir.prototype.xp=function(){++this.bd>=this.Yb.list.length&&(this.bd=0),this.ye.Cc(!0)},ir.prototype.Jp=function(){return G.ue(this.Yb.name)},ir.prototype.Gg=function(){return this.bd>=this.Yb.list.length?b.ad.Fg():b.ad.Gi(this.Yb.list[this.bd])},pl=ir,at),b.zn=(gl=$(n("7543c51b8a1e145e1843985f2c11ec5deb052a5a7c0eff53e3")),ml=$(n("e41014849bcd4549891049d0ddb2592a9a361ba58dbd4e2492")),_l=$(n("b90f09df4e5ad082a41f249b6841a299bb172989394aa06e")),(Qi=G.fa(b.j,function(){b.j.call(this,G.N(n("9e460e55c7cb4ad2c75a0d17dad41cc8de111d24dcb65ab6c2280a2c94bf1daf")),!0),gl.click(function(){E.h.J(E.h.Cf)}),ml.click(function(){E.h.J(E.h.Rf)}),_l.click(function(){E.h.J(E.h.jh)})})).prototype.C=function(){Qi.parent.prototype.C.call(this)},Qi.prototype.ib=function(){R.g(b.j.yb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.A(b.j.Gb,200),R.g(b.j.Hb,50),R.g(b.j.Kb,50),R.g(b.j.Nb,50)},Qi.prototype.da=function(){},Qi),b.Fn=(yl=$(n("97edab396ca97c7cb2a6c87754f94677c9ae")),xl=$(n("31878157c2c3561a14cede1fdedc560035dbac1ae8c222003d")),hs=$(n("277d1ba9dc39ccec020c5ec1d801d18b55094b")),mc=$(n("baee4efec92ae123efbfebb6ad32ec74a8bafef0ba3ae815")),Ji=$(n("7ce88c7cf734a3a1a9b7b32ea53bbfaff8b2a0")),vl=$(n("3ca84c3c3774e3e169fcf2722534fae925feeb")),_c=$(n("350385dbce4f5a9e104bc695b21f21813142a896")),yc=$(n("d96f693f2a2bbe62cc3f0c61113e94358b2f1f680230")),xc=$(n("21b79167d2f3462a04fdc73ddeed4a131cc0c610c1c959")),vc=$(n("5a4e2e5e298a41834f1b450115da4a8c1e0f4313")),er=$(n("d2c6a6d6a102f91bf79ff583aa42c3198d9cd79094")),Tl=$(n("63315765907d8828466a043b980d81101652")),Sl=$(n("5c88ac1c1754c3c149c3cf521f14c4de14c9")),(nt=G.fa(b.j,function(){b.j.call(this,G.N(n("156ff9acfc7235ab7c63fafed17d53a15538cabdc76f05ab487fddcec54351")),!0)})).prototype.sa=async function(){var c=this,l=this;this.Ed=[],this.wa=new tr(this,b.s.wa,_c),this.Da=new tr(this,b.s.Da,yc),this.Fa=new tr(this,b.s.Fa,xc),this.Ea=new tr(this,b.s.Ea,vc),this.hj=this.dj=this.aj=this.Wi=this.Ti=this.$b=null,this.Ua=new b.Tg,await this.Ua.sa(yl),Ji.click(function(){l.Tm()}),Tl.click(function(){l.$b.Wm()}),Sl.click(function(){l.$b.an()}),_c.click(function(){l.Le(c.wa)}),yc.click(function(){l.Le(c.Da)}),xc.click(function(){l.Le(c.Fa)}),vc.click(function(){l.Le(c.Ea)}),this.Ed.push(this.wa),this.Ed.push(this.Da),this.Ed.push(this.Fa),this.Ed.push(this.Ea)},nt.prototype.C=function(){nt.parent.prototype.C.call(this);var c=this;E.B.Hg(function(){var l=E.B.Ma.hb;c.Ti=l[n("c0f47b76b7516ff4bc")],c.Wi=l[n("d5ab38fd2da29fe5beba")],c.aj=l[n("4076eef237e6e3640c70e9ef")],c.dj=l[n("322b953172ae9bbd")],c.hj=l[n("06f4a7f5656988746deb")],c.wa.Kf(l[n("d1272a612610b67ab02b35781c3cad7198")]),c.wa.Nf(c.Ti),c.Da.Kf(l[n("c5db280d3dd29d1dbfd72eee2583a1f6b4bf")]),c.Da.Nf(c.Wi),c.Fa.Kf(l[n("9acc30cced5c0542f4d216dcc7591c78d8c90dc4")]),c.Fa.Nf(c.aj),c.Ea.Kf(l[n("38611bff6aec0c66217ff6d236e7e76e")]),c.Ea.Nf(c.dj)}),this.Cc(!1),E.u.Ch(function(){c.Cc(!1)})},nt.prototype.ib=function(){R.g(b.j.yb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.A(b.j.Hb,200),R.g(b.j.Kb,50),R.g(b.j.Nb,50)},nt.prototype.da=function(){this.Le(this.$b??this.wa),this.Ua.ud(!0)},nt.prototype.ge=function(){this.Ua.ud(!1)},nt.prototype.na=function(){this.Ua.na()},nt.prototype.Ya=function(){this.Ua.Ya()},nt.prototype.Le=function(c){for(this.$b=c,c=0;c<this.Ed.length;c++)this.Ed[c].qd.removeClass(n("9495a402eb1abf8f"));this.$b.qd.addClass(n("ae4f0224c1b011a1")),this.$b.gb()},nt.prototype.Cj=function(){return this.$b==null?b.ad.Fg():b.ad.Gi({T:this.$b.Gg(),ua:this.$b.ua})},nt.prototype.Tm=function(){var c=this.Cj();c.wf()&&(c=c.Zb(),this.sn(c.T,c.ua))},nt.prototype.sn=function(c,l){var g,m,x,w,S,M,O=E.u.lf(c,l);O==null||(O=O.cf,E.m.Od()<O)||(g=E.u.ra(b.s.Z),m=E.u.ra(b.s.wa),x=E.u.ra(b.s.Da),w=E.u.ra(b.s.Fa),S=E.u.ra(b.s.Ea),M=this.Re(5e3),E.m.Mk(c,l,function(){M.dp(),E.h.J(E.h.qb)},function(){E.m.Jh(function(){E.u.ca(g,b.s.Z),E.u.ca(m,b.s.wa),E.u.ca(x,b.s.Da),E.u.ca(w,b.s.Fa),E.u.ca(S,b.s.Ea),E.u.ca(c,l),M.dp()})}))},nt.prototype.Cc=function(c){var l=E.u.Ah();if((g=this.Cj()).wf()){var g=g.Zb(),m=E.u.lf(g.T,g.ua),x=!1;switch(E.u.zc(g.T,g.ua)?(hs.hide(),Ji.hide()):m==null||m.ef?(x=!0,hs.show(),Ji.hide(),mc.text(G.N(n("439d2b52a280e75d2a912810bf6fa137232a3823b97df7392f632f2bf17c8e31087101"))),m!=null&&m.ef&&(m=E.B.Ma.hb[n("c623ed21be9fe5beba")][m.yk])!=null&&mc.text(G.ue(m))):(hs.hide(),Ji.show(),vl.html(m.cf)),xl.html("ID: "+g.T+" TYPE: "+g.ua),m=this.Ua,g.ua){case b.s.wa:m.Ec(l.jm(g.T)),m.xo(x);break;case b.s.Da:m.Ec(l.pm(g.T)),m.Bo(x);break;case b.s.Fa:m.Ec(l.Bm(g.T)),m.Io(x);break;case b.s.Ea:m.Ec(l.wm(g.T)),m.Eo(x)}c&&E.u.ca(g.T,g.ua)}},ra.prototype.Kf=function(c){this.bb=c},ra.prototype.Nf=function(c){this.yf=c},ra.prototype.gb=function(){for(var c=E.u.ra(this.ua),l=0;l<this.bb.length;l++)for(var g=0;g<this.bb[l].length;g++)if(this.bb[l][g]===c)return this.Yf(l),void this.re(g);this.Yf(0),this.re(0)},ra.prototype.Wm=function(){var c=this.Ud-1;c<0&&(c=this.bb.length-1),this.Yf(c),this.re(this.Xf%this.bb[c].length)},ra.prototype.an=function(){var c=this.Ud+1;c>=this.bb.length&&(c=0),this.Yf(c),this.re(this.Xf%this.bb[c].length)},ra.prototype.Yf=function(c){var l=this;if(!(c<0||c>=this.bb.length)){this.Ud=c,er.empty();var g=this.bb[this.Ud];if(1<g.length)for(c=0;c<g.length;c++)(m=>{var x=l.yf[g[m]],x=n("89df398f")+l.ye.hj[x[n("a5e6553144ff")]];(x=$('<div style="border-color:'+x+'"></div>')).click(function(){l.re(m)}),er.append(x)})(c)}},ra.prototype.re=function(c){c<0||c>=this.bb[this.Ud].length||(this.Xf=c,er.children().css(n("e45747d483de585499534a9293ae5e2c86"),n("61a691f58ba517f91bbf85e8")),(c=er.children(n("5fb552938de08dfb04f000b68fb4")+(1+c)+n("7860"))).css(n("5043f3c03fc2e4482d47fe863fc2f24012"),c.css(n("f0a35d31902044ea9ba656248e"))),this.ye.Cc(!0))},ra.prototype.Gg=function(){return this.bb[this.Ud][this.Xf]},tr=ra,nt),b.nm=(wl=$(n("1be92f3de8b9d57a47a644618abbc67458b9436a8299d451")),Al=$(n("06b2faaa7d72b8756aedb1d63f40bb4b65c2b6dd3745b3")),(ar=G.fa(b.j,function(){b.j.call(this,G.N(n("4a3262392ba73e86330e714b2688689c2a457108309a0e920d1d57100883068d0b19")),!1),wl.click(function(){E.xd()?(E.h.J(E.h.pa),E.mh(!1,!0),E.h.Mc.Kg(new b.oh)):E.h.ie()}),Al.click(function(){E.h.ie()})})).prototype.C=function(){ar.parent.prototype.C.call(this)},ar.prototype.ib=function(){R.g(b.j.yb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Hb,50),R.A(b.j.Kb,200),R.g(b.j.Nb,50)},ar.prototype.da=function(){},ar),b.Am=(ft=$(n("5004a09030c0fa422c4cb7ca3fcef15a0e458fc70dd8c345")),fs=$(n("63315765837d853f1f79403f8c439e171d50581f925b")),El=$(n("095fb90fe91b632565e7be25f6e5783d77feb622f2")),(Ua=G.fa(b.j,function(){b.j.call(this,G.N(n("552fb96cbc32756b3c23ba3e913d136115788a7d872f457808328a54944c074517")),!1),fs.click(function(){E.m.v?(E.m.Hl(),E.m.Zh()):E.h.ie()}),El.click(function(){E.h.ie()}),this.bg=[]})).prototype.C=function(){Ua.parent.prototype.C.call(this)},Ua.prototype.ib=function(){R.g(b.j.yb,50),R.g(b.j.zb,50),R.g(b.j.Bb,50),R.g(b.j.Db,50),R.g(b.j.Eb,50),R.g(b.j.Fb,50),R.g(b.j.Gb,50),R.g(b.j.Hb,50),R.g(b.j.Kb,50),R.A(b.j.Nb,200)},Ua.prototype.da=function(){R.g(fs,1),R.A(ft,1),ft.text(n("778657cfc99cccde5a82b1dc2d")),this.co(),this.dq(function(){ft.text(n("fea1eeb43023fd3034a7e6b7"))},1e3),this.dq(function(){ft.text(n("61fccdb1d7e65fbd5beac5b2"))},2e3),this.dq(function(){ft.text(n("4bd2631bfd30e66761347b68"))},3e3),this.dq(function(){ft.text(n("277607bf996c9bbb1d501f8c"))},4e3),this.dq(function(){ft.text(n("e17c4d315766d23ddb6a4532"))},5e3),this.dq(function(){ft.text(n("cd9061a563f2e7a1e7f679a6"))},6e3),this.dq(function(){ft.text(n("9847f4ceaedded4a9241ccdd"))},7e3),this.dq(function(){ft.text(n("56c936cc685b2e486cdf0edf"))},8e3),this.dq(function(){ft.text(n("a05fccd696c5d7529a49c4d5"))},9e3),this.dq(function(){R.A(fs,300),R.g(ft,1)},1e4)},Ua.prototype.dq=function(c,l){c=G.ha(c,l),this.bg.push(c)},Ua.prototype.co=function(){for(var c=0;c<this.bg.length;c++)G.fm(this.bg[c]);this.bg=[]},Ua),b.de=(Sc.prototype.ld=function(){},Sc.prototype.da=function(){},Sc),b.cp=((Q=G.fa(b.de,function(c){b.de.call(this);var l=G.Sb()+n("2549")+Math.floor(1e3+8999*Math.random()),g=(this.Qc=$('<div id="'.concat(l,'" class="toaster toaster-coins"><img class="toaster-coins-img" alt="Wormate Coin" src="/images/coin_320.png" /><div class="toaster-coins-val">').concat(c,'</div><div class="toaster-coins-close">').concat(G.N(n("948cb803fd11f48cfd80bb41d41e8380d0909459cb16848fc5939b1a")),n("e2d697b6c345ee1d838d89ceab5a83c2d731f2619ff19dbabf"))),this);this.Qc.find(n("2e9184ae5330802044ea9ba653258f605da36fa227")).click(function(){g.Be()})})).prototype.ld=function(){return this.Qc},Q.prototype.da=function(){},Q),b.Yo=((Q=G.fa(b.de,function(c){b.de.call(this);var l=G.Sb()+n("c8c6")+Math.floor(1e3+8999*Math.random()),g=(this.Qc=$('<div id="'.concat(l,'" class="toaster toaster-levelup"><img class="toaster-levelup-img" alt="Wormate Level Up Star" src="/images/level-star.svg" /><div class="toaster-levelup-val">').concat(c,'</div><div class="toaster-levelup-text">').concat(G.N(n("a49c8813cd01c49ccd908b51c4ee9370c06084a9d4ec8c6ed0788e")),'</div><div class="toaster-levelup-close">').concat(G.N(n("520a7a01339f368e3b0679432a8041821616565b0598468d03155918")),n("0ddbbc83b43055a07c70b2fbdc2f288f383cd9b4c86406e760"))),this);this.Qc.find(n("e659dc168b88d8989c52dce48466d87086aadbe59578d9")).click(function(){g.Be()})})).prototype.ld=function(){return this.Qc},Q.prototype.da=function(){},Q),b.oh=((Q=G.fa(b.de,function(){b.de.call(this);var c=this,l=G.Sb()+n("420c")+Math.floor(1e3+8999*Math.random());this.Qc=$('<div id="'+l+'" class="toaster toaster-consent-accepted">    <img class="toaster-consent-accepted-logo" src="'+y5+'" alt="Wormate.io logo"/>    <div class="toaster-consent-accepted-container">        <span class="toaster-consent-accepted-text">'+G.N(n("cc7460fbb5d93c44b5487389acc67b58a8486c8183de4c40815b52999cdc524f")).replaceAll(n("67bd5bea"),n("7ce88c79ee33b1a3a1e684")).replaceAll("",n("46f23b9a2829296f08fa23a4"))+n("acd8dd3c95b3b470c46498a28bcc")+'        <a class="toaster-consent-accepted-link" href="/privacy-policy">'+G.N(n("653f897c8c22457b0c338a0e850d1257010385069a05155f18008b1e6d1bed5f"))+n("edfb5ce354d0b5c5d0d532")+n("398f895c989c0f557382e646f593743b6c888d18a4c86ab314")+'    <div class="toaster-consent-close">'+G.N(n("996375a87876b1b7c07f46fa5179c6abdd7f59f24e71c193d44c47ca5c67d48bdc5a4f"))+n("b583042b1c98fd08d4d81a4304")+n("9ff5925106e66372ceae8c296e")),this.yh=this.Qc.find(n("9b62e9e17e2355f7d179c6f9492b4cf4df71cef2401354")),this.yh.hide(),this.yh.click(function(){E.xd()&&E.mh(!0,!0),c.Be()})})).prototype.ld=function(){return this.Qc},Q.prototype.da=function(){var c=this;E.xd()&&!E.Mf()?G.ha(function(){c.yh.fadeIn(300)},2e3):G.ha(function(){c.Be()},0)},Q),b.mo=(Pl=$(n("4034b0a021e7f4783a34edfa38f8f97e290cf1cc3acbf3442c40f5c571dffb5b1248")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.nd),Pl.click(function(){E.h.Ic.Vk(),E.h.J(E.h.Ic),G.ha(function(){var c=ea+n("ef05c32403511743c56e910f1a400906bc586411e811b7307751671d");G.vc(c,function(){E.h.J(E.h.qb)},function(){E.h.Ic.jp(),E.B.Ph(function(){E.h.J(E.h.pa)},function(){E.h.J(E.h.qb)},function(l,g){E.h.Ic.rf(l,g)})})},2e3)})})).prototype.C=function(){},Q.prototype.gb=function(){R.A(b.i.cc,500),R.A(b.i.fc,1),R.g(b.i.hc,50),R.g(b.i.jc,50),R.g(b.i.lc,50),R.g(b.i.Jb,50),R.g(b.i.oc,50),R.g(b.i.Xb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.A(b.i.sc,500),R.g(b.i.tc,50)},Q.prototype.da=function(){},Q),b.vo=(Rl=$(n("b90f09df585ccd9fb31f24952853ea9ba65425992e4aa66fbf6f21612134ae")),(Q=G.fa(b.i,function(){b.i.call(this,b.fb.nd),Rl.click(function(){E.h.J(E.h.pa)})})).prototype.C=function(){},Q.prototype.gb=function(){R.A(b.i.cc,500),R.A(b.i.fc,1),R.g(b.i.hc,50),R.g(b.i.jc,50),R.g(b.i.lc,50),R.g(b.i.Jb,50),R.g(b.i.oc,50),R.g(b.i.Xb,50),R.g(b.i.pc,50),R.g(b.i.qc,50),R.g(b.i.rc,50),R.g(b.i.sc,50),R.A(b.i.tc,500)},Q.prototype.da=function(){},Q),G.Go=function(){return(c={nk:!1}).rk=G.Sb(),c.he=0,c.Rh=0,c.je=null,c.hq=Bf,c.iq=Qr,c.l=null,c.B=null,c.Te=null,c.tk=null,c.h=null,c.u=null,c.m=null,c.C=async function(){c.l=new b.fp,c.l.pf=new b.Cp(c.l),c.B=new b.La,await c.B.sa(),c.Te=new b.xl,await c.Te.sa(),c.tk=new b.Fm,c.h=new b.Kl,await c.h.sa(),c.u=new b.yn,c.m=new b.Ap,c.l.Tk=function(){c.h.J(c.h.dk)},c.l.Wk=function(){c.h.pa.Ei(),c.h.J(c.h.D.df())},c.l.$k=function(){var l,g;$(n("e1300c701c"))[n("156ef2a1fe626f")](),c.B.Ph(null,null,null),l=Math.floor(c.l.U.Ub),g=c.l.wg,c.m.v?c.m.Jh(function(){c.fl(l,g)}):c.fl(l,g)},c.l.il=function(l){l(c.h.D.wc,c.h.D.Qb)},c.m.jk(function(){var l=c.h.wp();l!=null&&l.ua===b.fb.jf&&c.h.J(c.h.pa),c.m.v&&c.m.Rg(),c.xd()&&c.m.v&&!c.m.Mf()?(c.mh(!1,!1),c.h.Mc.Kg(new b.oh)):c.ni(!0)}),c.l.C(),c.h.C(),c.u.C(),c.B.C(),c.h.pa.Ml(),c.h.J(c.h.pa),c.Te.C(function(){c.tk.C(),c.m.C(),c.B.Ph(function(){c.h.pa.yi(),c.h.J(c.h.pa)},function(){c.h.pa.yi(),c.h.J(c.h.qb)},function(l,g){c.h.Ic.rf(l,g),c.h.pa.rf(l,g)}),c.xd()&&!c.Mf()?c.h.Mc.Kg(new b.oh):c.ni(!0)})},c.Al=function(l){var g;c.m.v&&(g=c.m.$c,l=ea+n("2692daff5a4e8e181cf987b45b27d17770")+g+n("1f7513d4c03bcbe542365dbf991acef64e0e56c7")+n("730146208149951f1e094e2a")+encodeURIComponent(l),G.vc(l,function(){},function(){}))},c.hi=function(){c.Ci()},c.Ci=function(l,g){var m,x,w;ba(1),c.l.Sl()&&(c.h.Ic.Vk(),c.h.J(c.h.Ic),m=c.h.pa.Ei(),b.I.Ab(b.I.fj,m),x=c.h.Bf.Vi(),b.I.Ab(b.I.Ri,x),x=0,c.je!=null&&(x=c.je[n("66944796181f5f")][n("867b296de3ef39f9eb")],w=c.je[n("16c4b7c6684faf")][n("41deac1aa2df330d2ddf")],x=Math.max(0,Math.min(32767,(x+90)/180*32768))<<1|1|Math.max(0,Math.min(65535,(w+180)/360*65536))<<16),c.m.v?(C.eg=g,c.Zl(m,x,l)):(l=c.h.pa.Jd(),b.I.Ab(b.I.jj,l),b.I.Ab(b.I.mj,c.u.ra(b.s.Z)),c.em(m,x)))},Ui=function(l,g){c.Ci(l,g)},c.Zl=function(l,g,m=null){var x=c.m.$c,L=c.h.pa.Jd(),w=(C.Ni=L,c.u.ra(b.s.Z)),S=c.u.ra(b.s.wa),M=c.u.ra(b.s.Da),O=c.u.ra(b.s.Fa),k=c.u.ra(b.s.Ea),L=L.substring(0,24);L=(L=(L=(L=(L=(L=(L+="\uFFFF")+String.fromCharCode(w))+String.fromCharCode(k))+String.fromCharCode(S))+String.fromCharCode(M))+String.fromCharCode(O))+String.fromCharCode(U["1y"]),C.lj(0),C.oi(0),l=ea+n("ab799fd85f1553878122c2d35e0c1c98fd")+x+n("0f6523c4e030f4f463")+n("1d2bac96c6734eb16879c3bd8c296f")+encodeURIComponent(l)+n("9a8e6e9bf9474502e6")+g+n("d642aa5fb482ff86b00ecd14c7c0e0")+encodeURIComponent(L)+n("31878152c6cd5e0670ce9e5ff9")+encodeURIComponent(w)+n("11a7a172f0ff723b50eebe7fd9")+encodeURIComponent(S)+n("ab799fa8420f44d6db2dd183042c")+encodeURIComponent(M)+n("8cf8fc69f70db390e780a52efc4ce9af")+encodeURIComponent(O)+n("51e7e1b2bda723c13defe8c8")+encodeURIComponent(k),G.vc(l,function(){c.h.J(c.h.qb)},function(X){X[n("7b4f120a9a")]===1460?c.h.J(c.h.Dg):X[n("a7bbc67e4e")]!==1200?c.h.J(c.h.qb):(C.Uh=!0,C.He=m||X[n("0260a16770f2bac67f69a0")],c.l.km(C.He,x))})},c.em=function(l,g){var m=c.h.pa.Jd(),x=c.u.ra(b.s.Z);l=ea+n("302440c544f014220a4f0dfe55e95b3d06")+n("4076f7f637e1")+n("b2e64683c533193bce")+n("86327b5fedfa21f8c3703444b79010")+encodeURIComponent(l)+n("8b19bf48682834b1d7")+g+n("0b993fc8e1a9f2697da57863b2fbdd")+encodeURIComponent(m)+n("b10701d2464dde86f04e1edf79")+encodeURIComponent(x),G.vc(l,function(){c.h.J(c.h.qb)},function(w){w[n("685ac5df09")]===1460?c.h.J(c.h.Dg):w[n("3eac6fb527")]!==1200?c.h.J(c.h.qb):(w=w[n("7515925a8f0f0973081c93")],c.l.qm(w,m,x))})},c.fl=function(l,g){var m=c.h.pa.Jd();c.h.D.Po(l,g,m),c.h.J(c.h.D.Nh())},c.zl=function(){var l;return c.Eg()&&(l=parseInt(b.I.ec(b.I.mj)))!=null&&c.u.zc(l,b.s.Z)?l:c.u.qk()},c.Xl=function(){b.I.Ab(b.I.tj,n("090ef949e8"))},c.Eg=function(){return b.I.ec(b.I.tj)===n("5532a57dbc")},c.ni=function(l){l!==c.nk&&(c.nk=l,n("d44679c9abcc745fb949"),n("e45242c79afa45559f5840cb"))},c.mh=function(l,g){b.I.Ab(b.I.Oi,n(l?"9c99ac1ac5":"edb80ecc0287")),g&&c.Al(l),c.ni(l)},c.Mf=function(){return b.I.ec(b.I.Oi)===n("d136217130")},c.xd=function(){try{return!!b.ic[n("2a529f747ef69e847702")]||c.je!=null&&!!v5.pn(c.je[n("0efcbfce6047a7")][n("8835abafe5a9bb3bf5")],c.je[n("6fc31e8d81c086")][n("407dedfd23fcf2622c7c")])}catch{return!0}},c.Ya=function(){c.he=G.Sb(),c.Rh=c.he-c.rk,c.l.Qe(c.he,c.Rh),c.h.Qe(c.he,c.Rh),c.rk=c.he},c.na=function(){c.h.na()},c;var c},b.fp=function(){n("0d8bfca5b43023b76174feabed");var c={Om:30,hd:new Float32Array(100),pj:0,Ie:0,Me:0,kd:0,Md:0,nn:0,Ka:0,Ca:null,Gj:300,Wk:function(){},$k:function(){},il:function(){},Tk:function(){},K:new b.ee,pf:null,U:null,Xc:{},ub:{},xk:12.5,Kd:40,Pe:1,Jj:-1,Kj:1,ri:1,Pj:-1,Sj:-1,Uj:1,Zj:1,bk:-1,wg:500,lk:500};return c.K.Sc=500,c.U=new b.Wf(c.K),c.C=function(){c.U.Yj(E.h.D.F),setInterval(function(){var l;U["1y"]!=0&&C.Ra&&C.Ra.readyState===WebSocket.OPEN&&1e3<(l=performance.now())-C.rj&&(C.rj=l,C.Ra.send(Bi(JSON.stringify({[n("0272")]:1,[n("44f7")]:c.U.ia[0],[n("4b9f")]:c.U.ia[1],[n("6b78")]:c.U.K.Sc})))),c.il(function(g,m){c.to(g,m)})},10)},c.ln=function(l,g,m,x){c.Jj=l,c.Kj=g,c.ri=m,c.Pj=x,c.fk()},c.Co=function(l){c.Pe=l,c.fk()},c.fk=function(){c.Sj=c.Jj-c.Pe,c.Uj=c.Kj+c.Pe,c.Zj=c.ri-c.Pe,c.bk=c.Pj+c.Pe},c.Qe=function(l,g){c.Me+=g,c.Ie-=.2*c.pj*g,c.pf.Gl(),c.Ca==null||c.Ka!==2&&c.Ka!==3||(c.Ho(l,g),c.Kd=4+c.xk*c.U.xb),l=1e3/Math.max(1,g);for(var m=g=0;m<c.hd.length-1;m++)g+=c.hd[m],c.hd[m]=c.hd[m+1];c.hd[c.hd.length-1]=l,c.Om=(g+l)/c.hd.length},c.mg=function(l,g){return c.Sj<l&&l<c.Uj&&c.Zj<g&&g<c.bk},c.Ho=function(l,g){var m,x,w=(c.Me+c.Ie-c.kd)/(c.Md-c.kd),S=(c.U.Lf(l,g),c.U.Qf(l,g,w,c.mg),0);for(m in c.ub){var M=c.ub[m];M.Lf(l,g),M.Qf(l,g,w,c.mg),M.rb&&M.xb>S&&(S=M.xb),M.od||!(M.Wa<.005)&&M.rb||(M.Ue(),delete c.ub[M.S.T])}for(x in c.Co(3*S),c.Xc)w=c.Xc[x],w.Lf(l,g),w.Qf(l,g,c.mg),w.fi&&(w.Wa<.005||!c.mg(w.Jg,w.Lg))&&(w.Ue(),delete c.Xc[w.S.T])},c.xn=function(l,g){c.Ka===1&&(c.Ka=2,c.Wk());var m=E.he;(c.nn=l)===0?(c.kd=m-95,c.Md=m,c.Me=c.kd,c.Ie=0):(c.kd=c.Md,c.Md+=g),c.pj=(c.Me+c.Ie-c.kd)/(c.Md-c.kd)},c.Hp=function(){var l;c.Ka!==1&&c.Ka!==2||(c.Ka=3,l=c.Ca,G.ha(function(){c.Ka===3&&(c.Ka=0),l!=null&&l===c.Ca&&(c.Ca[n("cab8e0b2bd3a")](),c.Ca=null)},5e3),c.$k())},c.Sl=function(){return c.Ka=1,c.pf.ui(),c.Xc={},c.ub={},c.U.vi(),c.Ca!=null&&(c.Ca[n("cddd23ef22a7")](),c.Ca=null),!0},c.Hh=function(){c.Ca=null,c.pf.ui(),c.Ka!==3&&c.Tk(),c.Ka=0},c.km=function(l,g){c.sk(l,function(){var m=Math.min(2048,g.length),x=new b.Sh(6+2*m),w=new b.ei(new b.tg(x));w.pe(129),w.qe(2800),w.pe(1),w.qe(m);for(var S=0;S<m;S++)w.qe(g.charCodeAt(S));c.Oh(x)})},c.qm=function(l,g,m){c.sk(l,function(){var x=Math.min(32,g.length),w=new b.Sh(7+2*x),S=new b.ei(new b.tg(w));S.pe(129),S.qe(2800),S.pe(0),S.qe(m),S.pe(x);for(var M=0;M<x;M++)S.qe(g.charCodeAt(M));c.Oh(w)})},c.Oh=function(l){try{c.Ca!=null&&c.Ca.readyState===WebSocket.OPEN&&c.Ca.send(l)}catch{c.Hh()}},c.to=function(l,g){l=255&((g?128:0)|G.Jm(l)/6.283185307179586*128&127),c.Gj!==l&&(g=new b.Sh(1),new b.ei(new b.tg(g)).pe(l),c.Oh(g),c.Gj=l)},c.sk=function(l,g){C.Ra=new WebSocket(C.$l+Bi(JSON.stringify({[n("5a0a")]:l,[n("ddac")]:C.Qd,[n("289a")]:C.Ni,[n("7d0a")]:C.$?U["1y"]:0,[n("84b0")]:2,[n("4a3d")]:U["1ae"]}))),C.Ra[n("9de1713f51f7cd")]=function(){this.Bh=setInterval(()=>{this.send(n("79da"))},1e4)},C.Ra[n("c5d9291b25d5b819")]=function(){this.Bh&&(clearInterval(this.Bh),this.Bh=0),this===C.Ra&&(C.Ra=null)},C.Ra[n("948ab80afd1aa98afb88")]=function(w){try{var S=JSON.parse(n(w.data));if(S[n("4d5f")]===0&&(ti.Zf(S[n("a336")]),ai.Zf(S[n("74a6")])),S[n("8b5d")]===1){let Yt=S.b;Yt==3333&&0<C.cd.length&&(Yt=C.cd[Math.floor(Math.random()*C.cd.length)]),C.cd.includes(Yt)&&E.l.U.Ha.wj(Yt)}if(S[n("49db")]===2&&De.Zc(),S[n("1f31")]===3){var M=S[n("bc6e")];if(M){C.Hj=M;var O=S[n("782b")];if(O){try{delete O[C.Hj]}catch{}for(var k in C.E){var L,X,W,Y,V=O[k],be=C.E[k];V?(L=V[n("9000")],X=V[n("f908")],W=V[n("1565")],(Y=V[n("1c08")])!=be.of&&(U["1af"]&&Y&&(Jr.pause(),Jr.play()),be.of=Y),be.position.x=L/W*E.h.D.F.W.va,be.position.y=X/W*E.h.D.F.W.va):(E.h.D.F.W.removeChild(be),delete C.E[k])}for(var oe in O){var Re,Lt,ot,me,he,Me=O[oe];C.E[oe]||(Re=Me[n("3222")],Lt=Me[n("7ae9")],ot=Me[n("9327")],me=Me[n("dc48")],C.E[oe]=new We,(he=C.E[oe])[n("51b89aeab1a32f")]=1,he[n("06f6a4e9627a")]=.9,he.clear(),he.circle(0,0,.06*E.h.D.F.W.va),he.stroke({width:2,color:0}),he.fill(Me[n("49de")]),he.Ro=Me[n("c95e")],he.of=me,he.position.x=Re/ot*E.h.D.F.W.va,he.position.y=Lt/ot*E.h.D.F.W.va,E.h.D.F.W.addChild(he))}}}}}catch{}};var m=c.Ca=new WebSocket(l);let x=C.Ra;m[n("6fc2188c92d68cb20ed81c")]=n("e8d858498d444cca96a75731"),m[n("3a2492224eaa6e")]=function(){for(var w in C.$f=!0,C.E)E.h.D.F.W.removeChild(C.E[w]),delete C.E[w];c.Ca===m&&g()},m[n("d767b72937632e2b")]=function(){new Date>C.Gk&&location.reload(),C.$f=!1,x&&x.close(),c.Ca===m&&c.Hh()},m[n("6539897d9b28046e")]=function(){C.$f=!1,c.Ca===m&&c.Hh()},m[n("fc2250a265a231326330")]=function(w){c.Ca===m&&c.pf.vl(w.data)}},c},window.addEventListener(n("03d76a98f3ddf18e66d9638b"),function(c){return c.preventDefault(),c.stopPropagation(),!1}),G.Xi(n("aa9e5efb8b0d3620c2aa07ebd128172ed6ae52aed122a56384b9f7f0f411e929a3febf9cad33f904bc97ba8fa5"),null,function(){window.gapi[n("59a6b4edb9")](n("5527a27cb178"),function(){var c=window.gapi[n("c315b0c22f4a")],l=c[n("f10b1d4d01")],g={};g[n("69b987f588b01bff1886")]=n("44acb32e7c2bbfaa75afbf2c680ce3c92597a54b614caac43495f2480403cbd00ad7ca450a5fc8d70dcf9a5e42279ca204b5c5691f26d5ac10a8cb3ce523a1bceaa1a339fc77a9b4e1"),vt=l.call(c,g)})}),G.Xi(n("ddeb6dd644e0a5f595bf14b60eb584fb81bb41c31e8fd696b38c048d4bac8bc09c9a19dff39f2dde76")),await(E=G.Go()).C(),function c(){requestAnimationFrame(c),E.Ya()}(),Tc=$(n("8b5ee21a76")),wa=$(n("e5f355ab1aae99f999bd078d138d8b")),Ml=$(n("4197f147a8d735133ccae614a8df2be523")),Cl=$(n("e1775127083795739c2a467a02319b4583")),Il(),$(b.ic)[n("1417339471933f")](Il)});})();
